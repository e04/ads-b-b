function gT(e,r){return r.forEach(function(o){o&&typeof o!="string"&&!Array.isArray(o)&&Object.keys(o).forEach(function(c){if(c!=="default"&&!(c in e)){var m=Object.getOwnPropertyDescriptor(o,c);Object.defineProperty(e,c,m.get?m:{enumerable:!0,get:function(){return o[c]}})}})}),Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}var qc=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Fe={exports:{}},Qt={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var _v=Object.getOwnPropertySymbols,yT=Object.prototype.hasOwnProperty,_T=Object.prototype.propertyIsEnumerable;function vT(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function xT(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var r={},o=0;o<10;o++)r["_"+String.fromCharCode(o)]=o;var c=Object.getOwnPropertyNames(r).map(function(v){return r[v]});if(c.join("")!=="0123456789")return!1;var m={};return"abcdefghijklmnopqrst".split("").forEach(function(v){m[v]=v}),Object.keys(Object.assign({},m)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var S1=xT()?Object.assign:function(e,r){for(var o,c=vT(e),m,v=1;v<arguments.length;v++){o=Object(arguments[v]);for(var T in o)yT.call(o,T)&&(c[T]=o[T]);if(_v){m=_v(o);for(var l=0;l<m.length;l++)_T.call(o,m[l])&&(c[m[l]]=o[m[l]])}}return c};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ay=S1,Uu=60103,T1=60106;Qt.Fragment=60107;Qt.StrictMode=60108;Qt.Profiler=60114;var E1=60109,k1=60110,C1=60112;Qt.Suspense=60113;var I1=60115,A1=60116;if(typeof Symbol=="function"&&Symbol.for){var xo=Symbol.for;Uu=xo("react.element"),T1=xo("react.portal"),Qt.Fragment=xo("react.fragment"),Qt.StrictMode=xo("react.strict_mode"),Qt.Profiler=xo("react.profiler"),E1=xo("react.provider"),k1=xo("react.context"),C1=xo("react.forward_ref"),Qt.Suspense=xo("react.suspense"),I1=xo("react.memo"),A1=xo("react.lazy")}var vv=typeof Symbol=="function"&&Symbol.iterator;function bT(e){return e===null||typeof e!="object"?null:(e=vv&&e[vv]||e["@@iterator"],typeof e=="function"?e:null)}function Fh(e){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+e,o=1;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+e+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var z1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P1={};function Vu(e,r,o){this.props=e,this.context=r,this.refs=P1,this.updater=o||z1}Vu.prototype.isReactComponent={};Vu.prototype.setState=function(e,r){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error(Fh(85));this.updater.enqueueSetState(this,e,r,"setState")};Vu.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function M1(){}M1.prototype=Vu.prototype;function zy(e,r,o){this.props=e,this.context=r,this.refs=P1,this.updater=o||z1}var Py=zy.prototype=new M1;Py.constructor=zy;Ay(Py,Vu.prototype);Py.isPureReactComponent=!0;var My={current:null},D1=Object.prototype.hasOwnProperty,R1={key:!0,ref:!0,__self:!0,__source:!0};function L1(e,r,o){var c,m={},v=null,T=null;if(r!=null)for(c in r.ref!==void 0&&(T=r.ref),r.key!==void 0&&(v=""+r.key),r)D1.call(r,c)&&!R1.hasOwnProperty(c)&&(m[c]=r[c]);var l=arguments.length-2;if(l===1)m.children=o;else if(1<l){for(var D=Array(l),j=0;j<l;j++)D[j]=arguments[j+2];m.children=D}if(e&&e.defaultProps)for(c in l=e.defaultProps,l)m[c]===void 0&&(m[c]=l[c]);return{$$typeof:Uu,type:e,key:v,ref:T,props:m,_owner:My.current}}function wT(e,r){return{$$typeof:Uu,type:e.type,key:r,ref:e.ref,props:e.props,_owner:e._owner}}function Dy(e){return typeof e=="object"&&e!==null&&e.$$typeof===Uu}function ST(e){var r={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(o){return r[o]})}var xv=/\/+/g;function Nm(e,r){return typeof e=="object"&&e!==null&&e.key!=null?ST(""+e.key):r.toString(36)}function mp(e,r,o,c,m){var v=typeof e;(v==="undefined"||v==="boolean")&&(e=null);var T=!1;if(e===null)T=!0;else switch(v){case"string":case"number":T=!0;break;case"object":switch(e.$$typeof){case Uu:case T1:T=!0}}if(T)return T=e,m=m(T),e=c===""?"."+Nm(T,0):c,Array.isArray(m)?(o="",e!=null&&(o=e.replace(xv,"$&/")+"/"),mp(m,r,o,"",function(j){return j})):m!=null&&(Dy(m)&&(m=wT(m,o+(!m.key||T&&T.key===m.key?"":(""+m.key).replace(xv,"$&/")+"/")+e)),r.push(m)),1;if(T=0,c=c===""?".":c+":",Array.isArray(e))for(var l=0;l<e.length;l++){v=e[l];var D=c+Nm(v,l);T+=mp(v,r,o,D,m)}else if(D=bT(e),typeof D=="function")for(e=D.call(e),l=0;!(v=e.next()).done;)v=v.value,D=c+Nm(v,l++),T+=mp(v,r,o,D,m);else if(v==="object")throw r=""+e,Error(Fh(31,r==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":r));return T}function Vd(e,r,o){if(e==null)return e;var c=[],m=0;return mp(e,c,"","",function(v){return r.call(o,v,m++)}),c}function TT(e){if(e._status===-1){var r=e._result;r=r(),e._status=0,e._result=r,r.then(function(o){e._status===0&&(o=o.default,e._status=1,e._result=o)},function(o){e._status===0&&(e._status=2,e._result=o)})}if(e._status===1)return e._result;throw e._result}var B1={current:null};function Ua(){var e=B1.current;if(e===null)throw Error(Fh(321));return e}var ET={ReactCurrentDispatcher:B1,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:My,IsSomeRendererActing:{current:!1},assign:Ay};Qt.Children={map:Vd,forEach:function(e,r,o){Vd(e,function(){r.apply(this,arguments)},o)},count:function(e){var r=0;return Vd(e,function(){r++}),r},toArray:function(e){return Vd(e,function(r){return r})||[]},only:function(e){if(!Dy(e))throw Error(Fh(143));return e}};Qt.Component=Vu;Qt.PureComponent=zy;Qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ET;Qt.cloneElement=function(e,r,o){if(e==null)throw Error(Fh(267,e));var c=Ay({},e.props),m=e.key,v=e.ref,T=e._owner;if(r!=null){if(r.ref!==void 0&&(v=r.ref,T=My.current),r.key!==void 0&&(m=""+r.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(D in r)D1.call(r,D)&&!R1.hasOwnProperty(D)&&(c[D]=r[D]===void 0&&l!==void 0?l[D]:r[D])}var D=arguments.length-2;if(D===1)c.children=o;else if(1<D){l=Array(D);for(var j=0;j<D;j++)l[j]=arguments[j+2];c.children=l}return{$$typeof:Uu,type:e.type,key:m,ref:v,props:c,_owner:T}};Qt.createContext=function(e,r){return r===void 0&&(r=null),e={$$typeof:k1,_calculateChangedBits:r,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider={$$typeof:E1,_context:e},e.Consumer=e};Qt.createElement=L1;Qt.createFactory=function(e){var r=L1.bind(null,e);return r.type=e,r};Qt.createRef=function(){return{current:null}};Qt.forwardRef=function(e){return{$$typeof:C1,render:e}};Qt.isValidElement=Dy;Qt.lazy=function(e){return{$$typeof:A1,_payload:{_status:-1,_result:e},_init:TT}};Qt.memo=function(e,r){return{$$typeof:I1,type:e,compare:r===void 0?null:r}};Qt.useCallback=function(e,r){return Ua().useCallback(e,r)};Qt.useContext=function(e,r){return Ua().useContext(e,r)};Qt.useDebugValue=function(){};Qt.useEffect=function(e,r){return Ua().useEffect(e,r)};Qt.useImperativeHandle=function(e,r,o){return Ua().useImperativeHandle(e,r,o)};Qt.useLayoutEffect=function(e,r){return Ua().useLayoutEffect(e,r)};Qt.useMemo=function(e,r){return Ua().useMemo(e,r)};Qt.useReducer=function(e,r,o){return Ua().useReducer(e,r,o)};Qt.useRef=function(e){return Ua().useRef(e)};Qt.useState=function(e){return Ua().useState(e)};Qt.version="17.0.2";Fe.exports=Qt;var kT=Fe.exports,Du=gT({__proto__:null,default:kT},[Fe.exports]),F1={exports:{}},oo={},O1={exports:{}},N1={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){var r,o,c,m;if(typeof performance=="object"&&typeof performance.now=="function"){var v=performance;e.unstable_now=function(){return v.now()}}else{var T=Date,l=T.now();e.unstable_now=function(){return T.now()-l}}if(typeof window=="undefined"||typeof MessageChannel!="function"){var D=null,j=null,oe=function(){if(D!==null)try{var Ze=e.unstable_now();D(!0,Ze),D=null}catch(xt){throw setTimeout(oe,0),xt}};r=function(Ze){D!==null?setTimeout(r,0,Ze):(D=Ze,setTimeout(oe,0))},o=function(Ze,xt){j=setTimeout(Ze,xt)},c=function(){clearTimeout(j)},e.unstable_shouldYield=function(){return!1},m=e.unstable_forceFrameRate=function(){}}else{var ne=window.setTimeout,U=window.clearTimeout;if(typeof console!="undefined"){var Se=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof Se!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var Ae=!1,_e=null,re=-1,H=5,ee=0;e.unstable_shouldYield=function(){return e.unstable_now()>=ee},m=function(){},e.unstable_forceFrameRate=function(Ze){0>Ze||125<Ze?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<Ze?Math.floor(1e3/Ze):5};var fe=new MessageChannel,be=fe.port2;fe.port1.onmessage=function(){if(_e!==null){var Ze=e.unstable_now();ee=Ze+H;try{_e(!0,Ze)?be.postMessage(null):(Ae=!1,_e=null)}catch(xt){throw be.postMessage(null),xt}}else Ae=!1},r=function(Ze){_e=Ze,Ae||(Ae=!0,be.postMessage(null))},o=function(Ze,xt){re=ne(function(){Ze(e.unstable_now())},xt)},c=function(){U(re),re=-1}}function Ne(Ze,xt){var st=Ze.length;Ze.push(xt);e:for(;;){var Ht=st-1>>>1,er=Ze[Ht];if(er!==void 0&&0<rt(er,xt))Ze[Ht]=xt,Ze[st]=er,st=Ht;else break e}}function Re(Ze){return Ze=Ze[0],Ze===void 0?null:Ze}function Le(Ze){var xt=Ze[0];if(xt!==void 0){var st=Ze.pop();if(st!==xt){Ze[0]=st;e:for(var Ht=0,er=Ze.length;Ht<er;){var Pr=2*(Ht+1)-1,Hr=Ze[Pr],$r=Pr+1,wr=Ze[$r];if(Hr!==void 0&&0>rt(Hr,st))wr!==void 0&&0>rt(wr,Hr)?(Ze[Ht]=wr,Ze[$r]=st,Ht=$r):(Ze[Ht]=Hr,Ze[Pr]=st,Ht=Pr);else if(wr!==void 0&&0>rt(wr,st))Ze[Ht]=wr,Ze[$r]=st,Ht=$r;else break e}}return xt}return null}function rt(Ze,xt){var st=Ze.sortIndex-xt.sortIndex;return st!==0?st:Ze.id-xt.id}var Je=[],wt=[],Er=1,Nt=null,Vt=3,Fr=!1,kr=!1,dt=!1;function En(Ze){for(var xt=Re(wt);xt!==null;){if(xt.callback===null)Le(wt);else if(xt.startTime<=Ze)Le(wt),xt.sortIndex=xt.expirationTime,Ne(Je,xt);else break;xt=Re(wt)}}function kn(Ze){if(dt=!1,En(Ze),!kr)if(Re(Je)!==null)kr=!0,r(cn);else{var xt=Re(wt);xt!==null&&o(kn,xt.startTime-Ze)}}function cn(Ze,xt){kr=!1,dt&&(dt=!1,c()),Fr=!0;var st=Vt;try{for(En(xt),Nt=Re(Je);Nt!==null&&(!(Nt.expirationTime>xt)||Ze&&!e.unstable_shouldYield());){var Ht=Nt.callback;if(typeof Ht=="function"){Nt.callback=null,Vt=Nt.priorityLevel;var er=Ht(Nt.expirationTime<=xt);xt=e.unstable_now(),typeof er=="function"?Nt.callback=er:Nt===Re(Je)&&Le(Je),En(xt)}else Le(Je);Nt=Re(Je)}if(Nt!==null)var Pr=!0;else{var Hr=Re(wt);Hr!==null&&o(kn,Hr.startTime-xt),Pr=!1}return Pr}finally{Nt=null,Vt=st,Fr=!1}}var Cn=m;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Ze){Ze.callback=null},e.unstable_continueExecution=function(){kr||Fr||(kr=!0,r(cn))},e.unstable_getCurrentPriorityLevel=function(){return Vt},e.unstable_getFirstCallbackNode=function(){return Re(Je)},e.unstable_next=function(Ze){switch(Vt){case 1:case 2:case 3:var xt=3;break;default:xt=Vt}var st=Vt;Vt=xt;try{return Ze()}finally{Vt=st}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=Cn,e.unstable_runWithPriority=function(Ze,xt){switch(Ze){case 1:case 2:case 3:case 4:case 5:break;default:Ze=3}var st=Vt;Vt=Ze;try{return xt()}finally{Vt=st}},e.unstable_scheduleCallback=function(Ze,xt,st){var Ht=e.unstable_now();switch(typeof st=="object"&&st!==null?(st=st.delay,st=typeof st=="number"&&0<st?Ht+st:Ht):st=Ht,Ze){case 1:var er=-1;break;case 2:er=250;break;case 5:er=1073741823;break;case 4:er=1e4;break;default:er=5e3}return er=st+er,Ze={id:Er++,callback:xt,priorityLevel:Ze,startTime:st,expirationTime:er,sortIndex:-1},st>Ht?(Ze.sortIndex=st,Ne(wt,Ze),Re(Je)===null&&Ze===Re(wt)&&(dt?c():dt=!0,o(kn,st-Ht))):(Ze.sortIndex=er,Ne(Je,Ze),kr||Fr||(kr=!0,r(cn))),Ze},e.unstable_wrapCallback=function(Ze){var xt=Vt;return function(){var st=Vt;Vt=xt;try{return Ze.apply(this,arguments)}finally{Vt=st}}}})(N1);O1.exports=N1;/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uf=Fe.exports,Br=S1,Sn=O1.exports;function We(e){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+e,o=1;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+e+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!uf)throw Error(We(227));var $1=new Set,fh={};function Il(e,r){Ru(e,r),Ru(e+"Capture",r)}function Ru(e,r){for(fh[e]=r,e=0;e<r.length;e++)$1.add(r[e])}var Na=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),CT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,bv=Object.prototype.hasOwnProperty,wv={},Sv={};function IT(e){return bv.call(Sv,e)?!0:bv.call(wv,e)?!1:CT.test(e)?Sv[e]=!0:(wv[e]=!0,!1)}function AT(e,r,o,c){if(o!==null&&o.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return c?!1:o!==null?!o.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function zT(e,r,o,c){if(r===null||typeof r=="undefined"||AT(e,r,o,c))return!0;if(c)return!1;if(o!==null)switch(o.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function ci(e,r,o,c,m,v,T){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=c,this.attributeNamespace=m,this.mustUseProperty=o,this.propertyName=e,this.type=r,this.sanitizeURL=v,this.removeEmptyString=T}var jn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){jn[e]=new ci(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var r=e[0];jn[r]=new ci(r,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){jn[e]=new ci(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){jn[e]=new ci(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){jn[e]=new ci(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){jn[e]=new ci(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){jn[e]=new ci(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){jn[e]=new ci(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){jn[e]=new ci(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ry=/[\-:]([a-z])/g;function Ly(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var r=e.replace(Ry,Ly);jn[r]=new ci(r,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var r=e.replace(Ry,Ly);jn[r]=new ci(r,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var r=e.replace(Ry,Ly);jn[r]=new ci(r,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){jn[e]=new ci(e,1,!1,e.toLowerCase(),null,!1,!1)});jn.xlinkHref=new ci("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){jn[e]=new ci(e,1,!1,e.toLowerCase(),null,!0,!0)});function By(e,r,o,c){var m=jn.hasOwnProperty(r)?jn[r]:null,v=m!==null?m.type===0:c?!1:!(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N");v||(zT(r,o,m,c)&&(o=null),c||m===null?IT(r)&&(o===null?e.removeAttribute(r):e.setAttribute(r,""+o)):m.mustUseProperty?e[m.propertyName]=o===null?m.type===3?!1:"":o:(r=m.attributeName,c=m.attributeNamespace,o===null?e.removeAttribute(r):(m=m.type,o=m===3||m===4&&o===!0?"":""+o,c?e.setAttributeNS(c,r,o):e.setAttribute(r,o))))}var Al=uf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zc=60103,yl=60106,ps=60107,Fy=60108,Jc=60114,Oy=60109,Ny=60110,cf=60112,Qc=60113,Pp=60120,hf=60115,$y=60116,Uy=60121,Vy=60128,U1=60129,jy=60130,Eg=60131;if(typeof Symbol=="function"&&Symbol.for){var wn=Symbol.for;Zc=wn("react.element"),yl=wn("react.portal"),ps=wn("react.fragment"),Fy=wn("react.strict_mode"),Jc=wn("react.profiler"),Oy=wn("react.provider"),Ny=wn("react.context"),cf=wn("react.forward_ref"),Qc=wn("react.suspense"),Pp=wn("react.suspense_list"),hf=wn("react.memo"),$y=wn("react.lazy"),Uy=wn("react.block"),wn("react.scope"),Vy=wn("react.opaque.id"),U1=wn("react.debug_trace_mode"),jy=wn("react.offscreen"),Eg=wn("react.legacy_hidden")}var Tv=typeof Symbol=="function"&&Symbol.iterator;function Dc(e){return e===null||typeof e!="object"?null:(e=Tv&&e[Tv]||e["@@iterator"],typeof e=="function"?e:null)}var $m;function Hc(e){if($m===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);$m=r&&r[1]||""}return`
`+$m+e}var Um=!1;function jd(e,r){if(!e||Um)return"";Um=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(D){var c=D}Reflect.construct(e,[],r)}else{try{r.call()}catch(D){c=D}e.call(r.prototype)}else{try{throw Error()}catch(D){c=D}e()}}catch(D){if(D&&c&&typeof D.stack=="string"){for(var m=D.stack.split(`
`),v=c.stack.split(`
`),T=m.length-1,l=v.length-1;1<=T&&0<=l&&m[T]!==v[l];)l--;for(;1<=T&&0<=l;T--,l--)if(m[T]!==v[l]){if(T!==1||l!==1)do if(T--,l--,0>l||m[T]!==v[l])return`
`+m[T].replace(" at new "," at ");while(1<=T&&0<=l);break}}}finally{Um=!1,Error.prepareStackTrace=o}return(e=e?e.displayName||e.name:"")?Hc(e):""}function PT(e){switch(e.tag){case 5:return Hc(e.type);case 16:return Hc("Lazy");case 13:return Hc("Suspense");case 19:return Hc("SuspenseList");case 0:case 2:case 15:return e=jd(e.type,!1),e;case 11:return e=jd(e.type.render,!1),e;case 22:return e=jd(e.type._render,!1),e;case 1:return e=jd(e.type,!0),e;default:return""}}function vu(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ps:return"Fragment";case yl:return"Portal";case Jc:return"Profiler";case Fy:return"StrictMode";case Qc:return"Suspense";case Pp:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ny:return(e.displayName||"Context")+".Consumer";case Oy:return(e._context.displayName||"Context")+".Provider";case cf:var r=e.render;return r=r.displayName||r.name||"",e.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case hf:return vu(e.type);case Uy:return vu(e._render);case $y:r=e._payload,e=e._init;try{return vu(e(r))}catch{}}return null}function ks(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function V1(e){var r=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function MT(e){var r=V1(e)?"checked":"value",o=Object.getOwnPropertyDescriptor(e.constructor.prototype,r),c=""+e[r];if(!e.hasOwnProperty(r)&&typeof o!="undefined"&&typeof o.get=="function"&&typeof o.set=="function"){var m=o.get,v=o.set;return Object.defineProperty(e,r,{configurable:!0,get:function(){return m.call(this)},set:function(T){c=""+T,v.call(this,T)}}),Object.defineProperty(e,r,{enumerable:o.enumerable}),{getValue:function(){return c},setValue:function(T){c=""+T},stopTracking:function(){e._valueTracker=null,delete e[r]}}}}function Gd(e){e._valueTracker||(e._valueTracker=MT(e))}function j1(e){if(!e)return!1;var r=e._valueTracker;if(!r)return!0;var o=r.getValue(),c="";return e&&(c=V1(e)?e.checked?"true":"false":e.value),e=c,e!==o?(r.setValue(e),!0):!1}function Mp(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch{return e.body}}function kg(e,r){var o=r.checked;return Br({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o!=null?o:e._wrapperState.initialChecked})}function Ev(e,r){var o=r.defaultValue==null?"":r.defaultValue,c=r.checked!=null?r.checked:r.defaultChecked;o=ks(r.value!=null?r.value:o),e._wrapperState={initialChecked:c,initialValue:o,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function G1(e,r){r=r.checked,r!=null&&By(e,"checked",r,!1)}function Cg(e,r){G1(e,r);var o=ks(r.value),c=r.type;if(o!=null)c==="number"?(o===0&&e.value===""||e.value!=o)&&(e.value=""+o):e.value!==""+o&&(e.value=""+o);else if(c==="submit"||c==="reset"){e.removeAttribute("value");return}r.hasOwnProperty("value")?Ig(e,r.type,o):r.hasOwnProperty("defaultValue")&&Ig(e,r.type,ks(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(e.defaultChecked=!!r.defaultChecked)}function kv(e,r,o){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var c=r.type;if(!(c!=="submit"&&c!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+e._wrapperState.initialValue,o||r===e.value||(e.value=r),e.defaultValue=r}o=e.name,o!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,o!==""&&(e.name=o)}function Ig(e,r,o){(r!=="number"||Mp(e.ownerDocument)!==e)&&(o==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+o&&(e.defaultValue=""+o))}function DT(e){var r="";return uf.Children.forEach(e,function(o){o!=null&&(r+=o)}),r}function Ag(e,r){return e=Br({children:void 0},r),(r=DT(r.children))&&(e.children=r),e}function xu(e,r,o,c){if(e=e.options,r){r={};for(var m=0;m<o.length;m++)r["$"+o[m]]=!0;for(o=0;o<e.length;o++)m=r.hasOwnProperty("$"+e[o].value),e[o].selected!==m&&(e[o].selected=m),m&&c&&(e[o].defaultSelected=!0)}else{for(o=""+ks(o),r=null,m=0;m<e.length;m++){if(e[m].value===o){e[m].selected=!0,c&&(e[m].defaultSelected=!0);return}r!==null||e[m].disabled||(r=e[m])}r!==null&&(r.selected=!0)}}function zg(e,r){if(r.dangerouslySetInnerHTML!=null)throw Error(We(91));return Br({},r,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Cv(e,r){var o=r.value;if(o==null){if(o=r.children,r=r.defaultValue,o!=null){if(r!=null)throw Error(We(92));if(Array.isArray(o)){if(!(1>=o.length))throw Error(We(93));o=o[0]}r=o}r==null&&(r=""),o=r}e._wrapperState={initialValue:ks(o)}}function W1(e,r){var o=ks(r.value),c=ks(r.defaultValue);o!=null&&(o=""+o,o!==e.value&&(e.value=o),r.defaultValue==null&&e.defaultValue!==o&&(e.defaultValue=o)),c!=null&&(e.defaultValue=""+c)}function Iv(e){var r=e.textContent;r===e._wrapperState.initialValue&&r!==""&&r!==null&&(e.value=r)}var Pg={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function q1(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Mg(e,r){return e==null||e==="http://www.w3.org/1999/xhtml"?q1(r):e==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Wd,Z1=function(e){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(r,o,c,m){MSApp.execUnsafeLocalFunction(function(){return e(r,o,c,m)})}:e}(function(e,r){if(e.namespaceURI!==Pg.svg||"innerHTML"in e)e.innerHTML=r;else{for(Wd=Wd||document.createElement("div"),Wd.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=Wd.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;r.firstChild;)e.appendChild(r.firstChild)}});function mh(e,r){if(r){var o=e.firstChild;if(o&&o===e.lastChild&&o.nodeType===3){o.nodeValue=r;return}}e.textContent=r}var eh={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},RT=["Webkit","ms","Moz","O"];Object.keys(eh).forEach(function(e){RT.forEach(function(r){r=r+e.charAt(0).toUpperCase()+e.substring(1),eh[r]=eh[e]})});function H1(e,r,o){return r==null||typeof r=="boolean"||r===""?"":o||typeof r!="number"||r===0||eh.hasOwnProperty(e)&&eh[e]?(""+r).trim():r+"px"}function X1(e,r){e=e.style;for(var o in r)if(r.hasOwnProperty(o)){var c=o.indexOf("--")===0,m=H1(o,r[o],c);o==="float"&&(o="cssFloat"),c?e.setProperty(o,m):e[o]=m}}var LT=Br({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Dg(e,r){if(r){if(LT[e]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(We(137,e));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(We(60));if(!(typeof r.dangerouslySetInnerHTML=="object"&&"__html"in r.dangerouslySetInnerHTML))throw Error(We(61))}if(r.style!=null&&typeof r.style!="object")throw Error(We(62))}}function Rg(e,r){if(e.indexOf("-")===-1)return typeof r.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Gy(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Lg=null,bu=null,wu=null;function Av(e){if(e=Nh(e)){if(typeof Lg!="function")throw Error(We(280));var r=e.stateNode;r&&(r=yf(r),Lg(e.stateNode,e.type,r))}}function K1(e){bu?wu?wu.push(e):wu=[e]:bu=e}function Y1(){if(bu){var e=bu,r=wu;if(wu=bu=null,Av(e),r)for(e=0;e<r.length;e++)Av(r[e])}}function Wy(e,r){return e(r)}function J1(e,r,o,c,m){return e(r,o,c,m)}function qy(){}var Q1=Wy,_l=!1,Vm=!1;function Zy(){(bu!==null||wu!==null)&&(qy(),Y1())}function BT(e,r,o){if(Vm)return e(r,o);Vm=!0;try{return Q1(e,r,o)}finally{Vm=!1,Zy()}}function gh(e,r){var o=e.stateNode;if(o===null)return null;var c=yf(o);if(c===null)return null;o=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(e=e.type,c=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!c;break e;default:e=!1}if(e)return null;if(o&&typeof o!="function")throw Error(We(231,r,typeof o));return o}var Bg=!1;if(Na)try{var Rc={};Object.defineProperty(Rc,"passive",{get:function(){Bg=!0}}),window.addEventListener("test",Rc,Rc),window.removeEventListener("test",Rc,Rc)}catch{Bg=!1}function FT(e,r,o,c,m,v,T,l,D){var j=Array.prototype.slice.call(arguments,3);try{r.apply(o,j)}catch(oe){this.onError(oe)}}var th=!1,Dp=null,Rp=!1,Fg=null,OT={onError:function(e){th=!0,Dp=e}};function NT(e,r,o,c,m,v,T,l,D){th=!1,Dp=null,FT.apply(OT,arguments)}function $T(e,r,o,c,m,v,T,l,D){if(NT.apply(this,arguments),th){if(th){var j=Dp;th=!1,Dp=null}else throw Error(We(198));Rp||(Rp=!0,Fg=j)}}function zl(e){var r=e,o=e;if(e.alternate)for(;r.return;)r=r.return;else{e=r;do r=e,(r.flags&1026)!==0&&(o=r.return),e=r.return;while(e)}return r.tag===3?o:null}function eb(e){if(e.tag===13){var r=e.memoizedState;if(r===null&&(e=e.alternate,e!==null&&(r=e.memoizedState)),r!==null)return r.dehydrated}return null}function zv(e){if(zl(e)!==e)throw Error(We(188))}function UT(e){var r=e.alternate;if(!r){if(r=zl(e),r===null)throw Error(We(188));return r!==e?null:e}for(var o=e,c=r;;){var m=o.return;if(m===null)break;var v=m.alternate;if(v===null){if(c=m.return,c!==null){o=c;continue}break}if(m.child===v.child){for(v=m.child;v;){if(v===o)return zv(m),e;if(v===c)return zv(m),r;v=v.sibling}throw Error(We(188))}if(o.return!==c.return)o=m,c=v;else{for(var T=!1,l=m.child;l;){if(l===o){T=!0,o=m,c=v;break}if(l===c){T=!0,c=m,o=v;break}l=l.sibling}if(!T){for(l=v.child;l;){if(l===o){T=!0,o=v,c=m;break}if(l===c){T=!0,c=v,o=m;break}l=l.sibling}if(!T)throw Error(We(189))}}if(o.alternate!==c)throw Error(We(190))}if(o.tag!==3)throw Error(We(188));return o.stateNode.current===o?e:r}function tb(e){if(e=UT(e),!e)return null;for(var r=e;;){if(r.tag===5||r.tag===6)return r;if(r.child)r.child.return=r,r=r.child;else{if(r===e)break;for(;!r.sibling;){if(!r.return||r.return===e)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}}return null}function Pv(e,r){for(var o=e.alternate;r!==null;){if(r===e||r===o)return!0;r=r.return}return!1}var rb,Hy,nb,ib,Og=!1,Ko=[],_s=null,vs=null,xs=null,yh=new Map,_h=new Map,Lc=[],Mv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ng(e,r,o,c,m){return{blockedOn:e,domEventName:r,eventSystemFlags:o|16,nativeEvent:m,targetContainers:[c]}}function Dv(e,r){switch(e){case"focusin":case"focusout":_s=null;break;case"dragenter":case"dragleave":vs=null;break;case"mouseover":case"mouseout":xs=null;break;case"pointerover":case"pointerout":yh.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":_h.delete(r.pointerId)}}function Bc(e,r,o,c,m,v){return e===null||e.nativeEvent!==v?(e=Ng(r,o,c,m,v),r!==null&&(r=Nh(r),r!==null&&Hy(r)),e):(e.eventSystemFlags|=c,r=e.targetContainers,m!==null&&r.indexOf(m)===-1&&r.push(m),e)}function VT(e,r,o,c,m){switch(r){case"focusin":return _s=Bc(_s,e,r,o,c,m),!0;case"dragenter":return vs=Bc(vs,e,r,o,c,m),!0;case"mouseover":return xs=Bc(xs,e,r,o,c,m),!0;case"pointerover":var v=m.pointerId;return yh.set(v,Bc(yh.get(v)||null,e,r,o,c,m)),!0;case"gotpointercapture":return v=m.pointerId,_h.set(v,Bc(_h.get(v)||null,e,r,o,c,m)),!0}return!1}function jT(e){var r=vl(e.target);if(r!==null){var o=zl(r);if(o!==null){if(r=o.tag,r===13){if(r=eb(o),r!==null){e.blockedOn=r,ib(e.lanePriority,function(){Sn.unstable_runWithPriority(e.priority,function(){nb(o)})});return}}else if(r===3&&o.stateNode.hydrate){e.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}e.blockedOn=null}function gp(e){if(e.blockedOn!==null)return!1;for(var r=e.targetContainers;0<r.length;){var o=Jy(e.domEventName,e.eventSystemFlags,r[0],e.nativeEvent);if(o!==null)return r=Nh(o),r!==null&&Hy(r),e.blockedOn=o,!1;r.shift()}return!0}function Rv(e,r,o){gp(e)&&o.delete(r)}function GT(){for(Og=!1;0<Ko.length;){var e=Ko[0];if(e.blockedOn!==null){e=Nh(e.blockedOn),e!==null&&rb(e);break}for(var r=e.targetContainers;0<r.length;){var o=Jy(e.domEventName,e.eventSystemFlags,r[0],e.nativeEvent);if(o!==null){e.blockedOn=o;break}r.shift()}e.blockedOn===null&&Ko.shift()}_s!==null&&gp(_s)&&(_s=null),vs!==null&&gp(vs)&&(vs=null),xs!==null&&gp(xs)&&(xs=null),yh.forEach(Rv),_h.forEach(Rv)}function Fc(e,r){e.blockedOn===r&&(e.blockedOn=null,Og||(Og=!0,Sn.unstable_scheduleCallback(Sn.unstable_NormalPriority,GT)))}function ob(e){function r(m){return Fc(m,e)}if(0<Ko.length){Fc(Ko[0],e);for(var o=1;o<Ko.length;o++){var c=Ko[o];c.blockedOn===e&&(c.blockedOn=null)}}for(_s!==null&&Fc(_s,e),vs!==null&&Fc(vs,e),xs!==null&&Fc(xs,e),yh.forEach(r),_h.forEach(r),o=0;o<Lc.length;o++)c=Lc[o],c.blockedOn===e&&(c.blockedOn=null);for(;0<Lc.length&&(o=Lc[0],o.blockedOn===null);)jT(o),o.blockedOn===null&&Lc.shift()}function qd(e,r){var o={};return o[e.toLowerCase()]=r.toLowerCase(),o["Webkit"+e]="webkit"+r,o["Moz"+e]="moz"+r,o}var pu={animationend:qd("Animation","AnimationEnd"),animationiteration:qd("Animation","AnimationIteration"),animationstart:qd("Animation","AnimationStart"),transitionend:qd("Transition","TransitionEnd")},jm={},ab={};Na&&(ab=document.createElement("div").style,"AnimationEvent"in window||(delete pu.animationend.animation,delete pu.animationiteration.animation,delete pu.animationstart.animation),"TransitionEvent"in window||delete pu.transitionend.transition);function df(e){if(jm[e])return jm[e];if(!pu[e])return e;var r=pu[e],o;for(o in r)if(r.hasOwnProperty(o)&&o in ab)return jm[e]=r[o];return e}var sb=df("animationend"),lb=df("animationiteration"),ub=df("animationstart"),cb=df("transitionend"),hb=new Map,Xy=new Map,WT=["abort","abort",sb,"animationEnd",lb,"animationIteration",ub,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",cb,"transitionEnd","waiting","waiting"];function Ky(e,r){for(var o=0;o<e.length;o+=2){var c=e[o],m=e[o+1];m="on"+(m[0].toUpperCase()+m.slice(1)),Xy.set(c,r),hb.set(c,m),Il(m,[c])}}var qT=Sn.unstable_now;qT();var Tr=8;function hu(e){if((1&e)!==0)return Tr=15,1;if((2&e)!==0)return Tr=14,2;if((4&e)!==0)return Tr=13,4;var r=24&e;return r!==0?(Tr=12,r):(e&32)!==0?(Tr=11,32):(r=192&e,r!==0?(Tr=10,r):(e&256)!==0?(Tr=9,256):(r=3584&e,r!==0?(Tr=8,r):(e&4096)!==0?(Tr=7,4096):(r=4186112&e,r!==0?(Tr=6,r):(r=62914560&e,r!==0?(Tr=5,r):e&67108864?(Tr=4,67108864):(e&134217728)!==0?(Tr=3,134217728):(r=805306368&e,r!==0?(Tr=2,r):(1073741824&e)!==0?(Tr=1,1073741824):(Tr=8,e))))))}function ZT(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function HT(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(We(358,e))}}function vh(e,r){var o=e.pendingLanes;if(o===0)return Tr=0;var c=0,m=0,v=e.expiredLanes,T=e.suspendedLanes,l=e.pingedLanes;if(v!==0)c=v,m=Tr=15;else if(v=o&134217727,v!==0){var D=v&~T;D!==0?(c=hu(D),m=Tr):(l&=v,l!==0&&(c=hu(l),m=Tr))}else v=o&~T,v!==0?(c=hu(v),m=Tr):l!==0&&(c=hu(l),m=Tr);if(c===0)return 0;if(c=31-Cs(c),c=o&((0>c?0:1<<c)<<1)-1,r!==0&&r!==c&&(r&T)===0){if(hu(r),m<=Tr)return r;Tr=m}if(r=e.entangledLanes,r!==0)for(e=e.entanglements,r&=c;0<r;)o=31-Cs(r),m=1<<o,c|=e[o],r&=~m;return c}function db(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Lp(e,r){switch(e){case 15:return 1;case 14:return 2;case 12:return e=du(24&~r),e===0?Lp(10,r):e;case 10:return e=du(192&~r),e===0?Lp(8,r):e;case 8:return e=du(3584&~r),e===0&&(e=du(4186112&~r),e===0&&(e=512)),e;case 2:return r=du(805306368&~r),r===0&&(r=268435456),r}throw Error(We(358,e))}function du(e){return e&-e}function Gm(e){for(var r=[],o=0;31>o;o++)r.push(e);return r}function pf(e,r,o){e.pendingLanes|=r;var c=r-1;e.suspendedLanes&=c,e.pingedLanes&=c,e=e.eventTimes,r=31-Cs(r),e[r]=o}var Cs=Math.clz32?Math.clz32:YT,XT=Math.log,KT=Math.LN2;function YT(e){return e===0?32:31-(XT(e)/KT|0)|0}var JT=Sn.unstable_UserBlockingPriority,QT=Sn.unstable_runWithPriority,yp=!0;function eE(e,r,o,c){_l||qy();var m=Yy,v=_l;_l=!0;try{J1(m,e,r,o,c)}finally{(_l=v)||Zy()}}function tE(e,r,o,c){QT(JT,Yy.bind(null,e,r,o,c))}function Yy(e,r,o,c){if(yp){var m;if((m=(r&4)===0)&&0<Ko.length&&-1<Mv.indexOf(e))e=Ng(null,e,r,o,c),Ko.push(e);else{var v=Jy(e,r,o,c);if(v===null)m&&Dv(e,c);else{if(m){if(-1<Mv.indexOf(e)){e=Ng(v,e,r,o,c),Ko.push(e);return}if(VT(v,e,r,o,c))return;Dv(e,c)}Eb(e,r,c,null,o)}}}}function Jy(e,r,o,c){var m=Gy(c);if(m=vl(m),m!==null){var v=zl(m);if(v===null)m=null;else{var T=v.tag;if(T===13){if(m=eb(v),m!==null)return m;m=null}else if(T===3){if(v.stateNode.hydrate)return v.tag===3?v.stateNode.containerInfo:null;m=null}else v!==m&&(m=null)}}return Eb(e,r,c,m,o),null}var fs=null,Qy=null,_p=null;function pb(){if(_p)return _p;var e,r=Qy,o=r.length,c,m="value"in fs?fs.value:fs.textContent,v=m.length;for(e=0;e<o&&r[e]===m[e];e++);var T=o-e;for(c=1;c<=T&&r[o-c]===m[v-c];c++);return _p=m.slice(e,1<c?1-c:void 0)}function vp(e){var r=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&r===13&&(e=13)):e=r,e===10&&(e=13),32<=e||e===13?e:0}function Zd(){return!0}function Lv(){return!1}function $i(e){function r(o,c,m,v,T){this._reactName=o,this._targetInst=m,this.type=c,this.nativeEvent=v,this.target=T,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(o=e[l],this[l]=o?o(v):v[l]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Zd:Lv,this.isPropagationStopped=Lv,this}return Br(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Zd)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Zd)},persist:function(){},isPersistent:Zd}),r}var ju={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},e0=$i(ju),Oh=Br({},ju,{view:0,detail:0}),rE=$i(Oh),Wm,qm,Oc,ff=Br({},Oh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:t0,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Oc&&(Oc&&e.type==="mousemove"?(Wm=e.screenX-Oc.screenX,qm=e.screenY-Oc.screenY):qm=Wm=0,Oc=e),Wm)},movementY:function(e){return"movementY"in e?e.movementY:qm}}),Bv=$i(ff),nE=Br({},ff,{dataTransfer:0}),iE=$i(nE),oE=Br({},Oh,{relatedTarget:0}),Zm=$i(oE),aE=Br({},ju,{animationName:0,elapsedTime:0,pseudoElement:0}),sE=$i(aE),lE=Br({},ju,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),uE=$i(lE),cE=Br({},ju,{data:0}),Fv=$i(cE),hE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fE(e){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(e):(e=pE[e])?!!r[e]:!1}function t0(){return fE}var mE=Br({},Oh,{key:function(e){if(e.key){var r=hE[e.key]||e.key;if(r!=="Unidentified")return r}return e.type==="keypress"?(e=vp(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?dE[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:t0,charCode:function(e){return e.type==="keypress"?vp(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?vp(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),gE=$i(mE),yE=Br({},ff,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ov=$i(yE),_E=Br({},Oh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:t0}),vE=$i(_E),xE=Br({},ju,{propertyName:0,elapsedTime:0,pseudoElement:0}),bE=$i(xE),wE=Br({},ff,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),SE=$i(wE),TE=[9,13,27,32],r0=Na&&"CompositionEvent"in window,rh=null;Na&&"documentMode"in document&&(rh=document.documentMode);var EE=Na&&"TextEvent"in window&&!rh,fb=Na&&(!r0||rh&&8<rh&&11>=rh),Nv=String.fromCharCode(32),$v=!1;function mb(e,r){switch(e){case"keyup":return TE.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gb(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var fu=!1;function kE(e,r){switch(e){case"compositionend":return gb(r);case"keypress":return r.which!==32?null:($v=!0,Nv);case"textInput":return e=r.data,e===Nv&&$v?null:e;default:return null}}function CE(e,r){if(fu)return e==="compositionend"||!r0&&mb(e,r)?(e=pb(),_p=Qy=fs=null,fu=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return fb&&r.locale!=="ko"?null:r.data;default:return null}}var IE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Uv(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r==="input"?!!IE[e.type]:r==="textarea"}function yb(e,r,o,c){K1(c),r=Bp(r,"onChange"),0<r.length&&(o=new e0("onChange","change",null,o,c),e.push({event:o,listeners:r}))}var nh=null,xh=null;function AE(e){wb(e,0)}function mf(e){var r=gu(e);if(j1(r))return e}function zE(e,r){if(e==="change")return r}var _b=!1;if(Na){var Hm;if(Na){var Xm="oninput"in document;if(!Xm){var Vv=document.createElement("div");Vv.setAttribute("oninput","return;"),Xm=typeof Vv.oninput=="function"}Hm=Xm}else Hm=!1;_b=Hm&&(!document.documentMode||9<document.documentMode)}function jv(){nh&&(nh.detachEvent("onpropertychange",vb),xh=nh=null)}function vb(e){if(e.propertyName==="value"&&mf(xh)){var r=[];if(yb(r,xh,e,Gy(e)),e=AE,_l)e(r);else{_l=!0;try{Wy(e,r)}finally{_l=!1,Zy()}}}}function PE(e,r,o){e==="focusin"?(jv(),nh=r,xh=o,nh.attachEvent("onpropertychange",vb)):e==="focusout"&&jv()}function ME(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return mf(xh)}function DE(e,r){if(e==="click")return mf(r)}function RE(e,r){if(e==="input"||e==="change")return mf(r)}function LE(e,r){return e===r&&(e!==0||1/e===1/r)||e!==e&&r!==r}var eo=typeof Object.is=="function"?Object.is:LE,BE=Object.prototype.hasOwnProperty;function bh(e,r){if(eo(e,r))return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null)return!1;var o=Object.keys(e),c=Object.keys(r);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++)if(!BE.call(r,o[c])||!eo(e[o[c]],r[o[c]]))return!1;return!0}function Gv(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Wv(e,r){var o=Gv(e);e=0;for(var c;o;){if(o.nodeType===3){if(c=e+o.textContent.length,e<=r&&c>=r)return{node:o,offset:r-e};e=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Gv(o)}}function xb(e,r){return e&&r?e===r?!0:e&&e.nodeType===3?!1:r&&r.nodeType===3?xb(e,r.parentNode):"contains"in e?e.contains(r):e.compareDocumentPosition?!!(e.compareDocumentPosition(r)&16):!1:!1}function qv(){for(var e=window,r=Mp();r instanceof e.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)e=r.contentWindow;else break;r=Mp(e.document)}return r}function $g(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r&&(r==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||r==="textarea"||e.contentEditable==="true")}var FE=Na&&"documentMode"in document&&11>=document.documentMode,mu=null,Ug=null,ih=null,Vg=!1;function Zv(e,r,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Vg||mu==null||mu!==Mp(c)||(c=mu,"selectionStart"in c&&$g(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ih&&bh(ih,c)||(ih=c,c=Bp(Ug,"onSelect"),0<c.length&&(r=new e0("onSelect","select",null,r,o),e.push({event:r,listeners:c}),r.target=mu)))}Ky("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);Ky("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);Ky(WT,2);for(var Hv="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Km=0;Km<Hv.length;Km++)Xy.set(Hv[Km],0);Ru("onMouseEnter",["mouseout","mouseover"]);Ru("onMouseLeave",["mouseout","mouseover"]);Ru("onPointerEnter",["pointerout","pointerover"]);Ru("onPointerLeave",["pointerout","pointerover"]);Il("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Il("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Il("onBeforeInput",["compositionend","keypress","textInput","paste"]);Il("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Il("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Il("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bb=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xc));function Xv(e,r,o){var c=e.type||"unknown-event";e.currentTarget=o,$T(c,r,void 0,e),e.currentTarget=null}function wb(e,r){r=(r&4)!==0;for(var o=0;o<e.length;o++){var c=e[o],m=c.event;c=c.listeners;e:{var v=void 0;if(r)for(var T=c.length-1;0<=T;T--){var l=c[T],D=l.instance,j=l.currentTarget;if(l=l.listener,D!==v&&m.isPropagationStopped())break e;Xv(m,l,j),v=D}else for(T=0;T<c.length;T++){if(l=c[T],D=l.instance,j=l.currentTarget,l=l.listener,D!==v&&m.isPropagationStopped())break e;Xv(m,l,j),v=D}}}if(Rp)throw e=Fg,Rp=!1,Fg=null,e}function Cr(e,r){var o=Cb(r),c=e+"__bubble";o.has(c)||(Tb(r,e,2,!1),o.add(c))}var Kv="_reactListening"+Math.random().toString(36).slice(2);function Sb(e){e[Kv]||(e[Kv]=!0,$1.forEach(function(r){bb.has(r)||Yv(r,!1,e,null),Yv(r,!0,e,null)}))}function Yv(e,r,o,c){var m=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,v=o;if(e==="selectionchange"&&o.nodeType!==9&&(v=o.ownerDocument),c!==null&&!r&&bb.has(e)){if(e!=="scroll")return;m|=2,v=c}var T=Cb(v),l=e+"__"+(r?"capture":"bubble");T.has(l)||(r&&(m|=4),Tb(v,e,m,r),T.add(l))}function Tb(e,r,o,c){var m=Xy.get(r);switch(m===void 0?2:m){case 0:m=eE;break;case 1:m=tE;break;default:m=Yy}o=m.bind(null,r,o,e),m=void 0,!Bg||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(m=!0),c?m!==void 0?e.addEventListener(r,o,{capture:!0,passive:m}):e.addEventListener(r,o,!0):m!==void 0?e.addEventListener(r,o,{passive:m}):e.addEventListener(r,o,!1)}function Eb(e,r,o,c,m){var v=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var T=c.tag;if(T===3||T===4){var l=c.stateNode.containerInfo;if(l===m||l.nodeType===8&&l.parentNode===m)break;if(T===4)for(T=c.return;T!==null;){var D=T.tag;if((D===3||D===4)&&(D=T.stateNode.containerInfo,D===m||D.nodeType===8&&D.parentNode===m))return;T=T.return}for(;l!==null;){if(T=vl(l),T===null)return;if(D=T.tag,D===5||D===6){c=v=T;continue e}l=l.parentNode}}c=c.return}BT(function(){var j=v,oe=Gy(o),ne=[];e:{var U=hb.get(e);if(U!==void 0){var Se=e0,Ae=e;switch(e){case"keypress":if(vp(o)===0)break e;case"keydown":case"keyup":Se=gE;break;case"focusin":Ae="focus",Se=Zm;break;case"focusout":Ae="blur",Se=Zm;break;case"beforeblur":case"afterblur":Se=Zm;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Se=Bv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Se=iE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Se=vE;break;case sb:case lb:case ub:Se=sE;break;case cb:Se=bE;break;case"scroll":Se=rE;break;case"wheel":Se=SE;break;case"copy":case"cut":case"paste":Se=uE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Se=Ov}var _e=(r&4)!==0,re=!_e&&e==="scroll",H=_e?U!==null?U+"Capture":null:U;_e=[];for(var ee=j,fe;ee!==null;){fe=ee;var be=fe.stateNode;if(fe.tag===5&&be!==null&&(fe=be,H!==null&&(be=gh(ee,H),be!=null&&_e.push(wh(ee,be,fe)))),re)break;ee=ee.return}0<_e.length&&(U=new Se(U,Ae,null,o,oe),ne.push({event:U,listeners:_e}))}}if((r&7)===0){e:{if(U=e==="mouseover"||e==="pointerover",Se=e==="mouseout"||e==="pointerout",U&&(r&16)===0&&(Ae=o.relatedTarget||o.fromElement)&&(vl(Ae)||Ae[Gu]))break e;if((Se||U)&&(U=oe.window===oe?oe:(U=oe.ownerDocument)?U.defaultView||U.parentWindow:window,Se?(Ae=o.relatedTarget||o.toElement,Se=j,Ae=Ae?vl(Ae):null,Ae!==null&&(re=zl(Ae),Ae!==re||Ae.tag!==5&&Ae.tag!==6)&&(Ae=null)):(Se=null,Ae=j),Se!==Ae)){if(_e=Bv,be="onMouseLeave",H="onMouseEnter",ee="mouse",(e==="pointerout"||e==="pointerover")&&(_e=Ov,be="onPointerLeave",H="onPointerEnter",ee="pointer"),re=Se==null?U:gu(Se),fe=Ae==null?U:gu(Ae),U=new _e(be,ee+"leave",Se,o,oe),U.target=re,U.relatedTarget=fe,be=null,vl(oe)===j&&(_e=new _e(H,ee+"enter",Ae,o,oe),_e.target=fe,_e.relatedTarget=re,be=_e),re=be,Se&&Ae)t:{for(_e=Se,H=Ae,ee=0,fe=_e;fe;fe=lu(fe))ee++;for(fe=0,be=H;be;be=lu(be))fe++;for(;0<ee-fe;)_e=lu(_e),ee--;for(;0<fe-ee;)H=lu(H),fe--;for(;ee--;){if(_e===H||H!==null&&_e===H.alternate)break t;_e=lu(_e),H=lu(H)}_e=null}else _e=null;Se!==null&&Jv(ne,U,Se,_e,!1),Ae!==null&&re!==null&&Jv(ne,re,Ae,_e,!0)}}e:{if(U=j?gu(j):window,Se=U.nodeName&&U.nodeName.toLowerCase(),Se==="select"||Se==="input"&&U.type==="file")var Ne=zE;else if(Uv(U))if(_b)Ne=RE;else{Ne=ME;var Re=PE}else(Se=U.nodeName)&&Se.toLowerCase()==="input"&&(U.type==="checkbox"||U.type==="radio")&&(Ne=DE);if(Ne&&(Ne=Ne(e,j))){yb(ne,Ne,o,oe);break e}Re&&Re(e,U,j),e==="focusout"&&(Re=U._wrapperState)&&Re.controlled&&U.type==="number"&&Ig(U,"number",U.value)}switch(Re=j?gu(j):window,e){case"focusin":(Uv(Re)||Re.contentEditable==="true")&&(mu=Re,Ug=j,ih=null);break;case"focusout":ih=Ug=mu=null;break;case"mousedown":Vg=!0;break;case"contextmenu":case"mouseup":case"dragend":Vg=!1,Zv(ne,o,oe);break;case"selectionchange":if(FE)break;case"keydown":case"keyup":Zv(ne,o,oe)}var Le;if(r0)e:{switch(e){case"compositionstart":var rt="onCompositionStart";break e;case"compositionend":rt="onCompositionEnd";break e;case"compositionupdate":rt="onCompositionUpdate";break e}rt=void 0}else fu?mb(e,o)&&(rt="onCompositionEnd"):e==="keydown"&&o.keyCode===229&&(rt="onCompositionStart");rt&&(fb&&o.locale!=="ko"&&(fu||rt!=="onCompositionStart"?rt==="onCompositionEnd"&&fu&&(Le=pb()):(fs=oe,Qy="value"in fs?fs.value:fs.textContent,fu=!0)),Re=Bp(j,rt),0<Re.length&&(rt=new Fv(rt,e,null,o,oe),ne.push({event:rt,listeners:Re}),Le?rt.data=Le:(Le=gb(o),Le!==null&&(rt.data=Le)))),(Le=EE?kE(e,o):CE(e,o))&&(j=Bp(j,"onBeforeInput"),0<j.length&&(oe=new Fv("onBeforeInput","beforeinput",null,o,oe),ne.push({event:oe,listeners:j}),oe.data=Le))}wb(ne,r)})}function wh(e,r,o){return{instance:e,listener:r,currentTarget:o}}function Bp(e,r){for(var o=r+"Capture",c=[];e!==null;){var m=e,v=m.stateNode;m.tag===5&&v!==null&&(m=v,v=gh(e,o),v!=null&&c.unshift(wh(e,v,m)),v=gh(e,r),v!=null&&c.push(wh(e,v,m))),e=e.return}return c}function lu(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Jv(e,r,o,c,m){for(var v=r._reactName,T=[];o!==null&&o!==c;){var l=o,D=l.alternate,j=l.stateNode;if(D!==null&&D===c)break;l.tag===5&&j!==null&&(l=j,m?(D=gh(o,v),D!=null&&T.unshift(wh(o,D,l))):m||(D=gh(o,v),D!=null&&T.push(wh(o,D,l)))),o=o.return}T.length!==0&&e.push({event:r,listeners:T})}function Fp(){}var Ym=null,Jm=null;function kb(e,r){switch(e){case"button":case"input":case"select":case"textarea":return!!r.autoFocus}return!1}function jg(e,r){return e==="textarea"||e==="option"||e==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Qv=typeof setTimeout=="function"?setTimeout:void 0,OE=typeof clearTimeout=="function"?clearTimeout:void 0;function n0(e){e.nodeType===1?e.textContent="":e.nodeType===9&&(e=e.body,e!=null&&(e.textContent=""))}function Su(e){for(;e!=null;e=e.nextSibling){var r=e.nodeType;if(r===1||r===3)break}return e}function ex(e){e=e.previousSibling;for(var r=0;e;){if(e.nodeType===8){var o=e.data;if(o==="$"||o==="$!"||o==="$?"){if(r===0)return e;r--}else o==="/$"&&r++}e=e.previousSibling}return null}var Qm=0;function NE(e){return{$$typeof:Vy,toString:e,valueOf:e}}var gf=Math.random().toString(36).slice(2),ms="__reactFiber$"+gf,Op="__reactProps$"+gf,Gu="__reactContainer$"+gf,tx="__reactEvents$"+gf;function vl(e){var r=e[ms];if(r)return r;for(var o=e.parentNode;o;){if(r=o[Gu]||o[ms]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(e=ex(e);e!==null;){if(o=e[ms])return o;e=ex(e)}return r}e=o,o=e.parentNode}return null}function Nh(e){return e=e[ms]||e[Gu],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function gu(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(We(33))}function yf(e){return e[Op]||null}function Cb(e){var r=e[tx];return r===void 0&&(r=e[tx]=new Set),r}var Gg=[],yu=-1;function Ms(e){return{current:e}}function Ar(e){0>yu||(e.current=Gg[yu],Gg[yu]=null,yu--)}function Zr(e,r){yu++,Gg[yu]=e.current,e.current=r}var Is={},ei=Ms(Is),Si=Ms(!1),El=Is;function Lu(e,r){var o=e.type.contextTypes;if(!o)return Is;var c=e.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===r)return c.__reactInternalMemoizedMaskedChildContext;var m={},v;for(v in o)m[v]=r[v];return c&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=m),m}function Ti(e){return e=e.childContextTypes,e!=null}function Np(){Ar(Si),Ar(ei)}function rx(e,r,o){if(ei.current!==Is)throw Error(We(168));Zr(ei,r),Zr(Si,o)}function Ib(e,r,o){var c=e.stateNode;if(e=r.childContextTypes,typeof c.getChildContext!="function")return o;c=c.getChildContext();for(var m in c)if(!(m in e))throw Error(We(108,vu(r)||"Unknown",m));return Br({},o,c)}function xp(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Is,El=ei.current,Zr(ei,e),Zr(Si,Si.current),!0}function nx(e,r,o){var c=e.stateNode;if(!c)throw Error(We(169));o?(e=Ib(e,r,El),c.__reactInternalMemoizedMergedChildContext=e,Ar(Si),Ar(ei),Zr(ei,e)):Ar(Si),Zr(Si,o)}var i0=null,Sl=null,$E=Sn.unstable_runWithPriority,o0=Sn.unstable_scheduleCallback,Wg=Sn.unstable_cancelCallback,UE=Sn.unstable_shouldYield,ix=Sn.unstable_requestPaint,qg=Sn.unstable_now,VE=Sn.unstable_getCurrentPriorityLevel,_f=Sn.unstable_ImmediatePriority,Ab=Sn.unstable_UserBlockingPriority,zb=Sn.unstable_NormalPriority,Pb=Sn.unstable_LowPriority,Mb=Sn.unstable_IdlePriority,eg={},jE=ix!==void 0?ix:function(){},Ma=null,bp=null,tg=!1,ox=qg(),Jn=1e4>ox?qg:function(){return qg()-ox};function Bu(){switch(VE()){case _f:return 99;case Ab:return 98;case zb:return 97;case Pb:return 96;case Mb:return 95;default:throw Error(We(332))}}function Db(e){switch(e){case 99:return _f;case 98:return Ab;case 97:return zb;case 96:return Pb;case 95:return Mb;default:throw Error(We(332))}}function kl(e,r){return e=Db(e),$E(e,r)}function Sh(e,r,o){return e=Db(e),o0(e,r,o)}function na(){if(bp!==null){var e=bp;bp=null,Wg(e)}Rb()}function Rb(){if(!tg&&Ma!==null){tg=!0;var e=0;try{var r=Ma;kl(99,function(){for(;e<r.length;e++){var o=r[e];do o=o(!0);while(o!==null)}}),Ma=null}catch(o){throw Ma!==null&&(Ma=Ma.slice(e+1)),o0(_f,na),o}finally{tg=!1}}}var GE=Al.ReactCurrentBatchConfig;function To(e,r){if(e&&e.defaultProps){r=Br({},r),e=e.defaultProps;for(var o in e)r[o]===void 0&&(r[o]=e[o]);return r}return r}var $p=Ms(null),Up=null,_u=null,Vp=null;function a0(){Vp=_u=Up=null}function s0(e){var r=$p.current;Ar($p),e.type._context._currentValue=r}function Lb(e,r){for(;e!==null;){var o=e.alternate;if((e.childLanes&r)===r){if(o===null||(o.childLanes&r)===r)break;o.childLanes|=r}else e.childLanes|=r,o!==null&&(o.childLanes|=r);e=e.return}}function Tu(e,r){Up=e,Vp=_u=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&r)!==0&&(Eo=!0),e.firstContext=null)}function no(e,r){if(Vp!==e&&r!==!1&&r!==0)if((typeof r!="number"||r===1073741823)&&(Vp=e,r=1073741823),r={context:e,observedBits:r,next:null},_u===null){if(Up===null)throw Error(We(308));_u=r,Up.dependencies={lanes:0,firstContext:r,responders:null}}else _u=_u.next=r;return e._currentValue}var ds=!1;function l0(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function Bb(e,r){e=e.updateQueue,r.updateQueue===e&&(r.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function bs(e,r){return{eventTime:e,lane:r,tag:0,payload:null,callback:null,next:null}}function ws(e,r){if(e=e.updateQueue,e!==null){e=e.shared;var o=e.pending;o===null?r.next=r:(r.next=o.next,o.next=r),e.pending=r}}function ax(e,r){var o=e.updateQueue,c=e.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var m=null,v=null;if(o=o.firstBaseUpdate,o!==null){do{var T={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};v===null?m=v=T:v=v.next=T,o=o.next}while(o!==null);v===null?m=v=r:v=v.next=r}else m=v=r;o={baseState:c.baseState,firstBaseUpdate:m,lastBaseUpdate:v,shared:c.shared,effects:c.effects},e.updateQueue=o;return}e=o.lastBaseUpdate,e===null?o.firstBaseUpdate=r:e.next=r,o.lastBaseUpdate=r}function Th(e,r,o,c){var m=e.updateQueue;ds=!1;var v=m.firstBaseUpdate,T=m.lastBaseUpdate,l=m.shared.pending;if(l!==null){m.shared.pending=null;var D=l,j=D.next;D.next=null,T===null?v=j:T.next=j,T=D;var oe=e.alternate;if(oe!==null){oe=oe.updateQueue;var ne=oe.lastBaseUpdate;ne!==T&&(ne===null?oe.firstBaseUpdate=j:ne.next=j,oe.lastBaseUpdate=D)}}if(v!==null){ne=m.baseState,T=0,oe=j=D=null;do{l=v.lane;var U=v.eventTime;if((c&l)===l){oe!==null&&(oe=oe.next={eventTime:U,lane:0,tag:v.tag,payload:v.payload,callback:v.callback,next:null});e:{var Se=e,Ae=v;switch(l=r,U=o,Ae.tag){case 1:if(Se=Ae.payload,typeof Se=="function"){ne=Se.call(U,ne,l);break e}ne=Se;break e;case 3:Se.flags=Se.flags&-4097|64;case 0:if(Se=Ae.payload,l=typeof Se=="function"?Se.call(U,ne,l):Se,l==null)break e;ne=Br({},ne,l);break e;case 2:ds=!0}}v.callback!==null&&(e.flags|=32,l=m.effects,l===null?m.effects=[v]:l.push(v))}else U={eventTime:U,lane:l,tag:v.tag,payload:v.payload,callback:v.callback,next:null},oe===null?(j=oe=U,D=ne):oe=oe.next=U,T|=l;if(v=v.next,v===null){if(l=m.shared.pending,l===null)break;v=l.next,l.next=null,m.lastBaseUpdate=l,m.shared.pending=null}}while(1);oe===null&&(D=ne),m.baseState=D,m.firstBaseUpdate=j,m.lastBaseUpdate=oe,Uh|=T,e.lanes=T,e.memoizedState=ne}}function sx(e,r,o){if(e=r.effects,r.effects=null,e!==null)for(r=0;r<e.length;r++){var c=e[r],m=c.callback;if(m!==null){if(c.callback=null,c=o,typeof m!="function")throw Error(We(191,m));m.call(c)}}}var Fb=new uf.Component().refs;function jp(e,r,o,c){r=e.memoizedState,o=o(c,r),o=o==null?r:Br({},r,o),e.memoizedState=o,e.lanes===0&&(e.updateQueue.baseState=o)}var vf={isMounted:function(e){return(e=e._reactInternals)?zl(e)===e:!1},enqueueSetState:function(e,r,o){e=e._reactInternals;var c=Fi(),m=Ss(e),v=bs(c,m);v.payload=r,o!=null&&(v.callback=o),ws(e,v),Ts(e,m,c)},enqueueReplaceState:function(e,r,o){e=e._reactInternals;var c=Fi(),m=Ss(e),v=bs(c,m);v.tag=1,v.payload=r,o!=null&&(v.callback=o),ws(e,v),Ts(e,m,c)},enqueueForceUpdate:function(e,r){e=e._reactInternals;var o=Fi(),c=Ss(e),m=bs(o,c);m.tag=2,r!=null&&(m.callback=r),ws(e,m),Ts(e,c,o)}};function lx(e,r,o,c,m,v,T){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(c,v,T):r.prototype&&r.prototype.isPureReactComponent?!bh(o,c)||!bh(m,v):!0}function Ob(e,r,o){var c=!1,m=Is,v=r.contextType;return typeof v=="object"&&v!==null?v=no(v):(m=Ti(r)?El:ei.current,c=r.contextTypes,v=(c=c!=null)?Lu(e,m):Is),r=new r(o,v),e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=vf,e.stateNode=r,r._reactInternals=e,c&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=m,e.__reactInternalMemoizedMaskedChildContext=v),r}function ux(e,r,o,c){e=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,c),r.state!==e&&vf.enqueueReplaceState(r,r.state,null)}function Zg(e,r,o,c){var m=e.stateNode;m.props=o,m.state=e.memoizedState,m.refs=Fb,l0(e);var v=r.contextType;typeof v=="object"&&v!==null?m.context=no(v):(v=Ti(r)?El:ei.current,m.context=Lu(e,v)),Th(e,o,m,c),m.state=e.memoizedState,v=r.getDerivedStateFromProps,typeof v=="function"&&(jp(e,r,v,o),m.state=e.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(r=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),r!==m.state&&vf.enqueueReplaceState(m,m.state,null),Th(e,o,m,c),m.state=e.memoizedState),typeof m.componentDidMount=="function"&&(e.flags|=4)}var Hd=Array.isArray;function Nc(e,r,o){if(e=o.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(We(309));var c=o.stateNode}if(!c)throw Error(We(147,e));var m=""+e;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===m?r.ref:(r=function(v){var T=c.refs;T===Fb&&(T=c.refs={}),v===null?delete T[m]:T[m]=v},r._stringRef=m,r)}if(typeof e!="string")throw Error(We(284));if(!o._owner)throw Error(We(290,e))}return e}function Xd(e,r){if(e.type!=="textarea")throw Error(We(31,Object.prototype.toString.call(r)==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":r))}function Nb(e){function r(re,H){if(e){var ee=re.lastEffect;ee!==null?(ee.nextEffect=H,re.lastEffect=H):re.firstEffect=re.lastEffect=H,H.nextEffect=null,H.flags=8}}function o(re,H){if(!e)return null;for(;H!==null;)r(re,H),H=H.sibling;return null}function c(re,H){for(re=new Map;H!==null;)H.key!==null?re.set(H.key,H):re.set(H.index,H),H=H.sibling;return re}function m(re,H){return re=zs(re,H),re.index=0,re.sibling=null,re}function v(re,H,ee){return re.index=ee,e?(ee=re.alternate,ee!==null?(ee=ee.index,ee<H?(re.flags=2,H):ee):(re.flags=2,H)):H}function T(re){return e&&re.alternate===null&&(re.flags=2),re}function l(re,H,ee,fe){return H===null||H.tag!==6?(H=ag(ee,re.mode,fe),H.return=re,H):(H=m(H,ee),H.return=re,H)}function D(re,H,ee,fe){return H!==null&&H.elementType===ee.type?(fe=m(H,ee.props),fe.ref=Nc(re,H,ee),fe.return=re,fe):(fe=Ep(ee.type,ee.key,ee.props,null,re.mode,fe),fe.ref=Nc(re,H,ee),fe.return=re,fe)}function j(re,H,ee,fe){return H===null||H.tag!==4||H.stateNode.containerInfo!==ee.containerInfo||H.stateNode.implementation!==ee.implementation?(H=sg(ee,re.mode,fe),H.return=re,H):(H=m(H,ee.children||[]),H.return=re,H)}function oe(re,H,ee,fe,be){return H===null||H.tag!==7?(H=Iu(ee,re.mode,fe,be),H.return=re,H):(H=m(H,ee),H.return=re,H)}function ne(re,H,ee){if(typeof H=="string"||typeof H=="number")return H=ag(""+H,re.mode,ee),H.return=re,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case Zc:return ee=Ep(H.type,H.key,H.props,null,re.mode,ee),ee.ref=Nc(re,null,H),ee.return=re,ee;case yl:return H=sg(H,re.mode,ee),H.return=re,H}if(Hd(H)||Dc(H))return H=Iu(H,re.mode,ee,null),H.return=re,H;Xd(re,H)}return null}function U(re,H,ee,fe){var be=H!==null?H.key:null;if(typeof ee=="string"||typeof ee=="number")return be!==null?null:l(re,H,""+ee,fe);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case Zc:return ee.key===be?ee.type===ps?oe(re,H,ee.props.children,fe,be):D(re,H,ee,fe):null;case yl:return ee.key===be?j(re,H,ee,fe):null}if(Hd(ee)||Dc(ee))return be!==null?null:oe(re,H,ee,fe,null);Xd(re,ee)}return null}function Se(re,H,ee,fe,be){if(typeof fe=="string"||typeof fe=="number")return re=re.get(ee)||null,l(H,re,""+fe,be);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case Zc:return re=re.get(fe.key===null?ee:fe.key)||null,fe.type===ps?oe(H,re,fe.props.children,be,fe.key):D(H,re,fe,be);case yl:return re=re.get(fe.key===null?ee:fe.key)||null,j(H,re,fe,be)}if(Hd(fe)||Dc(fe))return re=re.get(ee)||null,oe(H,re,fe,be,null);Xd(H,fe)}return null}function Ae(re,H,ee,fe){for(var be=null,Ne=null,Re=H,Le=H=0,rt=null;Re!==null&&Le<ee.length;Le++){Re.index>Le?(rt=Re,Re=null):rt=Re.sibling;var Je=U(re,Re,ee[Le],fe);if(Je===null){Re===null&&(Re=rt);break}e&&Re&&Je.alternate===null&&r(re,Re),H=v(Je,H,Le),Ne===null?be=Je:Ne.sibling=Je,Ne=Je,Re=rt}if(Le===ee.length)return o(re,Re),be;if(Re===null){for(;Le<ee.length;Le++)Re=ne(re,ee[Le],fe),Re!==null&&(H=v(Re,H,Le),Ne===null?be=Re:Ne.sibling=Re,Ne=Re);return be}for(Re=c(re,Re);Le<ee.length;Le++)rt=Se(Re,re,Le,ee[Le],fe),rt!==null&&(e&&rt.alternate!==null&&Re.delete(rt.key===null?Le:rt.key),H=v(rt,H,Le),Ne===null?be=rt:Ne.sibling=rt,Ne=rt);return e&&Re.forEach(function(wt){return r(re,wt)}),be}function _e(re,H,ee,fe){var be=Dc(ee);if(typeof be!="function")throw Error(We(150));if(ee=be.call(ee),ee==null)throw Error(We(151));for(var Ne=be=null,Re=H,Le=H=0,rt=null,Je=ee.next();Re!==null&&!Je.done;Le++,Je=ee.next()){Re.index>Le?(rt=Re,Re=null):rt=Re.sibling;var wt=U(re,Re,Je.value,fe);if(wt===null){Re===null&&(Re=rt);break}e&&Re&&wt.alternate===null&&r(re,Re),H=v(wt,H,Le),Ne===null?be=wt:Ne.sibling=wt,Ne=wt,Re=rt}if(Je.done)return o(re,Re),be;if(Re===null){for(;!Je.done;Le++,Je=ee.next())Je=ne(re,Je.value,fe),Je!==null&&(H=v(Je,H,Le),Ne===null?be=Je:Ne.sibling=Je,Ne=Je);return be}for(Re=c(re,Re);!Je.done;Le++,Je=ee.next())Je=Se(Re,re,Le,Je.value,fe),Je!==null&&(e&&Je.alternate!==null&&Re.delete(Je.key===null?Le:Je.key),H=v(Je,H,Le),Ne===null?be=Je:Ne.sibling=Je,Ne=Je);return e&&Re.forEach(function(Er){return r(re,Er)}),be}return function(re,H,ee,fe){var be=typeof ee=="object"&&ee!==null&&ee.type===ps&&ee.key===null;be&&(ee=ee.props.children);var Ne=typeof ee=="object"&&ee!==null;if(Ne)switch(ee.$$typeof){case Zc:e:{for(Ne=ee.key,be=H;be!==null;){if(be.key===Ne){switch(be.tag){case 7:if(ee.type===ps){o(re,be.sibling),H=m(be,ee.props.children),H.return=re,re=H;break e}break;default:if(be.elementType===ee.type){o(re,be.sibling),H=m(be,ee.props),H.ref=Nc(re,be,ee),H.return=re,re=H;break e}}o(re,be);break}else r(re,be);be=be.sibling}ee.type===ps?(H=Iu(ee.props.children,re.mode,fe,ee.key),H.return=re,re=H):(fe=Ep(ee.type,ee.key,ee.props,null,re.mode,fe),fe.ref=Nc(re,H,ee),fe.return=re,re=fe)}return T(re);case yl:e:{for(be=ee.key;H!==null;){if(H.key===be)if(H.tag===4&&H.stateNode.containerInfo===ee.containerInfo&&H.stateNode.implementation===ee.implementation){o(re,H.sibling),H=m(H,ee.children||[]),H.return=re,re=H;break e}else{o(re,H);break}else r(re,H);H=H.sibling}H=sg(ee,re.mode,fe),H.return=re,re=H}return T(re)}if(typeof ee=="string"||typeof ee=="number")return ee=""+ee,H!==null&&H.tag===6?(o(re,H.sibling),H=m(H,ee),H.return=re,re=H):(o(re,H),H=ag(ee,re.mode,fe),H.return=re,re=H),T(re);if(Hd(ee))return Ae(re,H,ee,fe);if(Dc(ee))return _e(re,H,ee,fe);if(Ne&&Xd(re,ee),typeof ee=="undefined"&&!be)switch(re.tag){case 1:case 22:case 0:case 11:case 15:throw Error(We(152,vu(re.type)||"Component"))}return o(re,H)}}var Gp=Nb(!0),$b=Nb(!1),$h={},ea=Ms($h),Eh=Ms($h),kh=Ms($h);function xl(e){if(e===$h)throw Error(We(174));return e}function Hg(e,r){switch(Zr(kh,r),Zr(Eh,e),Zr(ea,$h),e=r.nodeType,e){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:Mg(null,"");break;default:e=e===8?r.parentNode:r,r=e.namespaceURI||null,e=e.tagName,r=Mg(r,e)}Ar(ea),Zr(ea,r)}function Fu(){Ar(ea),Ar(Eh),Ar(kh)}function cx(e){xl(kh.current);var r=xl(ea.current),o=Mg(r,e.type);r!==o&&(Zr(Eh,e),Zr(ea,o))}function u0(e){Eh.current===e&&(Ar(ea),Ar(Eh))}var qr=Ms(0);function Wp(e){for(var r=e;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&64)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var La=null,gs=null,ta=!1;function Ub(e,r){var o=to(5,null,null,0);o.elementType="DELETED",o.type="DELETED",o.stateNode=r,o.return=e,o.flags=8,e.lastEffect!==null?(e.lastEffect.nextEffect=o,e.lastEffect=o):e.firstEffect=e.lastEffect=o}function hx(e,r){switch(e.tag){case 5:var o=e.type;return r=r.nodeType!==1||o.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(e.stateNode=r,!0):!1;case 6:return r=e.pendingProps===""||r.nodeType!==3?null:r,r!==null?(e.stateNode=r,!0):!1;case 13:return!1;default:return!1}}function Xg(e){if(ta){var r=gs;if(r){var o=r;if(!hx(e,r)){if(r=Su(o.nextSibling),!r||!hx(e,r)){e.flags=e.flags&-1025|2,ta=!1,La=e;return}Ub(La,o)}La=e,gs=Su(r.firstChild)}else e.flags=e.flags&-1025|2,ta=!1,La=e}}function dx(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;La=e}function Kd(e){if(e!==La)return!1;if(!ta)return dx(e),ta=!0,!1;var r=e.type;if(e.tag!==5||r!=="head"&&r!=="body"&&!jg(r,e.memoizedProps))for(r=gs;r;)Ub(e,r),r=Su(r.nextSibling);if(dx(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(We(317));e:{for(e=e.nextSibling,r=0;e;){if(e.nodeType===8){var o=e.data;if(o==="/$"){if(r===0){gs=Su(e.nextSibling);break e}r--}else o!=="$"&&o!=="$!"&&o!=="$?"||r++}e=e.nextSibling}gs=null}}else gs=La?Su(e.stateNode.nextSibling):null;return!0}function rg(){gs=La=null,ta=!1}var Eu=[];function c0(){for(var e=0;e<Eu.length;e++)Eu[e]._workInProgressVersionPrimary=null;Eu.length=0}var oh=Al.ReactCurrentDispatcher,ro=Al.ReactCurrentBatchConfig,Ch=0,Qr=null,Yn=null,$n=null,qp=!1,ah=!1;function xi(){throw Error(We(321))}function h0(e,r){if(r===null)return!1;for(var o=0;o<r.length&&o<e.length;o++)if(!eo(e[o],r[o]))return!1;return!0}function d0(e,r,o,c,m,v){if(Ch=v,Qr=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,oh.current=e===null||e.memoizedState===null?qE:ZE,e=o(c,m),ah){v=0;do{if(ah=!1,!(25>v))throw Error(We(301));v+=1,$n=Yn=null,r.updateQueue=null,oh.current=HE,e=o(c,m)}while(ah)}if(oh.current=Kp,r=Yn!==null&&Yn.next!==null,Ch=0,$n=Yn=Qr=null,qp=!1,r)throw Error(We(300));return e}function bl(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $n===null?Qr.memoizedState=$n=e:$n=$n.next=e,$n}function Pl(){if(Yn===null){var e=Qr.alternate;e=e!==null?e.memoizedState:null}else e=Yn.next;var r=$n===null?Qr.memoizedState:$n.next;if(r!==null)$n=r,Yn=e;else{if(e===null)throw Error(We(310));Yn=e,e={memoizedState:Yn.memoizedState,baseState:Yn.baseState,baseQueue:Yn.baseQueue,queue:Yn.queue,next:null},$n===null?Qr.memoizedState=$n=e:$n=$n.next=e}return $n}function Yo(e,r){return typeof r=="function"?r(e):r}function $c(e){var r=Pl(),o=r.queue;if(o===null)throw Error(We(311));o.lastRenderedReducer=e;var c=Yn,m=c.baseQueue,v=o.pending;if(v!==null){if(m!==null){var T=m.next;m.next=v.next,v.next=T}c.baseQueue=m=v,o.pending=null}if(m!==null){m=m.next,c=c.baseState;var l=T=v=null,D=m;do{var j=D.lane;if((Ch&j)===j)l!==null&&(l=l.next={lane:0,action:D.action,eagerReducer:D.eagerReducer,eagerState:D.eagerState,next:null}),c=D.eagerReducer===e?D.eagerState:e(c,D.action);else{var oe={lane:j,action:D.action,eagerReducer:D.eagerReducer,eagerState:D.eagerState,next:null};l===null?(T=l=oe,v=c):l=l.next=oe,Qr.lanes|=j,Uh|=j}D=D.next}while(D!==null&&D!==m);l===null?v=c:l.next=T,eo(c,r.memoizedState)||(Eo=!0),r.memoizedState=c,r.baseState=v,r.baseQueue=l,o.lastRenderedState=c}return[r.memoizedState,o.dispatch]}function Uc(e){var r=Pl(),o=r.queue;if(o===null)throw Error(We(311));o.lastRenderedReducer=e;var c=o.dispatch,m=o.pending,v=r.memoizedState;if(m!==null){o.pending=null;var T=m=m.next;do v=e(v,T.action),T=T.next;while(T!==m);eo(v,r.memoizedState)||(Eo=!0),r.memoizedState=v,r.baseQueue===null&&(r.baseState=v),o.lastRenderedState=v}return[v,c]}function px(e,r,o){var c=r._getVersion;c=c(r._source);var m=r._workInProgressVersionPrimary;if(m!==null?e=m===c:(e=e.mutableReadLanes,(e=(Ch&e)===e)&&(r._workInProgressVersionPrimary=c,Eu.push(r))),e)return o(r._source);throw Eu.push(r),Error(We(350))}function Vb(e,r,o,c){var m=ui;if(m===null)throw Error(We(349));var v=r._getVersion,T=v(r._source),l=oh.current,D=l.useState(function(){return px(m,r,o)}),j=D[1],oe=D[0];D=$n;var ne=e.memoizedState,U=ne.refs,Se=U.getSnapshot,Ae=ne.source;ne=ne.subscribe;var _e=Qr;return e.memoizedState={refs:U,source:r,subscribe:c},l.useEffect(function(){U.getSnapshot=o,U.setSnapshot=j;var re=v(r._source);if(!eo(T,re)){re=o(r._source),eo(oe,re)||(j(re),re=Ss(_e),m.mutableReadLanes|=re&m.pendingLanes),re=m.mutableReadLanes,m.entangledLanes|=re;for(var H=m.entanglements,ee=re;0<ee;){var fe=31-Cs(ee),be=1<<fe;H[fe]|=re,ee&=~be}}},[o,r,c]),l.useEffect(function(){return c(r._source,function(){var re=U.getSnapshot,H=U.setSnapshot;try{H(re(r._source));var ee=Ss(_e);m.mutableReadLanes|=ee&m.pendingLanes}catch(fe){H(function(){throw fe})}})},[r,c]),eo(Se,o)&&eo(Ae,r)&&eo(ne,c)||(e={pending:null,dispatch:null,lastRenderedReducer:Yo,lastRenderedState:oe},e.dispatch=j=m0.bind(null,Qr,e),D.queue=e,D.baseQueue=null,oe=px(m,r,o),D.memoizedState=D.baseState=oe),oe}function jb(e,r,o){var c=Pl();return Vb(c,e,r,o)}function Vc(e){var r=bl();return typeof e=="function"&&(e=e()),r.memoizedState=r.baseState=e,e=r.queue={pending:null,dispatch:null,lastRenderedReducer:Yo,lastRenderedState:e},e=e.dispatch=m0.bind(null,Qr,e),[r.memoizedState,e]}function Zp(e,r,o,c){return e={tag:e,create:r,destroy:o,deps:c,next:null},r=Qr.updateQueue,r===null?(r={lastEffect:null},Qr.updateQueue=r,r.lastEffect=e.next=e):(o=r.lastEffect,o===null?r.lastEffect=e.next=e:(c=o.next,o.next=e,e.next=c,r.lastEffect=e)),e}function fx(e){var r=bl();return e={current:e},r.memoizedState=e}function Hp(){return Pl().memoizedState}function Kg(e,r,o,c){var m=bl();Qr.flags|=e,m.memoizedState=Zp(1|r,o,void 0,c===void 0?null:c)}function p0(e,r,o,c){var m=Pl();c=c===void 0?null:c;var v=void 0;if(Yn!==null){var T=Yn.memoizedState;if(v=T.destroy,c!==null&&h0(c,T.deps)){Zp(r,o,v,c);return}}Qr.flags|=e,m.memoizedState=Zp(1|r,o,v,c)}function mx(e,r){return Kg(516,4,e,r)}function Xp(e,r){return p0(516,4,e,r)}function Gb(e,r){return p0(4,2,e,r)}function Wb(e,r){if(typeof r=="function")return e=e(),r(e),function(){r(null)};if(r!=null)return e=e(),r.current=e,function(){r.current=null}}function qb(e,r,o){return o=o!=null?o.concat([e]):null,p0(4,2,Wb.bind(null,r,e),o)}function f0(){}function Zb(e,r){var o=Pl();r=r===void 0?null:r;var c=o.memoizedState;return c!==null&&r!==null&&h0(r,c[1])?c[0]:(o.memoizedState=[e,r],e)}function Hb(e,r){var o=Pl();r=r===void 0?null:r;var c=o.memoizedState;return c!==null&&r!==null&&h0(r,c[1])?c[0]:(e=e(),o.memoizedState=[e,r],e)}function WE(e,r){var o=Bu();kl(98>o?98:o,function(){e(!0)}),kl(97<o?97:o,function(){var c=ro.transition;ro.transition=1;try{e(!1),r()}finally{ro.transition=c}})}function m0(e,r,o){var c=Fi(),m=Ss(e),v={lane:m,action:o,eagerReducer:null,eagerState:null,next:null},T=r.pending;if(T===null?v.next=v:(v.next=T.next,T.next=v),r.pending=v,T=e.alternate,e===Qr||T!==null&&T===Qr)ah=qp=!0;else{if(e.lanes===0&&(T===null||T.lanes===0)&&(T=r.lastRenderedReducer,T!==null))try{var l=r.lastRenderedState,D=T(l,o);if(v.eagerReducer=T,v.eagerState=D,eo(D,l))return}catch{}finally{}Ts(e,m,c)}}var Kp={readContext:no,useCallback:xi,useContext:xi,useEffect:xi,useImperativeHandle:xi,useLayoutEffect:xi,useMemo:xi,useReducer:xi,useRef:xi,useState:xi,useDebugValue:xi,useDeferredValue:xi,useTransition:xi,useMutableSource:xi,useOpaqueIdentifier:xi,unstable_isNewReconciler:!1},qE={readContext:no,useCallback:function(e,r){return bl().memoizedState=[e,r===void 0?null:r],e},useContext:no,useEffect:mx,useImperativeHandle:function(e,r,o){return o=o!=null?o.concat([e]):null,Kg(4,2,Wb.bind(null,r,e),o)},useLayoutEffect:function(e,r){return Kg(4,2,e,r)},useMemo:function(e,r){var o=bl();return r=r===void 0?null:r,e=e(),o.memoizedState=[e,r],e},useReducer:function(e,r,o){var c=bl();return r=o!==void 0?o(r):r,c.memoizedState=c.baseState=r,e=c.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},e=e.dispatch=m0.bind(null,Qr,e),[c.memoizedState,e]},useRef:fx,useState:Vc,useDebugValue:f0,useDeferredValue:function(e){var r=Vc(e),o=r[0],c=r[1];return mx(function(){var m=ro.transition;ro.transition=1;try{c(e)}finally{ro.transition=m}},[e]),o},useTransition:function(){var e=Vc(!1),r=e[0];return e=WE.bind(null,e[1]),fx(e),[e,r]},useMutableSource:function(e,r,o){var c=bl();return c.memoizedState={refs:{getSnapshot:r,setSnapshot:null},source:e,subscribe:o},Vb(c,e,r,o)},useOpaqueIdentifier:function(){if(ta){var e=!1,r=NE(function(){throw e||(e=!0,o("r:"+(Qm++).toString(36))),Error(We(355))}),o=Vc(r)[1];return(Qr.mode&2)===0&&(Qr.flags|=516,Zp(5,function(){o("r:"+(Qm++).toString(36))},void 0,null)),r}return r="r:"+(Qm++).toString(36),Vc(r),r},unstable_isNewReconciler:!1},ZE={readContext:no,useCallback:Zb,useContext:no,useEffect:Xp,useImperativeHandle:qb,useLayoutEffect:Gb,useMemo:Hb,useReducer:$c,useRef:Hp,useState:function(){return $c(Yo)},useDebugValue:f0,useDeferredValue:function(e){var r=$c(Yo),o=r[0],c=r[1];return Xp(function(){var m=ro.transition;ro.transition=1;try{c(e)}finally{ro.transition=m}},[e]),o},useTransition:function(){var e=$c(Yo)[0];return[Hp().current,e]},useMutableSource:jb,useOpaqueIdentifier:function(){return $c(Yo)[0]},unstable_isNewReconciler:!1},HE={readContext:no,useCallback:Zb,useContext:no,useEffect:Xp,useImperativeHandle:qb,useLayoutEffect:Gb,useMemo:Hb,useReducer:Uc,useRef:Hp,useState:function(){return Uc(Yo)},useDebugValue:f0,useDeferredValue:function(e){var r=Uc(Yo),o=r[0],c=r[1];return Xp(function(){var m=ro.transition;ro.transition=1;try{c(e)}finally{ro.transition=m}},[e]),o},useTransition:function(){var e=Uc(Yo)[0];return[Hp().current,e]},useMutableSource:jb,useOpaqueIdentifier:function(){return Uc(Yo)[0]},unstable_isNewReconciler:!1},XE=Al.ReactCurrentOwner,Eo=!1;function bi(e,r,o,c){r.child=e===null?$b(r,null,o,c):Gp(r,e.child,o,c)}function gx(e,r,o,c,m){o=o.render;var v=r.ref;return Tu(r,m),c=d0(e,r,o,c,v,m),e!==null&&!Eo?(r.updateQueue=e.updateQueue,r.flags&=-517,e.lanes&=~m,Ba(e,r,m)):(r.flags|=1,bi(e,r,c,m),r.child)}function yx(e,r,o,c,m,v){if(e===null){var T=o.type;return typeof T=="function"&&!b0(T)&&T.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(r.tag=15,r.type=T,Xb(e,r,T,c,m,v)):(e=Ep(o.type,null,c,r,r.mode,v),e.ref=r.ref,e.return=r,r.child=e)}return T=e.child,(m&v)===0&&(m=T.memoizedProps,o=o.compare,o=o!==null?o:bh,o(m,c)&&e.ref===r.ref)?Ba(e,r,v):(r.flags|=1,e=zs(T,c),e.ref=r.ref,e.return=r,r.child=e)}function Xb(e,r,o,c,m,v){if(e!==null&&bh(e.memoizedProps,c)&&e.ref===r.ref)if(Eo=!1,(v&m)!==0)(e.flags&16384)!==0&&(Eo=!0);else return r.lanes=e.lanes,Ba(e,r,v);return Yg(e,r,o,c,v)}function ng(e,r,o){var c=r.pendingProps,m=c.children,v=e!==null?e.memoizedState:null;if(c.mode==="hidden"||c.mode==="unstable-defer-without-hiding")if((r.mode&4)===0)r.memoizedState={baseLanes:0},Jd(r,o);else if((o&1073741824)!==0)r.memoizedState={baseLanes:0},Jd(r,v!==null?v.baseLanes:o);else return e=v!==null?v.baseLanes|o:o,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:e},Jd(r,e),null;else v!==null?(c=v.baseLanes|o,r.memoizedState=null):c=o,Jd(r,c);return bi(e,r,m,o),r.child}function Kb(e,r){var o=r.ref;(e===null&&o!==null||e!==null&&e.ref!==o)&&(r.flags|=128)}function Yg(e,r,o,c,m){var v=Ti(o)?El:ei.current;return v=Lu(r,v),Tu(r,m),o=d0(e,r,o,c,v,m),e!==null&&!Eo?(r.updateQueue=e.updateQueue,r.flags&=-517,e.lanes&=~m,Ba(e,r,m)):(r.flags|=1,bi(e,r,o,m),r.child)}function _x(e,r,o,c,m){if(Ti(o)){var v=!0;xp(r)}else v=!1;if(Tu(r,m),r.stateNode===null)e!==null&&(e.alternate=null,r.alternate=null,r.flags|=2),Ob(r,o,c),Zg(r,o,c,m),c=!0;else if(e===null){var T=r.stateNode,l=r.memoizedProps;T.props=l;var D=T.context,j=o.contextType;typeof j=="object"&&j!==null?j=no(j):(j=Ti(o)?El:ei.current,j=Lu(r,j));var oe=o.getDerivedStateFromProps,ne=typeof oe=="function"||typeof T.getSnapshotBeforeUpdate=="function";ne||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(l!==c||D!==j)&&ux(r,T,c,j),ds=!1;var U=r.memoizedState;T.state=U,Th(r,c,T,m),D=r.memoizedState,l!==c||U!==D||Si.current||ds?(typeof oe=="function"&&(jp(r,o,oe,c),D=r.memoizedState),(l=ds||lx(r,o,l,c,U,D,j))?(ne||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(r.flags|=4)):(typeof T.componentDidMount=="function"&&(r.flags|=4),r.memoizedProps=c,r.memoizedState=D),T.props=c,T.state=D,T.context=j,c=l):(typeof T.componentDidMount=="function"&&(r.flags|=4),c=!1)}else{T=r.stateNode,Bb(e,r),l=r.memoizedProps,j=r.type===r.elementType?l:To(r.type,l),T.props=j,ne=r.pendingProps,U=T.context,D=o.contextType,typeof D=="object"&&D!==null?D=no(D):(D=Ti(o)?El:ei.current,D=Lu(r,D));var Se=o.getDerivedStateFromProps;(oe=typeof Se=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(l!==ne||U!==D)&&ux(r,T,c,D),ds=!1,U=r.memoizedState,T.state=U,Th(r,c,T,m);var Ae=r.memoizedState;l!==ne||U!==Ae||Si.current||ds?(typeof Se=="function"&&(jp(r,o,Se,c),Ae=r.memoizedState),(j=ds||lx(r,o,j,c,U,Ae,D))?(oe||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(c,Ae,D),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(c,Ae,D)),typeof T.componentDidUpdate=="function"&&(r.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(r.flags|=256)):(typeof T.componentDidUpdate!="function"||l===e.memoizedProps&&U===e.memoizedState||(r.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&U===e.memoizedState||(r.flags|=256),r.memoizedProps=c,r.memoizedState=Ae),T.props=c,T.state=Ae,T.context=D,c=j):(typeof T.componentDidUpdate!="function"||l===e.memoizedProps&&U===e.memoizedState||(r.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&U===e.memoizedState||(r.flags|=256),c=!1)}return Jg(e,r,o,c,v,m)}function Jg(e,r,o,c,m,v){Kb(e,r);var T=(r.flags&64)!==0;if(!c&&!T)return m&&nx(r,o,!1),Ba(e,r,v);c=r.stateNode,XE.current=r;var l=T&&typeof o.getDerivedStateFromError!="function"?null:c.render();return r.flags|=1,e!==null&&T?(r.child=Gp(r,e.child,null,v),r.child=Gp(r,null,l,v)):bi(e,r,l,v),r.memoizedState=c.state,m&&nx(r,o,!0),r.child}function vx(e){var r=e.stateNode;r.pendingContext?rx(e,r.pendingContext,r.pendingContext!==r.context):r.context&&rx(e,r.context,!1),Hg(e,r.containerInfo)}var Yd={dehydrated:null,retryLane:0};function xx(e,r,o){var c=r.pendingProps,m=qr.current,v=!1,T;return(T=(r.flags&64)!==0)||(T=e!==null&&e.memoizedState===null?!1:(m&2)!==0),T?(v=!0,r.flags&=-65):e!==null&&e.memoizedState===null||c.fallback===void 0||c.unstable_avoidThisFallback===!0||(m|=1),Zr(qr,m&1),e===null?(c.fallback!==void 0&&Xg(r),e=c.children,m=c.fallback,v?(e=bx(r,e,m,o),r.child.memoizedState={baseLanes:o},r.memoizedState=Yd,e):typeof c.unstable_expectedLoadTime=="number"?(e=bx(r,e,m,o),r.child.memoizedState={baseLanes:o},r.memoizedState=Yd,r.lanes=33554432,e):(o=w0({mode:"visible",children:e},r.mode,o,null),o.return=r,r.child=o)):e.memoizedState!==null?v?(c=Sx(e,r,c.children,c.fallback,o),v=r.child,m=e.child.memoizedState,v.memoizedState=m===null?{baseLanes:o}:{baseLanes:m.baseLanes|o},v.childLanes=e.childLanes&~o,r.memoizedState=Yd,c):(o=wx(e,r,c.children,o),r.memoizedState=null,o):v?(c=Sx(e,r,c.children,c.fallback,o),v=r.child,m=e.child.memoizedState,v.memoizedState=m===null?{baseLanes:o}:{baseLanes:m.baseLanes|o},v.childLanes=e.childLanes&~o,r.memoizedState=Yd,c):(o=wx(e,r,c.children,o),r.memoizedState=null,o)}function bx(e,r,o,c){var m=e.mode,v=e.child;return r={mode:"hidden",children:r},(m&2)===0&&v!==null?(v.childLanes=0,v.pendingProps=r):v=w0(r,m,0,null),o=Iu(o,m,c,null),v.return=e,o.return=e,v.sibling=o,e.child=v,o}function wx(e,r,o,c){var m=e.child;return e=m.sibling,o=zs(m,{mode:"visible",children:o}),(r.mode&2)===0&&(o.lanes=c),o.return=r,o.sibling=null,e!==null&&(e.nextEffect=null,e.flags=8,r.firstEffect=r.lastEffect=e),r.child=o}function Sx(e,r,o,c,m){var v=r.mode,T=e.child;e=T.sibling;var l={mode:"hidden",children:o};return(v&2)===0&&r.child!==T?(o=r.child,o.childLanes=0,o.pendingProps=l,T=o.lastEffect,T!==null?(r.firstEffect=o.firstEffect,r.lastEffect=T,T.nextEffect=null):r.firstEffect=r.lastEffect=null):o=zs(T,l),e!==null?c=zs(e,c):(c=Iu(c,v,m,null),c.flags|=2),c.return=r,o.return=r,o.sibling=c,r.child=o,c}function Tx(e,r){e.lanes|=r;var o=e.alternate;o!==null&&(o.lanes|=r),Lb(e.return,r)}function ig(e,r,o,c,m,v){var T=e.memoizedState;T===null?e.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:m,lastEffect:v}:(T.isBackwards=r,T.rendering=null,T.renderingStartTime=0,T.last=c,T.tail=o,T.tailMode=m,T.lastEffect=v)}function Ex(e,r,o){var c=r.pendingProps,m=c.revealOrder,v=c.tail;if(bi(e,r,c.children,o),c=qr.current,(c&2)!==0)c=c&1|2,r.flags|=64;else{if(e!==null&&(e.flags&64)!==0)e:for(e=r.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Tx(e,o);else if(e.tag===19)Tx(e,o);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break e;for(;e.sibling===null;){if(e.return===null||e.return===r)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}c&=1}if(Zr(qr,c),(r.mode&2)===0)r.memoizedState=null;else switch(m){case"forwards":for(o=r.child,m=null;o!==null;)e=o.alternate,e!==null&&Wp(e)===null&&(m=o),o=o.sibling;o=m,o===null?(m=r.child,r.child=null):(m=o.sibling,o.sibling=null),ig(r,!1,m,o,v,r.lastEffect);break;case"backwards":for(o=null,m=r.child,r.child=null;m!==null;){if(e=m.alternate,e!==null&&Wp(e)===null){r.child=m;break}e=m.sibling,m.sibling=o,o=m,m=e}ig(r,!0,o,null,v,r.lastEffect);break;case"together":ig(r,!1,null,null,void 0,r.lastEffect);break;default:r.memoizedState=null}return r.child}function Ba(e,r,o){if(e!==null&&(r.dependencies=e.dependencies),Uh|=r.lanes,(o&r.childLanes)!==0){if(e!==null&&r.child!==e.child)throw Error(We(153));if(r.child!==null){for(e=r.child,o=zs(e,e.pendingProps),r.child=o,o.return=r;e.sibling!==null;)e=e.sibling,o=o.sibling=zs(e,e.pendingProps),o.return=r;o.sibling=null}return r.child}return null}var Yb,Qg,Jb,Qb;Yb=function(e,r){for(var o=r.child;o!==null;){if(o.tag===5||o.tag===6)e.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return;o=o.return}o.sibling.return=o.return,o=o.sibling}};Qg=function(){};Jb=function(e,r,o,c){var m=e.memoizedProps;if(m!==c){e=r.stateNode,xl(ea.current);var v=null;switch(o){case"input":m=kg(e,m),c=kg(e,c),v=[];break;case"option":m=Ag(e,m),c=Ag(e,c),v=[];break;case"select":m=Br({},m,{value:void 0}),c=Br({},c,{value:void 0}),v=[];break;case"textarea":m=zg(e,m),c=zg(e,c),v=[];break;default:typeof m.onClick!="function"&&typeof c.onClick=="function"&&(e.onclick=Fp)}Dg(o,c);var T;o=null;for(j in m)if(!c.hasOwnProperty(j)&&m.hasOwnProperty(j)&&m[j]!=null)if(j==="style"){var l=m[j];for(T in l)l.hasOwnProperty(T)&&(o||(o={}),o[T]="")}else j!=="dangerouslySetInnerHTML"&&j!=="children"&&j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(fh.hasOwnProperty(j)?v||(v=[]):(v=v||[]).push(j,null));for(j in c){var D=c[j];if(l=m!=null?m[j]:void 0,c.hasOwnProperty(j)&&D!==l&&(D!=null||l!=null))if(j==="style")if(l){for(T in l)!l.hasOwnProperty(T)||D&&D.hasOwnProperty(T)||(o||(o={}),o[T]="");for(T in D)D.hasOwnProperty(T)&&l[T]!==D[T]&&(o||(o={}),o[T]=D[T])}else o||(v||(v=[]),v.push(j,o)),o=D;else j==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,l=l?l.__html:void 0,D!=null&&l!==D&&(v=v||[]).push(j,D)):j==="children"?typeof D!="string"&&typeof D!="number"||(v=v||[]).push(j,""+D):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&(fh.hasOwnProperty(j)?(D!=null&&j==="onScroll"&&Cr("scroll",e),v||l===D||(v=[])):typeof D=="object"&&D!==null&&D.$$typeof===Vy?D.toString():(v=v||[]).push(j,D))}o&&(v=v||[]).push("style",o);var j=v;(r.updateQueue=j)&&(r.flags|=4)}};Qb=function(e,r,o,c){o!==c&&(r.flags|=4)};function jc(e,r){if(!ta)switch(e.tailMode){case"hidden":r=e.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?e.tail=null:o.sibling=null;break;case"collapsed":o=e.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?r||e.tail===null?e.tail=null:e.tail.sibling=null:c.sibling=null}}function KE(e,r,o){var c=r.pendingProps;switch(r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Ti(r.type)&&Np(),null;case 3:return Fu(),Ar(Si),Ar(ei),c0(),c=r.stateNode,c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(e===null||e.child===null)&&(Kd(r)?r.flags|=4:c.hydrate||(r.flags|=256)),Qg(r),null;case 5:u0(r);var m=xl(kh.current);if(o=r.type,e!==null&&r.stateNode!=null)Jb(e,r,o,c,m),e.ref!==r.ref&&(r.flags|=128);else{if(!c){if(r.stateNode===null)throw Error(We(166));return null}if(e=xl(ea.current),Kd(r)){c=r.stateNode,o=r.type;var v=r.memoizedProps;switch(c[ms]=r,c[Op]=v,o){case"dialog":Cr("cancel",c),Cr("close",c);break;case"iframe":case"object":case"embed":Cr("load",c);break;case"video":case"audio":for(e=0;e<Xc.length;e++)Cr(Xc[e],c);break;case"source":Cr("error",c);break;case"img":case"image":case"link":Cr("error",c),Cr("load",c);break;case"details":Cr("toggle",c);break;case"input":Ev(c,v),Cr("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!v.multiple},Cr("invalid",c);break;case"textarea":Cv(c,v),Cr("invalid",c)}Dg(o,v),e=null;for(var T in v)v.hasOwnProperty(T)&&(m=v[T],T==="children"?typeof m=="string"?c.textContent!==m&&(e=["children",m]):typeof m=="number"&&c.textContent!==""+m&&(e=["children",""+m]):fh.hasOwnProperty(T)&&m!=null&&T==="onScroll"&&Cr("scroll",c));switch(o){case"input":Gd(c),kv(c,v,!0);break;case"textarea":Gd(c),Iv(c);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(c.onclick=Fp)}c=e,r.updateQueue=c,c!==null&&(r.flags|=4)}else{switch(T=m.nodeType===9?m:m.ownerDocument,e===Pg.html&&(e=q1(o)),e===Pg.html?o==="script"?(e=T.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof c.is=="string"?e=T.createElement(o,{is:c.is}):(e=T.createElement(o),o==="select"&&(T=e,c.multiple?T.multiple=!0:c.size&&(T.size=c.size))):e=T.createElementNS(e,o),e[ms]=r,e[Op]=c,Yb(e,r,!1,!1),r.stateNode=e,T=Rg(o,c),o){case"dialog":Cr("cancel",e),Cr("close",e),m=c;break;case"iframe":case"object":case"embed":Cr("load",e),m=c;break;case"video":case"audio":for(m=0;m<Xc.length;m++)Cr(Xc[m],e);m=c;break;case"source":Cr("error",e),m=c;break;case"img":case"image":case"link":Cr("error",e),Cr("load",e),m=c;break;case"details":Cr("toggle",e),m=c;break;case"input":Ev(e,c),m=kg(e,c),Cr("invalid",e);break;case"option":m=Ag(e,c);break;case"select":e._wrapperState={wasMultiple:!!c.multiple},m=Br({},c,{value:void 0}),Cr("invalid",e);break;case"textarea":Cv(e,c),m=zg(e,c),Cr("invalid",e);break;default:m=c}Dg(o,m);var l=m;for(v in l)if(l.hasOwnProperty(v)){var D=l[v];v==="style"?X1(e,D):v==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,D!=null&&Z1(e,D)):v==="children"?typeof D=="string"?(o!=="textarea"||D!=="")&&mh(e,D):typeof D=="number"&&mh(e,""+D):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(fh.hasOwnProperty(v)?D!=null&&v==="onScroll"&&Cr("scroll",e):D!=null&&By(e,v,D,T))}switch(o){case"input":Gd(e),kv(e,c,!1);break;case"textarea":Gd(e),Iv(e);break;case"option":c.value!=null&&e.setAttribute("value",""+ks(c.value));break;case"select":e.multiple=!!c.multiple,v=c.value,v!=null?xu(e,!!c.multiple,v,!1):c.defaultValue!=null&&xu(e,!!c.multiple,c.defaultValue,!0);break;default:typeof m.onClick=="function"&&(e.onclick=Fp)}kb(o,c)&&(r.flags|=4)}r.ref!==null&&(r.flags|=128)}return null;case 6:if(e&&r.stateNode!=null)Qb(e,r,e.memoizedProps,c);else{if(typeof c!="string"&&r.stateNode===null)throw Error(We(166));o=xl(kh.current),xl(ea.current),Kd(r)?(c=r.stateNode,o=r.memoizedProps,c[ms]=r,c.nodeValue!==o&&(r.flags|=4)):(c=(o.nodeType===9?o:o.ownerDocument).createTextNode(c),c[ms]=r,r.stateNode=c)}return null;case 13:return Ar(qr),c=r.memoizedState,(r.flags&64)!==0?(r.lanes=o,r):(c=c!==null,o=!1,e===null?r.memoizedProps.fallback!==void 0&&Kd(r):o=e.memoizedState!==null,c&&!o&&(r.mode&2)!==0&&(e===null&&r.memoizedProps.unstable_avoidThisFallback!==!0||(qr.current&1)!==0?Un===0&&(Un=3):((Un===0||Un===3)&&(Un=4),ui===null||(Uh&134217727)===0&&(qu&134217727)===0||ku(ui,Qn))),(c||o)&&(r.flags|=4),null);case 4:return Fu(),Qg(r),e===null&&Sb(r.stateNode.containerInfo),null;case 10:return s0(r),null;case 17:return Ti(r.type)&&Np(),null;case 19:if(Ar(qr),c=r.memoizedState,c===null)return null;if(v=(r.flags&64)!==0,T=c.rendering,T===null)if(v)jc(c,!1);else{if(Un!==0||e!==null&&(e.flags&64)!==0)for(e=r.child;e!==null;){if(T=Wp(e),T!==null){for(r.flags|=64,jc(c,!1),v=T.updateQueue,v!==null&&(r.updateQueue=v,r.flags|=4),c.lastEffect===null&&(r.firstEffect=null),r.lastEffect=c.lastEffect,c=o,o=r.child;o!==null;)v=o,e=c,v.flags&=2,v.nextEffect=null,v.firstEffect=null,v.lastEffect=null,T=v.alternate,T===null?(v.childLanes=0,v.lanes=e,v.child=null,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=T.childLanes,v.lanes=T.lanes,v.child=T.child,v.memoizedProps=T.memoizedProps,v.memoizedState=T.memoizedState,v.updateQueue=T.updateQueue,v.type=T.type,e=T.dependencies,v.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),o=o.sibling;return Zr(qr,qr.current&1|2),r.child}e=e.sibling}c.tail!==null&&Jn()>oy&&(r.flags|=64,v=!0,jc(c,!1),r.lanes=33554432)}else{if(!v)if(e=Wp(T),e!==null){if(r.flags|=64,v=!0,o=e.updateQueue,o!==null&&(r.updateQueue=o,r.flags|=4),jc(c,!0),c.tail===null&&c.tailMode==="hidden"&&!T.alternate&&!ta)return r=r.lastEffect=c.lastEffect,r!==null&&(r.nextEffect=null),null}else 2*Jn()-c.renderingStartTime>oy&&o!==1073741824&&(r.flags|=64,v=!0,jc(c,!1),r.lanes=33554432);c.isBackwards?(T.sibling=r.child,r.child=T):(o=c.last,o!==null?o.sibling=T:r.child=T,c.last=T)}return c.tail!==null?(o=c.tail,c.rendering=o,c.tail=o.sibling,c.lastEffect=r.lastEffect,c.renderingStartTime=Jn(),o.sibling=null,r=qr.current,Zr(qr,v?r&1|2:r&1),o):null;case 23:case 24:return x0(),e!==null&&e.memoizedState!==null!=(r.memoizedState!==null)&&c.mode!=="unstable-defer-without-hiding"&&(r.flags|=4),null}throw Error(We(156,r.tag))}function YE(e){switch(e.tag){case 1:Ti(e.type)&&Np();var r=e.flags;return r&4096?(e.flags=r&-4097|64,e):null;case 3:if(Fu(),Ar(Si),Ar(ei),c0(),r=e.flags,(r&64)!==0)throw Error(We(285));return e.flags=r&-4097|64,e;case 5:return u0(e),null;case 13:return Ar(qr),r=e.flags,r&4096?(e.flags=r&-4097|64,e):null;case 19:return Ar(qr),null;case 4:return Fu(),null;case 10:return s0(e),null;case 23:case 24:return x0(),null;default:return null}}function g0(e,r){try{var o="",c=r;do o+=PT(c),c=c.return;while(c);var m=o}catch(v){m=`
Error generating stack: `+v.message+`
`+v.stack}return{value:e,source:r,stack:m}}function ey(e,r){try{console.error(r.value)}catch(o){setTimeout(function(){throw o})}}var JE=typeof WeakMap=="function"?WeakMap:Map;function ew(e,r,o){o=bs(-1,o),o.tag=3,o.payload={element:null};var c=r.value;return o.callback=function(){Jp||(Jp=!0,ay=c),ey(e,r)},o}function tw(e,r,o){o=bs(-1,o),o.tag=3;var c=e.type.getDerivedStateFromError;if(typeof c=="function"){var m=r.value;o.payload=function(){return ey(e,r),c(m)}}var v=e.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(o.callback=function(){typeof c!="function"&&(Jo===null?Jo=new Set([this]):Jo.add(this),ey(e,r));var T=r.stack;this.componentDidCatch(r.value,{componentStack:T!==null?T:""})}),o}var QE=typeof WeakSet=="function"?WeakSet:Set;function kx(e){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(o){Es(e,o)}else r.current=null}function ek(e,r){switch(r.tag){case 0:case 11:case 15:case 22:return;case 1:if(r.flags&256&&e!==null){var o=e.memoizedProps,c=e.memoizedState;e=r.stateNode,r=e.getSnapshotBeforeUpdate(r.elementType===r.type?o:To(r.type,o),c),e.__reactInternalSnapshotBeforeUpdate=r}return;case 3:r.flags&256&&n0(r.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(We(163))}function tk(e,r,o){switch(o.tag){case 0:case 11:case 15:case 22:if(r=o.updateQueue,r=r!==null?r.lastEffect:null,r!==null){e=r=r.next;do{if((e.tag&3)===3){var c=e.create;e.destroy=c()}e=e.next}while(e!==r)}if(r=o.updateQueue,r=r!==null?r.lastEffect:null,r!==null){e=r=r.next;do{var m=e;c=m.next,m=m.tag,(m&4)!==0&&(m&1)!==0&&(cw(o,e),uk(o,e)),e=c}while(e!==r)}return;case 1:e=o.stateNode,o.flags&4&&(r===null?e.componentDidMount():(c=o.elementType===o.type?r.memoizedProps:To(o.type,r.memoizedProps),e.componentDidUpdate(c,r.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),r=o.updateQueue,r!==null&&sx(o,r,e);return;case 3:if(r=o.updateQueue,r!==null){if(e=null,o.child!==null)switch(o.child.tag){case 5:e=o.child.stateNode;break;case 1:e=o.child.stateNode}sx(o,r,e)}return;case 5:e=o.stateNode,r===null&&o.flags&4&&kb(o.type,o.memoizedProps)&&e.focus();return;case 6:return;case 4:return;case 12:return;case 13:o.memoizedState===null&&(o=o.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&ob(o))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(We(163))}function Cx(e,r){for(var o=e;;){if(o.tag===5){var c=o.stateNode;if(r)c=c.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none";else{c=o.stateNode;var m=o.memoizedProps.style;m=m!=null&&m.hasOwnProperty("display")?m.display:null,c.style.display=H1("display",m)}}else if(o.tag===6)o.stateNode.nodeValue=r?"":o.memoizedProps;else if((o.tag!==23&&o.tag!==24||o.memoizedState===null||o===e)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===e)break;for(;o.sibling===null;){if(o.return===null||o.return===e)return;o=o.return}o.sibling.return=o.return,o=o.sibling}}function Ix(e,r){if(Sl&&typeof Sl.onCommitFiberUnmount=="function")try{Sl.onCommitFiberUnmount(i0,r)}catch{}switch(r.tag){case 0:case 11:case 14:case 15:case 22:if(e=r.updateQueue,e!==null&&(e=e.lastEffect,e!==null)){var o=e=e.next;do{var c=o,m=c.destroy;if(c=c.tag,m!==void 0)if((c&4)!==0)cw(r,o);else{c=r;try{m()}catch(v){Es(c,v)}}o=o.next}while(o!==e)}break;case 1:if(kx(r),e=r.stateNode,typeof e.componentWillUnmount=="function")try{e.props=r.memoizedProps,e.state=r.memoizedState,e.componentWillUnmount()}catch(v){Es(r,v)}break;case 5:kx(r);break;case 4:rw(e,r)}}function Ax(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function zx(e){return e.tag===5||e.tag===3||e.tag===4}function Px(e){e:{for(var r=e.return;r!==null;){if(zx(r))break e;r=r.return}throw Error(We(160))}var o=r;switch(r=o.stateNode,o.tag){case 5:var c=!1;break;case 3:r=r.containerInfo,c=!0;break;case 4:r=r.containerInfo,c=!0;break;default:throw Error(We(161))}o.flags&16&&(mh(r,""),o.flags&=-17);e:t:for(o=e;;){for(;o.sibling===null;){if(o.return===null||zx(o.return)){o=null;break e}o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue t;o.child.return=o,o=o.child}if(!(o.flags&2)){o=o.stateNode;break e}}c?ty(e,o,r):ry(e,o,r)}function ty(e,r,o){var c=e.tag,m=c===5||c===6;if(m)e=m?e.stateNode:e.stateNode.instance,r?o.nodeType===8?o.parentNode.insertBefore(e,r):o.insertBefore(e,r):(o.nodeType===8?(r=o.parentNode,r.insertBefore(e,o)):(r=o,r.appendChild(e)),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=Fp));else if(c!==4&&(e=e.child,e!==null))for(ty(e,r,o),e=e.sibling;e!==null;)ty(e,r,o),e=e.sibling}function ry(e,r,o){var c=e.tag,m=c===5||c===6;if(m)e=m?e.stateNode:e.stateNode.instance,r?o.insertBefore(e,r):o.appendChild(e);else if(c!==4&&(e=e.child,e!==null))for(ry(e,r,o),e=e.sibling;e!==null;)ry(e,r,o),e=e.sibling}function rw(e,r){for(var o=r,c=!1,m,v;;){if(!c){c=o.return;e:for(;;){if(c===null)throw Error(We(160));switch(m=c.stateNode,c.tag){case 5:v=!1;break e;case 3:m=m.containerInfo,v=!0;break e;case 4:m=m.containerInfo,v=!0;break e}c=c.return}c=!0}if(o.tag===5||o.tag===6){e:for(var T=e,l=o,D=l;;)if(Ix(T,D),D.child!==null&&D.tag!==4)D.child.return=D,D=D.child;else{if(D===l)break e;for(;D.sibling===null;){if(D.return===null||D.return===l)break e;D=D.return}D.sibling.return=D.return,D=D.sibling}v?(T=m,l=o.stateNode,T.nodeType===8?T.parentNode.removeChild(l):T.removeChild(l)):m.removeChild(o.stateNode)}else if(o.tag===4){if(o.child!==null){m=o.stateNode.containerInfo,v=!0,o.child.return=o,o=o.child;continue}}else if(Ix(e,o),o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return;o=o.return,o.tag===4&&(c=!1)}o.sibling.return=o.return,o=o.sibling}}function og(e,r){switch(r.tag){case 0:case 11:case 14:case 15:case 22:var o=r.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var c=o=o.next;do(c.tag&3)===3&&(e=c.destroy,c.destroy=void 0,e!==void 0&&e()),c=c.next;while(c!==o)}return;case 1:return;case 5:if(o=r.stateNode,o!=null){c=r.memoizedProps;var m=e!==null?e.memoizedProps:c;e=r.type;var v=r.updateQueue;if(r.updateQueue=null,v!==null){for(o[Op]=c,e==="input"&&c.type==="radio"&&c.name!=null&&G1(o,c),Rg(e,m),r=Rg(e,c),m=0;m<v.length;m+=2){var T=v[m],l=v[m+1];T==="style"?X1(o,l):T==="dangerouslySetInnerHTML"?Z1(o,l):T==="children"?mh(o,l):By(o,T,l,r)}switch(e){case"input":Cg(o,c);break;case"textarea":W1(o,c);break;case"select":e=o._wrapperState.wasMultiple,o._wrapperState.wasMultiple=!!c.multiple,v=c.value,v!=null?xu(o,!!c.multiple,v,!1):e!==!!c.multiple&&(c.defaultValue!=null?xu(o,!!c.multiple,c.defaultValue,!0):xu(o,!!c.multiple,c.multiple?[]:"",!1))}}}return;case 6:if(r.stateNode===null)throw Error(We(162));r.stateNode.nodeValue=r.memoizedProps;return;case 3:o=r.stateNode,o.hydrate&&(o.hydrate=!1,ob(o.containerInfo));return;case 12:return;case 13:r.memoizedState!==null&&(v0=Jn(),Cx(r.child,!0)),Mx(r);return;case 19:Mx(r);return;case 17:return;case 23:case 24:Cx(r,r.memoizedState!==null);return}throw Error(We(163))}function Mx(e){var r=e.updateQueue;if(r!==null){e.updateQueue=null;var o=e.stateNode;o===null&&(o=e.stateNode=new QE),r.forEach(function(c){var m=dk.bind(null,e,c);o.has(c)||(o.add(c),c.then(m,m))})}}function rk(e,r){return e!==null&&(e=e.memoizedState,e===null||e.dehydrated!==null)?(r=r.memoizedState,r!==null&&r.dehydrated===null):!1}var nk=Math.ceil,Yp=Al.ReactCurrentDispatcher,y0=Al.ReactCurrentOwner,kt=0,ui=null,fn=null,Qn=0,Cl=0,ny=Ms(0),Un=0,xf=null,Wu=0,Uh=0,qu=0,_0=0,iy=null,v0=0,oy=1/0;function Zu(){oy=Jn()+500}var ht=null,Jp=!1,ay=null,Jo=null,As=!1,sh=null,Kc=90,sy=[],ly=[],Oa=null,lh=0,uy=null,wp=-1,Da=0,Sp=0,uh=null,Tp=!1;function Fi(){return(kt&48)!==0?Jn():wp!==-1?wp:wp=Jn()}function Ss(e){if(e=e.mode,(e&2)===0)return 1;if((e&4)===0)return Bu()===99?1:2;if(Da===0&&(Da=Wu),GE.transition!==0){Sp!==0&&(Sp=iy!==null?iy.pendingLanes:0),e=Da;var r=4186112&~Sp;return r&=-r,r===0&&(e=4186112&~e,r=e&-e,r===0&&(r=8192)),r}return e=Bu(),(kt&4)!==0&&e===98?e=Lp(12,Da):(e=ZT(e),e=Lp(e,Da)),e}function Ts(e,r,o){if(50<lh)throw lh=0,uy=null,Error(We(185));if(e=bf(e,r),e===null)return null;pf(e,r,o),e===ui&&(qu|=r,Un===4&&ku(e,Qn));var c=Bu();r===1?(kt&8)!==0&&(kt&48)===0?cy(e):(io(e,o),kt===0&&(Zu(),na())):((kt&4)===0||c!==98&&c!==99||(Oa===null?Oa=new Set([e]):Oa.add(e)),io(e,o)),iy=e}function bf(e,r){e.lanes|=r;var o=e.alternate;for(o!==null&&(o.lanes|=r),o=e,e=e.return;e!==null;)e.childLanes|=r,o=e.alternate,o!==null&&(o.childLanes|=r),o=e,e=e.return;return o.tag===3?o.stateNode:null}function io(e,r){for(var o=e.callbackNode,c=e.suspendedLanes,m=e.pingedLanes,v=e.expirationTimes,T=e.pendingLanes;0<T;){var l=31-Cs(T),D=1<<l,j=v[l];if(j===-1){if((D&c)===0||(D&m)!==0){j=r,hu(D);var oe=Tr;v[l]=10<=oe?j+250:6<=oe?j+5e3:-1}}else j<=r&&(e.expiredLanes|=D);T&=~D}if(c=vh(e,e===ui?Qn:0),r=Tr,c===0)o!==null&&(o!==eg&&Wg(o),e.callbackNode=null,e.callbackPriority=0);else{if(o!==null){if(e.callbackPriority===r)return;o!==eg&&Wg(o)}r===15?(o=cy.bind(null,e),Ma===null?(Ma=[o],bp=o0(_f,Rb)):Ma.push(o),o=eg):r===14?o=Sh(99,cy.bind(null,e)):(o=HT(r),o=Sh(o,nw.bind(null,e))),e.callbackPriority=r,e.callbackNode=o}}function nw(e){if(wp=-1,Sp=Da=0,(kt&48)!==0)throw Error(We(327));var r=e.callbackNode;if(Ds()&&e.callbackNode!==r)return null;var o=vh(e,e===ui?Qn:0);if(o===0)return null;var c=o,m=kt;kt|=16;var v=sw();(ui!==e||Qn!==c)&&(Zu(),Cu(e,c));do try{ak();break}catch(l){aw(e,l)}while(1);if(a0(),Yp.current=v,kt=m,fn!==null?c=0:(ui=null,Qn=0,c=Un),(Wu&qu)!==0)Cu(e,0);else if(c!==0){if(c===2&&(kt|=64,e.hydrate&&(e.hydrate=!1,n0(e.containerInfo)),o=db(e),o!==0&&(c=Yc(e,o))),c===1)throw r=xf,Cu(e,0),ku(e,o),io(e,Jn()),r;switch(e.finishedWork=e.current.alternate,e.finishedLanes=o,c){case 0:case 1:throw Error(We(345));case 2:pl(e);break;case 3:if(ku(e,o),(o&62914560)===o&&(c=v0+500-Jn(),10<c)){if(vh(e,0)!==0)break;if(m=e.suspendedLanes,(m&o)!==o){Fi(),e.pingedLanes|=e.suspendedLanes&m;break}e.timeoutHandle=Qv(pl.bind(null,e),c);break}pl(e);break;case 4:if(ku(e,o),(o&4186112)===o)break;for(c=e.eventTimes,m=-1;0<o;){var T=31-Cs(o);v=1<<T,T=c[T],T>m&&(m=T),o&=~v}if(o=m,o=Jn()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*nk(o/1960))-o,10<o){e.timeoutHandle=Qv(pl.bind(null,e),o);break}pl(e);break;case 5:pl(e);break;default:throw Error(We(329))}}return io(e,Jn()),e.callbackNode===r?nw.bind(null,e):null}function ku(e,r){for(r&=~_0,r&=~qu,e.suspendedLanes|=r,e.pingedLanes&=~r,e=e.expirationTimes;0<r;){var o=31-Cs(r),c=1<<o;e[o]=-1,r&=~c}}function cy(e){if((kt&48)!==0)throw Error(We(327));if(Ds(),e===ui&&(e.expiredLanes&Qn)!==0){var r=Qn,o=Yc(e,r);(Wu&qu)!==0&&(r=vh(e,r),o=Yc(e,r))}else r=vh(e,0),o=Yc(e,r);if(e.tag!==0&&o===2&&(kt|=64,e.hydrate&&(e.hydrate=!1,n0(e.containerInfo)),r=db(e),r!==0&&(o=Yc(e,r))),o===1)throw o=xf,Cu(e,0),ku(e,r),io(e,Jn()),o;return e.finishedWork=e.current.alternate,e.finishedLanes=r,pl(e),io(e,Jn()),null}function ik(){if(Oa!==null){var e=Oa;Oa=null,e.forEach(function(r){r.expiredLanes|=24&r.pendingLanes,io(r,Jn())})}na()}function iw(e,r){var o=kt;kt|=1;try{return e(r)}finally{kt=o,kt===0&&(Zu(),na())}}function ow(e,r){var o=kt;kt&=-2,kt|=8;try{return e(r)}finally{kt=o,kt===0&&(Zu(),na())}}function Jd(e,r){Zr(ny,Cl),Cl|=r,Wu|=r}function x0(){Cl=ny.current,Ar(ny)}function Cu(e,r){e.finishedWork=null,e.finishedLanes=0;var o=e.timeoutHandle;if(o!==-1&&(e.timeoutHandle=-1,OE(o)),fn!==null)for(o=fn.return;o!==null;){var c=o;switch(c.tag){case 1:c=c.type.childContextTypes,c!=null&&Np();break;case 3:Fu(),Ar(Si),Ar(ei),c0();break;case 5:u0(c);break;case 4:Fu();break;case 13:Ar(qr);break;case 19:Ar(qr);break;case 10:s0(c);break;case 23:case 24:x0()}o=o.return}ui=e,fn=zs(e.current,null),Qn=Cl=Wu=r,Un=0,xf=null,_0=qu=Uh=0}function aw(e,r){do{var o=fn;try{if(a0(),oh.current=Kp,qp){for(var c=Qr.memoizedState;c!==null;){var m=c.queue;m!==null&&(m.pending=null),c=c.next}qp=!1}if(Ch=0,$n=Yn=Qr=null,ah=!1,y0.current=null,o===null||o.return===null){Un=1,xf=r,fn=null;break}e:{var v=e,T=o.return,l=o,D=r;if(r=Qn,l.flags|=2048,l.firstEffect=l.lastEffect=null,D!==null&&typeof D=="object"&&typeof D.then=="function"){var j=D;if((l.mode&2)===0){var oe=l.alternate;oe?(l.updateQueue=oe.updateQueue,l.memoizedState=oe.memoizedState,l.lanes=oe.lanes):(l.updateQueue=null,l.memoizedState=null)}var ne=(qr.current&1)!==0,U=T;do{var Se;if(Se=U.tag===13){var Ae=U.memoizedState;if(Ae!==null)Se=Ae.dehydrated!==null;else{var _e=U.memoizedProps;Se=_e.fallback===void 0?!1:_e.unstable_avoidThisFallback!==!0?!0:!ne}}if(Se){var re=U.updateQueue;if(re===null){var H=new Set;H.add(j),U.updateQueue=H}else re.add(j);if((U.mode&2)===0){if(U.flags|=64,l.flags|=16384,l.flags&=-2981,l.tag===1)if(l.alternate===null)l.tag=17;else{var ee=bs(-1,1);ee.tag=2,ws(l,ee)}l.lanes|=1;break e}D=void 0,l=r;var fe=v.pingCache;if(fe===null?(fe=v.pingCache=new JE,D=new Set,fe.set(j,D)):(D=fe.get(j),D===void 0&&(D=new Set,fe.set(j,D))),!D.has(l)){D.add(l);var be=hk.bind(null,v,j,l);j.then(be,be)}U.flags|=4096,U.lanes=r;break e}U=U.return}while(U!==null);D=Error((vu(l.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}Un!==5&&(Un=2),D=g0(D,l),U=T;do{switch(U.tag){case 3:v=D,U.flags|=4096,r&=-r,U.lanes|=r;var Ne=ew(U,v,r);ax(U,Ne);break e;case 1:v=D;var Re=U.type,Le=U.stateNode;if((U.flags&64)===0&&(typeof Re.getDerivedStateFromError=="function"||Le!==null&&typeof Le.componentDidCatch=="function"&&(Jo===null||!Jo.has(Le)))){U.flags|=4096,r&=-r,U.lanes|=r;var rt=tw(U,v,r);ax(U,rt);break e}}U=U.return}while(U!==null)}uw(o)}catch(Je){r=Je,fn===o&&o!==null&&(fn=o=o.return);continue}break}while(1)}function sw(){var e=Yp.current;return Yp.current=Kp,e===null?Kp:e}function Yc(e,r){var o=kt;kt|=16;var c=sw();ui===e&&Qn===r||Cu(e,r);do try{ok();break}catch(m){aw(e,m)}while(1);if(a0(),kt=o,Yp.current=c,fn!==null)throw Error(We(261));return ui=null,Qn=0,Un}function ok(){for(;fn!==null;)lw(fn)}function ak(){for(;fn!==null&&!UE();)lw(fn)}function lw(e){var r=hw(e.alternate,e,Cl);e.memoizedProps=e.pendingProps,r===null?uw(e):fn=r,y0.current=null}function uw(e){var r=e;do{var o=r.alternate;if(e=r.return,(r.flags&2048)===0){if(o=KE(o,r,Cl),o!==null){fn=o;return}if(o=r,o.tag!==24&&o.tag!==23||o.memoizedState===null||(Cl&1073741824)!==0||(o.mode&4)===0){for(var c=0,m=o.child;m!==null;)c|=m.lanes|m.childLanes,m=m.sibling;o.childLanes=c}e!==null&&(e.flags&2048)===0&&(e.firstEffect===null&&(e.firstEffect=r.firstEffect),r.lastEffect!==null&&(e.lastEffect!==null&&(e.lastEffect.nextEffect=r.firstEffect),e.lastEffect=r.lastEffect),1<r.flags&&(e.lastEffect!==null?e.lastEffect.nextEffect=r:e.firstEffect=r,e.lastEffect=r))}else{if(o=YE(r),o!==null){o.flags&=2047,fn=o;return}e!==null&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(r=r.sibling,r!==null){fn=r;return}fn=r=e}while(r!==null);Un===0&&(Un=5)}function pl(e){var r=Bu();return kl(99,sk.bind(null,e,r)),null}function sk(e,r){do Ds();while(sh!==null);if((kt&48)!==0)throw Error(We(327));var o=e.finishedWork;if(o===null)return null;if(e.finishedWork=null,e.finishedLanes=0,o===e.current)throw Error(We(177));e.callbackNode=null;var c=o.lanes|o.childLanes,m=c,v=e.pendingLanes&~m;e.pendingLanes=m,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=m,e.mutableReadLanes&=m,e.entangledLanes&=m,m=e.entanglements;for(var T=e.eventTimes,l=e.expirationTimes;0<v;){var D=31-Cs(v),j=1<<D;m[D]=0,T[D]=-1,l[D]=-1,v&=~j}if(Oa!==null&&(c&24)===0&&Oa.has(e)&&Oa.delete(e),e===ui&&(fn=ui=null,Qn=0),1<o.flags?o.lastEffect!==null?(o.lastEffect.nextEffect=o,c=o.firstEffect):c=o:c=o.firstEffect,c!==null){if(m=kt,kt|=32,y0.current=null,Ym=yp,T=qv(),$g(T)){if("selectionStart"in T)l={start:T.selectionStart,end:T.selectionEnd};else e:if(l=(l=T.ownerDocument)&&l.defaultView||window,(j=l.getSelection&&l.getSelection())&&j.rangeCount!==0){l=j.anchorNode,v=j.anchorOffset,D=j.focusNode,j=j.focusOffset;try{l.nodeType,D.nodeType}catch{l=null;break e}var oe=0,ne=-1,U=-1,Se=0,Ae=0,_e=T,re=null;t:for(;;){for(var H;_e!==l||v!==0&&_e.nodeType!==3||(ne=oe+v),_e!==D||j!==0&&_e.nodeType!==3||(U=oe+j),_e.nodeType===3&&(oe+=_e.nodeValue.length),(H=_e.firstChild)!==null;)re=_e,_e=H;for(;;){if(_e===T)break t;if(re===l&&++Se===v&&(ne=oe),re===D&&++Ae===j&&(U=oe),(H=_e.nextSibling)!==null)break;_e=re,re=_e.parentNode}_e=H}l=ne===-1||U===-1?null:{start:ne,end:U}}else l=null;l=l||{start:0,end:0}}else l=null;Jm={focusedElem:T,selectionRange:l},yp=!1,uh=null,Tp=!1,ht=c;do try{lk()}catch(Je){if(ht===null)throw Error(We(330));Es(ht,Je),ht=ht.nextEffect}while(ht!==null);uh=null,ht=c;do try{for(T=e;ht!==null;){var ee=ht.flags;if(ee&16&&mh(ht.stateNode,""),ee&128){var fe=ht.alternate;if(fe!==null){var be=fe.ref;be!==null&&(typeof be=="function"?be(null):be.current=null)}}switch(ee&1038){case 2:Px(ht),ht.flags&=-3;break;case 6:Px(ht),ht.flags&=-3,og(ht.alternate,ht);break;case 1024:ht.flags&=-1025;break;case 1028:ht.flags&=-1025,og(ht.alternate,ht);break;case 4:og(ht.alternate,ht);break;case 8:l=ht,rw(T,l);var Ne=l.alternate;Ax(l),Ne!==null&&Ax(Ne)}ht=ht.nextEffect}}catch(Je){if(ht===null)throw Error(We(330));Es(ht,Je),ht=ht.nextEffect}while(ht!==null);if(be=Jm,fe=qv(),ee=be.focusedElem,T=be.selectionRange,fe!==ee&&ee&&ee.ownerDocument&&xb(ee.ownerDocument.documentElement,ee)){for(T!==null&&$g(ee)&&(fe=T.start,be=T.end,be===void 0&&(be=fe),"selectionStart"in ee?(ee.selectionStart=fe,ee.selectionEnd=Math.min(be,ee.value.length)):(be=(fe=ee.ownerDocument||document)&&fe.defaultView||window,be.getSelection&&(be=be.getSelection(),l=ee.textContent.length,Ne=Math.min(T.start,l),T=T.end===void 0?Ne:Math.min(T.end,l),!be.extend&&Ne>T&&(l=T,T=Ne,Ne=l),l=Wv(ee,Ne),v=Wv(ee,T),l&&v&&(be.rangeCount!==1||be.anchorNode!==l.node||be.anchorOffset!==l.offset||be.focusNode!==v.node||be.focusOffset!==v.offset)&&(fe=fe.createRange(),fe.setStart(l.node,l.offset),be.removeAllRanges(),Ne>T?(be.addRange(fe),be.extend(v.node,v.offset)):(fe.setEnd(v.node,v.offset),be.addRange(fe)))))),fe=[],be=ee;be=be.parentNode;)be.nodeType===1&&fe.push({element:be,left:be.scrollLeft,top:be.scrollTop});for(typeof ee.focus=="function"&&ee.focus(),ee=0;ee<fe.length;ee++)be=fe[ee],be.element.scrollLeft=be.left,be.element.scrollTop=be.top}yp=!!Ym,Jm=Ym=null,e.current=o,ht=c;do try{for(ee=e;ht!==null;){var Re=ht.flags;if(Re&36&&tk(ee,ht.alternate,ht),Re&128){fe=void 0;var Le=ht.ref;if(Le!==null){var rt=ht.stateNode;switch(ht.tag){case 5:fe=rt;break;default:fe=rt}typeof Le=="function"?Le(fe):Le.current=fe}}ht=ht.nextEffect}}catch(Je){if(ht===null)throw Error(We(330));Es(ht,Je),ht=ht.nextEffect}while(ht!==null);ht=null,jE(),kt=m}else e.current=o;if(As)As=!1,sh=e,Kc=r;else for(ht=c;ht!==null;)r=ht.nextEffect,ht.nextEffect=null,ht.flags&8&&(Re=ht,Re.sibling=null,Re.stateNode=null),ht=r;if(c=e.pendingLanes,c===0&&(Jo=null),c===1?e===uy?lh++:(lh=0,uy=e):lh=0,o=o.stateNode,Sl&&typeof Sl.onCommitFiberRoot=="function")try{Sl.onCommitFiberRoot(i0,o,void 0,(o.current.flags&64)===64)}catch{}if(io(e,Jn()),Jp)throw Jp=!1,e=ay,ay=null,e;return(kt&8)!==0||na(),null}function lk(){for(;ht!==null;){var e=ht.alternate;Tp||uh===null||((ht.flags&8)!==0?Pv(ht,uh)&&(Tp=!0):ht.tag===13&&rk(e,ht)&&Pv(ht,uh)&&(Tp=!0));var r=ht.flags;(r&256)!==0&&ek(e,ht),(r&512)===0||As||(As=!0,Sh(97,function(){return Ds(),null})),ht=ht.nextEffect}}function Ds(){if(Kc!==90){var e=97<Kc?97:Kc;return Kc=90,kl(e,ck)}return!1}function uk(e,r){sy.push(r,e),As||(As=!0,Sh(97,function(){return Ds(),null}))}function cw(e,r){ly.push(r,e),As||(As=!0,Sh(97,function(){return Ds(),null}))}function ck(){if(sh===null)return!1;var e=sh;if(sh=null,(kt&48)!==0)throw Error(We(331));var r=kt;kt|=32;var o=ly;ly=[];for(var c=0;c<o.length;c+=2){var m=o[c],v=o[c+1],T=m.destroy;if(m.destroy=void 0,typeof T=="function")try{T()}catch(D){if(v===null)throw Error(We(330));Es(v,D)}}for(o=sy,sy=[],c=0;c<o.length;c+=2){m=o[c],v=o[c+1];try{var l=m.create;m.destroy=l()}catch(D){if(v===null)throw Error(We(330));Es(v,D)}}for(l=e.current.firstEffect;l!==null;)e=l.nextEffect,l.nextEffect=null,l.flags&8&&(l.sibling=null,l.stateNode=null),l=e;return kt=r,na(),!0}function Dx(e,r,o){r=g0(o,r),r=ew(e,r,1),ws(e,r),r=Fi(),e=bf(e,1),e!==null&&(pf(e,1,r),io(e,r))}function Es(e,r){if(e.tag===3)Dx(e,e,r);else for(var o=e.return;o!==null;){if(o.tag===3){Dx(o,e,r);break}else if(o.tag===1){var c=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Jo===null||!Jo.has(c))){e=g0(r,e);var m=tw(o,e,1);if(ws(o,m),m=Fi(),o=bf(o,1),o!==null)pf(o,1,m),io(o,m);else if(typeof c.componentDidCatch=="function"&&(Jo===null||!Jo.has(c)))try{c.componentDidCatch(r,e)}catch{}break}}o=o.return}}function hk(e,r,o){var c=e.pingCache;c!==null&&c.delete(r),r=Fi(),e.pingedLanes|=e.suspendedLanes&o,ui===e&&(Qn&o)===o&&(Un===4||Un===3&&(Qn&62914560)===Qn&&500>Jn()-v0?Cu(e,0):_0|=o),io(e,r)}function dk(e,r){var o=e.stateNode;o!==null&&o.delete(r),r=0,r===0&&(r=e.mode,(r&2)===0?r=1:(r&4)===0?r=Bu()===99?1:2:(Da===0&&(Da=Wu),r=du(62914560&~Da),r===0&&(r=4194304))),o=Fi(),e=bf(e,r),e!==null&&(pf(e,r,o),io(e,o))}var hw;hw=function(e,r,o){var c=r.lanes;if(e!==null)if(e.memoizedProps!==r.pendingProps||Si.current)Eo=!0;else if((o&c)!==0)Eo=(e.flags&16384)!==0;else{switch(Eo=!1,r.tag){case 3:vx(r),rg();break;case 5:cx(r);break;case 1:Ti(r.type)&&xp(r);break;case 4:Hg(r,r.stateNode.containerInfo);break;case 10:c=r.memoizedProps.value;var m=r.type._context;Zr($p,m._currentValue),m._currentValue=c;break;case 13:if(r.memoizedState!==null)return(o&r.child.childLanes)!==0?xx(e,r,o):(Zr(qr,qr.current&1),r=Ba(e,r,o),r!==null?r.sibling:null);Zr(qr,qr.current&1);break;case 19:if(c=(o&r.childLanes)!==0,(e.flags&64)!==0){if(c)return Ex(e,r,o);r.flags|=64}if(m=r.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),Zr(qr,qr.current),c)break;return null;case 23:case 24:return r.lanes=0,ng(e,r,o)}return Ba(e,r,o)}else Eo=!1;switch(r.lanes=0,r.tag){case 2:if(c=r.type,e!==null&&(e.alternate=null,r.alternate=null,r.flags|=2),e=r.pendingProps,m=Lu(r,ei.current),Tu(r,o),m=d0(null,r,c,e,m,o),r.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0){if(r.tag=1,r.memoizedState=null,r.updateQueue=null,Ti(c)){var v=!0;xp(r)}else v=!1;r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,l0(r);var T=c.getDerivedStateFromProps;typeof T=="function"&&jp(r,c,T,e),m.updater=vf,r.stateNode=m,m._reactInternals=r,Zg(r,c,e,o),r=Jg(null,r,c,!0,v,o)}else r.tag=0,bi(null,r,m,o),r=r.child;return r;case 16:m=r.elementType;e:{switch(e!==null&&(e.alternate=null,r.alternate=null,r.flags|=2),e=r.pendingProps,v=m._init,m=v(m._payload),r.type=m,v=r.tag=fk(m),e=To(m,e),v){case 0:r=Yg(null,r,m,e,o);break e;case 1:r=_x(null,r,m,e,o);break e;case 11:r=gx(null,r,m,e,o);break e;case 14:r=yx(null,r,m,To(m.type,e),c,o);break e}throw Error(We(306,m,""))}return r;case 0:return c=r.type,m=r.pendingProps,m=r.elementType===c?m:To(c,m),Yg(e,r,c,m,o);case 1:return c=r.type,m=r.pendingProps,m=r.elementType===c?m:To(c,m),_x(e,r,c,m,o);case 3:if(vx(r),c=r.updateQueue,e===null||c===null)throw Error(We(282));if(c=r.pendingProps,m=r.memoizedState,m=m!==null?m.element:null,Bb(e,r),Th(r,c,null,o),c=r.memoizedState.element,c===m)rg(),r=Ba(e,r,o);else{if(m=r.stateNode,(v=m.hydrate)&&(gs=Su(r.stateNode.containerInfo.firstChild),La=r,v=ta=!0),v){if(e=m.mutableSourceEagerHydrationData,e!=null)for(m=0;m<e.length;m+=2)v=e[m],v._workInProgressVersionPrimary=e[m+1],Eu.push(v);for(o=$b(r,null,c,o),r.child=o;o;)o.flags=o.flags&-3|1024,o=o.sibling}else bi(e,r,c,o),rg();r=r.child}return r;case 5:return cx(r),e===null&&Xg(r),c=r.type,m=r.pendingProps,v=e!==null?e.memoizedProps:null,T=m.children,jg(c,m)?T=null:v!==null&&jg(c,v)&&(r.flags|=16),Kb(e,r),bi(e,r,T,o),r.child;case 6:return e===null&&Xg(r),null;case 13:return xx(e,r,o);case 4:return Hg(r,r.stateNode.containerInfo),c=r.pendingProps,e===null?r.child=Gp(r,null,c,o):bi(e,r,c,o),r.child;case 11:return c=r.type,m=r.pendingProps,m=r.elementType===c?m:To(c,m),gx(e,r,c,m,o);case 7:return bi(e,r,r.pendingProps,o),r.child;case 8:return bi(e,r,r.pendingProps.children,o),r.child;case 12:return bi(e,r,r.pendingProps.children,o),r.child;case 10:e:{c=r.type._context,m=r.pendingProps,T=r.memoizedProps,v=m.value;var l=r.type._context;if(Zr($p,l._currentValue),l._currentValue=v,T!==null)if(l=T.value,v=eo(l,v)?0:(typeof c._calculateChangedBits=="function"?c._calculateChangedBits(l,v):1073741823)|0,v===0){if(T.children===m.children&&!Si.current){r=Ba(e,r,o);break e}}else for(l=r.child,l!==null&&(l.return=r);l!==null;){var D=l.dependencies;if(D!==null){T=l.child;for(var j=D.firstContext;j!==null;){if(j.context===c&&(j.observedBits&v)!==0){l.tag===1&&(j=bs(-1,o&-o),j.tag=2,ws(l,j)),l.lanes|=o,j=l.alternate,j!==null&&(j.lanes|=o),Lb(l.return,o),D.lanes|=o;break}j=j.next}}else T=l.tag===10&&l.type===r.type?null:l.child;if(T!==null)T.return=l;else for(T=l;T!==null;){if(T===r){T=null;break}if(l=T.sibling,l!==null){l.return=T.return,T=l;break}T=T.return}l=T}bi(e,r,m.children,o),r=r.child}return r;case 9:return m=r.type,v=r.pendingProps,c=v.children,Tu(r,o),m=no(m,v.unstable_observedBits),c=c(m),r.flags|=1,bi(e,r,c,o),r.child;case 14:return m=r.type,v=To(m,r.pendingProps),v=To(m.type,v),yx(e,r,m,v,c,o);case 15:return Xb(e,r,r.type,r.pendingProps,c,o);case 17:return c=r.type,m=r.pendingProps,m=r.elementType===c?m:To(c,m),e!==null&&(e.alternate=null,r.alternate=null,r.flags|=2),r.tag=1,Ti(c)?(e=!0,xp(r)):e=!1,Tu(r,o),Ob(r,c,m),Zg(r,c,m,o),Jg(null,r,c,!0,e,o);case 19:return Ex(e,r,o);case 23:return ng(e,r,o);case 24:return ng(e,r,o)}throw Error(We(156,r.tag))};function pk(e,r,o,c){this.tag=e,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function to(e,r,o,c){return new pk(e,r,o,c)}function b0(e){return e=e.prototype,!(!e||!e.isReactComponent)}function fk(e){if(typeof e=="function")return b0(e)?1:0;if(e!=null){if(e=e.$$typeof,e===cf)return 11;if(e===hf)return 14}return 2}function zs(e,r){var o=e.alternate;return o===null?(o=to(e.tag,r,e.key,e.mode),o.elementType=e.elementType,o.type=e.type,o.stateNode=e.stateNode,o.alternate=e,e.alternate=o):(o.pendingProps=r,o.type=e.type,o.flags=0,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null),o.childLanes=e.childLanes,o.lanes=e.lanes,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,r=e.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=e.sibling,o.index=e.index,o.ref=e.ref,o}function Ep(e,r,o,c,m,v){var T=2;if(c=e,typeof e=="function")b0(e)&&(T=1);else if(typeof e=="string")T=5;else e:switch(e){case ps:return Iu(o.children,m,v,r);case U1:T=8,m|=16;break;case Fy:T=8,m|=1;break;case Jc:return e=to(12,o,r,m|8),e.elementType=Jc,e.type=Jc,e.lanes=v,e;case Qc:return e=to(13,o,r,m),e.type=Qc,e.elementType=Qc,e.lanes=v,e;case Pp:return e=to(19,o,r,m),e.elementType=Pp,e.lanes=v,e;case jy:return w0(o,m,v,r);case Eg:return e=to(24,o,r,m),e.elementType=Eg,e.lanes=v,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Oy:T=10;break e;case Ny:T=9;break e;case cf:T=11;break e;case hf:T=14;break e;case $y:T=16,c=null;break e;case Uy:T=22;break e}throw Error(We(130,e==null?e:typeof e,""))}return r=to(T,o,r,m),r.elementType=e,r.type=c,r.lanes=v,r}function Iu(e,r,o,c){return e=to(7,e,c,r),e.lanes=o,e}function w0(e,r,o,c){return e=to(23,e,c,r),e.elementType=jy,e.lanes=o,e}function ag(e,r,o){return e=to(6,e,null,r),e.lanes=o,e}function sg(e,r,o){return r=to(4,e.children!==null?e.children:[],e.key,r),r.lanes=o,r.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},r}function mk(e,r,o){this.tag=r,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=o,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Gm(0),this.expirationTimes=Gm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gm(0),this.mutableSourceEagerHydrationData=null}function gk(e,r,o){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:yl,key:c==null?null:""+c,children:e,containerInfo:r,implementation:o}}function Qp(e,r,o,c){var m=r.current,v=Fi(),T=Ss(m);e:if(o){o=o._reactInternals;t:{if(zl(o)!==o||o.tag!==1)throw Error(We(170));var l=o;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(Ti(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(l!==null);throw Error(We(171))}if(o.tag===1){var D=o.type;if(Ti(D)){o=Ib(o,D,l);break e}}o=l}else o=Is;return r.context===null?r.context=o:r.pendingContext=o,r=bs(v,T),r.payload={element:e},c=c===void 0?null:c,c!==null&&(r.callback=c),ws(m,r),Ts(m,T,v),T}function lg(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Rx(e,r){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var o=e.retryLane;e.retryLane=o!==0&&o<r?o:r}}function S0(e,r){Rx(e,r),(e=e.alternate)&&Rx(e,r)}function yk(){return null}function T0(e,r,o){var c=o!=null&&o.hydrationOptions!=null&&o.hydrationOptions.mutableSources||null;if(o=new mk(e,r,o!=null&&o.hydrate===!0),r=to(3,null,null,r===2?7:r===1?3:0),o.current=r,r.stateNode=o,l0(r),e[Gu]=o.current,Sb(e.nodeType===8?e.parentNode:e),c)for(e=0;e<c.length;e++){r=c[e];var m=r._getVersion;m=m(r._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[r,m]:o.mutableSourceEagerHydrationData.push(r,m)}this._internalRoot=o}T0.prototype.render=function(e){Qp(e,this._internalRoot,null,null)};T0.prototype.unmount=function(){var e=this._internalRoot,r=e.containerInfo;Qp(null,e,null,function(){r[Gu]=null})};function Vh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function _k(e,r){if(r||(r=e?e.nodeType===9?e.documentElement:e.firstChild:null,r=!(!r||r.nodeType!==1||!r.hasAttribute("data-reactroot"))),!r)for(var o;o=e.lastChild;)e.removeChild(o);return new T0(e,0,r?{hydrate:!0}:void 0)}function wf(e,r,o,c,m){var v=o._reactRootContainer;if(v){var T=v._internalRoot;if(typeof m=="function"){var l=m;m=function(){var j=lg(T);l.call(j)}}Qp(r,T,e,m)}else{if(v=o._reactRootContainer=_k(o,c),T=v._internalRoot,typeof m=="function"){var D=m;m=function(){var j=lg(T);D.call(j)}}ow(function(){Qp(r,T,e,m)})}return lg(T)}rb=function(e){if(e.tag===13){var r=Fi();Ts(e,4,r),S0(e,4)}};Hy=function(e){if(e.tag===13){var r=Fi();Ts(e,67108864,r),S0(e,67108864)}};nb=function(e){if(e.tag===13){var r=Fi(),o=Ss(e);Ts(e,o,r),S0(e,o)}};ib=function(e,r){return r()};Lg=function(e,r,o){switch(r){case"input":if(Cg(e,o),r=o.name,o.type==="radio"&&r!=null){for(o=e;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<o.length;r++){var c=o[r];if(c!==e&&c.form===e.form){var m=yf(c);if(!m)throw Error(We(90));j1(c),Cg(c,m)}}}break;case"textarea":W1(e,o);break;case"select":r=o.value,r!=null&&xu(e,!!o.multiple,r,!1)}};Wy=iw;J1=function(e,r,o,c,m){var v=kt;kt|=4;try{return kl(98,e.bind(null,r,o,c,m))}finally{kt=v,kt===0&&(Zu(),na())}};qy=function(){(kt&49)===0&&(ik(),Ds())};Q1=function(e,r){var o=kt;kt|=2;try{return e(r)}finally{kt=o,kt===0&&(Zu(),na())}};function dw(e,r){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vh(r))throw Error(We(200));return gk(e,r,null,o)}var vk={Events:[Nh,gu,yf,K1,Y1,Ds,{current:!1}]},Gc={findFiberByHostInstance:vl,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},xk={bundleType:Gc.bundleType,version:Gc.version,rendererPackageName:Gc.rendererPackageName,rendererConfig:Gc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Al.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=tb(e),e===null?null:e.stateNode},findFiberByHostInstance:Gc.findFiberByHostInstance||yk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var Qd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qd.isDisabled&&Qd.supportsFiber)try{i0=Qd.inject(xk),Sl=Qd}catch{}}oo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vk;oo.createPortal=dw;oo.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var r=e._reactInternals;if(r===void 0)throw typeof e.render=="function"?Error(We(188)):Error(We(268,Object.keys(e)));return e=tb(r),e=e===null?null:e.stateNode,e};oo.flushSync=function(e,r){var o=kt;if((o&48)!==0)return e(r);kt|=1;try{if(e)return kl(99,e.bind(null,r))}finally{kt=o,na()}};oo.hydrate=function(e,r,o){if(!Vh(r))throw Error(We(200));return wf(null,e,r,!0,o)};oo.render=function(e,r,o){if(!Vh(r))throw Error(We(200));return wf(null,e,r,!1,o)};oo.unmountComponentAtNode=function(e){if(!Vh(e))throw Error(We(40));return e._reactRootContainer?(ow(function(){wf(null,null,e,!1,function(){e._reactRootContainer=null,e[Gu]=null})}),!0):!1};oo.unstable_batchedUpdates=iw;oo.unstable_createPortal=function(e,r){return dw(e,r,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};oo.unstable_renderSubtreeIntoContainer=function(e,r,o,c){if(!Vh(o))throw Error(We(200));if(e==null||e._reactInternals===void 0)throw Error(We(38));return wf(e,r,o,!1,c)};oo.version="17.0.2";function pw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(pw)}catch(e){console.error(e)}}pw(),F1.exports=oo;var ZD=F1.exports;function bk(e){if(e.sheet)return e.sheet;for(var r=0;r<document.styleSheets.length;r++)if(document.styleSheets[r].ownerNode===e)return document.styleSheets[r]}function wk(e){var r=document.createElement("style");return r.setAttribute("data-emotion",e.key),e.nonce!==void 0&&r.setAttribute("nonce",e.nonce),r.appendChild(document.createTextNode("")),r.setAttribute("data-s",""),r}var Sk=function(){function e(o){var c=this;this._insertTag=function(m){var v;c.tags.length===0?c.insertionPoint?v=c.insertionPoint.nextSibling:c.prepend?v=c.container.firstChild:v=c.before:v=c.tags[c.tags.length-1].nextSibling,c.container.insertBefore(m,v),c.tags.push(m)},this.isSpeedy=o.speedy===void 0?!0:o.speedy,this.tags=[],this.ctr=0,this.nonce=o.nonce,this.key=o.key,this.container=o.container,this.prepend=o.prepend,this.insertionPoint=o.insertionPoint,this.before=null}var r=e.prototype;return r.hydrate=function(c){c.forEach(this._insertTag)},r.insert=function(c){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(wk(this));var m=this.tags[this.tags.length-1];if(this.isSpeedy){var v=bk(m);try{v.insertRule(c,v.cssRules.length)}catch{}}else m.appendChild(document.createTextNode(c));this.ctr++},r.flush=function(){this.tags.forEach(function(c){return c.parentNode&&c.parentNode.removeChild(c)}),this.tags=[],this.ctr=0},e}(),Kn="-ms-",ef="-moz-",or="-webkit-",fw="comm",E0="rule",k0="decl",Tk="@import",mw="@keyframes",Ek=Math.abs,Sf=String.fromCharCode,kk=Object.assign;function Ck(e,r){return(((r<<2^wi(e,0))<<2^wi(e,1))<<2^wi(e,2))<<2^wi(e,3)}function gw(e){return e.trim()}function Ik(e,r){return(e=r.exec(e))?e[0]:e}function lr(e,r,o){return e.replace(r,o)}function hy(e,r){return e.indexOf(r)}function wi(e,r){return e.charCodeAt(r)|0}function Ih(e,r,o){return e.slice(r,o)}function Ho(e){return e.length}function C0(e){return e.length}function ep(e,r){return r.push(e),e}function Ak(e,r){return e.map(r).join("")}var Tf=1,Ou=1,yw=0,Ei=0,un=0,Hu="";function Ef(e,r,o,c,m,v,T){return{value:e,root:r,parent:o,type:c,props:m,children:v,line:Tf,column:Ou,length:T,return:""}}function Wc(e,r){return kk(Ef("",null,null,"",null,null,0),e,{length:-e.length},r)}function zk(){return un}function Pk(){return un=Ei>0?wi(Hu,--Ei):0,Ou--,un===10&&(Ou=1,Tf--),un}function Oi(){return un=Ei<yw?wi(Hu,Ei++):0,Ou++,un===10&&(Ou=1,Tf++),un}function ra(){return wi(Hu,Ei)}function kp(){return Ei}function jh(e,r){return Ih(Hu,e,r)}function Ah(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function _w(e){return Tf=Ou=1,yw=Ho(Hu=e),Ei=0,[]}function vw(e){return Hu="",e}function Cp(e){return gw(jh(Ei-1,dy(e===91?e+2:e===40?e+1:e)))}function Mk(e){for(;(un=ra())&&un<33;)Oi();return Ah(e)>2||Ah(un)>3?"":" "}function Dk(e,r){for(;--r&&Oi()&&!(un<48||un>102||un>57&&un<65||un>70&&un<97););return jh(e,kp()+(r<6&&ra()==32&&Oi()==32))}function dy(e){for(;Oi();)switch(un){case e:return Ei;case 34:case 39:e!==34&&e!==39&&dy(un);break;case 40:e===41&&dy(e);break;case 92:Oi();break}return Ei}function Rk(e,r){for(;Oi()&&e+un!==47+10;)if(e+un===42+42&&ra()===47)break;return"/*"+jh(r,Ei-1)+"*"+Sf(e===47?e:Oi())}function Lk(e){for(;!Ah(ra());)Oi();return jh(e,Ei)}function Bk(e){return vw(Ip("",null,null,null,[""],e=_w(e),0,[0],e))}function Ip(e,r,o,c,m,v,T,l,D){for(var j=0,oe=0,ne=T,U=0,Se=0,Ae=0,_e=1,re=1,H=1,ee=0,fe="",be=m,Ne=v,Re=c,Le=fe;re;)switch(Ae=ee,ee=Oi()){case 40:if(Ae!=108&&Le.charCodeAt(ne-1)==58){hy(Le+=lr(Cp(ee),"&","&\f"),"&\f")!=-1&&(H=-1);break}case 34:case 39:case 91:Le+=Cp(ee);break;case 9:case 10:case 13:case 32:Le+=Mk(Ae);break;case 92:Le+=Dk(kp()-1,7);continue;case 47:switch(ra()){case 42:case 47:ep(Fk(Rk(Oi(),kp()),r,o),D);break;default:Le+="/"}break;case 123*_e:l[j++]=Ho(Le)*H;case 125*_e:case 59:case 0:switch(ee){case 0:case 125:re=0;case 59+oe:Se>0&&Ho(Le)-ne&&ep(Se>32?Bx(Le+";",c,o,ne-1):Bx(lr(Le," ","")+";",c,o,ne-2),D);break;case 59:Le+=";";default:if(ep(Re=Lx(Le,r,o,j,oe,m,l,fe,be=[],Ne=[],ne),v),ee===123)if(oe===0)Ip(Le,r,Re,Re,be,v,ne,l,Ne);else switch(U){case 100:case 109:case 115:Ip(e,Re,Re,c&&ep(Lx(e,Re,Re,0,0,m,l,fe,m,be=[],ne),Ne),m,Ne,ne,l,c?be:Ne);break;default:Ip(Le,Re,Re,Re,[""],Ne,0,l,Ne)}}j=oe=Se=0,_e=H=1,fe=Le="",ne=T;break;case 58:ne=1+Ho(Le),Se=Ae;default:if(_e<1){if(ee==123)--_e;else if(ee==125&&_e++==0&&Pk()==125)continue}switch(Le+=Sf(ee),ee*_e){case 38:H=oe>0?1:(Le+="\f",-1);break;case 44:l[j++]=(Ho(Le)-1)*H,H=1;break;case 64:ra()===45&&(Le+=Cp(Oi())),U=ra(),oe=ne=Ho(fe=Le+=Lk(kp())),ee++;break;case 45:Ae===45&&Ho(Le)==2&&(_e=0)}}return v}function Lx(e,r,o,c,m,v,T,l,D,j,oe){for(var ne=m-1,U=m===0?v:[""],Se=C0(U),Ae=0,_e=0,re=0;Ae<c;++Ae)for(var H=0,ee=Ih(e,ne+1,ne=Ek(_e=T[Ae])),fe=e;H<Se;++H)(fe=gw(_e>0?U[H]+" "+ee:lr(ee,/&\f/g,U[H])))&&(D[re++]=fe);return Ef(e,r,o,m===0?E0:l,D,j,oe)}function Fk(e,r,o){return Ef(e,r,o,fw,Sf(zk()),Ih(e,2,-2),0)}function Bx(e,r,o,c){return Ef(e,r,o,k0,Ih(e,0,c),Ih(e,c+1,-1),c)}function xw(e,r){switch(Ck(e,r)){case 5103:return or+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return or+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return or+e+ef+e+Kn+e+e;case 6828:case 4268:return or+e+Kn+e+e;case 6165:return or+e+Kn+"flex-"+e+e;case 5187:return or+e+lr(e,/(\w+).+(:[^]+)/,or+"box-$1$2"+Kn+"flex-$1$2")+e;case 5443:return or+e+Kn+"flex-item-"+lr(e,/flex-|-self/,"")+e;case 4675:return or+e+Kn+"flex-line-pack"+lr(e,/align-content|flex-|-self/,"")+e;case 5548:return or+e+Kn+lr(e,"shrink","negative")+e;case 5292:return or+e+Kn+lr(e,"basis","preferred-size")+e;case 6060:return or+"box-"+lr(e,"-grow","")+or+e+Kn+lr(e,"grow","positive")+e;case 4554:return or+lr(e,/([^-])(transform)/g,"$1"+or+"$2")+e;case 6187:return lr(lr(lr(e,/(zoom-|grab)/,or+"$1"),/(image-set)/,or+"$1"),e,"")+e;case 5495:case 3959:return lr(e,/(image-set\([^]*)/,or+"$1$`$1");case 4968:return lr(lr(e,/(.+:)(flex-)?(.*)/,or+"box-pack:$3"+Kn+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+or+e+e;case 4095:case 3583:case 4068:case 2532:return lr(e,/(.+)-inline(.+)/,or+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ho(e)-1-r>6)switch(wi(e,r+1)){case 109:if(wi(e,r+4)!==45)break;case 102:return lr(e,/(.+:)(.+)-([^]+)/,"$1"+or+"$2-$3$1"+ef+(wi(e,r+3)==108?"$3":"$2-$3"))+e;case 115:return~hy(e,"stretch")?xw(lr(e,"stretch","fill-available"),r)+e:e}break;case 4949:if(wi(e,r+1)!==115)break;case 6444:switch(wi(e,Ho(e)-3-(~hy(e,"!important")&&10))){case 107:return lr(e,":",":"+or)+e;case 101:return lr(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+or+(wi(e,14)===45?"inline-":"")+"box$3$1"+or+"$2$3$1"+Kn+"$2box$3")+e}break;case 5936:switch(wi(e,r+11)){case 114:return or+e+Kn+lr(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return or+e+Kn+lr(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return or+e+Kn+lr(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return or+e+Kn+e+e}return e}function Au(e,r){for(var o="",c=C0(e),m=0;m<c;m++)o+=r(e[m],m,e,r)||"";return o}function Ok(e,r,o,c){switch(e.type){case Tk:case k0:return e.return=e.return||e.value;case fw:return"";case mw:return e.return=e.value+"{"+Au(e.children,c)+"}";case E0:e.value=e.props.join(",")}return Ho(o=Au(e.children,c))?e.return=e.value+"{"+o+"}":""}function Nk(e){var r=C0(e);return function(o,c,m,v){for(var T="",l=0;l<r;l++)T+=e[l](o,c,m,v)||"";return T}}function $k(e){return function(r){r.root||(r=r.return)&&e(r)}}function Uk(e,r,o,c){if(e.length>-1&&!e.return)switch(e.type){case k0:e.return=xw(e.value,e.length);break;case mw:return Au([Wc(e,{value:lr(e.value,"@","@"+or)})],c);case E0:if(e.length)return Ak(e.props,function(m){switch(Ik(m,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Au([Wc(e,{props:[lr(m,/:(read-\w+)/,":"+ef+"$1")]})],c);case"::placeholder":return Au([Wc(e,{props:[lr(m,/:(plac\w+)/,":"+or+"input-$1")]}),Wc(e,{props:[lr(m,/:(plac\w+)/,":"+ef+"$1")]}),Wc(e,{props:[lr(m,/:(plac\w+)/,Kn+"input-$1")]})],c)}return""})}}var Fx=function(r){var o=new WeakMap;return function(c){if(o.has(c))return o.get(c);var m=r(c);return o.set(c,m),m}};function bw(e){var r=Object.create(null);return function(o){return r[o]===void 0&&(r[o]=e(o)),r[o]}}var Vk=function(r,o,c){for(var m=0,v=0;m=v,v=ra(),m===38&&v===12&&(o[c]=1),!Ah(v);)Oi();return jh(r,Ei)},jk=function(r,o){var c=-1,m=44;do switch(Ah(m)){case 0:m===38&&ra()===12&&(o[c]=1),r[c]+=Vk(Ei-1,o,c);break;case 2:r[c]+=Cp(m);break;case 4:if(m===44){r[++c]=ra()===58?"&\f":"",o[c]=r[c].length;break}default:r[c]+=Sf(m)}while(m=Oi());return r},Gk=function(r,o){return vw(jk(_w(r),o))},Ox=new WeakMap,Wk=function(r){if(!(r.type!=="rule"||!r.parent||r.length<1)){for(var o=r.value,c=r.parent,m=r.column===c.column&&r.line===c.line;c.type!=="rule";)if(c=c.parent,!c)return;if(!(r.props.length===1&&o.charCodeAt(0)!==58&&!Ox.get(c))&&!m){Ox.set(r,!0);for(var v=[],T=Gk(o,v),l=c.props,D=0,j=0;D<T.length;D++)for(var oe=0;oe<l.length;oe++,j++)r.props[j]=v[D]?T[D].replace(/&\f/g,l[oe]):l[oe]+" "+T[D]}}},qk=function(r){if(r.type==="decl"){var o=r.value;o.charCodeAt(0)===108&&o.charCodeAt(2)===98&&(r.return="",r.value="")}},Zk=[Uk],Hk=function(r){var o=r.key;if(o==="css"){var c=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(c,function(_e){var re=_e.getAttribute("data-emotion");re.indexOf(" ")!==-1&&(document.head.appendChild(_e),_e.setAttribute("data-s",""))})}var m=r.stylisPlugins||Zk,v={},T,l=[];T=r.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+o+' "]'),function(_e){for(var re=_e.getAttribute("data-emotion").split(" "),H=1;H<re.length;H++)v[re[H]]=!0;l.push(_e)});var D,j=[Wk,qk];{var oe,ne=[Ok,$k(function(_e){oe.insert(_e)})],U=Nk(j.concat(m,ne)),Se=function(re){return Au(Bk(re),U)};D=function(re,H,ee,fe){oe=ee,Se(re?re+"{"+H.styles+"}":H.styles),fe&&(Ae.inserted[H.name]=!0)}}var Ae={key:o,sheet:new Sk({key:o,container:T,nonce:r.nonce,speedy:r.speedy,prepend:r.prepend,insertionPoint:r.insertionPoint}),nonce:r.nonce,inserted:v,registered:{},insert:D};return Ae.sheet.hydrate(l),Ae};function tf(){return tf=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var o=arguments[r];for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(e[c]=o[c])}return e},tf.apply(this,arguments)}var ww={exports:{}},dr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tn=typeof Symbol=="function"&&Symbol.for,I0=Tn?Symbol.for("react.element"):60103,A0=Tn?Symbol.for("react.portal"):60106,kf=Tn?Symbol.for("react.fragment"):60107,Cf=Tn?Symbol.for("react.strict_mode"):60108,If=Tn?Symbol.for("react.profiler"):60114,Af=Tn?Symbol.for("react.provider"):60109,zf=Tn?Symbol.for("react.context"):60110,z0=Tn?Symbol.for("react.async_mode"):60111,Pf=Tn?Symbol.for("react.concurrent_mode"):60111,Mf=Tn?Symbol.for("react.forward_ref"):60112,Df=Tn?Symbol.for("react.suspense"):60113,Xk=Tn?Symbol.for("react.suspense_list"):60120,Rf=Tn?Symbol.for("react.memo"):60115,Lf=Tn?Symbol.for("react.lazy"):60116,Kk=Tn?Symbol.for("react.block"):60121,Yk=Tn?Symbol.for("react.fundamental"):60117,Jk=Tn?Symbol.for("react.responder"):60118,Qk=Tn?Symbol.for("react.scope"):60119;function Ui(e){if(typeof e=="object"&&e!==null){var r=e.$$typeof;switch(r){case I0:switch(e=e.type,e){case z0:case Pf:case kf:case If:case Cf:case Df:return e;default:switch(e=e&&e.$$typeof,e){case zf:case Mf:case Lf:case Rf:case Af:return e;default:return r}}case A0:return r}}}function Sw(e){return Ui(e)===Pf}dr.AsyncMode=z0;dr.ConcurrentMode=Pf;dr.ContextConsumer=zf;dr.ContextProvider=Af;dr.Element=I0;dr.ForwardRef=Mf;dr.Fragment=kf;dr.Lazy=Lf;dr.Memo=Rf;dr.Portal=A0;dr.Profiler=If;dr.StrictMode=Cf;dr.Suspense=Df;dr.isAsyncMode=function(e){return Sw(e)||Ui(e)===z0};dr.isConcurrentMode=Sw;dr.isContextConsumer=function(e){return Ui(e)===zf};dr.isContextProvider=function(e){return Ui(e)===Af};dr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===I0};dr.isForwardRef=function(e){return Ui(e)===Mf};dr.isFragment=function(e){return Ui(e)===kf};dr.isLazy=function(e){return Ui(e)===Lf};dr.isMemo=function(e){return Ui(e)===Rf};dr.isPortal=function(e){return Ui(e)===A0};dr.isProfiler=function(e){return Ui(e)===If};dr.isStrictMode=function(e){return Ui(e)===Cf};dr.isSuspense=function(e){return Ui(e)===Df};dr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===kf||e===Pf||e===If||e===Cf||e===Df||e===Xk||typeof e=="object"&&e!==null&&(e.$$typeof===Lf||e.$$typeof===Rf||e.$$typeof===Af||e.$$typeof===zf||e.$$typeof===Mf||e.$$typeof===Yk||e.$$typeof===Jk||e.$$typeof===Qk||e.$$typeof===Kk)};dr.typeOf=Ui;ww.exports=dr;var Tw=ww.exports,eC={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},tC={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Ew={};Ew[Tw.ForwardRef]=eC;Ew[Tw.Memo]=tC;var rC=!0;function nC(e,r,o){var c="";return o.split(" ").forEach(function(m){e[m]!==void 0?r.push(e[m]+";"):c+=m+" "}),c}var kw=function(r,o,c){var m=r.key+"-"+o.name;(c===!1||rC===!1)&&r.registered[m]===void 0&&(r.registered[m]=o.styles)},Cw=function(r,o,c){kw(r,o,c);var m=r.key+"-"+o.name;if(r.inserted[o.name]===void 0){var v=o;do r.insert(o===v?"."+m:"",v,r.sheet,!0),v=v.next;while(v!==void 0)}};function iC(e){for(var r=0,o,c=0,m=e.length;m>=4;++c,m-=4)o=e.charCodeAt(c)&255|(e.charCodeAt(++c)&255)<<8|(e.charCodeAt(++c)&255)<<16|(e.charCodeAt(++c)&255)<<24,o=(o&65535)*1540483477+((o>>>16)*59797<<16),o^=o>>>24,r=(o&65535)*1540483477+((o>>>16)*59797<<16)^(r&65535)*1540483477+((r>>>16)*59797<<16);switch(m){case 3:r^=(e.charCodeAt(c+2)&255)<<16;case 2:r^=(e.charCodeAt(c+1)&255)<<8;case 1:r^=e.charCodeAt(c)&255,r=(r&65535)*1540483477+((r>>>16)*59797<<16)}return r^=r>>>13,r=(r&65535)*1540483477+((r>>>16)*59797<<16),((r^r>>>15)>>>0).toString(36)}var oC={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},aC=/[A-Z]|^ms/g,sC=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Iw=function(r){return r.charCodeAt(1)===45},Nx=function(r){return r!=null&&typeof r!="boolean"},ug=bw(function(e){return Iw(e)?e:e.replace(aC,"-$&").toLowerCase()}),$x=function(r,o){switch(r){case"animation":case"animationName":if(typeof o=="string")return o.replace(sC,function(c,m,v){return Xo={name:m,styles:v,next:Xo},m})}return oC[r]!==1&&!Iw(r)&&typeof o=="number"&&o!==0?o+"px":o};function zh(e,r,o){if(o==null)return"";if(o.__emotion_styles!==void 0)return o;switch(typeof o){case"boolean":return"";case"object":{if(o.anim===1)return Xo={name:o.name,styles:o.styles,next:Xo},o.name;if(o.styles!==void 0){var c=o.next;if(c!==void 0)for(;c!==void 0;)Xo={name:c.name,styles:c.styles,next:Xo},c=c.next;var m=o.styles+";";return m}return lC(e,r,o)}case"function":{if(e!==void 0){var v=Xo,T=o(e);return Xo=v,zh(e,r,T)}break}}if(r==null)return o;var l=r[o];return l!==void 0?l:o}function lC(e,r,o){var c="";if(Array.isArray(o))for(var m=0;m<o.length;m++)c+=zh(e,r,o[m])+";";else for(var v in o){var T=o[v];if(typeof T!="object")r!=null&&r[T]!==void 0?c+=v+"{"+r[T]+"}":Nx(T)&&(c+=ug(v)+":"+$x(v,T)+";");else if(Array.isArray(T)&&typeof T[0]=="string"&&(r==null||r[T[0]]===void 0))for(var l=0;l<T.length;l++)Nx(T[l])&&(c+=ug(v)+":"+$x(v,T[l])+";");else{var D=zh(e,r,T);switch(v){case"animation":case"animationName":{c+=ug(v)+":"+D+";";break}default:c+=v+"{"+D+"}"}}}return c}var Ux=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Xo,P0=function(r,o,c){if(r.length===1&&typeof r[0]=="object"&&r[0]!==null&&r[0].styles!==void 0)return r[0];var m=!0,v="";Xo=void 0;var T=r[0];T==null||T.raw===void 0?(m=!1,v+=zh(c,o,T)):v+=T[0];for(var l=1;l<r.length;l++)v+=zh(c,o,r[l]),m&&(v+=T[l]);Ux.lastIndex=0;for(var D="",j;(j=Ux.exec(v))!==null;)D+="-"+j[1];var oe=iC(v)+D;return{name:oe,styles:v,next:Xo}},Aw=Fe.exports.createContext(typeof HTMLElement!="undefined"?Hk({key:"css"}):null);Aw.Provider;var zw=function(r){return Fe.exports.forwardRef(function(o,c){var m=Fe.exports.useContext(Aw);return r(o,m,c)})},Ph=Fe.exports.createContext({}),uC=function(r,o){if(typeof o=="function"){var c=o(r);return c}return tf({},r,o)},cC=Fx(function(e){return Fx(function(r){return uC(e,r)})}),hC=function(r){var o=Fe.exports.useContext(Ph);return r.theme!==o&&(o=cC(o)(r.theme)),Fe.exports.createElement(Ph.Provider,{value:o},r.children)};Du["useInsertionEffect"]&&Du["useInsertionEffect"];var Vx=Du["useInsertionEffect"]?Du["useInsertionEffect"]:Fe.exports.useLayoutEffect,M0=zw(function(e,r){var o=e.styles,c=P0([o],void 0,Fe.exports.useContext(Ph)),m=Fe.exports.useRef();return Vx(function(){var v=r.key+"-global",T=new r.sheet.constructor({key:v,nonce:r.sheet.nonce,container:r.sheet.container,speedy:r.sheet.isSpeedy}),l=!1,D=document.querySelector('style[data-emotion="'+v+" "+c.name+'"]');return r.sheet.tags.length&&(T.before=r.sheet.tags[0]),D!==null&&(l=!0,D.setAttribute("data-emotion",v),T.hydrate([D])),m.current=[T,l],function(){T.flush()}},[r]),Vx(function(){var v=m.current,T=v[0],l=v[1];if(l){v[1]=!1;return}if(c.next!==void 0&&Cw(r,c.next,!0),T.tags.length){var D=T.tags[T.tags.length-1].nextElementSibling;T.before=D,T.flush()}r.insert("",c,T,!1)},[r,c.name]),null});function dC(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return P0(r)}var pC=function(){var r=dC.apply(void 0,arguments),o="animation-"+r.name;return{name:o,styles:"@keyframes "+o+"{"+r.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},fC=function(){return Fe.exports.createElement(M0,{styles:`
      html {
        line-height: 1.5;
        -webkit-text-size-adjust: 100%;
        font-family: system-ui, sans-serif;
        -webkit-font-smoothing: antialiased;
        text-rendering: optimizeLegibility;
        -moz-osx-font-smoothing: grayscale;
        touch-action: manipulation;
      }

      body {
        position: relative;
        min-height: 100%;
        font-feature-settings: 'kern';
      }

      *,
      *::before,
      *::after {
        border-width: 0;
        border-style: solid;
        box-sizing: border-box;
      }

      main {
        display: block;
      }

      hr {
        border-top-width: 1px;
        box-sizing: content-box;
        height: 0;
        overflow: visible;
      }

      pre,
      code,
      kbd,
      samp {
        font-family: SFMono-Regular,  Menlo, Monaco, Consolas, monospace;
        font-size: 1em;
      }

      a {
        background-color: transparent;
        color: inherit;
        text-decoration: inherit;
      }

      abbr[title] {
        border-bottom: none;
        text-decoration: underline;
        -webkit-text-decoration: underline dotted;
        text-decoration: underline dotted;
      }

      b,
      strong {
        font-weight: bold;
      }

      small {
        font-size: 80%;
      }

      sub,
      sup {
        font-size: 75%;
        line-height: 0;
        position: relative;
        vertical-align: baseline;
      }

      sub {
        bottom: -0.25em;
      }

      sup {
        top: -0.5em;
      }

      img {
        border-style: none;
      }

      button,
      input,
      optgroup,
      select,
      textarea {
        font-family: inherit;
        font-size: 100%;
        line-height: 1.15;
        margin: 0;
      }

      button,
      input {
        overflow: visible;
      }

      button,
      select {
        text-transform: none;
      }

      button::-moz-focus-inner,
      [type="button"]::-moz-focus-inner,
      [type="reset"]::-moz-focus-inner,
      [type="submit"]::-moz-focus-inner {
        border-style: none;
        padding: 0;
      }

      fieldset {
        padding: 0.35em 0.75em 0.625em;
      }

      legend {
        box-sizing: border-box;
        color: inherit;
        display: table;
        max-width: 100%;
        padding: 0;
        white-space: normal;
      }

      progress {
        vertical-align: baseline;
      }

      textarea {
        overflow: auto;
      }

      [type="checkbox"],
      [type="radio"] {
        box-sizing: border-box;
        padding: 0;
      }

      [type="number"]::-webkit-inner-spin-button,
      [type="number"]::-webkit-outer-spin-button {
        -webkit-appearance: none !important;
      }

      input[type="number"] {
        -moz-appearance: textfield;
      }

      [type="search"] {
        -webkit-appearance: textfield;
        outline-offset: -2px;
      }

      [type="search"]::-webkit-search-decoration {
        -webkit-appearance: none !important;
      }

      ::-webkit-file-upload-button {
        -webkit-appearance: button;
        font: inherit;
      }

      details {
        display: block;
      }

      summary {
        display: list-item;
      }

      template {
        display: none;
      }

      [hidden] {
        display: none !important;
      }

      body,
      blockquote,
      dl,
      dd,
      h1,
      h2,
      h3,
      h4,
      h5,
      h6,
      hr,
      figure,
      p,
      pre {
        margin: 0;
      }

      button {
        background: transparent;
        padding: 0;
      }

      fieldset {
        margin: 0;
        padding: 0;
      }

      ol,
      ul {
        margin: 0;
        padding: 0;
      }

      textarea {
        resize: vertical;
      }

      button,
      [role="button"] {
        cursor: pointer;
      }

      button::-moz-focus-inner {
        border: 0 !important;
      }

      table {
        border-collapse: collapse;
      }

      h1,
      h2,
      h3,
      h4,
      h5,
      h6 {
        font-size: inherit;
        font-weight: inherit;
      }

      button,
      input,
      optgroup,
      select,
      textarea {
        padding: 0;
        line-height: inherit;
        color: inherit;
      }

      img,
      svg,
      video,
      canvas,
      audio,
      iframe,
      embed,
      object {
        display: block;
      }

      img,
      video {
        max-width: 100%;
        height: auto;
      }

      [data-js-focus-visible] :focus:not([data-focus-visible-added]) {
        outline: none;
        box-shadow: none;
      }

      select::-ms-expand {
        display: none;
      }
    `})},mC=fC,py={exports:{}};(function(e,r){var o=200,c="__lodash_hash_undefined__",m=800,v=16,T=9007199254740991,l="[object Arguments]",D="[object Array]",j="[object AsyncFunction]",oe="[object Boolean]",ne="[object Date]",U="[object Error]",Se="[object Function]",Ae="[object GeneratorFunction]",_e="[object Map]",re="[object Number]",H="[object Null]",ee="[object Object]",fe="[object Proxy]",be="[object RegExp]",Ne="[object Set]",Re="[object String]",Le="[object Undefined]",rt="[object WeakMap]",Je="[object ArrayBuffer]",wt="[object DataView]",Er="[object Float32Array]",Nt="[object Float64Array]",Vt="[object Int8Array]",Fr="[object Int16Array]",kr="[object Int32Array]",dt="[object Uint8Array]",En="[object Uint8ClampedArray]",kn="[object Uint16Array]",cn="[object Uint32Array]",Cn=/[\\^$.*+?()[\]{}|]/g,Ze=/^\[object .+?Constructor\]$/,xt=/^(?:0|[1-9]\d*)$/,st={};st[Er]=st[Nt]=st[Vt]=st[Fr]=st[kr]=st[dt]=st[En]=st[kn]=st[cn]=!0,st[l]=st[D]=st[Je]=st[oe]=st[wt]=st[ne]=st[U]=st[Se]=st[_e]=st[re]=st[ee]=st[be]=st[Ne]=st[Re]=st[rt]=!1;var Ht=typeof qc=="object"&&qc&&qc.Object===Object&&qc,er=typeof self=="object"&&self&&self.Object===Object&&self,Pr=Ht||er||Function("return this")(),Hr=r&&!r.nodeType&&r,$r=Hr&&!0&&e&&!e.nodeType&&e,wr=$r&&$r.exports===Hr,Gi=wr&&Ht.process,ko=function(){try{var q=$r&&$r.require&&$r.require("util").types;return q||Gi&&Gi.binding&&Gi.binding("util")}catch{}}(),hi=ko&&ko.isTypedArray;function In(q,le,xe){switch(xe.length){case 0:return q.call(le);case 1:return q.call(le,xe[0]);case 2:return q.call(le,xe[0],xe[1]);case 3:return q.call(le,xe[0],xe[1],xe[2])}return q.apply(le,xe)}function ia(q,le){for(var xe=-1,at=Array(q);++xe<q;)at[xe]=le(xe);return at}function Wi(q){return function(le){return q(le)}}function Co(q,le){return q==null?void 0:q[le]}function Io(q,le){return function(xe){return q(le(xe))}}var oa=Array.prototype,Rt=Function.prototype,An=Object.prototype,di=Pr["__core-js_shared__"],ti=Rt.toString,zn=An.hasOwnProperty,pi=function(){var q=/[^.]+$/.exec(di&&di.keys&&di.keys.IE_PROTO||"");return q?"Symbol(src)_1."+q:""}(),fi=An.toString,Ao=ti.call(Object),ki=RegExp("^"+ti.call(zn).replace(Cn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ke=wr?Pr.Buffer:void 0,Ve=Pr.Symbol,qi=Pr.Uint8Array,Gn=ke?ke.allocUnsafe:void 0,Pt=Io(Object.getPrototypeOf,Object),Pn=Object.create,Mn=An.propertyIsEnumerable,Dn=oa.splice,gn=Ve?Ve.toStringTag:void 0,$e=function(){try{var q=sa(Object,"defineProperty");return q({},"",{}),q}catch{}}(),Et=ke?ke.isBuffer:void 0,bt=Math.max,Xr=Date.now,Ci=sa(Pr,"Map"),_t=sa(Object,"create"),Ii=function(){function q(){}return function(le){if(!Ai(le))return{};if(Pn)return Pn(le);q.prototype=le;var xe=new q;return q.prototype=void 0,xe}}();function pr(q){var le=-1,xe=q==null?0:q.length;for(this.clear();++le<xe;){var at=q[le];this.set(at[0],at[1])}}function zo(){this.__data__=_t?_t(null):{},this.size=0}function Mr(q){var le=this.has(q)&&delete this.__data__[q];return this.size-=le?1:0,le}function hn(q){var le=this.__data__;if(_t){var xe=le[q];return xe===c?void 0:xe}return zn.call(le,q)?le[q]:void 0}function Wt(q){var le=this.__data__;return _t?le[q]!==void 0:zn.call(le,q)}function Po(q,le){var xe=this.__data__;return this.size+=this.has(q)?0:1,xe[q]=_t&&le===void 0?c:le,this}pr.prototype.clear=zo,pr.prototype.delete=Mr,pr.prototype.get=hn,pr.prototype.has=Wt,pr.prototype.set=Po;function Ur(q){var le=-1,xe=q==null?0:q.length;for(this.clear();++le<xe;){var at=q[le];this.set(at[0],at[1])}}function ao(){this.__data__=[],this.size=0}function so(q){var le=this.__data__,xe=pt(le,q);if(xe<0)return!1;var at=le.length-1;return xe==at?le.pop():Dn.call(le,xe,1),--this.size,!0}function Mo(q){var le=this.__data__,xe=pt(le,q);return xe<0?void 0:le[xe][1]}function lo(q){return pt(this.__data__,q)>-1}function V(q,le){var xe=this.__data__,at=pt(xe,q);return at<0?(++this.size,xe.push([q,le])):xe[at][1]=le,this}Ur.prototype.clear=ao,Ur.prototype.delete=so,Ur.prototype.get=Mo,Ur.prototype.has=lo,Ur.prototype.set=V;function I(q){var le=-1,xe=q==null?0:q.length;for(this.clear();++le<xe;){var at=q[le];this.set(at[0],at[1])}}function M(){this.size=0,this.__data__={hash:new pr,map:new(Ci||Ur),string:new pr}}function N(q){var le=uo(this,q).delete(q);return this.size-=le?1:0,le}function $(q){return uo(this,q).get(q)}function J(q){return uo(this,q).has(q)}function ae(q,le){var xe=uo(this,q),at=xe.size;return xe.set(q,le),this.size+=xe.size==at?0:1,this}I.prototype.clear=M,I.prototype.delete=N,I.prototype.get=$,I.prototype.has=J,I.prototype.set=ae;function te(q){var le=this.__data__=new Ur(q);this.size=le.size}function Q(){this.__data__=new Ur,this.size=0}function se(q){var le=this.__data__,xe=le.delete(q);return this.size=le.size,xe}function Te(q){return this.__data__.get(q)}function Me(q){return this.__data__.has(q)}function we(q,le){var xe=this.__data__;if(xe instanceof Ur){var at=xe.__data__;if(!Ci||at.length<o-1)return at.push([q,le]),this.size=++xe.size,this;xe=this.__data__=new I(at)}return xe.set(q,le),this.size=xe.size,this}te.prototype.clear=Q,te.prototype.delete=se,te.prototype.get=Te,te.prototype.has=Me,te.prototype.set=we;function it(q,le){var xe=pa(q),at=!xe&&Wa(q),Ft=!xe&&!at&&Fl(q),qt=!xe&&!at&&!Ft&&$t(q),sr=xe||at||Ft||qt,Mt=sr?ia(q.length,String):[],rr=Mt.length;for(var Ln in q)(le||zn.call(q,Ln))&&!(sr&&(Ln=="length"||Ft&&(Ln=="offset"||Ln=="parent")||qt&&(Ln=="buffer"||Ln=="byteLength"||Ln=="byteOffset")||Fs(Ln,rr)))&&Mt.push(Ln);return Mt}function ot(q,le,xe){(xe!==void 0&&!da(q[le],xe)||xe===void 0&&!(le in q))&&gt(q,le,xe)}function He(q,le,xe){var at=q[le];(!(zn.call(q,le)&&da(at,xe))||xe===void 0&&!(le in q))&&gt(q,le,xe)}function pt(q,le){for(var xe=q.length;xe--;)if(da(q[xe][0],le))return xe;return-1}function gt(q,le,xe){le=="__proto__"&&$e?$e(q,le,{configurable:!0,enumerable:!0,value:xe,writable:!0}):q[le]=xe}var Lt=Ku();function vt(q){return q==null?q===void 0?Le:H:gn&&gn in Object(q)?Rl(q):Lo(q)}function Tt(q){return ho(q)&&vt(q)==l}function Bt(q){if(!Ai(q)||Ro(q))return!1;var le=Ns(q)?ki:Ze;return le.test(ha(q))}function Xt(q){return ho(q)&&qa(q.length)&&!!st[vt(q)]}function Vr(q){if(!Ai(q))return Ga(q);var le=ua(q),xe=[];for(var at in q)at=="constructor"&&(le||!zn.call(q,at))||xe.push(at);return xe}function ar(q,le,xe,at,Ft){q!==le&&Lt(le,function(qt,sr){if(Ft||(Ft=new te),Ai(qt))rn(q,le,sr,xe,ar,at,Ft);else{var Mt=at?at(Bo(q,sr),qt,sr+"",q,le,Ft):void 0;Mt===void 0&&(Mt=qt),ot(q,sr,Mt)}},Nl)}function rn(q,le,xe,at,Ft,qt,sr){var Mt=Bo(q,xe),rr=Bo(le,xe),Ln=sr.get(rr);if(Ln){ot(q,xe,Ln);return}var yn=qt?qt(Mt,rr,xe+"",q,le,sr):void 0,mi=yn===void 0;if(mi){var Vs=pa(rr),js=!Vs&&Fl(rr),$l=!Vs&&!js&&$t(rr);yn=rr,Vs||js||$l?pa(Mt)?yn=Mt:Bl(Mt)?yn=Ml(Mt):js?(mi=!1,yn=Kt(rr,!0)):$l?(mi=!1,yn=Ls(rr,!0)):yn=[]:$s(rr)||Wa(rr)?(yn=Mt,Wa(Mt)?yn=Ol(Mt):(!Ai(Mt)||Ns(Mt))&&(yn=Ll(rr))):mi=!1}mi&&(sr.set(rr,yn),Ft(yn,rr,at,qt,sr),sr.delete(rr)),ot(q,xe,yn)}function Do(q,le){return ca(Os(q,le,Us),q+"")}var aa=$e?function(q,le){return $e(q,"toString",{configurable:!0,enumerable:!1,value:ma(le),writable:!0})}:Us;function Kt(q,le){if(le)return q.slice();var xe=q.length,at=Gn?Gn(xe):new q.constructor(xe);return q.copy(at),at}function Rs(q){var le=new q.constructor(q.byteLength);return new qi(le).set(new qi(q)),le}function Ls(q,le){var xe=le?Rs(q.buffer):q.buffer;return new q.constructor(xe,q.byteOffset,q.length)}function Ml(q,le){var xe=-1,at=q.length;for(le||(le=Array(at));++xe<at;)le[xe]=q[xe];return le}function Dl(q,le,xe,at){var Ft=!xe;xe||(xe={});for(var qt=-1,sr=le.length;++qt<sr;){var Mt=le[qt],rr=at?at(xe[Mt],q[Mt],Mt,xe,q):void 0;rr===void 0&&(rr=q[Mt]),Ft?gt(xe,Mt,rr):He(xe,Mt,rr)}return xe}function Bs(q){return Do(function(le,xe){var at=-1,Ft=xe.length,qt=Ft>1?xe[Ft-1]:void 0,sr=Ft>2?xe[2]:void 0;for(qt=q.length>3&&typeof qt=="function"?(Ft--,qt):void 0,sr&&co(xe[0],xe[1],sr)&&(qt=Ft<3?void 0:qt,Ft=1),le=Object(le);++at<Ft;){var Mt=xe[at];Mt&&q(le,Mt,at,qt)}return le})}function Ku(q){return function(le,xe,at){for(var Ft=-1,qt=Object(le),sr=at(le),Mt=sr.length;Mt--;){var rr=sr[q?Mt:++Ft];if(xe(qt[rr],rr,qt)===!1)break}return le}}function uo(q,le){var xe=q.__data__;return la(le)?xe[typeof le=="string"?"string":"hash"]:xe.map}function sa(q,le){var xe=Co(q,le);return Bt(xe)?xe:void 0}function Rl(q){var le=zn.call(q,gn),xe=q[gn];try{q[gn]=void 0;var at=!0}catch{}var Ft=fi.call(q);return at&&(le?q[gn]=xe:delete q[gn]),Ft}function Ll(q){return typeof q.constructor=="function"&&!ua(q)?Ii(Pt(q)):{}}function Fs(q,le){var xe=typeof q;return le=le==null?T:le,!!le&&(xe=="number"||xe!="symbol"&&xt.test(q))&&q>-1&&q%1==0&&q<le}function co(q,le,xe){if(!Ai(xe))return!1;var at=typeof le;return(at=="number"?Fo(xe)&&Fs(le,xe.length):at=="string"&&le in xe)?da(xe[le],q):!1}function la(q){var le=typeof q;return le=="string"||le=="number"||le=="symbol"||le=="boolean"?q!=="__proto__":q===null}function Ro(q){return!!pi&&pi in q}function ua(q){var le=q&&q.constructor,xe=typeof le=="function"&&le.prototype||An;return q===xe}function Ga(q){var le=[];if(q!=null)for(var xe in Object(q))le.push(xe);return le}function Lo(q){return fi.call(q)}function Os(q,le,xe){return le=bt(le===void 0?q.length-1:le,0),function(){for(var at=arguments,Ft=-1,qt=bt(at.length-le,0),sr=Array(qt);++Ft<qt;)sr[Ft]=at[le+Ft];Ft=-1;for(var Mt=Array(le+1);++Ft<le;)Mt[Ft]=at[Ft];return Mt[le]=xe(sr),In(q,this,Mt)}}function Bo(q,le){if(!(le==="constructor"&&typeof q[le]=="function")&&le!="__proto__")return q[le]}var ca=ur(aa);function ur(q){var le=0,xe=0;return function(){var at=Xr(),Ft=v-(at-xe);if(xe=at,Ft>0){if(++le>=m)return arguments[0]}else le=0;return q.apply(void 0,arguments)}}function ha(q){if(q!=null){try{return ti.call(q)}catch{}try{return q+""}catch{}}return""}function da(q,le){return q===le||q!==q&&le!==le}var Wa=Tt(function(){return arguments}())?Tt:function(q){return ho(q)&&zn.call(q,"callee")&&!Mn.call(q,"callee")},pa=Array.isArray;function Fo(q){return q!=null&&qa(q.length)&&!Ns(q)}function Bl(q){return ho(q)&&Fo(q)}var Fl=Et||Rn;function Ns(q){if(!Ai(q))return!1;var le=vt(q);return le==Se||le==Ae||le==j||le==fe}function qa(q){return typeof q=="number"&&q>-1&&q%1==0&&q<=T}function Ai(q){var le=typeof q;return q!=null&&(le=="object"||le=="function")}function ho(q){return q!=null&&typeof q=="object"}function $s(q){if(!ho(q)||vt(q)!=ee)return!1;var le=Pt(q);if(le===null)return!0;var xe=zn.call(le,"constructor")&&le.constructor;return typeof xe=="function"&&xe instanceof xe&&ti.call(xe)==Ao}var $t=hi?Wi(hi):Xt;function Ol(q){return Dl(q,Nl(q))}function Nl(q){return Fo(q)?it(q,!0):Vr(q)}var fa=Bs(function(q,le,xe,at){ar(q,le,xe,at)});function ma(q){return function(){return q}}function Us(q){return q}function Rn(){return!1}e.exports=fa})(py,py.exports);var Fa=py.exports;function gC(e){var r=e==null?0:e.length;return r?e[r-1]:void 0}function zu(e){return typeof e=="number"}function D0(e){return Array.isArray(e)}function yC(e){return typeof e=="function"}function Ni(e){var r=typeof e;return e!=null&&(r==="object"||r==="function")&&!D0(e)}function _C(e){return Ni(e)&&Object.keys(e).length===0}function Pw(e){return e==null}function R0(e){return Object.prototype.toString.call(e)==="[object String]"}function Mw(e){return/^var\(--.+\)$/.test(e)}var gr=!1;function Dw(e,r){var o={};return Object.keys(e).forEach(function(c){r.includes(c)||(o[c]=e[c])}),o}function vC(e,r){var o={};return r.forEach(function(c){c in e&&(o[c]=e[c])}),o}function xC(e,r,o,c){var m=typeof r=="string"?r.split("."):[r];for(c=0;c<m.length&&e;c+=1)e=e[m[c]];return e===void 0?o:e}var bC=function(r){var o=new WeakMap,c=function(v,T,l,D){if(typeof v=="undefined")return r(v,T,l);o.has(v)||o.set(v,new Map);var j=o.get(v);if(j.has(T))return j.get(T);var oe=r(v,T,l,D);return j.set(T,oe),oe};return c},Bf=bC(xC);function Rw(e,r){var o={};return Object.keys(e).forEach(function(c){var m=e[c],v=r(m,c,e);v&&(o[c]=m)}),o}var L0=function(r){return Rw(r,function(o){return o!=null})},B0=function(r){return Object.keys(r)},rf=function(r){return r.reduce(function(o,c){var m=c[0],v=c[1];return o[m]=v,o},{})};function wC(e){var r=parseFloat(e.toString()),o=e.toString().replace(String(r),"");return{unitless:!o,value:r,unit:o}}function fy(e){if(e==null)return e;var r=wC(e),o=r.unitless;return o||zu(e)?e+"px":e}var Lw=function(r,o){return parseInt(r[1],10)>parseInt(o[1],10)?1:-1},F0=function(r){return rf(Object.entries(r).sort(Lw))};function jx(e){var r=F0(e);return Object.assign(Object.values(r),r)}function SC(e){var r=Object.keys(F0(e));return new Set(r)}function TC(e){var r;if(!e)return e;e=(r=fy(e))!=null?r:e;var o=e.endsWith("px")?-1:-.0635;return zu(e)?""+(e+o):e.replace(/([0-9]+\.?[0-9]*)/,function(c){return""+(parseFloat(c)+o)})}function tp(e,r){var o=["@media screen"];return e&&o.push("and","(min-width: "+fy(e)+")"),r&&o.push("and","(max-width: "+fy(r)+")"),o.join(" ")}function EC(e){var r;if(!e)return null;e.base=(r=e.base)!=null?r:"0px";var o=jx(e),c=Object.entries(e).sort(Lw).map(function(T,l,D){var j,oe=T[0],ne=T[1],U=(j=D[l+1])!=null?j:[],Se=U[1];return Se=parseFloat(Se)>0?TC(Se):void 0,{breakpoint:oe,minW:ne,maxW:Se,maxWQuery:tp(null,Se),minWQuery:tp(ne),minMaxQuery:tp(ne,Se)}}),m=SC(e),v=Array.from(m.values());return{keys:m,normalized:o,isResponsive:function(l){var D=Object.keys(l);return D.length>0&&D.every(function(j){return m.has(j)})},asObject:F0(e),asArray:jx(e),details:c,media:[null].concat(o.map(function(T){return tp(T)}).slice(1)),toArrayValue:function(l){if(!Ni(l))throw new Error("toArrayValue: value must be an object");for(var D=v.map(function(j){var oe;return(oe=l[j])!=null?oe:null});gC(D)===null;)D.pop();return D},toObjectValue:function(l){if(!Array.isArray(l))throw new Error("toObjectValue: value must be an array");return l.reduce(function(D,j,oe){var ne=v[oe];return ne!=null&&j!=null&&(D[ne]=j),D},{})}}}function kC(){return!!(typeof window!="undefined"&&window.document&&window.document.createElement)}var Ff=kC(),Vi=function(){for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return o.filter(Boolean).join(" ")};function Qo(e){for(var r=arguments.length,o=new Array(r>1?r-1:0),c=1;c<r;c++)o[c-1]=arguments[c];return yC(e)?e.apply(void 0,o):e}function CC(e){var r;return function(){if(e){for(var c=arguments.length,m=new Array(c),v=0;v<c;v++)m[v]=arguments[v];r=e.apply(this,m),e=null}return r}}var Mh=function(){},IC=CC(function(e){return function(){var r=e.condition,o=e.message;r&&gr&&console.warn(o)}});function my(e,r){return r===void 0&&(r=1/0),!Ni(e)&&!Array.isArray(e)||!r?e:Object.entries(e).reduce(function(o,c){var m=c[0],v=c[1];return Ni(v)||D0(v)?Object.entries(my(v,r-1)).forEach(function(T){var l=T[0],D=T[1];o[m+"."+l]=D}):o[m]=v,o},{})}Object.freeze(["base","sm","md","lg","xl","2xl"]);function Xu(e,r){return D0(e)?e.map(function(o){return o===null?null:r(o)}):Ni(e)?B0(e).reduce(function(o,c){return o[c]=r(e[c]),o},{}):e!=null?r(e):null}function Of(e){e===void 0&&(e={});var r=e,o=r.strict,c=o===void 0?!0:o,m=r.errorMessage,v=m===void 0?"useContext: `context` is undefined. Seems you forgot to wrap component within the Provider":m,T=r.name,l=Fe.exports.createContext(void 0);l.displayName=T;function D(){var j=Fe.exports.useContext(l);if(!j&&c){var oe=new Error(v);throw oe.name="ContextError",Error.captureStackTrace==null||Error.captureStackTrace(oe,D),oe}return j}return[l.Provider,D,l]}function Bw(e){return Fe.exports.Children.toArray(e).filter(function(r){return Fe.exports.isValidElement(r)})}var AC={current:1},zC=Fe.exports.createContext(AC),PC=Fe.exports.memo(function(e){var r=e.children;return Fe.exports.createElement(zC.Provider,{value:{current:1}},r)}),MC=Of({strict:!1,name:"PortalManagerContext"}),DC=MC[0];function RC(e){var r=e.children,o=e.zIndex;return Fe.exports.createElement(DC,{value:{zIndex:o}},r)}Of({strict:!1,name:"PortalContext"});var Nf={exports:{}},Gh={};/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LC=Fe.exports,Fw=60103;Gh.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var Gx=Symbol.for;Fw=Gx("react.element"),Gh.Fragment=Gx("react.fragment")}var BC=LC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,FC=Object.prototype.hasOwnProperty,OC={key:!0,ref:!0,__self:!0,__source:!0};function Ow(e,r,o){var c,m={},v=null,T=null;o!==void 0&&(v=""+o),r.key!==void 0&&(v=""+r.key),r.ref!==void 0&&(T=r.ref);for(c in r)FC.call(r,c)&&!OC.hasOwnProperty(c)&&(m[c]=r[c]);if(e&&e.defaultProps)for(c in r=e.defaultProps,r)m[c]===void 0&&(m[c]=r[c]);return{$$typeof:Fw,type:e,key:v,ref:T,props:m,_owner:BC.current}}Gh.jsx=Ow;Gh.jsxs=Ow;Nf.exports=Gh;const NC=Nf.exports.jsx,$C=Nf.exports.jsxs,HD=Nf.exports.Fragment;var UC={body:{classList:{add:function(){},remove:function(){}}},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}}},Nw=UC,uu=function(){},VC={document:Nw,navigator:{userAgent:""},CustomEvent:function(){return this},addEventListener:uu,removeEventListener:uu,getComputedStyle:function(){return{getPropertyValue:function(){return""}}},matchMedia:function(){return{matches:!1,addListener:uu,removeListener:uu}},requestAnimationFrame:function(r){return typeof setTimeout=="undefined"?(r(),null):setTimeout(r,0)},cancelAnimationFrame:function(r){typeof setTimeout!="undefined"&&clearTimeout(r)},setTimeout:function(){return 0},clearTimeout:uu,setInterval:function(){return 0},clearInterval:uu},jC=VC,GC={window:jC,document:Nw},$w=Ff?{window,document}:GC,Uw=Fe.exports.createContext($w);function WC(){return Fe.exports.useContext(Uw)}function qC(e){var r=e.children,o=e.environment,c=Fe.exports.useState(null),m=c[0],v=c[1],T=Fe.exports.useMemo(function(){var D,j=m==null?void 0:m.ownerDocument,oe=m==null?void 0:m.ownerDocument.defaultView,ne=j?{document:j,window:oe}:void 0,U=(D=o!=null?o:ne)!=null?D:$w;return U},[m,o]),l=!m&&!o;return $C(Uw.Provider,{value:T,children:[r,l&&NC("span",{ref:function(j){j&&v(j)}})]})}var rp={light:"chakra-ui-light",dark:"chakra-ui-dark"},ZC={classList:{add:Mh,remove:Mh}},HC=function(r){return Ff?r.body:ZC};function XC(e,r){var o=HC(r);o.classList.add(e?rp.dark:rp.light),o.classList.remove(e?rp.light:rp.dark)}function KC(e){var r=window.matchMedia==null?void 0:window.matchMedia(e);if(!!r)return!!r.media===r.matches}var Vw={light:"(prefers-color-scheme: light)",dark:"(prefers-color-scheme: dark)"};function YC(e){var r,o=(r=KC(Vw.dark))!=null?r:e==="dark";return o?"dark":"light"}function JC(e){if(!("matchMedia"in window))return Mh;var r=window.matchMedia(Vw.dark),o=function(){e(r.matches?"dark":"light",!0)};return r.addEventListener("change",o),function(){r.removeEventListener("change",o)}}var Wx={get:function(){return document.documentElement.style.getPropertyValue("--chakra-ui-color-mode")||document.documentElement.dataset.theme},set:function(r){Ff&&(document.documentElement.style.setProperty("--chakra-ui-color-mode",r),document.documentElement.setAttribute("data-theme",r))}},qx=function(){return typeof Storage!="undefined"},Zx="chakra-ui-color-mode",QC={get:function(r){if(!qx())return r;try{var o=localStorage.getItem(Zx);return o!=null?o:r}catch{return r}},set:function(r){if(!!qx())try{localStorage.setItem(Zx,r)}catch{}},type:"localStorage"},jw=Fe.exports.createContext({}),Gw=function(){var r=Fe.exports.useContext(jw);if(r===void 0)throw new Error("useColorMode must be used within a ColorModeProvider");return r};function eI(e){var r=e.value,o=e.children,c=e.options,m=c.useSystemColorMode,v=c.initialColorMode,T=e.colorModeManager,l=T===void 0?QC:T,D=v==="dark"?"dark":"light",j=Fe.exports.useState(l.type==="cookie"?l.get(D):D),oe=j[0],ne=j[1],U=WC(),Se=U.document;Fe.exports.useEffect(function(){if(Ff&&l.type==="localStorage"){var H=YC(D);if(m)return ne(H);var ee=Wx.get(),fe=l.get();return ne(ee||fe||(v==="system"?H:D))}},[l,m,D,v]),Fe.exports.useEffect(function(){var H=oe==="dark";XC(H,Se),Wx.set(H?"dark":"light")},[oe,Se]);var Ae=Fe.exports.useCallback(function(H,ee){if(ee===void 0&&(ee=!1),!ee)l.set(H);else if(l.get()&&!m)return;ne(H)},[l,m]),_e=Fe.exports.useCallback(function(){Ae(oe==="light"?"dark":"light")},[oe,Ae]);Fe.exports.useEffect(function(){var H=m||v==="system",ee;return H&&(ee=JC(Ae)),function(){ee&&H&&ee()}},[Ae,m,v]);var re=Fe.exports.useMemo(function(){return{colorMode:r!=null?r:oe,toggleColorMode:r?Mh:_e,setColorMode:r?Mh:Ae}},[oe,Ae,_e,r]);return Fe.exports.createElement(jw.Provider,{value:re},o)}function Dh(){return Dh=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var o=arguments[r];for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(e[c]=o[c])}return e},Dh.apply(this,arguments)}var Ww=function(r,o){return function(c){var m=String(o),v=r?r+"."+m:m;return Ni(c.__cssMap)&&v in c.__cssMap?c.__cssMap[v].varRef:o}};function Rh(e){var r=e.scale,o=e.transform,c=e.compose,m=function(T,l){var D,j=Ww(r,T)(l),oe=(D=o==null?void 0:o(j,l))!=null?D:j;return c&&(oe=c(oe,l)),oe};return m}function bo(e,r){return function(o){var c={property:o,scale:e};return c.transform=Rh({scale:e,transform:r}),c}}var tI=function(r){var o=r.rtl,c=r.ltr;return function(m){return m.direction==="rtl"?o:c}};function rI(e){var r=e.property,o=e.scale,c=e.transform;return{scale:o,property:tI(r),transform:o?Rh({scale:o,compose:c}):c}}var cg,hg,qw=["rotate(var(--chakra-rotate, 0))","scaleX(var(--chakra-scale-x, 1))","scaleY(var(--chakra-scale-y, 1))","skewX(var(--chakra-skew-x, 0))","skewY(var(--chakra-skew-y, 0))"];function nI(){return["translateX(var(--chakra-translate-x, 0))","translateY(var(--chakra-translate-y, 0))"].concat(qw).join(" ")}function iI(){return["translate3d(var(--chakra-translate-x, 0), var(--chakra-translate-y, 0), 0)"].concat(qw).join(" ")}var oI={"--chakra-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-sepia":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-drop-shadow":"var(--chakra-empty,/*!*/ /*!*/)",filter:["var(--chakra-blur)","var(--chakra-brightness)","var(--chakra-contrast)","var(--chakra-grayscale)","var(--chakra-hue-rotate)","var(--chakra-invert)","var(--chakra-saturate)","var(--chakra-sepia)","var(--chakra-drop-shadow)"].join(" ")},aI={backdropFilter:["var(--chakra-backdrop-blur)","var(--chakra-backdrop-brightness)","var(--chakra-backdrop-contrast)","var(--chakra-backdrop-grayscale)","var(--chakra-backdrop-hue-rotate)","var(--chakra-backdrop-invert)","var(--chakra-backdrop-opacity)","var(--chakra-backdrop-saturate)","var(--chakra-backdrop-sepia)"].join(" "),"--chakra-backdrop-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-opacity":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-sepia":"var(--chakra-empty,/*!*/ /*!*/)"};function sI(e){return{"--chakra-ring-offset-shadow":"var(--chakra-ring-inset) 0 0 0 var(--chakra-ring-offset-width) var(--chakra-ring-offset-color)","--chakra-ring-shadow":"var(--chakra-ring-inset) 0 0 0 calc(var(--chakra-ring-width) + var(--chakra-ring-offset-width)) var(--chakra-ring-color)","--chakra-ring-width":e,boxShadow:["var(--chakra-ring-offset-shadow)","var(--chakra-ring-shadow)","var(--chakra-shadow, 0 0 #0000)"].join(", ")}}var lI={"row-reverse":{space:"--chakra-space-x-reverse",divide:"--chakra-divide-x-reverse"},"column-reverse":{space:"--chakra-space-y-reverse",divide:"--chakra-divide-y-reverse"}},Zw="& > :not(style) ~ :not(style)",uI=(cg={},cg[Zw]={marginInlineStart:"calc(var(--chakra-space-x) * calc(1 - var(--chakra-space-x-reverse)))",marginInlineEnd:"calc(var(--chakra-space-x) * var(--chakra-space-x-reverse))"},cg),cI=(hg={},hg[Zw]={marginTop:"calc(var(--chakra-space-y) * calc(1 - var(--chakra-space-y-reverse)))",marginBottom:"calc(var(--chakra-space-y) * var(--chakra-space-y-reverse))"},hg);function nf(e,r){return nf=Object.setPrototypeOf||function(c,m){return c.__proto__=m,c},nf(e,r)}function hI(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&nf(e,r)}function gy(){gy=function(m,v){return new o(m,void 0,v)};var e=RegExp.prototype,r=new WeakMap;function o(m,v,T){var l=new RegExp(m,v);return r.set(l,T||r.get(m)),nf(l,o.prototype)}hI(o,RegExp),o.prototype.exec=function(m){var v=e.exec.call(this,m);return v&&(v.groups=c(v,this)),v},o.prototype[Symbol.replace]=function(m,v){if(typeof v=="string"){var T=r.get(this);return e[Symbol.replace].call(this,m,v.replace(/\$<([^>]+)>/g,function(D,j){return"$"+T[j]}))}else if(typeof v=="function"){var l=this;return e[Symbol.replace].call(this,m,function(){var D=arguments;return typeof D[D.length-1]!="object"&&(D=[].slice.call(D),D.push(c(D,l))),v.apply(this,D)})}else return e[Symbol.replace].call(this,m,v)};function c(m,v){var T=r.get(v);return Object.keys(T).reduce(function(l,D){return l[D]=m[T[D]],l},Object.create(null))}return gy.apply(this,arguments)}var yy={"to-t":"to top","to-tr":"to top right","to-r":"to right","to-br":"to bottom right","to-b":"to bottom","to-bl":"to bottom left","to-l":"to left","to-tl":"to top left"},dI=new Set(Object.values(yy)),Hw=new Set(["none","-moz-initial","inherit","initial","revert","unset"]),pI=function(r){return r.trim()};function fI(e,r){var o,c;if(e==null||Hw.has(e))return e;var m=gy(/(^[\x2DA-Za-z]+)\(((.*))\)/g,{type:1,values:2}),v=(o=(c=m.exec(e))==null?void 0:c.groups)!=null?o:{},T=v.type,l=v.values;if(!T||!l)return e;var D=T.includes("-gradient")?T:T+"-gradient",j=l.split(",").map(pI).filter(Boolean),oe=j[0],ne=j.slice(1);if((ne==null?void 0:ne.length)===0)return e;var U=oe in yy?yy[oe]:oe;ne.unshift(U);var Se=ne.map(function(Ae){if(dI.has(Ae))return Ae;var _e=Ae.indexOf(" "),re=_e!==-1?[Ae.substr(0,_e),Ae.substr(_e+1)]:[Ae],H=re[0],ee=re[1],fe=Xw(ee)?ee:ee&&ee.split(" "),be="colors."+H,Ne=be in r.__cssMap?r.__cssMap[be].varRef:H;return fe?[Ne].concat(Array.isArray(fe)?fe:[fe]).join(" "):Ne});return D+"("+Se.join(", ")+")"}var Xw=function(r){return R0(r)&&r.includes("(")&&r.includes(")")},mI=function(r,o){return fI(r,o!=null?o:{})},gI=function(r){var o=parseFloat(r.toString()),c=r.toString().replace(String(o),"");return{unitless:!c,value:o,unit:c}},Zo=function(r){return function(o){return r+"("+o+")"}},hr={filter:function(r){return r!=="auto"?r:oI},backdropFilter:function(r){return r!=="auto"?r:aI},ring:function(r){return sI(hr.px(r))},bgClip:function(r){return r==="text"?{color:"transparent",backgroundClip:"text"}:{backgroundClip:r}},transform:function(r){return r==="auto"?nI():r==="auto-gpu"?iI():r},px:function(r){if(r==null)return r;var o=gI(r),c=o.unitless;return c||zu(r)?r+"px":r},fraction:function(r){return!zu(r)||r>1?r:r*100+"%"},float:function(r,o){var c={left:"right",right:"left"};return o.direction==="rtl"?c[r]:r},degree:function(r){if(Mw(r)||r==null)return r;var o=R0(r)&&!r.endsWith("deg");return zu(r)||o?r+"deg":r},gradient:mI,blur:Zo("blur"),opacity:Zo("opacity"),brightness:Zo("brightness"),contrast:Zo("contrast"),dropShadow:Zo("drop-shadow"),grayscale:Zo("grayscale"),hueRotate:Zo("hue-rotate"),invert:Zo("invert"),saturate:Zo("saturate"),sepia:Zo("sepia"),bgImage:function(r){if(r==null)return r;var o=Xw(r)||Hw.has(r);return o?r:"url("+r+")"},outline:function(r){var o=String(r)==="0"||String(r)==="none";return r!==null&&o?{outline:"2px solid transparent",outlineOffset:"2px"}:{outline:r}},flexDirection:function(r){var o,c=(o=lI[r])!=null?o:{},m=c.space,v=c.divide,T={flexDirection:r};return m&&(T[m]=1),v&&(T[v]=1),T}},he={borderWidths:bo("borderWidths"),borderStyles:bo("borderStyles"),colors:bo("colors"),borders:bo("borders"),radii:bo("radii",hr.px),space:bo("space",hr.px),spaceT:bo("space",hr.px),degreeT:function(r){return{property:r,transform:hr.degree}},prop:function(r,o,c){return Dh({property:r,scale:o},o&&{transform:Rh({scale:o,transform:c})})},propT:function(r,o){return{property:r,transform:o}},sizes:bo("sizes",hr.px),sizesT:bo("sizes",hr.fraction),shadows:bo("shadows"),logical:rI,blur:bo("blur",hr.blur)},Ap={background:he.colors("background"),backgroundColor:he.colors("backgroundColor"),backgroundImage:he.propT("backgroundImage",hr.bgImage),backgroundSize:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundAttachment:!0,backgroundClip:{transform:hr.bgClip},bgSize:he.prop("backgroundSize"),bgPosition:he.prop("backgroundPosition"),bg:he.colors("background"),bgColor:he.colors("backgroundColor"),bgPos:he.prop("backgroundPosition"),bgRepeat:he.prop("backgroundRepeat"),bgAttachment:he.prop("backgroundAttachment"),bgGradient:he.propT("backgroundImage",hr.gradient),bgClip:{transform:hr.bgClip}};Object.assign(Ap,{bgImage:Ap.backgroundImage,bgImg:Ap.backgroundImage});var ir={border:he.borders("border"),borderWidth:he.borderWidths("borderWidth"),borderStyle:he.borderStyles("borderStyle"),borderColor:he.colors("borderColor"),borderRadius:he.radii("borderRadius"),borderTop:he.borders("borderTop"),borderBlockStart:he.borders("borderBlockStart"),borderTopLeftRadius:he.radii("borderTopLeftRadius"),borderStartStartRadius:he.logical({scale:"radii",property:{ltr:"borderTopLeftRadius",rtl:"borderTopRightRadius"}}),borderEndStartRadius:he.logical({scale:"radii",property:{ltr:"borderBottomLeftRadius",rtl:"borderBottomRightRadius"}}),borderTopRightRadius:he.radii("borderTopRightRadius"),borderStartEndRadius:he.logical({scale:"radii",property:{ltr:"borderTopRightRadius",rtl:"borderTopLeftRadius"}}),borderEndEndRadius:he.logical({scale:"radii",property:{ltr:"borderBottomRightRadius",rtl:"borderBottomLeftRadius"}}),borderRight:he.borders("borderRight"),borderInlineEnd:he.borders("borderInlineEnd"),borderBottom:he.borders("borderBottom"),borderBlockEnd:he.borders("borderBlockEnd"),borderBottomLeftRadius:he.radii("borderBottomLeftRadius"),borderBottomRightRadius:he.radii("borderBottomRightRadius"),borderLeft:he.borders("borderLeft"),borderInlineStart:{property:"borderInlineStart",scale:"borders"},borderInlineStartRadius:he.logical({scale:"radii",property:{ltr:["borderTopLeftRadius","borderBottomLeftRadius"],rtl:["borderTopRightRadius","borderBottomRightRadius"]}}),borderInlineEndRadius:he.logical({scale:"radii",property:{ltr:["borderTopRightRadius","borderBottomRightRadius"],rtl:["borderTopLeftRadius","borderBottomLeftRadius"]}}),borderX:he.borders(["borderLeft","borderRight"]),borderInline:he.borders("borderInline"),borderY:he.borders(["borderTop","borderBottom"]),borderBlock:he.borders("borderBlock"),borderTopWidth:he.borderWidths("borderTopWidth"),borderBlockStartWidth:he.borderWidths("borderBlockStartWidth"),borderTopColor:he.colors("borderTopColor"),borderBlockStartColor:he.colors("borderBlockStartColor"),borderTopStyle:he.borderStyles("borderTopStyle"),borderBlockStartStyle:he.borderStyles("borderBlockStartStyle"),borderBottomWidth:he.borderWidths("borderBottomWidth"),borderBlockEndWidth:he.borderWidths("borderBlockEndWidth"),borderBottomColor:he.colors("borderBottomColor"),borderBlockEndColor:he.colors("borderBlockEndColor"),borderBottomStyle:he.borderStyles("borderBottomStyle"),borderBlockEndStyle:he.borderStyles("borderBlockEndStyle"),borderLeftWidth:he.borderWidths("borderLeftWidth"),borderInlineStartWidth:he.borderWidths("borderInlineStartWidth"),borderLeftColor:he.colors("borderLeftColor"),borderInlineStartColor:he.colors("borderInlineStartColor"),borderLeftStyle:he.borderStyles("borderLeftStyle"),borderInlineStartStyle:he.borderStyles("borderInlineStartStyle"),borderRightWidth:he.borderWidths("borderRightWidth"),borderInlineEndWidth:he.borderWidths("borderInlineEndWidth"),borderRightColor:he.colors("borderRightColor"),borderInlineEndColor:he.colors("borderInlineEndColor"),borderRightStyle:he.borderStyles("borderRightStyle"),borderInlineEndStyle:he.borderStyles("borderInlineEndStyle"),borderTopRadius:he.radii(["borderTopLeftRadius","borderTopRightRadius"]),borderBottomRadius:he.radii(["borderBottomLeftRadius","borderBottomRightRadius"]),borderLeftRadius:he.radii(["borderTopLeftRadius","borderBottomLeftRadius"]),borderRightRadius:he.radii(["borderTopRightRadius","borderBottomRightRadius"])};Object.assign(ir,{rounded:ir.borderRadius,roundedTop:ir.borderTopRadius,roundedTopLeft:ir.borderTopLeftRadius,roundedTopRight:ir.borderTopRightRadius,roundedTopStart:ir.borderStartStartRadius,roundedTopEnd:ir.borderStartEndRadius,roundedBottom:ir.borderBottomRadius,roundedBottomLeft:ir.borderBottomLeftRadius,roundedBottomRight:ir.borderBottomRightRadius,roundedBottomStart:ir.borderEndStartRadius,roundedBottomEnd:ir.borderEndEndRadius,roundedLeft:ir.borderLeftRadius,roundedRight:ir.borderRightRadius,roundedStart:ir.borderInlineStartRadius,roundedEnd:ir.borderInlineEndRadius,borderStart:ir.borderInlineStart,borderEnd:ir.borderInlineEnd,borderTopStartRadius:ir.borderStartStartRadius,borderTopEndRadius:ir.borderStartEndRadius,borderBottomStartRadius:ir.borderEndStartRadius,borderBottomEndRadius:ir.borderEndEndRadius,borderStartRadius:ir.borderInlineStartRadius,borderEndRadius:ir.borderInlineEndRadius,borderStartWidth:ir.borderInlineStartWidth,borderEndWidth:ir.borderInlineEndWidth,borderStartColor:ir.borderInlineStartColor,borderEndColor:ir.borderInlineEndColor,borderStartStyle:ir.borderInlineStartStyle,borderEndStyle:ir.borderInlineEndStyle});var yI={color:he.colors("color"),textColor:he.colors("color"),fill:he.colors("fill"),stroke:he.colors("stroke")},_y={boxShadow:he.shadows("boxShadow"),mixBlendMode:!0,blendMode:he.prop("mixBlendMode"),backgroundBlendMode:!0,bgBlendMode:he.prop("backgroundBlendMode"),opacity:!0};Object.assign(_y,{shadow:_y.boxShadow});var _I={filter:{transform:hr.filter},blur:he.blur("--chakra-blur"),brightness:he.propT("--chakra-brightness",hr.brightness),contrast:he.propT("--chakra-contrast",hr.contrast),hueRotate:he.degreeT("--chakra-hue-rotate"),invert:he.propT("--chakra-invert",hr.invert),saturate:he.propT("--chakra-saturate",hr.saturate),dropShadow:he.propT("--chakra-drop-shadow",hr.dropShadow),backdropFilter:{transform:hr.backdropFilter},backdropBlur:he.blur("--chakra-backdrop-blur"),backdropBrightness:he.propT("--chakra-backdrop-brightness",hr.brightness),backdropContrast:he.propT("--chakra-backdrop-contrast",hr.contrast),backdropHueRotate:he.degreeT("--chakra-backdrop-hue-rotate"),backdropInvert:he.propT("--chakra-backdrop-invert",hr.invert),backdropSaturate:he.propT("--chakra-backdrop-saturate",hr.saturate)},of={alignItems:!0,alignContent:!0,justifyItems:!0,justifyContent:!0,flexWrap:!0,flexDirection:{transform:hr.flexDirection},experimental_spaceX:{static:uI,transform:Rh({scale:"space",transform:function(r){return r!==null?{"--chakra-space-x":r}:null}})},experimental_spaceY:{static:cI,transform:Rh({scale:"space",transform:function(r){return r!=null?{"--chakra-space-y":r}:null}})},flex:!0,flexFlow:!0,flexGrow:!0,flexShrink:!0,flexBasis:he.sizes("flexBasis"),justifySelf:!0,alignSelf:!0,order:!0,placeItems:!0,placeContent:!0,placeSelf:!0,gap:he.space("gap"),rowGap:he.space("rowGap"),columnGap:he.space("columnGap")};Object.assign(of,{flexDir:of.flexDirection});var Kw={gridGap:he.space("gridGap"),gridColumnGap:he.space("gridColumnGap"),gridRowGap:he.space("gridRowGap"),gridColumn:!0,gridRow:!0,gridAutoFlow:!0,gridAutoColumns:!0,gridColumnStart:!0,gridColumnEnd:!0,gridRowStart:!0,gridRowEnd:!0,gridAutoRows:!0,gridTemplate:!0,gridTemplateColumns:!0,gridTemplateRows:!0,gridTemplateAreas:!0,gridArea:!0},vI={appearance:!0,cursor:!0,resize:!0,userSelect:!0,pointerEvents:!0,outline:{transform:hr.outline},outlineOffset:!0,outlineColor:he.colors("outlineColor")},Qi={width:he.sizesT("width"),inlineSize:he.sizesT("inlineSize"),height:he.sizes("height"),blockSize:he.sizes("blockSize"),boxSize:he.sizes(["width","height"]),minWidth:he.sizes("minWidth"),minInlineSize:he.sizes("minInlineSize"),minHeight:he.sizes("minHeight"),minBlockSize:he.sizes("minBlockSize"),maxWidth:he.sizes("maxWidth"),maxInlineSize:he.sizes("maxInlineSize"),maxHeight:he.sizes("maxHeight"),maxBlockSize:he.sizes("maxBlockSize"),d:he.prop("display"),overflow:!0,overflowX:!0,overflowY:!0,overscrollBehavior:!0,overscrollBehaviorX:!0,overscrollBehaviorY:!0,display:!0,verticalAlign:!0,boxSizing:!0,boxDecorationBreak:!0,float:he.propT("float",hr.float),objectFit:!0,objectPosition:!0,visibility:!0,isolation:!0};Object.assign(Qi,{w:Qi.width,h:Qi.height,minW:Qi.minWidth,maxW:Qi.maxWidth,minH:Qi.minHeight,maxH:Qi.maxHeight,overscroll:Qi.overscrollBehavior,overscrollX:Qi.overscrollBehaviorX,overscrollY:Qi.overscrollBehaviorY});var xI={listStyleType:!0,listStylePosition:!0,listStylePos:he.prop("listStylePosition"),listStyleImage:!0,listStyleImg:he.prop("listStyleImage")},bI={border:"0px",clip:"rect(0, 0, 0, 0)",width:"1px",height:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},wI={position:"static",width:"auto",height:"auto",clip:"auto",padding:"0",margin:"0",overflow:"visible",whiteSpace:"normal"},dg=function(r,o,c){var m={},v=Bf(r,o,{});for(var T in v){var l=T in c&&c[T]!=null;l||(m[T]=v[T])}return m},SI={srOnly:{transform:function(r){return r===!0?bI:r==="focusable"?wI:{}}},layerStyle:{processResult:!0,transform:function(r,o,c){return dg(o,"layerStyles."+r,c)}},textStyle:{processResult:!0,transform:function(r,o,c){return dg(o,"textStyles."+r,c)}},apply:{processResult:!0,transform:function(r,o,c){return dg(o,r,c)}}},ch={position:!0,pos:he.prop("position"),zIndex:he.prop("zIndex","zIndices"),inset:he.spaceT("inset"),insetX:he.spaceT(["left","right"]),insetInline:he.spaceT("insetInline"),insetY:he.spaceT(["top","bottom"]),insetBlock:he.spaceT("insetBlock"),top:he.spaceT("top"),insetBlockStart:he.spaceT("insetBlockStart"),bottom:he.spaceT("bottom"),insetBlockEnd:he.spaceT("insetBlockEnd"),left:he.spaceT("left"),insetInlineStart:he.logical({scale:"space",property:{ltr:"left",rtl:"right"}}),right:he.spaceT("right"),insetInlineEnd:he.logical({scale:"space",property:{ltr:"right",rtl:"left"}})};Object.assign(ch,{insetStart:ch.insetInlineStart,insetEnd:ch.insetInlineEnd});var TI={ring:{transform:hr.ring},ringColor:he.colors("--chakra-ring-color"),ringOffset:he.prop("--chakra-ring-offset-width"),ringOffsetColor:he.colors("--chakra-ring-offset-color"),ringInset:he.prop("--chakra-ring-inset")},Ir={margin:he.spaceT("margin"),marginTop:he.spaceT("marginTop"),marginBlockStart:he.spaceT("marginBlockStart"),marginRight:he.spaceT("marginRight"),marginInlineEnd:he.spaceT("marginInlineEnd"),marginBottom:he.spaceT("marginBottom"),marginBlockEnd:he.spaceT("marginBlockEnd"),marginLeft:he.spaceT("marginLeft"),marginInlineStart:he.spaceT("marginInlineStart"),marginX:he.spaceT(["marginInlineStart","marginInlineEnd"]),marginInline:he.spaceT("marginInline"),marginY:he.spaceT(["marginTop","marginBottom"]),marginBlock:he.spaceT("marginBlock"),padding:he.space("padding"),paddingTop:he.space("paddingTop"),paddingBlockStart:he.space("paddingBlockStart"),paddingRight:he.space("paddingRight"),paddingBottom:he.space("paddingBottom"),paddingBlockEnd:he.space("paddingBlockEnd"),paddingLeft:he.space("paddingLeft"),paddingInlineStart:he.space("paddingInlineStart"),paddingInlineEnd:he.space("paddingInlineEnd"),paddingX:he.space(["paddingInlineStart","paddingInlineEnd"]),paddingInline:he.space("paddingInline"),paddingY:he.space(["paddingTop","paddingBottom"]),paddingBlock:he.space("paddingBlock")};Object.assign(Ir,{m:Ir.margin,mt:Ir.marginTop,mr:Ir.marginRight,me:Ir.marginInlineEnd,marginEnd:Ir.marginInlineEnd,mb:Ir.marginBottom,ml:Ir.marginLeft,ms:Ir.marginInlineStart,marginStart:Ir.marginInlineStart,mx:Ir.marginX,my:Ir.marginY,p:Ir.padding,pt:Ir.paddingTop,py:Ir.paddingY,px:Ir.paddingX,pb:Ir.paddingBottom,pl:Ir.paddingLeft,ps:Ir.paddingInlineStart,paddingStart:Ir.paddingInlineStart,pr:Ir.paddingRight,pe:Ir.paddingInlineEnd,paddingEnd:Ir.paddingInlineEnd});var EI={textDecorationColor:he.colors("textDecorationColor"),textDecoration:!0,textDecor:{property:"textDecoration"},textDecorationLine:!0,textDecorationStyle:!0,textDecorationThickness:!0,textUnderlineOffset:!0,textShadow:he.shadows("textShadow")},kI={clipPath:!0,transform:he.propT("transform",hr.transform),transformOrigin:!0,translateX:he.spaceT("--chakra-translate-x"),translateY:he.spaceT("--chakra-translate-y"),skewX:he.degreeT("--chakra-skew-x"),skewY:he.degreeT("--chakra-skew-y"),scaleX:he.prop("--chakra-scale-x"),scaleY:he.prop("--chakra-scale-y"),scale:he.prop(["--chakra-scale-x","--chakra-scale-y"]),rotate:he.degreeT("--chakra-rotate")},CI={transition:!0,transitionDelay:!0,animation:!0,willChange:!0,transitionDuration:he.prop("transitionDuration","transition.duration"),transitionProperty:he.prop("transitionProperty","transition.property"),transitionTimingFunction:he.prop("transitionTimingFunction","transition.easing")},II={fontFamily:he.prop("fontFamily","fonts"),fontSize:he.prop("fontSize","fontSizes",hr.px),fontWeight:he.prop("fontWeight","fontWeights"),lineHeight:he.prop("lineHeight","lineHeights"),letterSpacing:he.prop("letterSpacing","letterSpacings"),textAlign:!0,fontStyle:!0,wordBreak:!0,overflowWrap:!0,textOverflow:!0,textTransform:!0,whiteSpace:!0,noOfLines:{static:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:"var(--chakra-line-clamp)"},property:"--chakra-line-clamp"},isTruncated:{transform:function(r){if(r===!0)return{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}}},AI={scrollBehavior:!0,scrollSnapAlign:!0,scrollSnapStop:!0,scrollSnapType:!0,scrollMargin:he.spaceT("scrollMargin"),scrollMarginTop:he.spaceT("scrollMarginTop"),scrollMarginBottom:he.spaceT("scrollMarginBottom"),scrollMarginLeft:he.spaceT("scrollMarginLeft"),scrollMarginRight:he.spaceT("scrollMarginRight"),scrollMarginX:he.spaceT(["scrollMarginLeft","scrollMarginRight"]),scrollMarginY:he.spaceT(["scrollMarginTop","scrollMarginBottom"]),scrollPadding:he.spaceT("scrollPadding"),scrollPaddingTop:he.spaceT("scrollPaddingTop"),scrollPaddingBottom:he.spaceT("scrollPaddingBottom"),scrollPaddingLeft:he.spaceT("scrollPaddingLeft"),scrollPaddingRight:he.spaceT("scrollPaddingRight"),scrollPaddingX:he.spaceT(["scrollPaddingLeft","scrollPaddingRight"]),scrollPaddingY:he.spaceT(["scrollPaddingTop","scrollPaddingBottom"])};function Hx(e,r){(r==null||r>e.length)&&(r=e.length);for(var o=0,c=new Array(r);o<r;o++)c[o]=e[o];return c}function zI(e,r){if(!!e){if(typeof e=="string")return Hx(e,r);var o=Object.prototype.toString.call(e).slice(8,-1);if(o==="Object"&&e.constructor&&(o=e.constructor.name),o==="Map"||o==="Set")return Array.from(e);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return Hx(e,r)}}function PI(e,r){var o=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(o)return(o=o.call(e)).next.bind(o);if(Array.isArray(e)||(o=zI(e))||r&&e&&typeof e.length=="number"){o&&(e=o);var c=0;return function(){return c>=e.length?{done:!0}:{done:!1,value:e[c++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Nn={hover:function(r,o){return r+":hover "+o+", "+r+"[data-hover] "+o},focus:function(r,o){return r+":focus "+o+", "+r+"[data-focus] "+o},focusVisible:function(r,o){return r+":focus-visible "+o},focusWithin:function(r,o){return r+":focus-within "+o},active:function(r,o){return r+":active "+o+", "+r+"[data-active] "+o},disabled:function(r,o){return r+":disabled "+o+", "+r+"[data-disabled] "+o},invalid:function(r,o){return r+":invalid "+o+", "+r+"[data-invalid] "+o},checked:function(r,o){return r+":checked "+o+", "+r+"[data-checked] "+o},indeterminate:function(r,o){return r+":indeterminate "+o+", "+r+"[aria-checked=mixed] "+o+", "+r+"[data-indeterminate] "+o},readOnly:function(r,o){return r+":read-only "+o+", "+r+"[readonly] "+o+", "+r+"[data-read-only] "+o},expanded:function(r,o){return r+":read-only "+o+", "+r+"[aria-expanded=true] "+o+", "+r+"[data-expanded] "+o},placeholderShown:function(r,o){return r+":placeholder-shown "+o}},ss=function(r){return Yw(function(o){return r(o,"&")},"[role=group]","[data-group]",".group")},Aa=function(r){return Yw(function(o){return r(o,"~ &")},"[data-peer]",".peer")},Yw=function(r){for(var o=arguments.length,c=new Array(o>1?o-1:0),m=1;m<o;m++)c[m-1]=arguments[m];return c.map(r).join(", ")},Lh={_hover:"&:hover, &[data-hover]",_active:"&:active, &[data-active]",_focus:"&:focus, &[data-focus]",_highlighted:"&[data-highlighted]",_focusWithin:"&:focus-within",_focusVisible:"&:focus-visible",_disabled:"&[disabled], &[aria-disabled=true], &[data-disabled]",_readOnly:"&[aria-readonly=true], &[readonly], &[data-readonly]",_before:"&::before",_after:"&::after",_empty:"&:empty",_expanded:"&[aria-expanded=true], &[data-expanded]",_checked:"&[aria-checked=true], &[data-checked]",_grabbed:"&[aria-grabbed=true], &[data-grabbed]",_pressed:"&[aria-pressed=true], &[data-pressed]",_invalid:"&[aria-invalid=true], &[data-invalid]",_valid:"&[data-valid], &[data-state=valid]",_loading:"&[data-loading], &[aria-busy=true]",_selected:"&[aria-selected=true], &[data-selected]",_hidden:"&[hidden], &[data-hidden]",_autofill:"&:-webkit-autofill",_even:"&:nth-of-type(even)",_odd:"&:nth-of-type(odd)",_first:"&:first-of-type",_last:"&:last-of-type",_notFirst:"&:not(:first-of-type)",_notLast:"&:not(:last-of-type)",_visited:"&:visited",_activeLink:"&[aria-current=page]",_activeStep:"&[aria-current=step]",_indeterminate:"&:indeterminate, &[aria-checked=mixed], &[data-indeterminate]",_groupHover:ss(Nn.hover),_peerHover:Aa(Nn.hover),_groupFocus:ss(Nn.focus),_peerFocus:Aa(Nn.focus),_groupFocusVisible:ss(Nn.focusVisible),_peerFocusVisible:Aa(Nn.focusVisible),_groupActive:ss(Nn.active),_peerActive:Aa(Nn.active),_groupDisabled:ss(Nn.disabled),_peerDisabled:Aa(Nn.disabled),_groupInvalid:ss(Nn.invalid),_peerInvalid:Aa(Nn.invalid),_groupChecked:ss(Nn.checked),_peerChecked:Aa(Nn.checked),_groupFocusWithin:ss(Nn.focusWithin),_peerFocusWithin:Aa(Nn.focusWithin),_peerPlaceholderShown:Aa(Nn.placeholderShown),_placeholder:"&::placeholder",_placeholderShown:"&:placeholder-shown",_fullScreen:"&:fullscreen",_selection:"&::selection",_rtl:"[dir=rtl] &, &[dir=rtl]",_ltr:"[dir=ltr] &, &[dir=ltr]",_mediaDark:"@media (prefers-color-scheme: dark)",_mediaReduceMotion:"@media (prefers-reduced-motion: reduce)",_dark:".chakra-ui-dark &, [data-theme=dark] &, &[data-theme=dark]",_light:".chakra-ui-light &, [data-theme=light] &, &[data-theme=light]"},MI=B0(Lh),O0=Fa({},Ap,ir,yI,of,Qi,_I,TI,vI,Kw,SI,ch,_y,Ir,AI,II,EI,kI,xI,CI);Object.assign({},Ir,Qi,of,Kw,ch);var DI=[].concat(B0(O0),MI),RI=Dh({},O0,Lh),LI=function(r){return r in RI},BI=function(r){return function(o){if(!o.__breakpoints)return r;var c=o.__breakpoints,m=c.isResponsive,v=c.toArrayValue,T=c.media,l={};for(var D in r){var j=Qo(r[D],o);if(j!=null){if(j=Ni(j)&&m(j)?v(j):j,!Array.isArray(j)){l[D]=j;continue}for(var oe=j.slice(0,T.length).length,ne=0;ne<oe;ne+=1){var U=T==null?void 0:T[ne];if(!U){l[D]=j[ne];continue}l[U]=l[U]||{},j[ne]!=null&&(l[U][D]=j[ne])}}}return l}},FI=function(r,o){return r.startsWith("--")&&R0(o)&&!Mw(o)},OI=function(r,o){var c,m;if(o==null)return o;var v=function(ne){var U,Se;return(U=r.__cssMap)==null||(Se=U[ne])==null?void 0:Se.varRef},T=function(ne){var U;return(U=v(ne))!=null?U:ne},l=o.split(",").map(function(oe){return oe.trim()}),D=l[0],j=l[1];return o=(c=(m=v(D))!=null?m:T(j))!=null?c:T(o),o};function NI(e){var r=e.configs,o=r===void 0?{}:r,c=e.pseudos,m=c===void 0?{}:c,v=e.theme,T=function l(D,j){j===void 0&&(j=!1);var oe=Qo(D,v),ne=BI(oe)(v),U={};for(var Se in ne){var Ae,_e,re,H,ee,fe=ne[Se],be=Qo(fe,v);Se in m&&(Se=m[Se]),FI(Se,be)&&(be=OI(v,be));var Ne=o[Se];if(Ne===!0&&(Ne={property:Se}),Ni(be)){var Re;U[Se]=(Re=U[Se])!=null?Re:{},U[Se]=Fa({},U[Se],l(be,!0));continue}var Le=(Ae=(_e=Ne)==null||_e.transform==null?void 0:_e.transform(be,v,oe))!=null?Ae:be;Le=(re=Ne)!=null&&re.processResult?l(Le,!0):Le;var rt=Qo((H=Ne)==null?void 0:H.property,v);if(!j&&(ee=Ne)!=null&&ee.static){var Je=Qo(Ne.static,v);U=Fa({},U,Je)}if(rt&&Array.isArray(rt)){for(var wt=PI(rt),Er;!(Er=wt()).done;){var Nt=Er.value;U[Nt]=Le}continue}if(rt){rt==="&"&&Ni(Le)?U=Fa({},U,Le):U[rt]=Le;continue}if(Ni(Le)){U=Fa({},U,Le);continue}U[Se]=Le}return U};return T}var Jw=function(r){return function(o){var c=NI({theme:o,pseudos:Lh,configs:O0});return c(r)}};function Qw(e){return Ni(e)&&e.reference?e.reference:String(e)}var $f=function(r){for(var o=arguments.length,c=new Array(o>1?o-1:0),m=1;m<o;m++)c[m-1]=arguments[m];return c.map(Qw).join(" "+r+" ").replace(/calc/g,"")},Xx=function(){for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return"calc("+$f.apply(void 0,["+"].concat(o))+")"},Kx=function(){for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return"calc("+$f.apply(void 0,["-"].concat(o))+")"},vy=function(){for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return"calc("+$f.apply(void 0,["*"].concat(o))+")"},Yx=function(){for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return"calc("+$f.apply(void 0,["/"].concat(o))+")"},Jx=function(r){var o=Qw(r);return o!=null&&!Number.isNaN(parseFloat(o))?String(o).startsWith("-")?String(o).slice(1):"-"+o:vy(o,-1)},ml=Object.assign(function(e){return{add:function(){for(var o=arguments.length,c=new Array(o),m=0;m<o;m++)c[m]=arguments[m];return ml(Xx.apply(void 0,[e].concat(c)))},subtract:function(){for(var o=arguments.length,c=new Array(o),m=0;m<o;m++)c[m]=arguments[m];return ml(Kx.apply(void 0,[e].concat(c)))},multiply:function(){for(var o=arguments.length,c=new Array(o),m=0;m<o;m++)c[m]=arguments[m];return ml(vy.apply(void 0,[e].concat(c)))},divide:function(){for(var o=arguments.length,c=new Array(o),m=0;m<o;m++)c[m]=arguments[m];return ml(Yx.apply(void 0,[e].concat(c)))},negate:function(){return ml(Jx(e))},toString:function(){return e.toString()}}},{add:Xx,subtract:Kx,multiply:vy,divide:Yx,negate:Jx});function $I(e,r){return r===void 0&&(r="-"),e.replace(/\s+/g,r)}function e2(e){var r=$I(e.toString());if(r.includes("\\."))return e;var o=!Number.isInteger(parseFloat(e.toString()));return o?r.replace(".","\\."):e}function UI(e,r){return r===void 0&&(r=""),[r,e2(e)].filter(Boolean).join("-")}function VI(e,r){return"var("+e2(e)+(r?", "+r:"")+")"}function jI(e,r){return r===void 0&&(r=""),"--"+UI(e,r)}function GI(e,r,o){var c=jI(e,o);return{variable:c,reference:VI(c,r)}}function Qx(e,r){return GI(String(e).replace(/\./g,"-"),void 0,r)}function WI(e,r){for(var o={},c={},m=function(){var j=T[v],oe=j[0],ne=j[1],U=ne.isSemantic,Se=ne.value,Ae=Qx(oe,r==null?void 0:r.cssVarPrefix),_e=Ae.variable,re=Ae.reference;if(!U){if(oe.startsWith("space")){var H=oe.split("."),ee=H[0],fe=H.slice(1),be=ee+".-"+fe.join("."),Ne=ml.negate(Se),Re=ml.negate(re);c[be]={value:Ne,var:_e,varRef:Re}}return o[_e]=Se,c[oe]={value:Se,var:_e,varRef:re},"continue"}var Le=function(wt){var Er=String(oe).split(".")[0],Nt=[Er,wt].join("."),Vt=e[Nt];if(!Vt)return wt;var Fr=Qx(Nt,r==null?void 0:r.cssVarPrefix),kr=Fr.reference;return kr},rt=Ni(Se)?Se:{default:Se};o=Fa(o,Object.entries(rt).reduce(function(Je,wt){var Er,Nt,Vt=wt[0],Fr=wt[1],kr=Le(Fr);if(Vt==="default")return Je[_e]=kr,Je;var dt=(Er=Lh==null?void 0:Lh[Vt])!=null?Er:Vt;return Je[dt]=(Nt={},Nt[_e]=kr,Nt),Je},{})),c[oe]={value:re,var:_e,varRef:re}},v=0,T=Object.entries(e);v<T.length;v++)var l=m();return{cssVars:o,cssMap:c}}function qI(e,r){if(e==null)return{};var o={},c=Object.keys(e),m,v;for(v=0;v<c.length;v++)m=c[v],!(r.indexOf(m)>=0)&&(o[m]=e[m]);return o}var ZI=["__cssMap","__cssVars","__breakpoints"],HI=["colors","borders","borderWidths","borderStyles","fonts","fontSizes","fontWeights","letterSpacings","lineHeights","radii","space","shadows","sizes","zIndices","transition","blur"];function XI(e){var r=HI;return vC(e,r)}function KI(e){return e.semanticTokens}function YI(e){e.__cssMap,e.__cssVars,e.__breakpoints;var r=qI(e,ZI);return r}function JI(e){var r,o,c=e.tokens,m=e.semanticTokens,v=Object.entries((r=my(c))!=null?r:{}).map(function(l){var D=l[0],j=l[1],oe={isSemantic:!1,value:j};return[D,oe]}),T=Object.entries((o=my(m,1))!=null?o:{}).map(function(l){var D=l[0],j=l[1],oe={isSemantic:!0,value:j};return[D,oe]});return rf([].concat(v,T))}function QI(e){var r,o=YI(e),c=XI(o),m=KI(o),v=JI({tokens:c,semanticTokens:m}),T=(r=o.config)==null?void 0:r.cssVarPrefix,l=WI(v,{cssVarPrefix:T}),D=l.cssMap,j=l.cssVars,oe={"--chakra-ring-inset":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-ring-offset-width":"0px","--chakra-ring-offset-color":"#fff","--chakra-ring-color":"rgba(66, 153, 225, 0.6)","--chakra-ring-offset-shadow":"0 0 #0000","--chakra-ring-shadow":"0 0 #0000","--chakra-space-x-reverse":"0","--chakra-space-y-reverse":"0"};return Object.assign(o,{__cssVars:Dh({},oe,j),__cssMap:D,__breakpoints:EC(o.breakpoints)}),o}var eA=typeof Element!="undefined",tA=typeof Map=="function",rA=typeof Set=="function",nA=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function zp(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var o,c,m;if(Array.isArray(e)){if(o=e.length,o!=r.length)return!1;for(c=o;c--!==0;)if(!zp(e[c],r[c]))return!1;return!0}var v;if(tA&&e instanceof Map&&r instanceof Map){if(e.size!==r.size)return!1;for(v=e.entries();!(c=v.next()).done;)if(!r.has(c.value[0]))return!1;for(v=e.entries();!(c=v.next()).done;)if(!zp(c.value[1],r.get(c.value[0])))return!1;return!0}if(rA&&e instanceof Set&&r instanceof Set){if(e.size!==r.size)return!1;for(v=e.entries();!(c=v.next()).done;)if(!r.has(c.value[0]))return!1;return!0}if(nA&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(r)){if(o=e.length,o!=r.length)return!1;for(c=o;c--!==0;)if(e[c]!==r[c])return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(m=Object.keys(e),o=m.length,o!==Object.keys(r).length)return!1;for(c=o;c--!==0;)if(!Object.prototype.hasOwnProperty.call(r,m[c]))return!1;if(eA&&e instanceof Element)return!1;for(c=o;c--!==0;)if(!((m[c]==="_owner"||m[c]==="__v"||m[c]==="__o")&&e.$$typeof)&&!zp(e[m[c]],r[m[c]]))return!1;return!0}return e!==e&&r!==r}var iA=function(r,o){try{return zp(r,o)}catch(c){if((c.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw c}},oA=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,aA=bw(function(e){return oA.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),sA=aA,lA=function(r){return r!=="theme"},e1=function(r){return typeof r=="string"&&r.charCodeAt(0)>96?sA:lA},t1=function(r,o,c){var m;if(o){var v=o.shouldForwardProp;m=r.__emotion_forwardProp&&v?function(T){return r.__emotion_forwardProp(T)&&v(T)}:v}return typeof m!="function"&&c&&(m=r.__emotion_forwardProp),m},uA=Du["useInsertionEffect"]?Du["useInsertionEffect"]:function(r){r()};function cA(e){uA(e)}var hA=function(r){var o=r.cache,c=r.serialized,m=r.isStringTag;return kw(o,c,m),cA(function(){return Cw(o,c,m)}),null},dA=function e(r,o){var c=r.__emotion_real===r,m=c&&r.__emotion_base||r,v,T;o!==void 0&&(v=o.label,T=o.target);var l=t1(r,o,c),D=l||e1(m),j=!D("as");return function(){var oe=arguments,ne=c&&r.__emotion_styles!==void 0?r.__emotion_styles.slice(0):[];if(v!==void 0&&ne.push("label:"+v+";"),oe[0]==null||oe[0].raw===void 0)ne.push.apply(ne,oe);else{ne.push(oe[0][0]);for(var U=oe.length,Se=1;Se<U;Se++)ne.push(oe[Se],oe[0][Se])}var Ae=zw(function(_e,re,H){var ee=j&&_e.as||m,fe="",be=[],Ne=_e;if(_e.theme==null){Ne={};for(var Re in _e)Ne[Re]=_e[Re];Ne.theme=Fe.exports.useContext(Ph)}typeof _e.className=="string"?fe=nC(re.registered,be,_e.className):_e.className!=null&&(fe=_e.className+" ");var Le=P0(ne.concat(be),re.registered,Ne);fe+=re.key+"-"+Le.name,T!==void 0&&(fe+=" "+T);var rt=j&&l===void 0?e1(ee):D,Je={};for(var wt in _e)j&&wt==="as"||rt(wt)&&(Je[wt]=_e[wt]);return Je.className=fe,Je.ref=H,Fe.exports.createElement(Fe.exports.Fragment,null,Fe.exports.createElement(hA,{cache:re,serialized:Le,isStringTag:typeof ee=="string"}),Fe.exports.createElement(ee,Je))});return Ae.displayName=v!==void 0?v:"Styled("+(typeof m=="string"?m:m.displayName||m.name||"Component")+")",Ae.defaultProps=r.defaultProps,Ae.__emotion_real=Ae,Ae.__emotion_base=m,Ae.__emotion_styles=ne,Ae.__emotion_forwardProp=l,Object.defineProperty(Ae,"toString",{value:function(){return"."+T}}),Ae.withComponent=function(_e,re){return e(_e,tf({},o,re,{shouldForwardProp:t1(Ae,re,!0)})).apply(void 0,ne)},Ae}},pA=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],xy=dA.bind();pA.forEach(function(e){xy[e]=xy(e)});function by(){return by=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var o=arguments[r];for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(e[c]=o[c])}return e},by.apply(this,arguments)}var fA=function(r){var o=r.cssVarsRoot,c=r.theme,m=r.children,v=Fe.exports.useMemo(function(){return QI(c)},[c]);return Fe.exports.createElement(hC,{theme:v},Fe.exports.createElement(mA,{root:o}),m)},mA=function(r){var o=r.root,c=o===void 0?":host, :root":o;return Fe.exports.createElement(M0,{styles:function(v){var T;return T={},T[c]=v.__cssVars,T}})};function gA(){var e=Fe.exports.useContext(Ph);if(!e)throw Error("useTheme: `theme` is undefined. Seems you forgot to wrap your app in `<ChakraProvider />` or `<ThemeProvider />`");return e}Of({name:"StylesContext",errorMessage:"useStyles: `styles` is undefined. Seems you forgot to wrap the components in `<StylesProvider />` "});var yA=function(){var r=Gw(),o=r.colorMode;return Fe.exports.createElement(M0,{styles:function(m){var v=Bf(m,"styles.global"),T=Qo(v,{theme:m,colorMode:o});if(!!T){var l=Jw(T)(m);return l}}})};function Va(e){return Dw(e,["styleConfig","size","variant","colorScheme"])}function _A(){var e=Gw(),r=gA();return by({},e,{theme:r})}function N0(e,r){if(e==null)return{};var o={},c=Object.keys(e),m,v;for(v=0;v<c.length;v++)m=c[v],!(r.indexOf(m)>=0)&&(o[m]=e[m]);return o}var vA=new Set([].concat(DI,["textStyle","layerStyle","apply","isTruncated","noOfLines","focusBorderColor","errorBorderColor","as","__css","css","sx"])),xA=new Set(["htmlWidth","htmlHeight","htmlSize"]),bA=function(r){return xA.has(r)||!vA.has(r)},wA=["theme","css","__css","sx"],SA=["baseStyle"],TA=function(r){var o=r.baseStyle;return function(c){c.theme;var m=c.css,v=c.__css,T=c.sx,l=N0(c,wA),D=Rw(l,function(U,Se){return LI(Se)}),j=Qo(o,c),oe=Object.assign({},v,j,L0(D),T),ne=Jw(oe)(c.theme);return m?[ne,m]:ne}};function pg(e,r){var o=r!=null?r:{},c=o.baseStyle,m=N0(o,SA);m.shouldForwardProp||(m.shouldForwardProp=bA);var v=TA({baseStyle:c});return xy(e,m)(v)}function zr(e){return Fe.exports.forwardRef(e)}var EA=["styleConfig"];function ja(e,r,o){var c;r===void 0&&(r={}),o===void 0&&(o={});var m=r,v=m.styleConfig,T=N0(m,EA),l=_A(),D=l.theme,j=l.colorMode,oe=Bf(D,"components."+e),ne=v||oe,U=Fa({theme:D,colorMode:j},(c=ne==null?void 0:ne.defaultProps)!=null?c:{},L0(Dw(T,["children"]))),Se=Fe.exports.useRef({});if(ne){var Ae,_e,re,H,ee,fe,be=Qo((Ae=ne.baseStyle)!=null?Ae:{},U),Ne=Qo((_e=(re=ne.variants)==null?void 0:re[U.variant])!=null?_e:{},U),Re=Qo((H=(ee=ne.sizes)==null?void 0:ee[U.size])!=null?H:{},U),Le=Fa({},be,Re,Ne);(fe=o)!=null&&fe.isMultiPart&&ne.parts&&ne.parts.forEach(function(Je){var wt;Le[Je]=(wt=Le[Je])!=null?wt:{}});var rt=iA(Se.current,Le);rt||(Se.current=Le)}return Se.current}function kA(e,r){return ja(e,r,{isMultiPart:!0})}function CA(){var e=new Map;return new Proxy(pg,{apply:function(o,c,m){return pg.apply(void 0,m)},get:function(o,c){return e.has(c)||e.set(c,pg(c)),e.get(c)}})}var Nr=CA(),IA=function(r){var o=r.children,c=r.colorModeManager,m=r.portalZIndex,v=r.resetCSS,T=v===void 0?!0:v,l=r.theme,D=l===void 0?{}:l,j=r.environment,oe=r.cssVarsRoot,ne=Fe.exports.createElement(qC,{environment:j},o);return Fe.exports.createElement(PC,null,Fe.exports.createElement(fA,{theme:D,cssVarsRoot:oe},Fe.exports.createElement(eI,{colorModeManager:c,options:D.config},T&&Fe.exports.createElement(mC,null),Fe.exports.createElement(yA,null),m?Fe.exports.createElement(RC,{zIndex:m},ne):ne)))},t2={px:"1px",.5:"0.125rem",1:"0.25rem",1.5:"0.375rem",2:"0.5rem",2.5:"0.625rem",3:"0.75rem",3.5:"0.875rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem",12:"3rem",14:"3.5rem",16:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",52:"13rem",56:"14rem",60:"15rem",64:"16rem",72:"18rem",80:"20rem",96:"24rem"};function en(){return en=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var o=arguments[r];for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(e[c]=o[c])}return e},en.apply(this,arguments)}var AA={max:"max-content",min:"min-content",full:"100%","3xs":"14rem","2xs":"16rem",xs:"20rem",sm:"24rem",md:"28rem",lg:"32rem",xl:"36rem","2xl":"42rem","3xl":"48rem","4xl":"56rem","5xl":"64rem","6xl":"72rem","7xl":"80rem","8xl":"90rem"},zA={sm:"640px",md:"768px",lg:"1024px",xl:"1280px"},r2=en({},t2,AA,{container:zA});function Vn(e,r){PA(e)&&(e="100%");var o=MA(e);return e=r===360?e:Math.min(r,Math.max(0,parseFloat(e))),o&&(e=parseInt(String(e*r),10)/100),Math.abs(e-r)<1e-6?1:(r===360?e=(e<0?e%r+r:e%r)/parseFloat(String(r)):e=e%r/parseFloat(String(r)),e)}function np(e){return Math.min(1,Math.max(0,e))}function PA(e){return typeof e=="string"&&e.indexOf(".")!==-1&&parseFloat(e)===1}function MA(e){return typeof e=="string"&&e.indexOf("%")!==-1}function n2(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function ip(e){return e<=1?Number(e)*100+"%":e}function wl(e){return e.length===1?"0"+e:String(e)}function DA(e,r,o){return{r:Vn(e,255)*255,g:Vn(r,255)*255,b:Vn(o,255)*255}}function r1(e,r,o){e=Vn(e,255),r=Vn(r,255),o=Vn(o,255);var c=Math.max(e,r,o),m=Math.min(e,r,o),v=0,T=0,l=(c+m)/2;if(c===m)T=0,v=0;else{var D=c-m;switch(T=l>.5?D/(2-c-m):D/(c+m),c){case e:v=(r-o)/D+(r<o?6:0);break;case r:v=(o-e)/D+2;break;case o:v=(e-r)/D+4;break}v/=6}return{h:v,s:T,l}}function fg(e,r,o){return o<0&&(o+=1),o>1&&(o-=1),o<1/6?e+(r-e)*(6*o):o<1/2?r:o<2/3?e+(r-e)*(2/3-o)*6:e}function RA(e,r,o){var c,m,v;if(e=Vn(e,360),r=Vn(r,100),o=Vn(o,100),r===0)m=o,v=o,c=o;else{var T=o<.5?o*(1+r):o+r-o*r,l=2*o-T;c=fg(l,T,e+1/3),m=fg(l,T,e),v=fg(l,T,e-1/3)}return{r:c*255,g:m*255,b:v*255}}function n1(e,r,o){e=Vn(e,255),r=Vn(r,255),o=Vn(o,255);var c=Math.max(e,r,o),m=Math.min(e,r,o),v=0,T=c,l=c-m,D=c===0?0:l/c;if(c===m)v=0;else{switch(c){case e:v=(r-o)/l+(r<o?6:0);break;case r:v=(o-e)/l+2;break;case o:v=(e-r)/l+4;break}v/=6}return{h:v,s:D,v:T}}function LA(e,r,o){e=Vn(e,360)*6,r=Vn(r,100),o=Vn(o,100);var c=Math.floor(e),m=e-c,v=o*(1-r),T=o*(1-m*r),l=o*(1-(1-m)*r),D=c%6,j=[o,T,v,v,l,o][D],oe=[l,o,o,T,v,v][D],ne=[v,v,l,o,o,T][D];return{r:j*255,g:oe*255,b:ne*255}}function i1(e,r,o,c){var m=[wl(Math.round(e).toString(16)),wl(Math.round(r).toString(16)),wl(Math.round(o).toString(16))];return c&&m[0].startsWith(m[0].charAt(1))&&m[1].startsWith(m[1].charAt(1))&&m[2].startsWith(m[2].charAt(1))?m[0].charAt(0)+m[1].charAt(0)+m[2].charAt(0):m.join("")}function BA(e,r,o,c,m){var v=[wl(Math.round(e).toString(16)),wl(Math.round(r).toString(16)),wl(Math.round(o).toString(16)),wl(FA(c))];return m&&v[0].startsWith(v[0].charAt(1))&&v[1].startsWith(v[1].charAt(1))&&v[2].startsWith(v[2].charAt(1))&&v[3].startsWith(v[3].charAt(1))?v[0].charAt(0)+v[1].charAt(0)+v[2].charAt(0)+v[3].charAt(0):v.join("")}function FA(e){return Math.round(parseFloat(e)*255).toString(16)}function o1(e){return Bi(e)/255}function Bi(e){return parseInt(e,16)}function OA(e){return{r:e>>16,g:(e&65280)>>8,b:e&255}}var wy={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function NA(e){var r={r:0,g:0,b:0},o=1,c=null,m=null,v=null,T=!1,l=!1;return typeof e=="string"&&(e=VA(e)),typeof e=="object"&&(za(e.r)&&za(e.g)&&za(e.b)?(r=DA(e.r,e.g,e.b),T=!0,l=String(e.r).substr(-1)==="%"?"prgb":"rgb"):za(e.h)&&za(e.s)&&za(e.v)?(c=ip(e.s),m=ip(e.v),r=LA(e.h,c,m),T=!0,l="hsv"):za(e.h)&&za(e.s)&&za(e.l)&&(c=ip(e.s),v=ip(e.l),r=RA(e.h,c,v),T=!0,l="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(o=e.a)),o=n2(o),{ok:T,format:e.format||l,r:Math.min(255,Math.max(r.r,0)),g:Math.min(255,Math.max(r.g,0)),b:Math.min(255,Math.max(r.b,0)),a:o}}var $A="[-\\+]?\\d+%?",UA="[-\\+]?\\d*\\.\\d+%?",ys="(?:"+UA+")|(?:"+$A+")",mg="[\\s|\\(]+("+ys+")[,|\\s]+("+ys+")[,|\\s]+("+ys+")\\s*\\)?",gg="[\\s|\\(]+("+ys+")[,|\\s]+("+ys+")[,|\\s]+("+ys+")[,|\\s]+("+ys+")\\s*\\)?",So={CSS_UNIT:new RegExp(ys),rgb:new RegExp("rgb"+mg),rgba:new RegExp("rgba"+gg),hsl:new RegExp("hsl"+mg),hsla:new RegExp("hsla"+gg),hsv:new RegExp("hsv"+mg),hsva:new RegExp("hsva"+gg),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function VA(e){if(e=e.trim().toLowerCase(),e.length===0)return!1;var r=!1;if(wy[e])e=wy[e],r=!0;else if(e==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var o=So.rgb.exec(e);return o?{r:o[1],g:o[2],b:o[3]}:(o=So.rgba.exec(e),o?{r:o[1],g:o[2],b:o[3],a:o[4]}:(o=So.hsl.exec(e),o?{h:o[1],s:o[2],l:o[3]}:(o=So.hsla.exec(e),o?{h:o[1],s:o[2],l:o[3],a:o[4]}:(o=So.hsv.exec(e),o?{h:o[1],s:o[2],v:o[3]}:(o=So.hsva.exec(e),o?{h:o[1],s:o[2],v:o[3],a:o[4]}:(o=So.hex8.exec(e),o?{r:Bi(o[1]),g:Bi(o[2]),b:Bi(o[3]),a:o1(o[4]),format:r?"name":"hex8"}:(o=So.hex6.exec(e),o?{r:Bi(o[1]),g:Bi(o[2]),b:Bi(o[3]),format:r?"name":"hex"}:(o=So.hex4.exec(e),o?{r:Bi(o[1]+o[1]),g:Bi(o[2]+o[2]),b:Bi(o[3]+o[3]),a:o1(o[4]+o[4]),format:r?"name":"hex8"}:(o=So.hex3.exec(e),o?{r:Bi(o[1]+o[1]),g:Bi(o[2]+o[2]),b:Bi(o[3]+o[3]),format:r?"name":"hex"}:!1)))))))))}function za(e){return Boolean(So.CSS_UNIT.exec(String(e)))}var Wh=function(){function e(r,o){r===void 0&&(r=""),o===void 0&&(o={});var c;if(r instanceof e)return r;typeof r=="number"&&(r=OA(r)),this.originalInput=r;var m=NA(r);this.originalInput=r,this.r=m.r,this.g=m.g,this.b=m.b,this.a=m.a,this.roundA=Math.round(100*this.a)/100,this.format=(c=o.format)!==null&&c!==void 0?c:m.format,this.gradientType=o.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=m.ok}return e.prototype.isDark=function(){return this.getBrightness()<128},e.prototype.isLight=function(){return!this.isDark()},e.prototype.getBrightness=function(){var r=this.toRgb();return(r.r*299+r.g*587+r.b*114)/1e3},e.prototype.getLuminance=function(){var r=this.toRgb(),o,c,m,v=r.r/255,T=r.g/255,l=r.b/255;return v<=.03928?o=v/12.92:o=Math.pow((v+.055)/1.055,2.4),T<=.03928?c=T/12.92:c=Math.pow((T+.055)/1.055,2.4),l<=.03928?m=l/12.92:m=Math.pow((l+.055)/1.055,2.4),.2126*o+.7152*c+.0722*m},e.prototype.getAlpha=function(){return this.a},e.prototype.setAlpha=function(r){return this.a=n2(r),this.roundA=Math.round(100*this.a)/100,this},e.prototype.toHsv=function(){var r=n1(this.r,this.g,this.b);return{h:r.h*360,s:r.s,v:r.v,a:this.a}},e.prototype.toHsvString=function(){var r=n1(this.r,this.g,this.b),o=Math.round(r.h*360),c=Math.round(r.s*100),m=Math.round(r.v*100);return this.a===1?"hsv("+o+", "+c+"%, "+m+"%)":"hsva("+o+", "+c+"%, "+m+"%, "+this.roundA+")"},e.prototype.toHsl=function(){var r=r1(this.r,this.g,this.b);return{h:r.h*360,s:r.s,l:r.l,a:this.a}},e.prototype.toHslString=function(){var r=r1(this.r,this.g,this.b),o=Math.round(r.h*360),c=Math.round(r.s*100),m=Math.round(r.l*100);return this.a===1?"hsl("+o+", "+c+"%, "+m+"%)":"hsla("+o+", "+c+"%, "+m+"%, "+this.roundA+")"},e.prototype.toHex=function(r){return r===void 0&&(r=!1),i1(this.r,this.g,this.b,r)},e.prototype.toHexString=function(r){return r===void 0&&(r=!1),"#"+this.toHex(r)},e.prototype.toHex8=function(r){return r===void 0&&(r=!1),BA(this.r,this.g,this.b,this.a,r)},e.prototype.toHex8String=function(r){return r===void 0&&(r=!1),"#"+this.toHex8(r)},e.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},e.prototype.toRgbString=function(){var r=Math.round(this.r),o=Math.round(this.g),c=Math.round(this.b);return this.a===1?"rgb("+r+", "+o+", "+c+")":"rgba("+r+", "+o+", "+c+", "+this.roundA+")"},e.prototype.toPercentageRgb=function(){var r=function(o){return Math.round(Vn(o,255)*100)+"%"};return{r:r(this.r),g:r(this.g),b:r(this.b),a:this.a}},e.prototype.toPercentageRgbString=function(){var r=function(o){return Math.round(Vn(o,255)*100)};return this.a===1?"rgb("+r(this.r)+"%, "+r(this.g)+"%, "+r(this.b)+"%)":"rgba("+r(this.r)+"%, "+r(this.g)+"%, "+r(this.b)+"%, "+this.roundA+")"},e.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var r="#"+i1(this.r,this.g,this.b,!1),o=0,c=Object.entries(wy);o<c.length;o++){var m=c[o],v=m[0],T=m[1];if(r===T)return v}return!1},e.prototype.toString=function(r){var o=Boolean(r);r=r!=null?r:this.format;var c=!1,m=this.a<1&&this.a>=0,v=!o&&m&&(r.startsWith("hex")||r==="name");return v?r==="name"&&this.a===0?this.toName():this.toRgbString():(r==="rgb"&&(c=this.toRgbString()),r==="prgb"&&(c=this.toPercentageRgbString()),(r==="hex"||r==="hex6")&&(c=this.toHexString()),r==="hex3"&&(c=this.toHexString(!0)),r==="hex4"&&(c=this.toHex8String(!0)),r==="hex8"&&(c=this.toHex8String()),r==="name"&&(c=this.toName()),r==="hsl"&&(c=this.toHslString()),r==="hsv"&&(c=this.toHsvString()),c||this.toHexString())},e.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},e.prototype.clone=function(){return new e(this.toString())},e.prototype.lighten=function(r){r===void 0&&(r=10);var o=this.toHsl();return o.l+=r/100,o.l=np(o.l),new e(o)},e.prototype.brighten=function(r){r===void 0&&(r=10);var o=this.toRgb();return o.r=Math.max(0,Math.min(255,o.r-Math.round(255*-(r/100)))),o.g=Math.max(0,Math.min(255,o.g-Math.round(255*-(r/100)))),o.b=Math.max(0,Math.min(255,o.b-Math.round(255*-(r/100)))),new e(o)},e.prototype.darken=function(r){r===void 0&&(r=10);var o=this.toHsl();return o.l-=r/100,o.l=np(o.l),new e(o)},e.prototype.tint=function(r){return r===void 0&&(r=10),this.mix("white",r)},e.prototype.shade=function(r){return r===void 0&&(r=10),this.mix("black",r)},e.prototype.desaturate=function(r){r===void 0&&(r=10);var o=this.toHsl();return o.s-=r/100,o.s=np(o.s),new e(o)},e.prototype.saturate=function(r){r===void 0&&(r=10);var o=this.toHsl();return o.s+=r/100,o.s=np(o.s),new e(o)},e.prototype.greyscale=function(){return this.desaturate(100)},e.prototype.spin=function(r){var o=this.toHsl(),c=(o.h+r)%360;return o.h=c<0?360+c:c,new e(o)},e.prototype.mix=function(r,o){o===void 0&&(o=50);var c=this.toRgb(),m=new e(r).toRgb(),v=o/100,T={r:(m.r-c.r)*v+c.r,g:(m.g-c.g)*v+c.g,b:(m.b-c.b)*v+c.b,a:(m.a-c.a)*v+c.a};return new e(T)},e.prototype.analogous=function(r,o){r===void 0&&(r=6),o===void 0&&(o=30);var c=this.toHsl(),m=360/o,v=[this];for(c.h=(c.h-(m*r>>1)+720)%360;--r;)c.h=(c.h+m)%360,v.push(new e(c));return v},e.prototype.complement=function(){var r=this.toHsl();return r.h=(r.h+180)%360,new e(r)},e.prototype.monochromatic=function(r){r===void 0&&(r=6);for(var o=this.toHsv(),c=o.h,m=o.s,v=o.v,T=[],l=1/r;r--;)T.push(new e({h:c,s:m,v})),v=(v+l)%1;return T},e.prototype.splitcomplement=function(){var r=this.toHsl(),o=r.h;return[this,new e({h:(o+72)%360,s:r.s,l:r.l}),new e({h:(o+216)%360,s:r.s,l:r.l})]},e.prototype.onBackground=function(r){var o=this.toRgb(),c=new e(r).toRgb();return new e({r:c.r+(o.r-c.r)*o.a,g:c.g+(o.g-c.g)*o.a,b:c.b+(o.b-c.b)*o.a})},e.prototype.triad=function(){return this.polyad(3)},e.prototype.tetrad=function(){return this.polyad(4)},e.prototype.polyad=function(r){for(var o=this.toHsl(),c=o.h,m=[this],v=360/r,T=1;T<r;T++)m.push(new e({h:(c+T*v)%360,s:o.s,l:o.l}));return m},e.prototype.equals=function(r){return this.toRgbString()===new e(r).toRgbString()},e}();function i2(e){if(e===void 0&&(e={}),e.count!==void 0&&e.count!==null){var r=e.count,o=[];for(e.count=void 0;r>o.length;)e.count=null,e.seed&&(e.seed+=1),o.push(i2(e));return e.count=r,o}var c=jA(e.hue,e.seed),m=GA(c,e),v=WA(c,m,e),T={h:c,s:m,v};return e.alpha!==void 0&&(T.a=e.alpha),new Wh(T)}function jA(e,r){var o=ZA(e),c=af(o,r);return c<0&&(c=360+c),c}function GA(e,r){if(r.hue==="monochrome")return 0;if(r.luminosity==="random")return af([0,100],r.seed);var o=o2(e).saturationRange,c=o[0],m=o[1];switch(r.luminosity){case"bright":c=55;break;case"dark":c=m-10;break;case"light":m=55;break}return af([c,m],r.seed)}function WA(e,r,o){var c=qA(e,r),m=100;switch(o.luminosity){case"dark":m=c+20;break;case"light":c=(m+c)/2;break;case"random":c=0,m=100;break}return af([c,m],o.seed)}function qA(e,r){for(var o=o2(e).lowerBounds,c=0;c<o.length-1;c++){var m=o[c][0],v=o[c][1],T=o[c+1][0],l=o[c+1][1];if(r>=m&&r<=T){var D=(l-v)/(T-m),j=v-D*m;return D*r+j}}return 0}function ZA(e){var r=parseInt(e,10);if(!Number.isNaN(r)&&r<360&&r>0)return[r,r];if(typeof e=="string"){var o=s2.find(function(T){return T.name===e});if(o){var c=a2(o);if(c.hueRange)return c.hueRange}var m=new Wh(e);if(m.isValid){var v=m.toHsv().h;return[v,v]}}return[0,360]}function o2(e){e>=334&&e<=360&&(e-=360);for(var r=0,o=s2;r<o.length;r++){var c=o[r],m=a2(c);if(m.hueRange&&e>=m.hueRange[0]&&e<=m.hueRange[1])return m}throw Error("Color not found")}function af(e,r){if(r===void 0)return Math.floor(e[0]+Math.random()*(e[1]+1-e[0]));var o=e[1]||1,c=e[0]||0;r=(r*9301+49297)%233280;var m=r/233280;return Math.floor(c+m*(o-c))}function a2(e){var r=e.lowerBounds[0][0],o=e.lowerBounds[e.lowerBounds.length-1][0],c=e.lowerBounds[e.lowerBounds.length-1][1],m=e.lowerBounds[0][1];return{name:e.name,hueRange:e.hueRange,lowerBounds:e.lowerBounds,saturationRange:[r,o],brightnessRange:[c,m]}}var s2=[{name:"monochrome",hueRange:null,lowerBounds:[[0,0],[100,0]]},{name:"red",hueRange:[-26,18],lowerBounds:[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]},{name:"orange",hueRange:[19,46],lowerBounds:[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]},{name:"yellow",hueRange:[47,62],lowerBounds:[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]},{name:"green",hueRange:[63,178],lowerBounds:[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]},{name:"blue",hueRange:[179,257],lowerBounds:[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]},{name:"purple",hueRange:[258,282],lowerBounds:[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]},{name:"pink",hueRange:[283,334],lowerBounds:[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]]}],mn=function(r,o,c){var m=Bf(r,"colors."+o,o),v=new Wh(m),T=v.isValid;return T?m:c},HA=function(r){return function(o){var c=mn(o,r),m=new Wh(c).isDark();return m?"dark":"light"}},XA=function(r){return function(o){return HA(r)(o)==="dark"}},Nu=function(r,o){return function(c){var m=mn(c,r);return new Wh(m).setAlpha(o).toRgbString()}};function a1(e,r){return e===void 0&&(e="1rem"),r===void 0&&(r="rgba(255, 255, 255, 0.15)"),{backgroundImage:`linear-gradient(
    45deg,
    `+r+` 25%,
    transparent 25%,
    transparent 50%,
    `+r+` 50%,
    `+r+` 75%,
    transparent 75%,
    transparent
  )`,backgroundSize:e+" "+e}}function KA(e){var r=i2().toHexString();return!e||_C(e)?r:e.string&&e.colors?JA(e.string,e.colors):e.string&&!e.colors?YA(e.string):e.colors&&!e.string?QA(e.colors):r}function YA(e){var r=0;if(e.length===0)return r.toString();for(var o=0;o<e.length;o+=1)r=e.charCodeAt(o)+((r<<5)-r),r=r&r;for(var c="#",m=0;m<3;m+=1){var v=r>>m*8&255;c+=("00"+v.toString(16)).substr(-2)}return c}function JA(e,r){var o=0;if(e.length===0)return r[0];for(var c=0;c<e.length;c+=1)o=e.charCodeAt(c)+((o<<5)-o),o=o&o;return o=(o%r.length+r.length)%r.length,r[o]}function QA(e){return e[Math.floor(Math.random()*e.length)]}function De(e,r){return function(o){return o.colorMode==="dark"?r:e}}function qh(e){var r=e.orientation,o=e.vertical,c=e.horizontal;return r?r==="vertical"?o:c:{}}function Sy(){return Sy=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var o=arguments[r];for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(e[c]=o[c])}return e},Sy.apply(this,arguments)}var ez=function(r){return IC({condition:!0,message:["[chakra-ui]: createBreakpoints(...) will be deprecated pretty soon","simply pass the breakpoints as an object. Remove the createBreakpoint(..) call"].join("")}),Sy({base:"0em"},r)};function s1(e,r){for(var o=0;o<r.length;o++){var c=r[o];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(e,c.key,c)}}function tz(e,r,o){return r&&s1(e.prototype,r),o&&s1(e,o),e}var rz=function(){function e(r){var o=this;this.map={},this.called=!1,this.assert=function(){if(!o.called){o.called=!0;return}throw new Error("[anatomy] .part(...) should only be called once. Did you mean to use .extend(...) ?")},this.parts=function(){o.assert();for(var c=arguments.length,m=new Array(c),v=0;v<c;v++)m[v]=arguments[v];for(var T=0,l=m;T<l.length;T++){var D=l[T];o.map[D]=o.toPart(D)}return o},this.extend=function(){for(var c=arguments.length,m=new Array(c),v=0;v<c;v++)m[v]=arguments[v];for(var T=0,l=m;T<l.length;T++){var D=l[T];D in o.map||(o.map[D]=o.toPart(D))}return o},this.toPart=function(c){var m=["container","root"].includes(c!=null?c:"")?[o.name]:[o.name,c],v=m.filter(Boolean).join("__"),T="chakra-"+v,l={className:T,selector:"."+T,toString:function(){return c}};return l},this.__type={}}return tz(e,[{key:"selectors",get:function(){var o=rf(Object.entries(this.map).map(function(c){var m=c[0],v=c[1];return[m,v.selector]}));return o}},{key:"classNames",get:function(){var o=rf(Object.entries(this.map).map(function(c){var m=c[0],v=c[1];return[m,v.className]}));return o}},{key:"keys",get:function(){return Object.keys(this.map)}}]),e}();function br(e){return new rz(e)}function l2(e){return Ni(e)&&e.reference?e.reference:String(e)}var Uf=function(r){for(var o=arguments.length,c=new Array(o>1?o-1:0),m=1;m<o;m++)c[m-1]=arguments[m];return c.map(l2).join(" "+r+" ").replace(/calc/g,"")},l1=function(){for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return"calc("+Uf.apply(void 0,["+"].concat(o))+")"},u1=function(){for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return"calc("+Uf.apply(void 0,["-"].concat(o))+")"},Ty=function(){for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return"calc("+Uf.apply(void 0,["*"].concat(o))+")"},c1=function(){for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return"calc("+Uf.apply(void 0,["/"].concat(o))+")"},h1=function(r){var o=l2(r);return o!=null&&!Number.isNaN(parseFloat(o))?String(o).startsWith("-")?String(o).slice(1):"-"+o:Ty(o,-1)},Ra=Object.assign(function(e){return{add:function(){for(var o=arguments.length,c=new Array(o),m=0;m<o;m++)c[m]=arguments[m];return Ra(l1.apply(void 0,[e].concat(c)))},subtract:function(){for(var o=arguments.length,c=new Array(o),m=0;m<o;m++)c[m]=arguments[m];return Ra(u1.apply(void 0,[e].concat(c)))},multiply:function(){for(var o=arguments.length,c=new Array(o),m=0;m<o;m++)c[m]=arguments[m];return Ra(Ty.apply(void 0,[e].concat(c)))},divide:function(){for(var o=arguments.length,c=new Array(o),m=0;m<o;m++)c[m]=arguments[m];return Ra(c1.apply(void 0,[e].concat(c)))},negate:function(){return Ra(h1(e))},toString:function(){return e.toString()}}},{add:l1,subtract:u1,multiply:Ty,divide:c1,negate:h1});function nz(e){return!Number.isInteger(parseFloat(e.toString()))}function iz(e,r){return r===void 0&&(r="-"),e.replace(/\s+/g,r)}function u2(e){var r=iz(e.toString());return r.includes("\\.")?e:nz(e)?r.replace(".","\\."):e}function oz(e,r){return r===void 0&&(r=""),[r,u2(e)].filter(Boolean).join("-")}function az(e,r){return"var("+u2(e)+(r?", "+r:"")+")"}function sz(e,r){return r===void 0&&(r=""),"--"+oz(e,r)}function ji(e,r){var o=sz(e,r==null?void 0:r.prefix);return{variable:o,reference:az(o,lz(r==null?void 0:r.fallback))}}function lz(e){return typeof e=="string"?e:e==null?void 0:e.reference}var uz=br("accordion").parts("root","container","button","panel").extend("icon"),cz=br("alert").parts("title","description","container").extend("icon"),hz=br("avatar").parts("label","badge","container").extend("excessLabel","group"),dz=br("breadcrumb").parts("link","item","container").extend("separator");br("button").parts();var pz=br("checkbox").parts("control","icon","container").extend("label");br("progress").parts("track","filledTrack").extend("label");var fz=br("drawer").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer"),mz=br("editable").parts("preview","input","textarea"),gz=br("form").parts("container","requiredIndicator","helperText"),yz=br("formError").parts("text","icon"),_z=br("input").parts("addon","field","element"),vz=br("list").parts("container","item","icon"),xz=br("menu").parts("button","list","item").extend("groupTitle","command","divider"),bz=br("modal").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer"),wz=br("numberinput").parts("root","field","stepperGroup","stepper");br("pininput").parts("field");var Sz=br("popover").parts("content","header","body","footer").extend("popper","arrow","closeButton"),Tz=br("progress").parts("label","filledTrack","track"),Ez=br("radio").parts("container","control","label"),kz=br("select").parts("field","icon"),Cz=br("slider").parts("container","track","thumb","filledTrack"),Iz=br("stat").parts("container","label","helpText","number","icon"),Az=br("switch").parts("container","track","thumb"),zz=br("table").parts("table","thead","tbody","tr","th","td","tfoot","caption"),Pz=br("tabs").parts("root","tab","tablist","tabpanel","tabpanels","indicator"),Mz=br("tag").parts("container","label","closeButton"),c2={letterSpacings:{tighter:"-0.05em",tight:"-0.025em",normal:"0",wide:"0.025em",wider:"0.05em",widest:"0.1em"},lineHeights:{normal:"normal",none:1,shorter:1.25,short:1.375,base:1.5,tall:1.625,taller:"2","3":".75rem","4":"1rem","5":"1.25rem","6":"1.5rem","7":"1.75rem","8":"2rem","9":"2.25rem","10":"2.5rem"},fontWeights:{hairline:100,thin:200,light:300,normal:400,medium:500,semibold:600,bold:700,extrabold:800,black:900},fonts:{heading:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',body:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',mono:'SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace'},fontSizes:{xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem","4xl":"2.25rem","5xl":"3rem","6xl":"3.75rem","7xl":"4.5rem","8xl":"6rem","9xl":"8rem"}},Dz={borderTopWidth:"1px",borderColor:"inherit",_last:{borderBottomWidth:"1px"}},Rz={transitionProperty:"common",transitionDuration:"normal",fontSize:"1rem",_focus:{boxShadow:"outline"},_hover:{bg:"blackAlpha.50"},_disabled:{opacity:.4,cursor:"not-allowed"},px:4,py:2},Lz={pt:2,px:4,pb:5},Bz={fontSize:"1.25em"},Fz={root:{},container:Dz,button:Rz,panel:Lz,icon:Bz},Oz={parts:uz.keys,baseStyle:Fz},Nz={container:{px:4,py:3},title:{fontWeight:"bold",lineHeight:6,marginEnd:2},description:{lineHeight:6},icon:{flexShrink:0,marginEnd:3,w:5,h:6}};function $0(e){var r=e.theme,o=e.colorScheme,c=mn(r,o+".100",o),m=Nu(o+".200",.16)(r);return De(c,m)(e)}var $z=function(r){var o=r.colorScheme;return{container:{bg:$0(r)},icon:{color:De(o+".500",o+".200")(r)}}},Uz=function(r){var o=r.colorScheme;return{container:{paddingStart:3,borderStartWidth:"4px",borderStartColor:De(o+".500",o+".200")(r),bg:$0(r)},icon:{color:De(o+".500",o+".200")(r)}}},Vz=function(r){var o=r.colorScheme;return{container:{pt:2,borderTopWidth:"4px",borderTopColor:De(o+".500",o+".200")(r),bg:$0(r)},icon:{color:De(o+".500",o+".200")(r)}}},jz=function(r){var o=r.colorScheme;return{container:{bg:De(o+".500",o+".200")(r),color:De("white","gray.900")(r)}}},Gz={subtle:$z,"left-accent":Uz,"top-accent":Vz,solid:jz},Wz={variant:"subtle",colorScheme:"blue"},qz={parts:cz.keys,baseStyle:Nz,variants:Gz,defaultProps:Wz},Zz=function(r){return{transform:"translate(25%, 25%)",borderRadius:"full",border:"0.2em solid",borderColor:De("white","gray.800")(r)}},Hz=function(r){return{bg:De("gray.200","whiteAlpha.400")(r)}},Xz=function(r){var o=r.name,c=r.theme,m=o?KA({string:o}):"gray.400",v=XA(m)(c),T="white";v||(T="gray.800");var l=De("white","gray.800")(r);return{bg:m,color:T,borderColor:l,verticalAlign:"top"}},Kz=function(r){return{badge:Zz(r),excessLabel:Hz(r),container:Xz(r)}};function ls(e){var r=r2[e];return{container:{width:e,height:e,fontSize:"calc("+(r!=null?r:e)+" / 2.5)"},excessLabel:{width:e,height:e},label:{fontSize:"calc("+(r!=null?r:e)+" / 2.5)",lineHeight:e!=="100%"?r!=null?r:e:void 0}}}var Yz={"2xs":ls("4"),xs:ls("6"),sm:ls("8"),md:ls("12"),lg:ls("16"),xl:ls("24"),"2xl":ls("32"),full:ls("100%")},Jz={size:"md"},Qz={parts:hz.keys,baseStyle:Kz,sizes:Yz,defaultProps:Jz},eP={px:1,textTransform:"uppercase",fontSize:"xs",borderRadius:"sm",fontWeight:"bold"},tP=function(r){var o=r.colorScheme,c=r.theme,m=Nu(o+".500",.6)(c);return{bg:De(o+".500",m)(r),color:De("white","whiteAlpha.800")(r)}},rP=function(r){var o=r.colorScheme,c=r.theme,m=Nu(o+".200",.16)(c);return{bg:De(o+".100",m)(r),color:De(o+".800",o+".200")(r)}},nP=function(r){var o=r.colorScheme,c=r.theme,m=Nu(o+".200",.8)(c),v=mn(c,o+".500"),T=De(v,m)(r);return{color:T,boxShadow:"inset 0 0 0px 1px "+T}},iP={solid:tP,subtle:rP,outline:nP},oP={variant:"subtle",colorScheme:"gray"},Pu={baseStyle:eP,variants:iP,defaultProps:oP},aP={transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",cursor:"pointer",textDecoration:"none",outline:"none",color:"inherit",_hover:{textDecoration:"underline"},_focus:{boxShadow:"outline"}},sP={link:aP},lP={parts:dz.keys,baseStyle:sP},uP={lineHeight:"1.2",borderRadius:"md",fontWeight:"semibold",transitionProperty:"common",transitionDuration:"normal",_focus:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{_disabled:{bg:"initial"}}},h2=function(r){var o=r.colorScheme,c=r.theme;if(o==="gray")return{color:De("inherit","whiteAlpha.900")(r),_hover:{bg:De("gray.100","whiteAlpha.200")(r)},_active:{bg:De("gray.200","whiteAlpha.300")(r)}};var m=Nu(o+".200",.12)(c),v=Nu(o+".200",.24)(c);return{color:De(o+".600",o+".200")(r),bg:"transparent",_hover:{bg:De(o+".50",m)(r)},_active:{bg:De(o+".100",v)(r)}}},cP=function(r){var o=r.colorScheme,c=De("gray.200","whiteAlpha.300")(r);return en({border:"1px solid",borderColor:o==="gray"?c:"currentColor"},h2(r))},hP={yellow:{bg:"yellow.400",color:"black",hoverBg:"yellow.500",activeBg:"yellow.600"},cyan:{bg:"cyan.400",color:"black",hoverBg:"cyan.500",activeBg:"cyan.600"}},dP=function(r){var o,c=r.colorScheme;if(c==="gray"){var m=De("gray.100","whiteAlpha.200")(r);return{bg:m,_hover:{bg:De("gray.200","whiteAlpha.300")(r),_disabled:{bg:m}},_active:{bg:De("gray.300","whiteAlpha.400")(r)}}}var v=(o=hP[c])!=null?o:{},T=v.bg,l=T===void 0?c+".500":T,D=v.color,j=D===void 0?"white":D,oe=v.hoverBg,ne=oe===void 0?c+".600":oe,U=v.activeBg,Se=U===void 0?c+".700":U,Ae=De(l,c+".200")(r);return{bg:Ae,color:De(j,"gray.800")(r),_hover:{bg:De(ne,c+".300")(r),_disabled:{bg:Ae}},_active:{bg:De(Se,c+".400")(r)}}},pP=function(r){var o=r.colorScheme;return{padding:0,height:"auto",lineHeight:"normal",verticalAlign:"baseline",color:De(o+".500",o+".200")(r),_hover:{textDecoration:"underline",_disabled:{textDecoration:"none"}},_active:{color:De(o+".700",o+".500")(r)}}},fP={bg:"none",color:"inherit",display:"inline",lineHeight:"inherit",m:0,p:0},mP={ghost:h2,outline:cP,solid:dP,link:pP,unstyled:fP},gP={lg:{h:12,minW:12,fontSize:"lg",px:6},md:{h:10,minW:10,fontSize:"md",px:4},sm:{h:8,minW:8,fontSize:"sm",px:3},xs:{h:6,minW:6,fontSize:"xs",px:2}},yP={variant:"solid",size:"md",colorScheme:"gray"},_P={baseStyle:uP,variants:mP,sizes:gP,defaultProps:yP},vP=function(r){var o=r.colorScheme;return{w:"100%",transitionProperty:"box-shadow",transitionDuration:"normal",border:"2px solid",borderRadius:"sm",borderColor:"inherit",color:"white",_checked:{bg:De(o+".500",o+".200")(r),borderColor:De(o+".500",o+".200")(r),color:De("white","gray.900")(r),_hover:{bg:De(o+".600",o+".300")(r),borderColor:De(o+".600",o+".300")(r)},_disabled:{borderColor:De("gray.200","transparent")(r),bg:De("gray.200","whiteAlpha.300")(r),color:De("gray.500","whiteAlpha.500")(r)}},_indeterminate:{bg:De(o+".500",o+".200")(r),borderColor:De(o+".500",o+".200")(r),color:De("white","gray.900")(r)},_disabled:{bg:De("gray.100","whiteAlpha.100")(r),borderColor:De("gray.100","transparent")(r)},_focus:{boxShadow:"outline"},_invalid:{borderColor:De("red.500","red.300")(r)}}},xP={userSelect:"none",_disabled:{opacity:.4}},bP={transitionProperty:"transform",transitionDuration:"normal"},wP=function(r){return{icon:bP,control:vP(r),label:xP}},SP={sm:{control:{h:3,w:3},label:{fontSize:"sm"},icon:{fontSize:"0.45rem"}},md:{control:{w:4,h:4},label:{fontSize:"md"},icon:{fontSize:"0.625rem"}},lg:{control:{w:5,h:5},label:{fontSize:"lg"},icon:{fontSize:"0.625rem"}}},TP={size:"md",colorScheme:"blue"},U0={parts:pz.keys,baseStyle:wP,sizes:SP,defaultProps:TP},op,ap,sp,hh=ji("close-button-size"),EP=function(r){var o=De("blackAlpha.100","whiteAlpha.100")(r),c=De("blackAlpha.200","whiteAlpha.200")(r);return{w:[hh.reference],h:[hh.reference],borderRadius:"md",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{bg:o},_active:{bg:c},_focus:{boxShadow:"outline"}}},kP={lg:(op={},op[hh.variable]="40px",op.fontSize="16px",op),md:(ap={},ap[hh.variable]="32px",ap.fontSize="12px",ap),sm:(sp={},sp[hh.variable]="24px",sp.fontSize="10px",sp)},CP={size:"md"},IP={baseStyle:EP,sizes:kP,defaultProps:CP},AP=Pu.variants,zP=Pu.defaultProps,PP={fontFamily:"mono",fontSize:"sm",px:"0.2em",borderRadius:"sm"},MP={baseStyle:PP,variants:AP,defaultProps:zP},DP={w:"100%",mx:"auto",maxW:"60ch",px:"1rem"},RP={baseStyle:DP},LP={opacity:.6,borderColor:"inherit"},BP={borderStyle:"solid"},FP={borderStyle:"dashed"},OP={solid:BP,dashed:FP},NP={variant:"solid"},$P={baseStyle:LP,variants:OP,defaultProps:NP};function cu(e){return e==="full"?{dialog:{maxW:"100vw",h:"100vh"}}:{dialog:{maxW:e}}}var UP={bg:"blackAlpha.600",zIndex:"overlay"},VP={display:"flex",zIndex:"modal",justifyContent:"center"},jP=function(r){var o=r.isFullHeight;return en({},o&&{height:"100vh"},{zIndex:"modal",maxH:"100vh",bg:De("white","gray.700")(r),color:"inherit",boxShadow:De("lg","dark-lg")(r)})},GP={px:6,py:4,fontSize:"xl",fontWeight:"semibold"},WP={position:"absolute",top:2,insetEnd:3},qP={px:6,py:2,flex:1,overflow:"auto"},ZP={px:6,py:4},HP=function(r){return{overlay:UP,dialogContainer:VP,dialog:jP(r),header:GP,closeButton:WP,body:qP,footer:ZP}},XP={xs:cu("xs"),sm:cu("md"),md:cu("lg"),lg:cu("2xl"),xl:cu("4xl"),full:cu("full")},KP={size:"xs"},YP={parts:fz.keys,baseStyle:HP,sizes:XP,defaultProps:KP},JP={borderRadius:"md",py:"3px",transitionProperty:"common",transitionDuration:"normal"},QP={borderRadius:"md",py:"3px",transitionProperty:"common",transitionDuration:"normal",width:"full",_focus:{boxShadow:"outline"},_placeholder:{opacity:.6}},eM={borderRadius:"md",py:"3px",transitionProperty:"common",transitionDuration:"normal",width:"full",_focus:{boxShadow:"outline"},_placeholder:{opacity:.6}},tM={preview:JP,input:QP,textarea:eM},rM={parts:mz.keys,baseStyle:tM},nM=function(r){return{marginStart:1,color:De("red.500","red.300")(r)}},iM=function(r){return{mt:2,color:De("gray.500","whiteAlpha.600")(r),lineHeight:"normal",fontSize:"sm"}},oM=function(r){return{container:{width:"100%",position:"relative"},requiredIndicator:nM(r),helperText:iM(r)}},aM={parts:gz.keys,baseStyle:oM},sM=function(r){return{color:De("red.500","red.300")(r),mt:2,fontSize:"sm",lineHeight:"normal"}},lM=function(r){return{marginEnd:"0.5em",color:De("red.500","red.300")(r)}},uM=function(r){return{text:sM(r),icon:lM(r)}},cM={parts:yz.keys,baseStyle:uM},hM={fontSize:"md",marginEnd:3,mb:2,fontWeight:"medium",transitionProperty:"common",transitionDuration:"normal",opacity:1,_disabled:{opacity:.4}},dM={baseStyle:hM},pM={fontFamily:"heading",fontWeight:"bold"},fM={"4xl":{fontSize:["6xl",null,"7xl"],lineHeight:1},"3xl":{fontSize:["5xl",null,"6xl"],lineHeight:1},"2xl":{fontSize:["4xl",null,"5xl"],lineHeight:[1.2,null,1]},xl:{fontSize:["3xl",null,"4xl"],lineHeight:[1.33,null,1.2]},lg:{fontSize:["2xl",null,"3xl"],lineHeight:[1.33,null,1.2]},md:{fontSize:"xl",lineHeight:1.2},sm:{fontSize:"md",lineHeight:1.2},xs:{fontSize:"sm",lineHeight:1.2}},mM={size:"xl"},gM={baseStyle:pM,sizes:fM,defaultProps:mM},yM={field:{width:"100%",minWidth:0,outline:0,position:"relative",appearance:"none",transitionProperty:"common",transitionDuration:"normal"}},us={lg:{fontSize:"lg",px:4,h:12,borderRadius:"md"},md:{fontSize:"md",px:4,h:10,borderRadius:"md"},sm:{fontSize:"sm",px:3,h:8,borderRadius:"sm"},xs:{fontSize:"xs",px:2,h:6,borderRadius:"sm"}},_M={lg:{field:us.lg,addon:us.lg},md:{field:us.md,addon:us.md},sm:{field:us.sm,addon:us.sm},xs:{field:us.xs,addon:us.xs}};function V0(e){var r=e.focusBorderColor,o=e.errorBorderColor;return{focusBorderColor:r||De("blue.500","blue.300")(e),errorBorderColor:o||De("red.500","red.300")(e)}}var vM=function(r){var o=r.theme,c=V0(r),m=c.focusBorderColor,v=c.errorBorderColor;return{field:{border:"1px solid",borderColor:"inherit",bg:"inherit",_hover:{borderColor:De("gray.300","whiteAlpha.400")(r)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_disabled:{opacity:.4,cursor:"not-allowed"},_invalid:{borderColor:mn(o,v),boxShadow:"0 0 0 1px "+mn(o,v)},_focus:{zIndex:1,borderColor:mn(o,m),boxShadow:"0 0 0 1px "+mn(o,m)}},addon:{border:"1px solid",borderColor:De("inherit","whiteAlpha.50")(r),bg:De("gray.100","whiteAlpha.300")(r)}}},xM=function(r){var o=r.theme,c=V0(r),m=c.focusBorderColor,v=c.errorBorderColor;return{field:{border:"2px solid",borderColor:"transparent",bg:De("gray.100","whiteAlpha.50")(r),_hover:{bg:De("gray.200","whiteAlpha.100")(r)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_disabled:{opacity:.4,cursor:"not-allowed"},_invalid:{borderColor:mn(o,v)},_focus:{bg:"transparent",borderColor:mn(o,m)}},addon:{border:"2px solid",borderColor:"transparent",bg:De("gray.100","whiteAlpha.50")(r)}}},bM=function(r){var o=r.theme,c=V0(r),m=c.focusBorderColor,v=c.errorBorderColor;return{field:{borderBottom:"1px solid",borderColor:"inherit",borderRadius:0,px:0,bg:"transparent",_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:mn(o,v),boxShadow:"0px 1px 0px 0px "+mn(o,v)},_focus:{borderColor:mn(o,m),boxShadow:"0px 1px 0px 0px "+mn(o,m)}},addon:{borderBottom:"2px solid",borderColor:"inherit",borderRadius:0,px:0,bg:"transparent"}}},wM={field:{bg:"transparent",px:0,height:"auto"},addon:{bg:"transparent",px:0,height:"auto"}},SM={outline:vM,filled:xM,flushed:bM,unstyled:wM},TM={size:"md",variant:"outline"},Lr={parts:_z.keys,baseStyle:yM,sizes:_M,variants:SM,defaultProps:TM},EM=function(r){return{bg:De("gray.100","whiteAlpha")(r),borderRadius:"md",borderWidth:"1px",borderBottomWidth:"3px",fontSize:"0.8em",fontWeight:"bold",lineHeight:"normal",px:"0.4em",whiteSpace:"nowrap"}},kM={baseStyle:EM},CM={transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",cursor:"pointer",textDecoration:"none",outline:"none",color:"inherit",_hover:{textDecoration:"underline"},_focus:{boxShadow:"outline"}},IM={baseStyle:CM},AM={marginEnd:"0.5rem",display:"inline",verticalAlign:"text-bottom"},zM={container:{},item:{},icon:AM},PM={parts:vz.keys,baseStyle:zM},MM=function(r){return{bg:De("#fff","gray.700")(r),boxShadow:De("sm","dark-lg")(r),color:"inherit",minW:"3xs",py:"2",zIndex:1,borderRadius:"md",borderWidth:"1px"}},DM=function(r){return{py:"0.4rem",px:"0.8rem",transitionProperty:"background",transitionDuration:"ultra-fast",transitionTimingFunction:"ease-in",_focus:{bg:De("gray.100","whiteAlpha.100")(r)},_active:{bg:De("gray.200","whiteAlpha.200")(r)},_expanded:{bg:De("gray.100","whiteAlpha.100")(r)},_disabled:{opacity:.4,cursor:"not-allowed"}}},RM={mx:4,my:2,fontWeight:"semibold",fontSize:"sm"},LM={opacity:.6},BM={border:0,borderBottom:"1px solid",borderColor:"inherit",my:"0.5rem",opacity:.6},FM={transitionProperty:"common",transitionDuration:"normal"},OM=function(r){return{button:FM,list:MM(r),item:DM(r),groupTitle:RM,command:LM,divider:BM}},NM={parts:xz.keys,baseStyle:OM},$M={bg:"blackAlpha.600",zIndex:"modal"},UM=function(r){var o=r.isCentered,c=r.scrollBehavior;return{display:"flex",zIndex:"modal",justifyContent:"center",alignItems:o?"center":"flex-start",overflow:c==="inside"?"hidden":"auto"}},VM=function(r){var o=r.scrollBehavior;return{borderRadius:"md",bg:De("white","gray.700")(r),color:"inherit",my:"3.75rem",zIndex:"modal",maxH:o==="inside"?"calc(100% - 7.5rem)":void 0,boxShadow:De("lg","dark-lg")(r)}},jM={px:6,py:4,fontSize:"xl",fontWeight:"semibold"},GM={position:"absolute",top:2,insetEnd:3},WM=function(r){var o=r.scrollBehavior;return{px:6,py:2,flex:1,overflow:o==="inside"?"auto":void 0}},qM={px:6,py:4},ZM=function(r){return{overlay:$M,dialogContainer:UM(r),dialog:VM(r),header:jM,closeButton:GM,body:WM(r),footer:qM}};function wo(e){return e==="full"?{dialog:{maxW:"100vw",minH:"100vh","@supports(min-height: -webkit-fill-available)":{minH:"-webkit-fill-available"},my:0}}:{dialog:{maxW:e}}}var HM={xs:wo("xs"),sm:wo("sm"),md:wo("md"),lg:wo("lg"),xl:wo("xl"),"2xl":wo("2xl"),"3xl":wo("3xl"),"4xl":wo("4xl"),"5xl":wo("5xl"),"6xl":wo("6xl"),full:wo("full")},XM={size:"md"},KM={parts:bz.keys,baseStyle:ZM,sizes:HM,defaultProps:XM},lp,d1,p1,YM=Lr.variants,JM=Lr.defaultProps,j0=ji("number-input-stepper-width"),d2=ji("number-input-input-padding"),QM=Ra(j0).add("0.5rem").toString(),e5=(lp={},lp[j0.variable]="24px",lp[d2.variable]=QM,lp),t5=(d1=(p1=Lr.baseStyle)==null?void 0:p1.field)!=null?d1:{},r5={width:[j0.reference]},n5=function(r){return{borderStart:"1px solid",borderStartColor:De("inherit","whiteAlpha.300")(r),color:De("inherit","whiteAlpha.800")(r),_active:{bg:De("gray.200","whiteAlpha.300")(r)},_disabled:{opacity:.4,cursor:"not-allowed"}}},i5=function(r){return{root:e5,field:t5,stepperGroup:r5,stepper:n5(r)}};function up(e){var r,o,c=Lr.sizes[e],m={lg:"md",md:"md",sm:"sm",xs:"sm"},v=(r=(o=c.field)==null?void 0:o.fontSize)!=null?r:"md",T=c2.fontSizes[v.toString()];return{field:en({},c.field,{paddingInlineEnd:d2.reference,verticalAlign:"top"}),stepper:{fontSize:Ra(T).multiply(.75).toString(),_first:{borderTopEndRadius:m[e]},_last:{borderBottomEndRadius:m[e],mt:"-1px",borderTopWidth:1}}}}var o5={xs:up("xs"),sm:up("sm"),md:up("md"),lg:up("lg")},a5={parts:wz.keys,baseStyle:i5,sizes:o5,variants:YM,defaultProps:JM},f1,s5=en({},Lr.baseStyle.field,{textAlign:"center"}),l5={lg:{fontSize:"lg",w:12,h:12,borderRadius:"md"},md:{fontSize:"md",w:10,h:10,borderRadius:"md"},sm:{fontSize:"sm",w:8,h:8,borderRadius:"sm"},xs:{fontSize:"xs",w:6,h:6,borderRadius:"sm"}},u5={outline:function(r){var o;return(o=Lr.variants.outline(r).field)!=null?o:{}},flushed:function(r){var o;return(o=Lr.variants.flushed(r).field)!=null?o:{}},filled:function(r){var o;return(o=Lr.variants.filled(r).field)!=null?o:{}},unstyled:(f1=Lr.variants.unstyled.field)!=null?f1:{}},c5=Lr.defaultProps,h5={baseStyle:s5,sizes:l5,variants:u5,defaultProps:c5},yg=ji("popper-bg"),d5=ji("popper-arrow-bg"),p5=ji("popper-arrow-shadow-color"),f5={zIndex:10},m5=function(r){var o,c=De("white","gray.700")(r),m=De("gray.200","whiteAlpha.300")(r);return o={},o[yg.variable]="colors."+c,o.bg=yg.reference,o[d5.variable]=yg.reference,o[p5.variable]="colors."+m,o.width="xs",o.border="1px solid",o.borderColor="inherit",o.borderRadius="md",o.boxShadow="sm",o.zIndex="inherit",o._focus={outline:0,boxShadow:"outline"},o},g5={px:3,py:2,borderBottomWidth:"1px"},y5={px:3,py:2},_5={px:3,py:2,borderTopWidth:"1px"},v5={position:"absolute",borderRadius:"md",top:1,insetEnd:2,padding:2},x5=function(r){return{popper:f5,content:m5(r),header:g5,body:y5,footer:_5,arrow:{},closeButton:v5}},b5={parts:Sz.keys,baseStyle:x5};function w5(e){var r=e.colorScheme,o=e.theme,c=e.isIndeterminate,m=e.hasStripe,v=De(a1(),a1("1rem","rgba(0,0,0,0.1)"))(e),T=De(r+".500",r+".200")(e),l=`linear-gradient(
    to right,
    transparent 0%,
    `+mn(o,T)+` 50%,
    transparent 100%
  )`,D=!c&&m;return en({},D&&v,c?{bgImage:l}:{bgColor:T})}var S5={lineHeight:"1",fontSize:"0.25em",fontWeight:"bold",color:"white"},T5=function(r){return{bg:De("gray.100","whiteAlpha.300")(r)}},E5=function(r){return en({transitionProperty:"common",transitionDuration:"slow"},w5(r))},k5=function(r){return{label:S5,filledTrack:E5(r),track:T5(r)}},C5={xs:{track:{h:"0.25rem"}},sm:{track:{h:"0.5rem"}},md:{track:{h:"0.75rem"}},lg:{track:{h:"1rem"}}},I5={size:"md",colorScheme:"blue"},A5={parts:Tz.keys,sizes:C5,baseStyle:k5,defaultProps:I5},z5=function(r){var o=U0.baseStyle(r),c=o.control,m=c===void 0?{}:c;return en({},m,{borderRadius:"full",_checked:en({},m._checked,{_before:{content:'""',display:"inline-block",pos:"relative",w:"50%",h:"50%",borderRadius:"50%",bg:"currentColor"}})})},P5=function(r){return{label:U0.baseStyle(r).label,control:z5(r)}},M5={md:{control:{w:4,h:4},label:{fontSize:"md"}},lg:{control:{w:5,h:5},label:{fontSize:"lg"}},sm:{control:{width:3,height:3},label:{fontSize:"sm"}}},D5={size:"md",colorScheme:"blue"},R5={parts:Ez.keys,baseStyle:P5,sizes:M5,defaultProps:D5},L5=function(r){return en({},Lr.baseStyle.field,{bg:De("white","gray.700")(r),appearance:"none",paddingBottom:"1px",lineHeight:"normal","> option, > optgroup":{bg:De("white","gray.700")(r)}})},B5={width:"1.5rem",height:"100%",insetEnd:"0.5rem",position:"relative",color:"currentColor",fontSize:"1.25rem",_disabled:{opacity:.5}},F5=function(r){return{field:L5(r),icon:B5}},cp={paddingInlineEnd:"2rem"},O5=Fa({},Lr.sizes,{lg:{field:cp},md:{field:cp},sm:{field:cp},xs:{field:cp,icon:{insetEnd:"0.25rem"}}}),N5={parts:kz.keys,baseStyle:F5,sizes:O5,variants:Lr.variants,defaultProps:Lr.defaultProps},$5=function(r,o){return pC({from:{borderColor:r,background:r},to:{borderColor:o,background:o}})},U5=function(r){var o=De("gray.100","gray.800")(r),c=De("gray.400","gray.600")(r),m=r.startColor,v=m===void 0?o:m,T=r.endColor,l=T===void 0?c:T,D=r.speed,j=r.theme,oe=mn(j,v),ne=mn(j,l);return{opacity:.7,borderRadius:"2px",borderColor:oe,background:ne,animation:D+"s linear infinite alternate "+$5(oe,ne)}},V5={baseStyle:U5},j5=function(r){return{borderRadius:"md",fontWeight:"semibold",_focus:{boxShadow:"outline",padding:"1rem",position:"fixed",top:"1.5rem",insetStart:"1.5rem",bg:De("white","gray.700")(r)}}},G5={baseStyle:j5};function W5(e){return qh({orientation:e.orientation,vertical:{left:"50%",transform:"translateX(-50%)",_active:{transform:"translateX(-50%) scale(1.15)"}},horizontal:{top:"50%",transform:"translateY(-50%)",_active:{transform:"translateY(-50%) scale(1.15)"}}})}var q5=function(r){var o=r.orientation;return en({display:"inline-block",position:"relative",cursor:"pointer",_disabled:{opacity:.6,cursor:"default",pointerEvents:"none"}},qh({orientation:o,vertical:{h:"100%"},horizontal:{w:"100%"}}))},Z5=function(r){return{overflow:"hidden",borderRadius:"sm",bg:De("gray.200","whiteAlpha.200")(r),_disabled:{bg:De("gray.300","whiteAlpha.300")(r)}}},H5=function(r){return en({display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",outline:0,zIndex:1,borderRadius:"full",bg:"white",boxShadow:"base",border:"1px solid",borderColor:"transparent",transitionProperty:"transform",transitionDuration:"normal",_focus:{boxShadow:"outline"},_disabled:{bg:"gray.300"}},W5(r))},X5=function(r){var o=r.colorScheme;return{width:"inherit",height:"inherit",bg:De(o+".500",o+".200")(r)}},K5=function(r){return{container:q5(r),track:Z5(r),thumb:H5(r),filledTrack:X5(r)}},Y5=function(r){return{thumb:{w:"16px",h:"16px"},track:qh({orientation:r.orientation,horizontal:{h:"4px"},vertical:{w:"4px"}})}},J5=function(r){return{thumb:{w:"14px",h:"14px"},track:qh({orientation:r.orientation,horizontal:{h:"4px"},vertical:{w:"4px"}})}},Q5=function(r){return{thumb:{w:"10px",h:"10px"},track:qh({orientation:r.orientation,horizontal:{h:"2px"},vertical:{w:"2px"}})}},e3={lg:Y5,md:J5,sm:Q5},t3={size:"md",colorScheme:"blue"},r3={parts:Cz.keys,sizes:e3,baseStyle:K5,defaultProps:t3},_g,vg,xg,bg,wg,gl=ji("spinner-size"),n3={width:[gl.reference],height:[gl.reference]},i3={xs:(_g={},_g[gl.variable]="0.75rem",_g),sm:(vg={},vg[gl.variable]="1rem",vg),md:(xg={},xg[gl.variable]="1.5rem",xg),lg:(bg={},bg[gl.variable]="2rem",bg),xl:(wg={},wg[gl.variable]="3rem",wg)},o3={size:"md"},a3={baseStyle:n3,sizes:i3,defaultProps:o3},s3={fontWeight:"medium"},l3={opacity:.8,marginBottom:2},u3={verticalAlign:"baseline",fontWeight:"semibold"},c3={marginEnd:1,w:"14px",h:"14px",verticalAlign:"middle"},h3={container:{},label:s3,helpText:l3,number:u3,icon:c3},d3={md:{label:{fontSize:"sm"},helpText:{fontSize:"sm"},number:{fontSize:"2xl"}}},p3={size:"md"},f3={parts:Iz.keys,baseStyle:h3,sizes:d3,defaultProps:p3},hp,dp,pp,dh=ji("switch-track-width"),Tl=ji("switch-track-height"),Sg=ji("switch-track-diff"),m3=Ra.subtract(dh,Tl),Ey=ji("switch-thumb-x"),g3=function(r){var o=r.colorScheme;return{borderRadius:"full",p:"2px",width:[dh.reference],height:[Tl.reference],transitionProperty:"common",transitionDuration:"fast",bg:De("gray.300","whiteAlpha.400")(r),_focus:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed"},_checked:{bg:De(o+".500",o+".200")(r)}}},y3={bg:"white",transitionProperty:"transform",transitionDuration:"normal",borderRadius:"inherit",width:[Tl.reference],height:[Tl.reference],_checked:{transform:"translateX("+Ey.reference+")"}},_3=function(r){var o,c;return{container:(c={},c[Sg.variable]=m3,c[Ey.variable]=Sg.reference,c._rtl=(o={},o[Ey.variable]=Ra(Sg).negate().toString(),o),c),track:g3(r),thumb:y3}},v3={sm:{container:(hp={},hp[dh.variable]="1.375rem",hp[Tl.variable]="0.75rem",hp)},md:{container:(dp={},dp[dh.variable]="1.875rem",dp[Tl.variable]="1rem",dp)},lg:{container:(pp={},pp[dh.variable]="2.875rem",pp[Tl.variable]="1.5rem",pp)}},x3={size:"md",colorScheme:"blue"},b3={parts:Az.keys,baseStyle:_3,sizes:v3,defaultProps:x3},w3={table:{fontVariantNumeric:"lining-nums tabular-nums",borderCollapse:"collapse",width:"full"},th:{fontFamily:"heading",fontWeight:"bold",textTransform:"uppercase",letterSpacing:"wider",textAlign:"start"},td:{textAlign:"start"},caption:{mt:4,fontFamily:"heading",textAlign:"center",fontWeight:"medium"}},sf={"&[data-is-numeric=true]":{textAlign:"end"}},S3=function(r){var o=r.colorScheme;return{th:en({color:De("gray.600","gray.400")(r),borderBottom:"1px",borderColor:De(o+".100",o+".700")(r)},sf),td:en({borderBottom:"1px",borderColor:De(o+".100",o+".700")(r)},sf),caption:{color:De("gray.600","gray.100")(r)},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}},T3=function(r){var o=r.colorScheme;return{th:en({color:De("gray.600","gray.400")(r),borderBottom:"1px",borderColor:De(o+".100",o+".700")(r)},sf),td:en({borderBottom:"1px",borderColor:De(o+".100",o+".700")(r)},sf),caption:{color:De("gray.600","gray.100")(r)},tbody:{tr:{"&:nth-of-type(odd)":{"th, td":{borderBottomWidth:"1px",borderColor:De(o+".100",o+".700")(r)},td:{background:De(o+".100",o+".700")(r)}}}},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}},E3={simple:S3,striped:T3,unstyled:{}},k3={sm:{th:{px:"4",py:"1",lineHeight:"4",fontSize:"xs"},td:{px:"4",py:"2",fontSize:"sm",lineHeight:"4"},caption:{px:"4",py:"2",fontSize:"xs"}},md:{th:{px:"6",py:"3",lineHeight:"4",fontSize:"xs"},td:{px:"6",py:"4",lineHeight:"5"},caption:{px:"6",py:"2",fontSize:"sm"}},lg:{th:{px:"8",py:"4",lineHeight:"5",fontSize:"sm"},td:{px:"8",py:"5",lineHeight:"6"},caption:{px:"6",py:"2",fontSize:"md"}}},C3={variant:"simple",size:"md",colorScheme:"gray"},I3={parts:zz.keys,baseStyle:w3,variants:E3,sizes:k3,defaultProps:C3},A3=function(r){var o=r.orientation;return{display:o==="vertical"?"flex":"block"}},z3=function(r){var o=r.isFitted;return{flex:o?1:void 0,transitionProperty:"common",transitionDuration:"normal",_focus:{zIndex:1,boxShadow:"outline"}}},P3=function(r){var o=r.align,c=o===void 0?"start":o,m=r.orientation,v={end:"flex-end",center:"center",start:"flex-start"};return{justifyContent:v[c],flexDirection:m==="vertical"?"column":"row"}},M3={p:4},D3=function(r){return{root:A3(r),tab:z3(r),tablist:P3(r),tabpanel:M3}},R3={sm:{tab:{py:1,px:4,fontSize:"sm"}},md:{tab:{fontSize:"md",py:2,px:4}},lg:{tab:{fontSize:"lg",py:3,px:4}}},L3=function(r){var o,c,m=r.colorScheme,v=r.orientation,T=v==="vertical",l=v==="vertical"?"borderStart":"borderBottom",D=T?"marginStart":"marginBottom";return{tablist:(o={},o[l]="2px solid",o.borderColor="inherit",o),tab:(c={},c[l]="2px solid",c.borderColor="transparent",c[D]="-2px",c._selected={color:De(m+".600",m+".300")(r),borderColor:"currentColor"},c._active={bg:De("gray.200","whiteAlpha.300")(r)},c._disabled={opacity:.4,cursor:"not-allowed"},c)}},B3=function(r){var o=r.colorScheme;return{tab:{borderTopRadius:"md",border:"1px solid",borderColor:"transparent",mb:"-1px",_selected:{color:De(o+".600",o+".300")(r),borderColor:"inherit",borderBottomColor:De("white","gray.800")(r)}},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}},F3=function(r){var o=r.colorScheme;return{tab:{border:"1px solid",borderColor:"inherit",bg:De("gray.50","whiteAlpha.50")(r),mb:"-1px",_notLast:{marginEnd:"-1px"},_selected:{bg:De("#fff","gray.800")(r),color:De(o+".600",o+".300")(r),borderColor:"inherit",borderTopColor:"currentColor",borderBottomColor:"transparent"}},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}},O3=function(r){var o=r.colorScheme,c=r.theme;return{tab:{borderRadius:"full",fontWeight:"semibold",color:"gray.600",_selected:{color:mn(c,o+".700"),bg:mn(c,o+".100")}}}},N3=function(r){var o=r.colorScheme;return{tab:{borderRadius:"full",fontWeight:"semibold",color:De("gray.600","inherit")(r),_selected:{color:De("#fff","gray.800")(r),bg:De(o+".600",o+".300")(r)}}}},$3={},U3={line:L3,enclosed:B3,"enclosed-colored":F3,"soft-rounded":O3,"solid-rounded":N3,unstyled:$3},V3={size:"md",variant:"line",colorScheme:"blue"},j3={parts:Pz.keys,baseStyle:D3,sizes:R3,variants:U3,defaultProps:V3},G3={fontWeight:"medium",lineHeight:1.2,outline:0,_focus:{boxShadow:"outline"}},W3={lineHeight:1.2,overflow:"visible"},q3={fontSize:"18px",w:"1.25rem",h:"1.25rem",transitionProperty:"common",transitionDuration:"normal",borderRadius:"full",marginStart:"0.375rem",marginEnd:"-1",opacity:.5,_disabled:{opacity:.4},_focus:{boxShadow:"outline",bg:"rgba(0, 0, 0, 0.14)"},_hover:{opacity:.8},_active:{opacity:1}},Z3={container:G3,label:W3,closeButton:q3},H3={sm:{container:{minH:"1.25rem",minW:"1.25rem",fontSize:"xs",px:2,borderRadius:"md"},closeButton:{marginEnd:"-2px",marginStart:"0.35rem"}},md:{container:{minH:"1.5rem",minW:"1.5rem",fontSize:"sm",borderRadius:"md",px:2}},lg:{container:{minH:8,minW:8,fontSize:"md",borderRadius:"md",px:3}}},X3={subtle:function(r){return{container:Pu.variants.subtle(r)}},solid:function(r){return{container:Pu.variants.solid(r)}},outline:function(r){return{container:Pu.variants.outline(r)}}},K3={size:"md",variant:"subtle",colorScheme:"gray"},Y3={parts:Mz.keys,variants:X3,baseStyle:Z3,sizes:H3,defaultProps:K3},m1,g1,y1,_1,v1,J3=en({},Lr.baseStyle.field,{paddingY:"8px",minHeight:"80px",lineHeight:"short",verticalAlign:"top"}),Q3={outline:function(r){var o;return(o=Lr.variants.outline(r).field)!=null?o:{}},flushed:function(r){var o;return(o=Lr.variants.flushed(r).field)!=null?o:{}},filled:function(r){var o;return(o=Lr.variants.filled(r).field)!=null?o:{}},unstyled:(m1=Lr.variants.unstyled.field)!=null?m1:{}},e4={xs:(g1=Lr.sizes.xs.field)!=null?g1:{},sm:(y1=Lr.sizes.sm.field)!=null?y1:{},md:(_1=Lr.sizes.md.field)!=null?_1:{},lg:(v1=Lr.sizes.lg.field)!=null?v1:{}},t4={size:"md",variant:"outline"},r4={baseStyle:J3,sizes:e4,variants:Q3,defaultProps:t4},Tg=ji("tooltip-bg"),n4=ji("popper-arrow-bg"),i4=function(r){var o,c=De("gray.700","gray.300")(r);return o={},o[Tg.variable]="colors."+c,o.px="8px",o.py="2px",o.bg=[Tg.reference],o[n4.variable]=[Tg.reference],o.color=De("whiteAlpha.900","gray.900")(r),o.borderRadius="sm",o.fontWeight="medium",o.fontSize="sm",o.boxShadow="md",o.maxW="320px",o.zIndex="tooltip",o},o4={baseStyle:i4},a4=Object.freeze({__proto__:null,Accordion:Oz,Alert:qz,Avatar:Qz,Badge:Pu,Breadcrumb:lP,Button:_P,Checkbox:U0,CloseButton:IP,Code:MP,Container:RP,Divider:$P,Drawer:YP,Editable:rM,Form:aM,FormError:cM,FormLabel:dM,Heading:gM,Input:Lr,Kbd:kM,Link:IM,List:PM,Menu:NM,Modal:KM,NumberInput:a5,PinInput:h5,Popover:b5,Progress:A5,Radio:R5,Select:N5,Skeleton:V5,SkipLink:G5,Slider:r3,Spinner:a3,Stat:f3,Switch:b3,Table:I3,Tabs:j3,Tag:Y3,Textarea:r4,Tooltip:o4}),s4={none:0,"1px":"1px solid","2px":"2px solid","4px":"4px solid","8px":"8px solid"},l4=ez({sm:"30em",md:"48em",lg:"62em",xl:"80em","2xl":"96em"}),u4={transparent:"transparent",current:"currentColor",black:"#000000",white:"#FFFFFF",whiteAlpha:{50:"rgba(255, 255, 255, 0.04)",100:"rgba(255, 255, 255, 0.06)",200:"rgba(255, 255, 255, 0.08)",300:"rgba(255, 255, 255, 0.16)",400:"rgba(255, 255, 255, 0.24)",500:"rgba(255, 255, 255, 0.36)",600:"rgba(255, 255, 255, 0.48)",700:"rgba(255, 255, 255, 0.64)",800:"rgba(255, 255, 255, 0.80)",900:"rgba(255, 255, 255, 0.92)"},blackAlpha:{50:"rgba(0, 0, 0, 0.04)",100:"rgba(0, 0, 0, 0.06)",200:"rgba(0, 0, 0, 0.08)",300:"rgba(0, 0, 0, 0.16)",400:"rgba(0, 0, 0, 0.24)",500:"rgba(0, 0, 0, 0.36)",600:"rgba(0, 0, 0, 0.48)",700:"rgba(0, 0, 0, 0.64)",800:"rgba(0, 0, 0, 0.80)",900:"rgba(0, 0, 0, 0.92)"},gray:{50:"#F7FAFC",100:"#EDF2F7",200:"#E2E8F0",300:"#CBD5E0",400:"#A0AEC0",500:"#718096",600:"#4A5568",700:"#2D3748",800:"#1A202C",900:"#171923"},red:{50:"#FFF5F5",100:"#FED7D7",200:"#FEB2B2",300:"#FC8181",400:"#F56565",500:"#E53E3E",600:"#C53030",700:"#9B2C2C",800:"#822727",900:"#63171B"},orange:{50:"#FFFAF0",100:"#FEEBC8",200:"#FBD38D",300:"#F6AD55",400:"#ED8936",500:"#DD6B20",600:"#C05621",700:"#9C4221",800:"#7B341E",900:"#652B19"},yellow:{50:"#FFFFF0",100:"#FEFCBF",200:"#FAF089",300:"#F6E05E",400:"#ECC94B",500:"#D69E2E",600:"#B7791F",700:"#975A16",800:"#744210",900:"#5F370E"},green:{50:"#F0FFF4",100:"#C6F6D5",200:"#9AE6B4",300:"#68D391",400:"#48BB78",500:"#38A169",600:"#2F855A",700:"#276749",800:"#22543D",900:"#1C4532"},teal:{50:"#E6FFFA",100:"#B2F5EA",200:"#81E6D9",300:"#4FD1C5",400:"#38B2AC",500:"#319795",600:"#2C7A7B",700:"#285E61",800:"#234E52",900:"#1D4044"},blue:{50:"#ebf8ff",100:"#bee3f8",200:"#90cdf4",300:"#63b3ed",400:"#4299e1",500:"#3182ce",600:"#2b6cb0",700:"#2c5282",800:"#2a4365",900:"#1A365D"},cyan:{50:"#EDFDFD",100:"#C4F1F9",200:"#9DECF9",300:"#76E4F7",400:"#0BC5EA",500:"#00B5D8",600:"#00A3C4",700:"#0987A0",800:"#086F83",900:"#065666"},purple:{50:"#FAF5FF",100:"#E9D8FD",200:"#D6BCFA",300:"#B794F4",400:"#9F7AEA",500:"#805AD5",600:"#6B46C1",700:"#553C9A",800:"#44337A",900:"#322659"},pink:{50:"#FFF5F7",100:"#FED7E2",200:"#FBB6CE",300:"#F687B3",400:"#ED64A6",500:"#D53F8C",600:"#B83280",700:"#97266D",800:"#702459",900:"#521B41"},linkedin:{50:"#E8F4F9",100:"#CFEDFB",200:"#9BDAF3",300:"#68C7EC",400:"#34B3E4",500:"#00A0DC",600:"#008CC9",700:"#0077B5",800:"#005E93",900:"#004471"},facebook:{50:"#E8F4F9",100:"#D9DEE9",200:"#B7C2DA",300:"#6482C0",400:"#4267B2",500:"#385898",600:"#314E89",700:"#29487D",800:"#223B67",900:"#1E355B"},messenger:{50:"#D0E6FF",100:"#B9DAFF",200:"#A2CDFF",300:"#7AB8FF",400:"#2E90FF",500:"#0078FF",600:"#0063D1",700:"#0052AC",800:"#003C7E",900:"#002C5C"},whatsapp:{50:"#dffeec",100:"#b9f5d0",200:"#90edb3",300:"#65e495",400:"#3cdd78",500:"#22c35e",600:"#179848",700:"#0c6c33",800:"#01421c",900:"#001803"},twitter:{50:"#E5F4FD",100:"#C8E9FB",200:"#A8DCFA",300:"#83CDF7",400:"#57BBF5",500:"#1DA1F2",600:"#1A94DA",700:"#1681BF",800:"#136B9E",900:"#0D4D71"},telegram:{50:"#E3F2F9",100:"#C5E4F3",200:"#A2D4EC",300:"#7AC1E4",400:"#47A9DA",500:"#0088CC",600:"#007AB8",700:"#006BA1",800:"#005885",900:"#003F5E"}},c4={none:"0",sm:"0.125rem",base:"0.25rem",md:"0.375rem",lg:"0.5rem",xl:"0.75rem","2xl":"1rem","3xl":"1.5rem",full:"9999px"},h4={xs:"0 0 0 1px rgba(0, 0, 0, 0.05)",sm:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",base:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",md:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",lg:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",xl:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)","2xl":"0 25px 50px -12px rgba(0, 0, 0, 0.25)",outline:"0 0 0 3px rgba(66, 153, 225, 0.6)",inner:"inset 0 2px 4px 0 rgba(0,0,0,0.06)",none:"none","dark-lg":"rgba(0, 0, 0, 0.1) 0px 0px 0px 1px, rgba(0, 0, 0, 0.2) 0px 5px 10px, rgba(0, 0, 0, 0.4) 0px 15px 40px"},d4={common:"background-color, border-color, color, fill, stroke, opacity, box-shadow, transform",colors:"background-color, border-color, color, fill, stroke",dimensions:"width, height",position:"left, right, top, bottom",background:"background-color, background-image, background-position"},p4={"ease-in":"cubic-bezier(0.4, 0, 1, 1)","ease-out":"cubic-bezier(0, 0, 0.2, 1)","ease-in-out":"cubic-bezier(0.4, 0, 0.2, 1)"},f4={"ultra-fast":"50ms",faster:"100ms",fast:"150ms",normal:"200ms",slow:"300ms",slower:"400ms","ultra-slow":"500ms"},m4={property:d4,easing:p4,duration:f4},g4={hide:-1,auto:"auto",base:0,docked:10,dropdown:1e3,sticky:1100,banner:1200,overlay:1300,modal:1400,popover:1500,skipLink:1600,toast:1700,tooltip:1800},y4={none:0,sm:"4px",base:"8px",md:"12px",lg:"16px",xl:"24px","2xl":"40px","3xl":"64px"},_4=en({breakpoints:l4,zIndices:g4,radii:c4,blur:y4,colors:u4},c2,{sizes:r2,shadows:h4,space:t2,borders:s4,transition:m4}),v4={global:function(r){return{body:{fontFamily:"body",color:De("gray.800","whiteAlpha.900")(r),bg:De("white","gray.800")(r),transitionProperty:"background-color",transitionDuration:"normal",lineHeight:"base"},"*::placeholder":{color:De("gray.400","whiteAlpha.400")(r)},"*, *::before, &::after":{borderColor:De("gray.200","whiteAlpha.300")(r),wordWrap:"break-word"}}}},x4=v4,b4="ltr",w4={useSystemColorMode:!1,initialColorMode:"light",cssVarPrefix:"chakra"},S4=en({direction:b4},_4,{components:a4,styles:x4,config:w4});function ph(){return ph=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var o=arguments[r];for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(e[c]=o[c])}return e},ph.apply(this,arguments)}function T4(e,r){if(e==null)return{};var o={},c=Object.keys(e),m,v;for(v=0;v<c.length;v++)m=c[v],!(r.indexOf(m)>=0)&&(o[m]=e[m]);return o}var E4=["as","viewBox","color","focusable","children","className","__css"],x1={path:Fe.exports.createElement("g",{stroke:"currentColor",strokeWidth:"1.5"},Fe.exports.createElement("path",{strokeLinecap:"round",fill:"none",d:"M9,9a3,3,0,1,1,4,2.829,1.5,1.5,0,0,0-1,1.415V14.25"}),Fe.exports.createElement("path",{fill:"currentColor",strokeLinecap:"round",d:"M12,17.25a.375.375,0,1,0,.375.375A.375.375,0,0,0,12,17.25h0"}),Fe.exports.createElement("circle",{fill:"none",strokeMiterlimit:"10",cx:"12",cy:"12",r:"11.25"})),viewBox:"0 0 24 24"},k4=zr(function(e,r){var o=e.as,c=e.viewBox,m=e.color,v=m===void 0?"currentColor":m,T=e.focusable,l=T===void 0?!1:T,D=e.children,j=e.className,oe=e.__css,ne=T4(e,E4),U=Vi("chakra-icon",j),Se=ph({w:"1em",h:"1em",display:"inline-block",lineHeight:"1em",flexShrink:0,color:v},oe),Ae={ref:r,focusable:l,className:U,__css:Se},_e=c!=null?c:x1.viewBox;if(o&&typeof o!="string")return Fe.exports.createElement(Nr.svg,ph({as:o},Ae,ne));var re=D!=null?D:x1.path;return Fe.exports.createElement(Nr.svg,ph({verticalAlign:"middle",viewBox:_e},Ae,ne),re)});function Gt(){return Gt=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var o=arguments[r];for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(e[c]=o[c])}return e},Gt.apply(this,arguments)}function tn(e,r){if(e==null)return{};var o={},c=Object.keys(e),m,v;for(v=0;v<c.length;v++)m=c[v],!(r.indexOf(m)>=0)&&(o[m]=e[m]);return o}var C4=["ratio","children","className"],I4=zr(function(e,r){var o=e.ratio,c=o===void 0?4/3:o,m=e.children,v=e.className,T=tn(e,C4),l=Fe.exports.Children.only(m),D=Vi("chakra-aspect-ratio",v);return Fe.exports.createElement(Nr.div,Gt({ref:r,position:"relative",className:D,_before:{height:0,content:'""',display:"block",paddingBottom:Xu(c,function(j){return 1/j*100+"%"})},__css:{"& > *:not(style)":{overflow:"hidden",position:"absolute",top:"0",right:"0",bottom:"0",left:"0",display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%"},"& > img, & > video":{objectFit:"cover"}}},T),l)});gr&&(I4.displayName="AspectRatio");var A4=["className"],z4=zr(function(e,r){var o=ja("Badge",e),c=Va(e);c.className;var m=tn(c,A4);return Fe.exports.createElement(Nr.span,Gt({ref:r,className:Vi("chakra-badge",e.className)},m,{__css:Gt({display:"inline-block",whiteSpace:"nowrap",verticalAlign:"middle"},o)}))});gr&&(z4.displayName="Badge");var P4=["size","centerContent"],M4=["size"],p2=Nr("div");gr&&(p2.displayName="Box");var f2=zr(function(e,r){var o=e.size,c=e.centerContent,m=c===void 0?!0:c,v=tn(e,P4),T=m?{display:"flex",alignItems:"center",justifyContent:"center"}:{};return Fe.exports.createElement(p2,Gt({ref:r,boxSize:o,__css:Gt({},T,{flexShrink:0,flexGrow:0})},v))});gr&&(f2.displayName="Square");var D4=zr(function(e,r){var o=e.size,c=tn(e,M4);return Fe.exports.createElement(f2,Gt({size:o,ref:r,borderRadius:"9999px"},c))});gr&&(D4.displayName="Circle");var R4=Nr("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center"}});gr&&(R4.displayName="Center");var L4=["className"],B4=zr(function(e,r){var o=ja("Code",e),c=Va(e);c.className;var m=tn(c,L4);return Fe.exports.createElement(Nr.code,Gt({ref:r,className:Vi("chakra-code",e.className)},m,{__css:Gt({display:"inline-block"},o)}))});gr&&(B4.displayName="Code");var F4=["className","centerContent"],O4=zr(function(e,r){var o=Va(e),c=o.className,m=o.centerContent,v=tn(o,F4),T=ja("Container",e);return Fe.exports.createElement(Nr.div,Gt({ref:r,className:Vi("chakra-container",c)},v,{__css:Gt({},T,m&&{display:"flex",flexDirection:"column",alignItems:"center"})}))});gr&&(O4.displayName="Container");var N4=["borderLeftWidth","borderBottomWidth","borderTopWidth","borderRightWidth","borderWidth","borderStyle","borderColor"],$4=["className","orientation","__css"],U4=zr(function(e,r){var o=ja("Divider",e),c=o.borderLeftWidth,m=o.borderBottomWidth,v=o.borderTopWidth,T=o.borderRightWidth,l=o.borderWidth,D=o.borderStyle,j=o.borderColor,oe=tn(o,N4),ne=Va(e),U=ne.className,Se=ne.orientation,Ae=Se===void 0?"horizontal":Se,_e=ne.__css,re=tn(ne,$4),H={vertical:{borderLeftWidth:c||T||l||"1px",height:"100%"},horizontal:{borderBottomWidth:m||v||l||"1px",width:"100%"}};return Fe.exports.createElement(Nr.hr,Gt({ref:r,"aria-orientation":Ae},re,{__css:Gt({},oe,{border:"0",borderColor:j,borderStyle:D},H[Ae],_e),className:Vi("chakra-divider",U)}))});gr&&(U4.displayName="Divider");var V4=["direction","align","justify","wrap","basis","grow","shrink"],j4=zr(function(e,r){var o=e.direction,c=e.align,m=e.justify,v=e.wrap,T=e.basis,l=e.grow,D=e.shrink,j=tn(e,V4),oe={display:"flex",flexDirection:o,alignItems:c,justifyContent:m,flexWrap:v,flexBasis:T,flexGrow:l,flexShrink:D};return Fe.exports.createElement(Nr.div,Gt({ref:r,__css:oe},j))});gr&&(j4.displayName="Flex");var G4=["area","templateAreas","gap","rowGap","columnGap","column","row","autoFlow","autoRows","templateRows","autoColumns","templateColumns"],m2=zr(function(e,r){var o=e.area,c=e.templateAreas,m=e.gap,v=e.rowGap,T=e.columnGap,l=e.column,D=e.row,j=e.autoFlow,oe=e.autoRows,ne=e.templateRows,U=e.autoColumns,Se=e.templateColumns,Ae=tn(e,G4),_e={display:"grid",gridArea:o,gridTemplateAreas:c,gridGap:m,gridRowGap:v,gridColumnGap:T,gridAutoColumns:U,gridColumn:l,gridRow:D,gridAutoFlow:j,gridAutoRows:oe,gridTemplateRows:ne,gridTemplateColumns:Se};return Fe.exports.createElement(Nr.div,Gt({ref:r,__css:_e},Ae))});gr&&(m2.displayName="Grid");var W4=["className"],q4=zr(function(e,r){var o=ja("Heading",e),c=Va(e);c.className;var m=tn(c,W4);return Fe.exports.createElement(Nr.h2,Gt({ref:r,className:Vi("chakra-heading",e.className)},m,{__css:o}))});gr&&(q4.displayName="Heading");var Z4=["className"],H4=zr(function(e,r){var o=ja("Kbd",e),c=Va(e),m=c.className,v=tn(c,Z4);return Fe.exports.createElement(Nr.kbd,Gt({ref:r,className:Vi("chakra-kbd",m)},v,{__css:Gt({fontFamily:"mono"},o)}))});gr&&(H4.displayName="Kbd");var X4=["className","isExternal"],K4=zr(function(e,r){var o=ja("Link",e),c=Va(e),m=c.className,v=c.isExternal,T=tn(c,X4);return Fe.exports.createElement(Nr.a,Gt({target:v?"_blank":void 0,rel:v?"noopener noreferrer":void 0,ref:r,className:Vi("chakra-link",m)},T,{__css:o}))});gr&&(K4.displayName="Link");var Y4=["children","styleType","stylePosition","spacing"],J4=["as"],Q4=["as"],g2=Of({name:"StylesContext",errorMessage:"useStyles: `styles` is undefined. Seems you forgot to wrap the components in a `<*List />` "}),eD=g2[0],y2=g2[1],G0=zr(function(e,r){var o,c=kA("List",e),m=Va(e),v=m.children,T=m.styleType,l=T===void 0?"none":T,D=m.stylePosition,j=m.spacing,oe=tn(m,Y4),ne=Bw(v),U="& > *:not(style) ~ *:not(style)",Se=j?(o={},o[U]={mt:j},o):{};return Fe.exports.createElement(eD,{value:c},Fe.exports.createElement(Nr.ul,Gt({ref:r,listStyleType:l,listStylePosition:D,role:"list",__css:Gt({},c.container,Se)},oe),ne))});gr&&(G0.displayName="List");var tD=zr(function(e,r){e.as;var o=tn(e,J4);return Fe.exports.createElement(G0,Gt({ref:r,as:"ol",styleType:"decimal",marginStart:"1em"},o))});gr&&(tD.displayName="OrderedList");var rD=zr(function(e,r){e.as;var o=tn(e,Q4);return Fe.exports.createElement(G0,Gt({ref:r,as:"ul",styleType:"initial",marginStart:"1em"},o))});gr&&(rD.displayName="UnorderedList");var nD=zr(function(e,r){var o=y2();return Fe.exports.createElement(Nr.li,Gt({ref:r},e,{__css:o.item}))});gr&&(nD.displayName="ListItem");var iD=zr(function(e,r){var o=y2();return Fe.exports.createElement(k4,Gt({ref:r,role:"presentation"},e,{__css:o.icon}))});gr&&(iD.displayName="ListIcon");var oD=["columns","spacingX","spacingY","spacing","minChildWidth"],aD=zr(function(e,r){var o=e.columns,c=e.spacingX,m=e.spacingY,v=e.spacing,T=e.minChildWidth,l=tn(e,oD),D=T?lD(T):uD(o);return Fe.exports.createElement(m2,Gt({ref:r,gap:v,columnGap:c,rowGap:m,templateColumns:D},l))});gr&&(aD.displayName="SimpleGrid");function sD(e){return zu(e)?e+"px":e}function lD(e){return Xu(e,function(r){return Pw(r)?null:"repeat(auto-fit, minmax("+sD(r)+", 1fr))"})}function uD(e){return Xu(e,function(r){return Pw(r)?null:"repeat("+r+", minmax(0, 1fr))"})}var cD=Nr("div",{baseStyle:{flex:1,justifySelf:"stretch",alignSelf:"stretch"}});gr&&(cD.displayName="Spacer");var ky="& > *:not(style) ~ *:not(style)";function hD(e){var r,o=e.spacing,c=e.direction,m={column:{marginTop:o,marginEnd:0,marginBottom:0,marginStart:0},row:{marginTop:0,marginEnd:0,marginBottom:0,marginStart:o},"column-reverse":{marginTop:0,marginEnd:0,marginBottom:o,marginStart:0},"row-reverse":{marginTop:0,marginEnd:o,marginBottom:0,marginStart:0}};return r={flexDirection:c},r[ky]=Xu(c,function(v){return m[v]}),r}function dD(e){var r=e.spacing,o=e.direction,c={column:{my:r,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},"column-reverse":{my:r,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},row:{mx:r,my:0,borderLeftWidth:"1px",borderBottomWidth:0},"row-reverse":{mx:r,my:0,borderLeftWidth:"1px",borderBottomWidth:0}};return{"&":Xu(o,function(m){return c[m]})}}var pD=["isInline","direction","align","justify","spacing","wrap","children","divider","className","shouldWrapChildren"],fD=function(r){return Fe.exports.createElement(Nr.div,Gt({className:"chakra-stack__item"},r,{__css:Gt({display:"inline-block",flex:"0 0 auto",minWidth:0},r.__css)}))},W0=zr(function(e,r){var o,c=e.isInline,m=e.direction,v=e.align,T=e.justify,l=e.spacing,D=l===void 0?"0.5rem":l,j=e.wrap,oe=e.children,ne=e.divider,U=e.className,Se=e.shouldWrapChildren,Ae=tn(e,pD),_e=c?"row":m!=null?m:"column",re=Fe.exports.useMemo(function(){return hD({direction:_e,spacing:D})},[_e,D]),H=Fe.exports.useMemo(function(){return dD({spacing:D,direction:_e})},[D,_e]),ee=!!ne,fe=!Se&&!ee,be=Bw(oe),Ne=fe?be:be.map(function(Le,rt){var Je=typeof Le.key!="undefined"?Le.key:rt,wt=rt+1===be.length,Er=Fe.exports.createElement(fD,{key:Je},Le),Nt=Se?Er:Le;if(!ee)return Nt;var Vt=Fe.exports.cloneElement(ne,{__css:H}),Fr=wt?null:Vt;return Fe.exports.createElement(Fe.exports.Fragment,{key:Je},Nt,Fr)}),Re=Vi("chakra-stack",U);return Fe.exports.createElement(Nr.div,Gt({ref:r,display:"flex",alignItems:v,justifyContent:T,flexDirection:re.flexDirection,flexWrap:j,className:Re,__css:ee?{}:(o={},o[ky]=re[ky],o)},Ae),Ne)});gr&&(W0.displayName="Stack");var mD=zr(function(e,r){return Fe.exports.createElement(W0,Gt({align:"center"},e,{direction:"row",ref:r}))});gr&&(mD.displayName="HStack");var gD=zr(function(e,r){return Fe.exports.createElement(W0,Gt({align:"center"},e,{direction:"column",ref:r}))});gr&&(gD.displayName="VStack");var yD=["className","align","decoration","casing"],_D=zr(function(e,r){var o=ja("Text",e),c=Va(e);c.className,c.align,c.decoration,c.casing;var m=tn(c,yD),v=L0({textAlign:e.align,textDecoration:e.decoration,textTransform:e.casing});return Fe.exports.createElement(Nr.p,Gt({ref:r,className:Vi("chakra-text",e.className)},v,m,{__css:o}))});gr&&(_D.displayName="Text");var vD=["spacing","children","justify","direction","align","className","shouldWrapChildren"],xD=["className"],bD=zr(function(e,r){var o=e.spacing,c=o===void 0?"0.5rem":o,m=e.children,v=e.justify,T=e.direction,l=e.align,D=e.className,j=e.shouldWrapChildren,oe=tn(e,vD),ne=Fe.exports.useMemo(function(){return{"--chakra-wrap-spacing":function(Ae){return Xu(c,function(_e){return Ww("space",_e)(Ae)})},"--wrap-spacing":"calc(var(--chakra-wrap-spacing) / 2)",display:"flex",flexWrap:"wrap",justifyContent:v,alignItems:l,flexDirection:T,listStyleType:"none",padding:"0",margin:"calc(var(--wrap-spacing) * -1)","& > *:not(style)":{margin:"var(--wrap-spacing)"}}},[c,v,l,T]),U=j?Fe.exports.Children.map(m,function(Se,Ae){return Fe.exports.createElement(_2,{key:Ae},Se)}):m;return Fe.exports.createElement(Nr.div,Gt({ref:r,className:Vi("chakra-wrap",D)},oe),Fe.exports.createElement(Nr.ul,{className:"chakra-wrap__list",__css:ne},U))});gr&&(bD.displayName="Wrap");var _2=zr(function(e,r){var o=e.className,c=tn(e,xD);return Fe.exports.createElement(Nr.li,Gt({ref:r,__css:{display:"flex",alignItems:"flex-start"},className:Vi("chakra-wrap__listitem",o)},c))});gr&&(_2.displayName="WrapItem");var wD=IA;wD.defaultProps={theme:S4};var SD=kD;const TD=360/60,ED=360/59;function kD(e){let r=e._evenCprLat,o=e._oddCprLat,c=e._evenCprLng,m=e._oddCprLng;const v=Math.floor((59*r-60*o)/131072+.5);let T=TD*(fp(v,60)+r/131072),l=ED*(fp(v,59)+o/131072);if(T>=270&&(T-=360),l>=270&&(l-=360),fl(T)===fl(l)){if(e._evenCprTime>e._oddCprTime){const D=Cy(T,0),j=Math.floor((c*(fl(T)-1)-m*fl(T))/131072+.5);e.lng=b1(T,0)*(fp(j,D)+c/131072),e.lat=T}else{const D=Cy(l,1),j=Math.floor((c*(fl(l)-1)-m*fl(l))/131072+.5);e.lng=b1(l,1)*(fp(j,D)+m/131072),e.lat=l}e.lng>180&&(e.lng-=360)}}function fp(e,r){let o=e%r;return o<0&&(o+=r),o}function Cy(e,r){let o=fl(e)-r;return o<1&&(o=1),o}function b1(e,r){return 360/Cy(e,r)}function fl(e){return e<0&&(e=-e),e<10.4704713?59:e<14.82817437?58:e<18.18626357?57:e<21.02939493?56:e<23.54504487?55:e<25.82924707?54:e<27.9389871?53:e<29.91135686?52:e<31.77209708?51:e<33.53993436?50:e<35.22899598?49:e<36.85025108?48:e<38.41241892?47:e<39.92256684?46:e<41.38651832?45:e<42.80914012?44:e<44.19454951?43:e<45.54626723?42:e<46.86733252?41:e<48.16039128?40:e<49.42776439?39:e<50.67150166?38:e<51.89342469?37:e<53.09516153?36:e<54.27817472?35:e<55.44378444?34:e<56.59318756?33:e<57.72747354?32:e<58.84763776?31:e<59.95459277?30:e<61.04917774?29:e<62.13216659?28:e<63.20427479?27:e<64.26616523?26:e<65.3184531?25:e<66.36171008?24:e<67.39646774?23:e<68.42322022?22:e<69.44242631?21:e<70.45451075?20:e<71.45986473?19:e<72.45884545?18:e<73.45177442?17:e<74.43893416?16:e<75.42056257?15:e<76.39684391?14:e<77.36789461?13:e<78.33374083?12:e<79.29428225?11:e<80.24923213?10:e<81.19801349?9:e<82.13956981?8:e<83.07199445?7:e<83.99173563?6:e<84.89166191?5:e<85.75541621?4:e<86.53536998?3:e<87?2:1}const CD=SD;var ID=lf;function lf(){if(!(this instanceof lf))return new lf(0);this.icao=0,this.count=0,this.seen=0,this.altitude=0,this.unit=0,this.speed=0,this.heading=0,this.lat=0,this.lng=0,this.callsign="",this._oddCprLat=0,this._oddCprLng=0,this._oddCprTime=0,this._evenCprLat=0,this._evenCprLng=0,this._evenCprTime=0}lf.prototype.update=function(e){this.count++,this.seen=Date.now(),this.icao=e.icao,e.msgtype===0||e.msgtype===4||e.msgtype===20?(this.altitude=e.altitude,this.unit=e.unit):e.msgtype===17&&(e.metype>=1&&e.metype<=4?this.callsign=e.callsign:e.metype>=9&&e.metype<=18?(this.altitude=e.altitude,this.unit=e.unit,e.fflag?(this._oddCprLat=e.rawLatitude,this._oddCprLng=e.rawLongitude,this._oddCprTime=Date.now()):(this._evenCprLat=e.rawLatitude,this._evenCprLng=e.rawLongitude,this._evenCprTime=Date.now()),Math.abs(this._evenCprTime-this._oddCprTime)<=1e4&&CD(this)):e.metype===19&&(e.mesub===1||e.mesub===2)&&(this.speed=e.speed,this.heading=e.heading))};const AD=ID;var XD=$u;function $u(e){if(!(this instanceof $u))return new $u(e);e||(e={}),this._timeout=e.timeout||12e4,this._index={}}$u.prototype.addMessage=function(e){(this._index[e.icao]=this._index[e.icao]||new AD).update(e)};$u.prototype.getAircrafts=function(){const e=this;return this._prune(),Object.keys(this._index).map(function(r){return e._index[r]})};$u.prototype._prune=function(){const e=this,r=Date.now()-this._timeout;Object.keys(this._index).forEach(function(o){e._index[o].seen<r&&delete e._index[o]})};const v2=112,x2=56;var b2=q0;q0.LONG_MSG_BITS=v2;q0.SHORT_MSG_BITS=x2;function q0(e){return e&16?v2:x2}const w2=b2,Z0=w2.LONG_MSG_BITS/8,S2=1024,zD=60,cs="?ABCDEFGHIJKLMNOPQRSTUVWXYZ????? ???????????????0123456789??????",H0=0,T2=1,PD=new Uint32Array([3749354,1874677,15841150,7920575,12818395,10367465,11592432,5796216,2898108,1449054,724527,16416019,8569997,12490818,6245409,13655060,6827530,3413765,15069574,7534787,13010533,10271030,5135515,14210121,9670688,4835344,2417672,1208836,604418,302209,16626756,8313378,4156689,14699660,7349830,3674915,14939029,9307086,4653543,14449399,9553791,11999675,10778329,11387240,5693620,2846810,1423405,16066066,8033033,12759936,6379968,3189984,1594992,797496,398748,199374,99687,16726199,8414815,12568875,10493585,11531596,5765798,2882899,15336621,9107538,4553769,14500880,7250440,3625220,1812610,906305,16322596,8161298,4080649,14735360,7367680,3683840,1841920,920960,460480,230240,115120,57560,28780,14390,7195,16774153,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);var MD=$a;$a.UNIT_FEET=H0;$a.UNIT_METERS=T2;function $a(e){if(!(this instanceof $a))return new $a(e);e||(e={}),this._fixErrors=e.fixErrors!==!1,this._aggressive=e.aggressive||!1,this._icaoCache=new Uint32Array(S2*2)}$a.prototype.parse=function(e,r){const o=new DD;o.msg=e,o.msgtype=e[0]>>3,o.msgbits=w2(o.msgtype),o.crc=RD(e,o.msgbits);const c=Mu(e,o.msgbits);if(o.crcOk=o.crc===c,!o.crcOk&&this._fixErrors&&(o.msgtype===11||o.msgtype===17)&&((o.errorbit=OD(e,o.msgbits))!==-1||this._aggressive&&o.msgtype===17&&(o.errorbit=FD(e,o.msgbits))!==-1)&&(o.crc=Mu(e,o.msgbits),o.crcOk=!0),r)return o;o.ca=e[0]&7,o.icao=e[1]<<16|e[2]<<8|e[3],o.metype=e[4]>>3,o.mesub=e[4]&7,o.fs=e[0]&7,o.dr=e[1]>>3&31,o.um=(e[1]&7)<<3|e[2]>>5;{const m=(e[3]&128)>>5|(e[2]&2)>>0|(e[2]&8)>>3,v=(e[3]&2)<<1|(e[3]&8)>>2|(e[3]&32)>>5,T=(e[2]&1)<<2|(e[2]&4)>>1|(e[2]&16)>>4,l=(e[3]&1)<<2|(e[3]&4)>>1|(e[3]&16)>>4;o.identity=m*1e3+v*100+T*10+l}if(o.msgtype!==11&&o.msgtype!==17?this._bruteForceAp(e,o)?o.crcOk=!0:o.crcOk=!1:o.crcOk&&o.errorbit===-1&&this._addRecentlySeenIcaoAddr(o.icao),o.msgtype===0||o.msgtype===4||o.msgtype===16||o.msgtype===20){const m=BD(e);o.altitude=m[0],o.unit=m[1]}if(o.msgtype===17){if(o.metype>=1&&o.metype<=4)o.aircraftType=o.metype-1,o.callsign=(cs[e[5]>>2]+cs[(e[5]&3)<<4|e[6]>>4]+cs[(e[6]&15)<<2|e[7]>>6]+cs[e[7]&63]+cs[e[8]>>2]+cs[(e[8]&3)<<4|e[9]>>4]+cs[(e[9]&15)<<2|e[10]>>6]+cs[e[10]&63]).trim();else if(o.metype>=9&&o.metype<=18){o.fflag=e[6]&1<<2,o.tflag=e[6]&1<<3;const m=LD(e);m&&(o.altitude=m[0],o.unit=m[1]),o.rawLatitude=(e[6]&3)<<15|e[7]<<7|e[8]>>1,o.rawLongitude=(e[8]&1)<<16|e[9]<<8|e[10]}else if(o.metype===19&&o.mesub>=1&&o.mesub<=4)if(o.mesub===1||o.mesub===2)if(o.ewDir=(e[5]&4)>>2,o.ewVelocity=(e[5]&3)<<8|e[6],o.nsDir=(e[7]&128)>>7,o.nsVelocity=(e[7]&127)<<3|(e[8]&224)>>5,o.vertRateSource=(e[8]&16)>>4,o.vertRateSign=(e[8]&8)>>3,o.vertRate=(e[8]&7)<<6|(e[9]&252)>>2,o.speed=Math.sqrt(o.nsVelocity*o.nsVelocity+o.ewVelocity*o.ewVelocity),o.speed){let m=o.ewVelocity,v=o.nsVelocity,T;o.ewDir&&(m*=-1),o.nsDir&&(v*=-1),T=Math.atan2(m,v),o.heading=T*360/(Math.PI*2),o.heading<0&&(o.heading+=360)}else o.heading=0;else(o.mesub===3||o.mesub===4)&&(o.headingIsValid=e[5]&1<<2,o.heading=360/128*((e[5]&3)<<5|e[6]>>3))}return o.phaseCorrected=!1,o};$a.prototype._bruteForceAp=function(e,r){if(r.msgtype===0||r.msgtype===4||r.msgtype===5||r.msgtype===16||r.msgtype===20||r.msgtype===21||r.msgtype===24){const o=new Uint8Array(Z0),c=r.msgbits/8-1;let m,v;if(Bh(o,0,e,0,r.msgbits/8),v=Mu(o,r.msgbits),o[c]^=v&255,o[c-1]^=v>>8&255,o[c-2]^=v>>16&255,m=o[c]|o[c-1]<<8|o[c-2]<<16,this._icaoAddrWasRecentlySeen(m))return r.icao=m,!0}return!1};$a.prototype._icaoAddrWasRecentlySeen=function(e){const r=E2(e),o=this._icaoCache[r*2],c=this._icaoCache[r*2+1],m=Date.now()/1e3>>0;return o&&o===e&&m-c<=zD};$a.prototype._addRecentlySeenIcaoAddr=function(e){const r=E2(e);this._icaoCache[r*2]=e;const o=Date.now()/1e3>>0;this._icaoCache[r*2+1]=o};function DD(){this.msg=null,this.msgbits=null,this.msgtype=null,this.crcOk=!1,this.crc=null,this.errorbit=-1,this.icao=0,this.phaseCorrected=!1,this.ca=null,this.metype=null,this.mesub=null,this.headingIsValid=null,this.heading=null,this.aircraftType=null,this.fflag=null,this.tflag=null,this.rawLatitude=null,this.rawLongitude=null,this.callsign="",this.ewDir=null,this.ewVelocity=null,this.nsDir=null,this.nsVelocity=null,this.vertRateSource=null,this.vertRateSign=null,this.vertRate=null,this.speed=null,this.fs=null,this.dr=null,this.um=null,this.identity=null,this.altitude=null,this.unit=null}function RD(e,r){return e[r/8-3]<<16|e[r/8-2]<<8|e[r/8-1]}function LD(e){if(e[5]&1)return[(e[5]>>1<<4|(e[6]&240)>>4)*25-1e3,H0]}function BD(e){const r=e[3]&64,o=e[3]&1<<4;let c;if(r)c=T2;else if(c=H0,o)return[((e[2]&31)<<6|(e[3]&128)>>2|(e[3]&32)>>1|e[3]&15)*25-1e3,c];return[0,c]}function E2(e){return e=((e>>>16^e)*73244475&4294967295)>>>0,e=((e>>>16^e)*73244475&4294967295)>>>0,e=((e>>>16^e)&4294967295)>>>0,e&S2-1}function FD(e,r){const o=new Uint8Array(Z0);for(let c=0;c<r;c++){const m=c/8>>0,v=1<<7-c%8;for(let T=c+1;T<r;T++){const l=T/8>>0,D=1<<7-T%8;let j,oe;if(Bh(o,0,e,0,r/8),o[m]^=v,o[l]^=D,j=o[r/8-3]<<16|o[r/8-2]<<8|o[r/8-1],oe=Mu(o,r),j===oe)return Bh(e,0,o,0,r/8),c|T<<8}}return-1}function OD(e,r){const o=new Uint8Array(Z0);for(let c=0;c<r;c++){const m=c/8>>0,v=1<<7-c%8;Bh(o,0,e,0,r/8),o[m]^=v;const T=o[r/8-3]<<16|o[r/8-2]<<8|o[r/8-1],l=Mu(o,r);if(T===l)return Bh(e,0,o,0,r/8),c}return-1}function Mu(e,r){let o=0;const c=r===112?0:112-56;for(let m=0;m<r;m++){const v=m/8>>0,T=m%8,l=1<<7-T;e[v]&l&&(o^=PD[m+c])}return o}function Bh(e,r,o,c,m){for(let v=c;v<m;v++)e[r+v]=o[v]}const Pa=b2,X0=MD,hs=8,ND=hs+Pa.LONG_MSG_BITS,Iy=new Uint16Array(129*129*2);for(let e=0;e<=128;e++)for(let r=0;r<=128;r++)Iy[e*129+r]=Math.round(Math.sqrt(e*e+r*r)*360);var KD=Ps;Ps.UNIT_FEET=X0.UNIT_FEET;Ps.UNIT_METERS=X0.UNIT_METERS;function Ps(e){if(!(this instanceof Ps))return new Ps(e);e||(e={}),this._aggressive=e.aggressive!==!1,this._checkCrc=e.checkCrc||!0,this._crcOnly=e.crcOnly||!1,this._mag=e.mag||null,this._decoder=new X0(e)}Ps.prototype.process=function(e,r,o){this._mag||(this._mag=new Uint16Array(r/2)),this.computeMagnitudeVector(e,this._mag,r),this.detectMessage(this._mag,r/2,o)};Ps.prototype.computeMagnitudeVector=function(e,r,o,c){if(c)for(let m=0;m<o;m+=2){let v=e.readInt8(m),T=e.readInt8(m+1);v<0&&(v=-v),T<0&&(T=-T),r[m/2]=Iy[v*129+T]}else for(let m=0;m<o;m+=2){let v=e[m]-127,T=e[m+1]-127;v<0&&(v=-v),T<0&&(T=-T),r[m/2]=Iy[v*129+T]}};Ps.prototype.detectMessage=function(e,r,o){const c=new Uint8Array(Pa.LONG_MSG_BITS),m=new Uint8Array(Pa.LONG_MSG_BITS/2),v=new Uint16Array(Pa.LONG_MSG_BITS*2);let T=!1;for(let l=0;l<r-ND*2;l++){let D,j,oe,ne,U,Se=!1;if(T)w1(v,0,e,l+hs*2,v.length),l&&$D(e,l)&&UD(e,l);else if(!(e[l]>e[l+1]&&e[l+1]<e[l+2]&&e[l+2]>e[l+3]&&e[l+3]<e[l]&&e[l+4]<e[l]&&e[l+5]<e[l]&&e[l+6]<e[l]&&e[l+7]>e[l+8]&&e[l+8]<e[l+9]&&e[l+9]>e[l+6])||(j=(e[l]+e[l+2]+e[l+7]+e[l+9])/6,e[l+4]>=j||e[l+5]>=j)||e[l+11]>=j||e[l+12]>=j||e[l+13]>=j||e[l+14]>=j)continue;for(U=0,ne=0;ne<Pa.LONG_MSG_BITS*2;ne+=2)D=e[l+ne+hs*2],j=e[l+ne+hs*2+1],oe=D-j,oe<0&&(oe=-oe),ne>0&&oe<256?c[ne/2]=c[ne/2-1]:D===j?(c[ne/2]=2,ne<Pa.SHORT_MSG_BITS*2&&U++):D>j?c[ne/2]=1:c[ne/2]=0;for(T&&w1(e,l+hs*2,v,0,v.length),ne=0;ne<Pa.LONG_MSG_BITS;ne+=8)m[ne/8]=c[ne]<<7|c[ne+1]<<6|c[ne+2]<<5|c[ne+3]<<4|c[ne+4]<<3|c[ne+5]<<2|c[ne+6]<<1|c[ne+7];const Ae=m[0]>>3,_e=Pa(Ae)/8;for(oe=0,ne=0;ne<_e*8*2;ne+=2)oe+=Math.abs(e[l+ne+hs*2]-e[l+ne+hs*2+1]);if(oe/=_e*4,oe<10*255){T=!1;continue}if(U===0||this._aggressive&&U<3){const re=this._decoder.parse(m,this._crcOnly);re.crcOk&&(l+=(hs+_e*8)*2,Se=!0,T&&(re.phaseCorrected=!0)),(re.crcOk||!this._checkCrc)&&o(re)}!Se&&!T?(l--,T=!0):T=!1}};function $D(e,r){return e[r+3]>e[r+2]/3||e[r+10]>e[r+9]/3?1:e[r+6]>e[r+7]/3||e[r+-1]>e[r+1]/3?-1:0}function UD(e,r){for(let o=16;o<(Pa.LONG_MSG_BITS-1)*2;o+=2)e[r+o]>e[r+o+1]?e[r+o+2]=e[r+o+2]*5/4:e[r+o+2]=e[r+o+2]*4/5}function w1(e,r,o,c,m){for(let v=c;v<m;v++)e[r+v]=o[v]}var VD=function(e){Fe.exports.useEffect(e,[])},jD=VD,GD=function(e){var r=Fe.exports.useRef(e);r.current=e,jD(function(){return function(){return r.current()}})},WD=GD,qD=function(e,r){r===void 0&&(r=200);var o=Fe.exports.useState(e),c=o[0],m=o[1],v=Fe.exports.useRef(),T=Fe.exports.useRef(null),l=Fe.exports.useRef(0);return Fe.exports.useEffect(function(){if(v.current)T.current=e,l.current=!0;else{m(e);var D=function(){l.current?(l.current=!1,m(T.current),v.current=setTimeout(D,r)):v.current=void 0};v.current=setTimeout(D,r)}},[e]),WD(function(){v.current&&clearTimeout(v.current)}),c},YD=qD,k2={exports:{}};(function(e,r){(function(o,c){e.exports=c()})(qc,function(){var o,c,m;function v(l,D){if(!o)o=D;else if(!c)c=D;else{var j="var sharedChunk = {}; ("+o+")(sharedChunk); ("+c+")(sharedChunk);",oe={};o(oe),m=D(oe),typeof window!="undefined"&&(m.workerUrl=window.URL.createObjectURL(new Blob([j],{type:"text/javascript"})))}}v(["exports"],function(l){var D=j;function j(i,t,a,u){this.cx=3*i,this.bx=3*(a-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(u-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=t,this.p2x=a,this.p2y=u}function oe(i,t,a,u){const p=new D(i,t,a,u);return function(g){return p.solve(g)}}j.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,t){if(t===void 0&&(t=1e-6),i<0)return 0;if(i>1)return 1;for(var a=i,u=0;u<8;u++){var p=this.sampleCurveX(a)-i;if(Math.abs(p)<t)return a;var g=this.sampleCurveDerivativeX(a);if(Math.abs(g)<1e-6)break;a-=p/g}var _=0,b=1;for(a=i,u=0;u<20&&(p=this.sampleCurveX(a),!(Math.abs(p-i)<t));u++)i>p?_=a:b=a,a=.5*(b-_)+_;return a},solve:function(i,t){return this.sampleCurveY(this.solveCurveX(i,t))}};const ne=oe(.25,.1,.25,1);function U(i,t,a){return Math.min(a,Math.max(t,i))}function Se(i,t,a){const u=a-t,p=((i-t)%u+u)%u+t;return p===t?a:p}function Ae(i,...t){for(const a of t)for(const u in a)i[u]=a[u];return i}let _e=1;function re(i,t){i.forEach(a=>{t[a]&&(t[a]=t[a].bind(t))})}function H(i,t,a){const u={};for(const p in i)u[p]=t.call(a||this,i[p],p,i);return u}function ee(i,t,a){const u={};for(const p in i)t.call(a||this,i[p],p,i)&&(u[p]=i[p]);return u}function fe(i){return Array.isArray(i)?i.map(fe):typeof i=="object"&&i?H(i,fe):i}const be={};function Ne(i){be[i]||(typeof console!="undefined"&&console.warn(i),be[i]=!0)}function Re(i,t,a){return(a.y-i.y)*(t.x-i.x)>(t.y-i.y)*(a.x-i.x)}function Le(i){let t=0;for(let a,u,p=0,g=i.length,_=g-1;p<g;_=p++)a=i[p],u=i[_],t+=(u.x-a.x)*(a.y+u.y);return t}function rt(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function Je(i){const t={};if(i.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(a,u,p,g)=>{const _=p||g;return t[u]=!_||_.toLowerCase(),""}),t["max-age"]){const a=parseInt(t["max-age"],10);isNaN(a)?delete t["max-age"]:t["max-age"]=a}return t}let wt,Er,Nt=null;function Vt(i){if(Nt==null){const t=i.navigator?i.navigator.userAgent:null;Nt=!!i.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return Nt}function Fr(i){return typeof ImageBitmap!="undefined"&&i instanceof ImageBitmap}const kr={now:typeof performance!="undefined"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(i){const t=requestAnimationFrame(i);return{cancel:()=>cancelAnimationFrame(t)}},getImageData(i,t=0){const a=window.document.createElement("canvas"),u=a.getContext("2d");if(!u)throw new Error("failed to create canvas 2d context");return a.width=i.width,a.height=i.height,u.drawImage(i,0,0,i.width,i.height),u.getImageData(-t,-t,i.width+2*t,i.height+2*t)},resolveURL:i=>(wt||(wt=document.createElement("a")),wt.href=i,wt.href),hardwareConcurrency:typeof navigator!="undefined"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(Er==null&&(Er=matchMedia("(prefers-reduced-motion: reduce)")),Er.matches)}};var dt=En;function En(i,t){this.x=i,this.y=t}En.prototype={clone:function(){return new En(this.x,this.y)},add:function(i){return this.clone()._add(i)},sub:function(i){return this.clone()._sub(i)},multByPoint:function(i){return this.clone()._multByPoint(i)},divByPoint:function(i){return this.clone()._divByPoint(i)},mult:function(i){return this.clone()._mult(i)},div:function(i){return this.clone()._div(i)},rotate:function(i){return this.clone()._rotate(i)},rotateAround:function(i,t){return this.clone()._rotateAround(i,t)},matMult:function(i){return this.clone()._matMult(i)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(i){return this.x===i.x&&this.y===i.y},dist:function(i){return Math.sqrt(this.distSqr(i))},distSqr:function(i){var t=i.x-this.x,a=i.y-this.y;return t*t+a*a},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(i){return Math.atan2(this.y-i.y,this.x-i.x)},angleWith:function(i){return this.angleWithSep(i.x,i.y)},angleWithSep:function(i,t){return Math.atan2(this.x*t-this.y*i,this.x*i+this.y*t)},_matMult:function(i){var t=i[2]*this.x+i[3]*this.y;return this.x=i[0]*this.x+i[1]*this.y,this.y=t,this},_add:function(i){return this.x+=i.x,this.y+=i.y,this},_sub:function(i){return this.x-=i.x,this.y-=i.y,this},_mult:function(i){return this.x*=i,this.y*=i,this},_div:function(i){return this.x/=i,this.y/=i,this},_multByPoint:function(i){return this.x*=i.x,this.y*=i.y,this},_divByPoint:function(i){return this.x/=i.x,this.y/=i.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var i=this.y;return this.y=this.x,this.x=-i,this},_rotate:function(i){var t=Math.cos(i),a=Math.sin(i),u=a*this.x+t*this.y;return this.x=t*this.x-a*this.y,this.y=u,this},_rotateAround:function(i,t){var a=Math.cos(i),u=Math.sin(i),p=t.y+u*(this.x-t.x)+a*(this.y-t.y);return this.x=t.x+a*(this.x-t.x)-u*(this.y-t.y),this.y=p,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},En.convert=function(i){return i instanceof En?i:Array.isArray(i)?new En(i[0],i[1]):i};const kn={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},cn="mapbox-tiles";let Cn,Ze,xt=500,st=50;function Ht(){typeof caches=="undefined"||Cn||(Cn=caches.open(cn))}let er=1/0;const Pr={supported:!1,testSupport:function(i){!wr&&$r&&(Gi?ko(i):Hr=i)}};let Hr,$r,wr=!1,Gi=!1;function ko(i){const t=i.createTexture();i.bindTexture(i.TEXTURE_2D,t);try{if(i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,$r),i.isContextLost())return;Pr.supported=!0}catch{}i.deleteTexture(t),wr=!0}typeof document!="undefined"&&($r=document.createElement("img"),$r.onload=function(){Hr&&ko(Hr),Hr=null,Gi=!0},$r.onerror=function(){wr=!0,Hr=null},$r.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const hi={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(hi);class In extends Error{constructor(t,a,u,p){super(`AJAXError: ${a} (${t}): ${u}`),this.status=t,this.statusText=a,this.url=u,this.body=p}}const ia=rt()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href;function Wi(i,t){const a=new AbortController,u=new Request(i.url,{method:i.method||"GET",body:i.body,credentials:i.credentials,headers:i.headers,referrer:ia(),signal:a.signal});let p=!1,g=!1;return i.type==="json"&&u.headers.set("Accept","application/json"),((_,b,w)=>{if(g)return;const k=Date.now();fetch(u).then(A=>A.ok?((P,L,F)=>{(i.type==="arrayBuffer"?P.arrayBuffer():i.type==="json"?P.json():P.text()).then(O=>{g||(L&&F&&function(Y,K,de){if(Ht(),!Cn)return;const ve={status:K.status,statusText:K.statusText,headers:new Headers};K.headers.forEach((ge,Pe)=>ve.headers.set(Pe,ge));const ce=Je(K.headers.get("Cache-Control")||"");ce["no-store"]||(ce["max-age"]&&ve.headers.set("Expires",new Date(de+1e3*ce["max-age"]).toUTCString()),new Date(ve.headers.get("Expires")).getTime()-de<42e4||function(ge,Pe){if(Ze===void 0)try{new Response(new ReadableStream),Ze=!0}catch{Ze=!1}Ze?Pe(ge.body):ge.blob().then(Pe)}(K,ge=>{const Pe=new Response(ge,ve);Ht(),Cn&&Cn.then(ze=>ze.put(function(tt){const lt=tt.indexOf("?");return lt<0?tt:tt.slice(0,lt)}(Y.url),Pe)).catch(ze=>Ne(ze.message))}))}(u,L,F),p=!0,t(null,O,P.headers.get("Cache-Control"),P.headers.get("Expires")))}).catch(O=>{g||t(new Error(O.message))})})(A,null,k):A.blob().then(P=>t(new In(A.status,A.statusText,i.url,P)))).catch(A=>{A.code!==20&&t(new Error(A.message))})})(),{cancel:()=>{g=!0,p||a.abort()}}}const Co=function(i,t){if(/:\/\//.test(i.url)&&!/^https?:|^file:/.test(i.url)){if(rt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",i,t);if(!rt()){const u=i.url.substring(0,i.url.indexOf("://"));return(kn.REGISTERED_PROTOCOLS[u]||Wi)(i,t)}}if(!(/^file:/.test(a=i.url)||/^file:/.test(ia())&&!/^\w+:/.test(a))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return Wi(i,t);if(rt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",i,t,void 0,!0)}var a;return function(u,p){const g=new XMLHttpRequest;g.open(u.method||"GET",u.url,!0),u.type==="arrayBuffer"&&(g.responseType="arraybuffer");for(const _ in u.headers)g.setRequestHeader(_,u.headers[_]);return u.type==="json"&&(g.responseType="text",g.setRequestHeader("Accept","application/json")),g.withCredentials=u.credentials==="include",g.onerror=()=>{p(new Error(g.statusText))},g.onload=()=>{if((g.status>=200&&g.status<300||g.status===0)&&g.response!==null){let _=g.response;if(u.type==="json")try{_=JSON.parse(g.response)}catch(b){return p(b)}p(null,_,g.getResponseHeader("Cache-Control"),g.getResponseHeader("Expires"))}else{const _=new Blob([g.response],{type:g.getResponseHeader("Content-Type")});p(new In(g.status,g.statusText,u.url,_))}},g.send(u.body),{cancel:()=>g.abort()}}(i,t)},Io=function(i,t){return Co(Ae(i,{type:"arrayBuffer"}),t)};function oa(i){const t=window.document.createElement("a");return t.href=i,t.protocol===window.document.location.protocol&&t.host===window.document.location.host}const Rt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let An,di;An=[],di=0;const ti=function(i,t){if(Pr.supported&&(i.headers||(i.headers={}),i.headers.accept="image/webp,*/*"),di>=kn.MAX_PARALLEL_IMAGE_REQUESTS){const g={requestParameters:i,callback:t,cancelled:!1,cancel(){this.cancelled=!0}};return An.push(g),g}di++;let a=!1;const u=()=>{if(!a)for(a=!0,di--;An.length&&di<kn.MAX_PARALLEL_IMAGE_REQUESTS;){const g=An.shift(),{requestParameters:_,callback:b,cancelled:w}=g;w||(g.cancel=ti(_,b).cancel)}},p=Io(i,(g,_,b,w)=>{u(),g?t(g):_&&function(k,A){typeof createImageBitmap=="function"?function(P,L){const F=new Blob([new Uint8Array(P)],{type:"image/png"});createImageBitmap(F).then(O=>{L(null,O)}).catch(O=>{L(new Error(`Could not load image because of ${O.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(k,A):function(P,L){const F=new Image;F.onload=()=>{L(null,F),URL.revokeObjectURL(F.src),F.onload=null,window.requestAnimationFrame(()=>{F.src=Rt})},F.onerror=()=>L(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const O=new Blob([new Uint8Array(P)],{type:"image/png"});F.src=P.byteLength?URL.createObjectURL(O):Rt}(k,A)}(_,(k,A)=>{k!=null?t(k):A!=null&&t(null,A,{cacheControl:b,expires:w})})});return{cancel:()=>{p.cancel(),u()}}};function zn(i,t,a){a[i]&&a[i].indexOf(t)!==-1||(a[i]=a[i]||[],a[i].push(t))}function pi(i,t,a){if(a&&a[i]){const u=a[i].indexOf(t);u!==-1&&a[i].splice(u,1)}}class fi{constructor(t,a={}){Ae(this,a),this.type=t}}class Ao extends fi{constructor(t,a={}){super("error",Ae({error:t},a))}}class ki{on(t,a){return this._listeners=this._listeners||{},zn(t,a,this._listeners),this}off(t,a){return pi(t,a,this._listeners),pi(t,a,this._oneTimeListeners),this}once(t,a){return this._oneTimeListeners=this._oneTimeListeners||{},zn(t,a,this._oneTimeListeners),this}fire(t,a){typeof t=="string"&&(t=new fi(t,a||{}));const u=t.type;if(this.listens(u)){t.target=this;const p=this._listeners&&this._listeners[u]?this._listeners[u].slice():[];for(const b of p)b.call(this,t);const g=this._oneTimeListeners&&this._oneTimeListeners[u]?this._oneTimeListeners[u].slice():[];for(const b of g)pi(u,b,this._oneTimeListeners),b.call(this,t);const _=this._eventedParent;_&&(Ae(t,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),_.fire(t))}else t instanceof Ao&&console.error(t.error);return this}listens(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)}setEventedParent(t,a){return this._eventedParent=t,this._eventedParentData=a,this}}var ke={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1},elevationOffset:{type:"number",default:450}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class Ve{constructor(t,a,u,p){this.message=(t?`${t}: `:"")+u,p&&(this.identifier=p),a!=null&&a.__line__&&(this.line=a.__line__)}}function qi(i){const t=i.value;return t?[new Ve(i.key,t,"constants have been deprecated as of v8")]:[]}function Gn(i,...t){for(const a of t)for(const u in a)i[u]=a[u];return i}function Pt(i){return i instanceof Number||i instanceof String||i instanceof Boolean?i.valueOf():i}function Pn(i){if(Array.isArray(i))return i.map(Pn);if(i instanceof Object&&!(i instanceof Number||i instanceof String||i instanceof Boolean)){const t={};for(const a in i)t[a]=Pn(i[a]);return t}return Pt(i)}class Mn extends Error{constructor(t,a){super(a),this.message=a,this.key=t}}class Dn{constructor(t,a=[]){this.parent=t,this.bindings={};for(const[u,p]of a)this.bindings[u]=p}concat(t){return new Dn(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}const gn={kind:"null"},$e={kind:"number"},Et={kind:"string"},bt={kind:"boolean"},Xr={kind:"color"},Ci={kind:"object"},_t={kind:"value"},Ii={kind:"collator"},pr={kind:"formatted"},zo={kind:"padding"},Mr={kind:"resolvedImage"};function hn(i,t){return{kind:"array",itemType:i,N:t}}function Wt(i){if(i.kind==="array"){const t=Wt(i.itemType);return typeof i.N=="number"?`array<${t}, ${i.N}>`:i.itemType.kind==="value"?"array":`array<${t}>`}return i.kind}const Po=[gn,$e,Et,bt,Xr,pr,Ci,hn(_t),zo,Mr];function Ur(i,t){if(t.kind==="error")return null;if(i.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!Ur(i.itemType,t.itemType))&&(typeof i.N!="number"||i.N===t.N))return null}else{if(i.kind===t.kind)return null;if(i.kind==="value"){for(const a of Po)if(!Ur(a,t))return null}}return`Expected ${Wt(i)} but found ${Wt(t)} instead.`}function ao(i,t){return t.some(a=>a.kind===i.kind)}function so(i,t){return t.some(a=>a==="null"?i===null:a==="array"?Array.isArray(i):a==="object"?i&&!Array.isArray(i)&&typeof i=="object":a===typeof i)}var Mo,lo={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function V(i){return(i=Math.round(i))<0?0:i>255?255:i}function I(i){return V(i[i.length-1]==="%"?parseFloat(i)/100*255:parseInt(i))}function M(i){return(t=i[i.length-1]==="%"?parseFloat(i)/100:parseFloat(i))<0?0:t>1?1:t;var t}function N(i,t,a){return a<0?a+=1:a>1&&(a-=1),6*a<1?i+(t-i)*a*6:2*a<1?t:3*a<2?i+(t-i)*(2/3-a)*6:i}try{Mo={}.parseCSSColor=function(i){var t,a=i.replace(/ /g,"").toLowerCase();if(a in lo)return lo[a].slice();if(a[0]==="#")return a.length===4?(t=parseInt(a.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:a.length===7&&(t=parseInt(a.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var u=a.indexOf("("),p=a.indexOf(")");if(u!==-1&&p+1===a.length){var g=a.substr(0,u),_=a.substr(u+1,p-(u+1)).split(","),b=1;switch(g){case"rgba":if(_.length!==4)return null;b=M(_.pop());case"rgb":return _.length!==3?null:[I(_[0]),I(_[1]),I(_[2]),b];case"hsla":if(_.length!==4)return null;b=M(_.pop());case"hsl":if(_.length!==3)return null;var w=(parseFloat(_[0])%360+360)%360/360,k=M(_[1]),A=M(_[2]),P=A<=.5?A*(k+1):A+k-A*k,L=2*A-P;return[V(255*N(L,P,w+1/3)),V(255*N(L,P,w)),V(255*N(L,P,w-1/3)),b];default:return null}}return null}}catch{}class ${constructor(t,a,u,p=1){this.r=t,this.g=a,this.b=u,this.a=p}static parse(t){if(!t)return;if(t instanceof $)return t;if(typeof t!="string")return;const a=Mo(t);return a?new $(a[0]/255*a[3],a[1]/255*a[3],a[2]/255*a[3],a[3]):void 0}toString(){const[t,a,u,p]=this.toArray();return`rgba(${Math.round(t)},${Math.round(a)},${Math.round(u)},${p})`}toArray(){const{r:t,g:a,b:u,a:p}=this;return p===0?[0,0,0,0]:[255*t/p,255*a/p,255*u/p,p]}}$.black=new $(0,0,0,1),$.white=new $(1,1,1,1),$.transparent=new $(0,0,0,0),$.red=new $(1,0,0,1);class J{constructor(t,a,u){this.sensitivity=t?a?"variant":"case":a?"accent":"base",this.locale=u,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,a){return this.collator.compare(t,a)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class ae{constructor(t,a,u,p,g){this.text=t,this.image=a,this.scale=u,this.fontStack=p,this.textColor=g}}class te{constructor(t){this.sections=t}static fromString(t){return new te([new ae(t,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(t=>t.text.length!==0||t.image&&t.image.name.length!==0)}static factory(t){return t instanceof te?t:te.fromString(t)}toString(){return this.sections.length===0?"":this.sections.map(t=>t.text).join("")}}class Q{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof Q)return t;if(typeof t=="number")return new Q([t,t,t,t]);if(Array.isArray(t)&&!(t.length<1||t.length>4)){for(const a of t)if(typeof a!="number")return;switch(t.length){case 1:t=[t[0],t[0],t[0],t[0]];break;case 2:t=[t[0],t[1],t[0],t[1]];break;case 3:t=[t[0],t[1],t[2],t[1]]}return new Q(t)}}toString(){return JSON.stringify(this.values)}}class se{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new se({name:t,available:!1}):null}}function Te(i,t,a,u){return typeof i=="number"&&i>=0&&i<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof a=="number"&&a>=0&&a<=255?u===void 0||typeof u=="number"&&u>=0&&u<=1?null:`Invalid rgba value [${[i,t,a,u].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof u=="number"?[i,t,a,u]:[i,t,a]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Me(i){if(i===null||typeof i=="string"||typeof i=="boolean"||typeof i=="number"||i instanceof $||i instanceof J||i instanceof te||i instanceof Q||i instanceof se)return!0;if(Array.isArray(i)){for(const t of i)if(!Me(t))return!1;return!0}if(typeof i=="object"){for(const t in i)if(!Me(i[t]))return!1;return!0}return!1}function we(i){if(i===null)return gn;if(typeof i=="string")return Et;if(typeof i=="boolean")return bt;if(typeof i=="number")return $e;if(i instanceof $)return Xr;if(i instanceof J)return Ii;if(i instanceof te)return pr;if(i instanceof Q)return zo;if(i instanceof se)return Mr;if(Array.isArray(i)){const t=i.length;let a;for(const u of i){const p=we(u);if(a){if(a===p)continue;a=_t;break}a=p}return hn(a||_t,t)}return Ci}function it(i){const t=typeof i;return i===null?"":t==="string"||t==="number"||t==="boolean"?String(i):i instanceof $||i instanceof te||i instanceof Q||i instanceof se?i.toString():JSON.stringify(i)}class ot{constructor(t,a){this.type=t,this.value=a}static parse(t,a){if(t.length!==2)return a.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!Me(t[1]))return a.error("invalid value");const u=t[1];let p=we(u);const g=a.expectedType;return p.kind!=="array"||p.N!==0||!g||g.kind!=="array"||typeof g.N=="number"&&g.N!==0||(p=g),new ot(p,u)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class He{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}}const pt={string:Et,number:$e,boolean:bt,object:Ci};class gt{constructor(t,a){this.type=t,this.args=a}static parse(t,a){if(t.length<2)return a.error("Expected at least one argument.");let u,p=1;const g=t[0];if(g==="array"){let b,w;if(t.length>2){const k=t[1];if(typeof k!="string"||!(k in pt)||k==="object")return a.error('The item type argument of "array" must be one of string, number, boolean',1);b=pt[k],p++}else b=_t;if(t.length>3){if(t[2]!==null&&(typeof t[2]!="number"||t[2]<0||t[2]!==Math.floor(t[2])))return a.error('The length argument to "array" must be a positive integer literal',2);w=t[2],p++}u=hn(b,w)}else{if(!pt[g])throw new Error(`Types doesn't contain name = ${g}`);u=pt[g]}const _=[];for(;p<t.length;p++){const b=a.parse(t[p],p,_t);if(!b)return null;_.push(b)}return new gt(u,_)}evaluate(t){for(let a=0;a<this.args.length;a++){const u=this.args[a].evaluate(t);if(!Ur(this.type,we(u)))return u;if(a===this.args.length-1)throw new He(`Expected value to be of type ${Wt(this.type)}, but found ${Wt(we(u))} instead.`)}throw new Error}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}const Lt={"to-boolean":bt,"to-color":Xr,"to-number":$e,"to-string":Et};class vt{constructor(t,a){this.type=t,this.args=a}static parse(t,a){if(t.length<2)return a.error("Expected at least one argument.");const u=t[0];if(!Lt[u])throw new Error(`Can't parse ${u} as it is not part of the known types`);if((u==="to-boolean"||u==="to-string")&&t.length!==2)return a.error("Expected one argument.");const p=Lt[u],g=[];for(let _=1;_<t.length;_++){const b=a.parse(t[_],_,_t);if(!b)return null;g.push(b)}return new vt(p,g)}evaluate(t){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(t));if(this.type.kind==="color"){let a,u;for(const p of this.args){if(a=p.evaluate(t),u=null,a instanceof $)return a;if(typeof a=="string"){const g=t.parseColor(a);if(g)return g}else if(Array.isArray(a)&&(u=a.length<3||a.length>4?`Invalid rbga value ${JSON.stringify(a)}: expected an array containing either three or four numeric values.`:Te(a[0],a[1],a[2],a[3]),!u))return new $(a[0]/255,a[1]/255,a[2]/255,a[3])}throw new He(u||`Could not parse color from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}if(this.type.kind==="padding"){let a;for(const u of this.args){a=u.evaluate(t);const p=Q.parse(a);if(p)return p}throw new He(`Could not parse padding from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}if(this.type.kind==="number"){let a=null;for(const u of this.args){if(a=u.evaluate(t),a===null)return 0;const p=Number(a);if(!isNaN(p))return p}throw new He(`Could not convert ${JSON.stringify(a)} to number.`)}return this.type.kind==="formatted"?te.fromString(it(this.args[0].evaluate(t))):this.type.kind==="resolvedImage"?se.fromString(it(this.args[0].evaluate(t))):it(this.args[0].evaluate(t))}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}const Tt=["Unknown","Point","LineString","Polygon"];class Bt{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Tt[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let a=this._parseColorCache[t];return a||(a=this._parseColorCache[t]=$.parse(t)),a}}class Xt{constructor(t,a,u,p){this.name=t,this.type=a,this._evaluate=u,this.args=p}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}static parse(t,a){const u=t[0],p=Xt.definitions[u];if(!p)return a.error(`Unknown expression "${u}". If you wanted a literal array, use ["literal", [...]].`,0);const g=Array.isArray(p)?p[0]:p.type,_=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,b=_.filter(([k])=>!Array.isArray(k)||k.length===t.length-1);let w=null;for(const[k,A]of b){w=new Lo(a.registry,a.path,null,a.scope);const P=[];let L=!1;for(let F=1;F<t.length;F++){const O=t[F],Y=Array.isArray(k)?k[F-1]:k.type,K=w.parse(O,1+P.length,Y);if(!K){L=!0;break}P.push(K)}if(!L)if(Array.isArray(k)&&k.length!==P.length)w.error(`Expected ${k.length} arguments, but found ${P.length} instead.`);else{for(let F=0;F<P.length;F++){const O=Array.isArray(k)?k[F]:k.type,Y=P[F];w.concat(F+1).checkSubtype(O,Y.type)}if(w.errors.length===0)return new Xt(u,g,A,P)}}if(b.length===1)a.errors.push(...w.errors);else{const k=(b.length?b:_).map(([P])=>{return L=P,Array.isArray(L)?`(${L.map(Wt).join(", ")})`:`(${Wt(L.type)}...)`;var L}).join(" | "),A=[];for(let P=1;P<t.length;P++){const L=a.parse(t[P],1+A.length);if(!L)return null;A.push(Wt(L.type))}a.error(`Expected arguments of type ${k}, but found (${A.join(", ")}) instead.`)}return null}static register(t,a){Xt.definitions=a;for(const u in a)t[u]=Xt}}class Vr{constructor(t,a,u){this.type=Ii,this.locale=u,this.caseSensitive=t,this.diacriticSensitive=a}static parse(t,a){if(t.length!==2)return a.error("Expected one argument.");const u=t[1];if(typeof u!="object"||Array.isArray(u))return a.error("Collator options argument must be an object.");const p=a.parse(u["case-sensitive"]!==void 0&&u["case-sensitive"],1,bt);if(!p)return null;const g=a.parse(u["diacritic-sensitive"]!==void 0&&u["diacritic-sensitive"],1,bt);if(!g)return null;let _=null;return u.locale&&(_=a.parse(u.locale,1,Et),!_)?null:new Vr(p,g,_)}evaluate(t){return new J(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}}const ar=8192;function rn(i,t){i[0]=Math.min(i[0],t[0]),i[1]=Math.min(i[1],t[1]),i[2]=Math.max(i[2],t[0]),i[3]=Math.max(i[3],t[1])}function Do(i,t){return!(i[0]<=t[0]||i[2]>=t[2]||i[1]<=t[1]||i[3]>=t[3])}function aa(i,t){const a=(180+i[0])/360,u=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i[1]*Math.PI/360)))/360,p=Math.pow(2,t.z);return[Math.round(a*p*ar),Math.round(u*p*ar)]}function Kt(i,t,a){const u=i[0]-t[0],p=i[1]-t[1],g=i[0]-a[0],_=i[1]-a[1];return u*_-g*p==0&&u*g<=0&&p*_<=0}function Rs(i,t){let a=!1;for(let _=0,b=t.length;_<b;_++){const w=t[_];for(let k=0,A=w.length;k<A-1;k++){if(Kt(i,w[k],w[k+1]))return!1;(p=w[k])[1]>(u=i)[1]!=(g=w[k+1])[1]>u[1]&&u[0]<(g[0]-p[0])*(u[1]-p[1])/(g[1]-p[1])+p[0]&&(a=!a)}}var u,p,g;return a}function Ls(i,t){for(let a=0;a<t.length;a++)if(Rs(i,t[a]))return!0;return!1}function Ml(i,t,a,u){const p=u[0]-a[0],g=u[1]-a[1],_=(i[0]-a[0])*g-p*(i[1]-a[1]),b=(t[0]-a[0])*g-p*(t[1]-a[1]);return _>0&&b<0||_<0&&b>0}function Dl(i,t,a){for(const k of a)for(let A=0;A<k.length-1;++A)if((b=[(_=k[A+1])[0]-(g=k[A])[0],_[1]-g[1]])[0]*(w=[(p=t)[0]-(u=i)[0],p[1]-u[1]])[1]-b[1]*w[0]!=0&&Ml(u,p,g,_)&&Ml(g,_,u,p))return!0;var u,p,g,_,b,w;return!1}function Bs(i,t){for(let a=0;a<i.length;++a)if(!Rs(i[a],t))return!1;for(let a=0;a<i.length-1;++a)if(Dl(i[a],i[a+1],t))return!1;return!0}function Ku(i,t){for(let a=0;a<t.length;a++)if(Bs(i,t[a]))return!0;return!1}function uo(i,t,a){const u=[];for(let p=0;p<i.length;p++){const g=[];for(let _=0;_<i[p].length;_++){const b=aa(i[p][_],a);rn(t,b),g.push(b)}u.push(g)}return u}function sa(i,t,a){const u=[];for(let p=0;p<i.length;p++){const g=uo(i[p],t,a);u.push(g)}return u}function Rl(i,t,a,u){if(i[0]<a[0]||i[0]>a[2]){const p=.5*u;let g=i[0]-a[0]>p?-u:a[0]-i[0]>p?u:0;g===0&&(g=i[0]-a[2]>p?-u:a[2]-i[0]>p?u:0),i[0]+=g}rn(t,i)}function Ll(i,t,a,u){const p=Math.pow(2,u.z)*ar,g=[u.x*ar,u.y*ar],_=[];for(const b of i)for(const w of b){const k=[w.x+g[0],w.y+g[1]];Rl(k,t,a,p),_.push(k)}return _}function Fs(i,t,a,u){const p=Math.pow(2,u.z)*ar,g=[u.x*ar,u.y*ar],_=[];for(const w of i){const k=[];for(const A of w){const P=[A.x+g[0],A.y+g[1]];rn(t,P),k.push(P)}_.push(k)}if(t[2]-t[0]<=p/2){(b=t)[0]=b[1]=1/0,b[2]=b[3]=-1/0;for(const w of _)for(const k of w)Rl(k,t,a,p)}var b;return _}class co{constructor(t,a){this.type=bt,this.geojson=t,this.geometries=a}static parse(t,a){if(t.length!==2)return a.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Me(t[1])){const u=t[1];if(u.type==="FeatureCollection")for(let p=0;p<u.features.length;++p){const g=u.features[p].geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new co(u,u.features[p].geometry)}else if(u.type==="Feature"){const p=u.geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new co(u,u.geometry)}else if(u.type==="Polygon"||u.type==="MultiPolygon")return new co(u,u)}return a.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return function(a,u){const p=[1/0,1/0,-1/0,-1/0],g=[1/0,1/0,-1/0,-1/0],_=a.canonicalID();if(u.type==="Polygon"){const b=uo(u.coordinates,g,_),w=Ll(a.geometry(),p,g,_);if(!Do(p,g))return!1;for(const k of w)if(!Rs(k,b))return!1}if(u.type==="MultiPolygon"){const b=sa(u.coordinates,g,_),w=Ll(a.geometry(),p,g,_);if(!Do(p,g))return!1;for(const k of w)if(!Ls(k,b))return!1}return!0}(t,this.geometries);if(t.geometryType()==="LineString")return function(a,u){const p=[1/0,1/0,-1/0,-1/0],g=[1/0,1/0,-1/0,-1/0],_=a.canonicalID();if(u.type==="Polygon"){const b=uo(u.coordinates,g,_),w=Fs(a.geometry(),p,g,_);if(!Do(p,g))return!1;for(const k of w)if(!Bs(k,b))return!1}if(u.type==="MultiPolygon"){const b=sa(u.coordinates,g,_),w=Fs(a.geometry(),p,g,_);if(!Do(p,g))return!1;for(const k of w)if(!Ku(k,b))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}function la(i){if(i instanceof Xt&&(i.name==="get"&&i.args.length===1||i.name==="feature-state"||i.name==="has"&&i.args.length===1||i.name==="properties"||i.name==="geometry-type"||i.name==="id"||/^filter-/.test(i.name))||i instanceof co)return!1;let t=!0;return i.eachChild(a=>{t&&!la(a)&&(t=!1)}),t}function Ro(i){if(i instanceof Xt&&i.name==="feature-state")return!1;let t=!0;return i.eachChild(a=>{t&&!Ro(a)&&(t=!1)}),t}function ua(i,t){if(i instanceof Xt&&t.indexOf(i.name)>=0)return!1;let a=!0;return i.eachChild(u=>{a&&!ua(u,t)&&(a=!1)}),a}class Ga{constructor(t,a){this.type=a.type,this.name=t,this.boundExpression=a}static parse(t,a){if(t.length!==2||typeof t[1]!="string")return a.error("'var' expression requires exactly one string literal argument.");const u=t[1];return a.scope.has(u)?new Ga(u,a.scope.get(u)):a.error(`Unknown variable "${u}". Make sure "${u}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}}class Lo{constructor(t,a=[],u,p=new Dn,g=[]){this.registry=t,this.path=a,this.key=a.map(_=>`[${_}]`).join(""),this.scope=p,this.errors=g,this.expectedType=u}parse(t,a,u,p,g={}){return a?this.concat(a,u,p)._parse(t,g):this._parse(t,g)}_parse(t,a){function u(p,g,_){return _==="assert"?new gt(g,[p]):_==="coerce"?new vt(g,[p]):p}if(t!==null&&typeof t!="string"&&typeof t!="boolean"&&typeof t!="number"||(t=["literal",t]),Array.isArray(t)){if(t.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const p=t[0];if(typeof p!="string")return this.error(`Expression name must be a string, but found ${typeof p} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const g=this.registry[p];if(g){let _=g.parse(t,this);if(!_)return null;if(this.expectedType){const b=this.expectedType,w=_.type;if(b.kind!=="string"&&b.kind!=="number"&&b.kind!=="boolean"&&b.kind!=="object"&&b.kind!=="array"||w.kind!=="value")if(b.kind!=="color"&&b.kind!=="formatted"&&b.kind!=="resolvedImage"||w.kind!=="value"&&w.kind!=="string")if(b.kind!=="padding"||w.kind!=="value"&&w.kind!=="number"&&w.kind!=="array"){if(this.checkSubtype(b,w))return null}else _=u(_,b,a.typeAnnotation||"coerce");else _=u(_,b,a.typeAnnotation||"coerce");else _=u(_,b,a.typeAnnotation||"assert")}if(!(_ instanceof ot)&&_.type.kind!=="resolvedImage"&&Os(_)){const b=new Bt;try{_=new ot(_.type,_.evaluate(b))}catch(w){return this.error(w.message),null}}return _}return this.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(t===void 0?"'undefined' value invalid. Use null instead.":typeof t=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,a,u){const p=typeof t=="number"?this.path.concat(t):this.path,g=u?this.scope.concat(u):this.scope;return new Lo(this.registry,p,a||null,g,this.errors)}error(t,...a){const u=`${this.key}${a.map(p=>`[${p}]`).join("")}`;this.errors.push(new Mn(u,t))}checkSubtype(t,a){const u=Ur(t,a);return u&&this.error(u),u}}function Os(i){if(i instanceof Ga)return Os(i.boundExpression);if(i instanceof Xt&&i.name==="error"||i instanceof Vr||i instanceof co)return!1;const t=i instanceof vt||i instanceof gt;let a=!0;return i.eachChild(u=>{a=t?a&&Os(u):a&&u instanceof ot}),!!a&&la(i)&&ua(i,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Bo(i,t){const a=i.length-1;let u,p,g=0,_=a,b=0;for(;g<=_;)if(b=Math.floor((g+_)/2),u=i[b],p=i[b+1],u<=t){if(b===a||t<p)return b;g=b+1}else{if(!(u>t))throw new He("Input is not a number.");_=b-1}return 0}class ca{constructor(t,a,u){this.type=t,this.input=a,this.labels=[],this.outputs=[];for(const[p,g]of u)this.labels.push(p),this.outputs.push(g)}static parse(t,a){if(t.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return a.error("Expected an even number of arguments.");const u=a.parse(t[1],1,$e);if(!u)return null;const p=[];let g=null;a.expectedType&&a.expectedType.kind!=="value"&&(g=a.expectedType);for(let _=1;_<t.length;_+=2){const b=_===1?-1/0:t[_],w=t[_+1],k=_,A=_+1;if(typeof b!="number")return a.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',k);if(p.length&&p[p.length-1][0]>=b)return a.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',k);const P=a.parse(w,A,g);if(!P)return null;g=g||P.type,p.push([b,P])}return new ca(g,u,p)}evaluate(t){const a=this.labels,u=this.outputs;if(a.length===1)return u[0].evaluate(t);const p=this.input.evaluate(t);if(p<=a[0])return u[0].evaluate(t);const g=a.length;return p>=a[g-1]?u[g-1].evaluate(t):u[Bo(a,p)].evaluate(t)}eachChild(t){t(this.input);for(const a of this.outputs)t(a)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}}function ur(i,t,a){return i*(1-a)+t*a}var ha=Object.freeze({__proto__:null,number:ur,color:function(i,t,a){return new $(ur(i.r,t.r,a),ur(i.g,t.g,a),ur(i.b,t.b,a),ur(i.a,t.a,a))},array:function(i,t,a){return i.map((u,p)=>ur(u,t[p],a))},padding:function(i,t,a){const u=i.values,p=t.values;return new Q([ur(u[0],p[0],a),ur(u[1],p[1],a),ur(u[2],p[2],a),ur(u[3],p[3],a)])}});const da=.95047,Wa=1.08883,pa=4/29,Fo=6/29,Bl=3*Fo*Fo,Fl=Math.PI/180,Ns=180/Math.PI;function qa(i){return i>.008856451679035631?Math.pow(i,1/3):i/Bl+pa}function Ai(i){return i>Fo?i*i*i:Bl*(i-pa)}function ho(i){return 255*(i<=.0031308?12.92*i:1.055*Math.pow(i,1/2.4)-.055)}function $s(i){return(i/=255)<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4)}function $t(i){const t=$s(i.r),a=$s(i.g),u=$s(i.b),p=qa((.4124564*t+.3575761*a+.1804375*u)/da),g=qa((.2126729*t+.7151522*a+.072175*u)/1);return{l:116*g-16,a:500*(p-g),b:200*(g-qa((.0193339*t+.119192*a+.9503041*u)/Wa)),alpha:i.a}}function Ol(i){let t=(i.l+16)/116,a=isNaN(i.a)?t:t+i.a/500,u=isNaN(i.b)?t:t-i.b/200;return t=1*Ai(t),a=da*Ai(a),u=Wa*Ai(u),new $(ho(3.2404542*a-1.5371385*t-.4985314*u),ho(-.969266*a+1.8760108*t+.041556*u),ho(.0556434*a-.2040259*t+1.0572252*u),i.alpha)}function Nl(i,t,a){const u=t-i;return i+a*(u>180||u<-180?u-360*Math.round(u/360):u)}const fa={forward:$t,reverse:Ol,interpolate:function(i,t,a){return{l:ur(i.l,t.l,a),a:ur(i.a,t.a,a),b:ur(i.b,t.b,a),alpha:ur(i.alpha,t.alpha,a)}}},ma={forward:function(i){const{l:t,a,b:u}=$t(i),p=Math.atan2(u,a)*Ns;return{h:p<0?p+360:p,c:Math.sqrt(a*a+u*u),l:t,alpha:i.a}},reverse:function(i){const t=i.h*Fl,a=i.c;return Ol({l:i.l,a:Math.cos(t)*a,b:Math.sin(t)*a,alpha:i.alpha})},interpolate:function(i,t,a){return{h:Nl(i.h,t.h,a),c:ur(i.c,t.c,a),l:ur(i.l,t.l,a),alpha:ur(i.alpha,t.alpha,a)}}};var Us=Object.freeze({__proto__:null,lab:fa,hcl:ma});class Rn{constructor(t,a,u,p,g){this.type=t,this.operator=a,this.interpolation=u,this.input=p,this.labels=[],this.outputs=[];for(const[_,b]of g)this.labels.push(_),this.outputs.push(b)}static interpolationFactor(t,a,u,p){let g=0;if(t.name==="exponential")g=q(a,t.base,u,p);else if(t.name==="linear")g=q(a,1,u,p);else if(t.name==="cubic-bezier"){const _=t.controlPoints;g=new D(_[0],_[1],_[2],_[3]).solve(q(a,1,u,p))}return g}static parse(t,a){let[u,p,g,..._]=t;if(!Array.isArray(p)||p.length===0)return a.error("Expected an interpolation type expression.",1);if(p[0]==="linear")p={name:"linear"};else if(p[0]==="exponential"){const k=p[1];if(typeof k!="number")return a.error("Exponential interpolation requires a numeric base.",1,1);p={name:"exponential",base:k}}else{if(p[0]!=="cubic-bezier")return a.error(`Unknown interpolation type ${String(p[0])}`,1,0);{const k=p.slice(1);if(k.length!==4||k.some(A=>typeof A!="number"||A<0||A>1))return a.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);p={name:"cubic-bezier",controlPoints:k}}}if(t.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return a.error("Expected an even number of arguments.");if(g=a.parse(g,2,$e),!g)return null;const b=[];let w=null;u==="interpolate-hcl"||u==="interpolate-lab"?w=Xr:a.expectedType&&a.expectedType.kind!=="value"&&(w=a.expectedType);for(let k=0;k<_.length;k+=2){const A=_[k],P=_[k+1],L=k+3,F=k+4;if(typeof A!="number")return a.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',L);if(b.length&&b[b.length-1][0]>=A)return a.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',L);const O=a.parse(P,F,w);if(!O)return null;w=w||O.type,b.push([A,O])}return w.kind==="number"||w.kind==="color"||w.kind==="padding"||w.kind==="array"&&w.itemType.kind==="number"&&typeof w.N=="number"?new Rn(w,u,p,g,b):a.error(`Type ${Wt(w)} is not interpolatable.`)}evaluate(t){const a=this.labels,u=this.outputs;if(a.length===1)return u[0].evaluate(t);const p=this.input.evaluate(t);if(p<=a[0])return u[0].evaluate(t);const g=a.length;if(p>=a[g-1])return u[g-1].evaluate(t);const _=Bo(a,p),b=Rn.interpolationFactor(this.interpolation,p,a[_],a[_+1]),w=u[_].evaluate(t),k=u[_+1].evaluate(t);return this.operator==="interpolate"?ha[this.type.kind.toLowerCase()](w,k,b):this.operator==="interpolate-hcl"?ma.reverse(ma.interpolate(ma.forward(w),ma.forward(k),b)):fa.reverse(fa.interpolate(fa.forward(w),fa.forward(k),b))}eachChild(t){t(this.input);for(const a of this.outputs)t(a)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}}function q(i,t,a,u){const p=u-a,g=i-a;return p===0?0:t===1?g/p:(Math.pow(t,g)-1)/(Math.pow(t,p)-1)}class le{constructor(t,a){this.type=t,this.args=a}static parse(t,a){if(t.length<2)return a.error("Expectected at least one argument.");let u=null;const p=a.expectedType;p&&p.kind!=="value"&&(u=p);const g=[];for(const b of t.slice(1)){const w=a.parse(b,1+g.length,u,void 0,{typeAnnotation:"omit"});if(!w)return null;u=u||w.type,g.push(w)}if(!u)throw new Error("No output type");const _=p&&g.some(b=>Ur(p,b.type));return new le(_?_t:u,g)}evaluate(t){let a,u=null,p=0;for(const g of this.args)if(p++,u=g.evaluate(t),u&&u instanceof se&&!u.available&&(a||(a=u.name),u=null,p===this.args.length&&(u=a)),u!==null)break;return u}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}class xe{constructor(t,a){this.type=a.type,this.bindings=[].concat(t),this.result=a}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const a of this.bindings)t(a[1]);t(this.result)}static parse(t,a){if(t.length<4)return a.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const u=[];for(let g=1;g<t.length-1;g+=2){const _=t[g];if(typeof _!="string")return a.error(`Expected string, but found ${typeof _} instead.`,g);if(/[^a-zA-Z0-9_]/.test(_))return a.error("Variable names must contain only alphanumeric characters or '_'.",g);const b=a.parse(t[g+1],g+1);if(!b)return null;u.push([_,b])}const p=a.parse(t[t.length-1],t.length-1,a.expectedType,u);return p?new xe(u,p):null}outputDefined(){return this.result.outputDefined()}}class at{constructor(t,a,u){this.type=t,this.index=a,this.input=u}static parse(t,a){if(t.length!==3)return a.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const u=a.parse(t[1],1,$e),p=a.parse(t[2],2,hn(a.expectedType||_t));return u&&p?new at(p.type.itemType,u,p):null}evaluate(t){const a=this.index.evaluate(t),u=this.input.evaluate(t);if(a<0)throw new He(`Array index out of bounds: ${a} < 0.`);if(a>=u.length)throw new He(`Array index out of bounds: ${a} > ${u.length-1}.`);if(a!==Math.floor(a))throw new He(`Array index must be an integer, but found ${a} instead.`);return u[a]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}}class Ft{constructor(t,a){this.type=bt,this.needle=t,this.haystack=a}static parse(t,a){if(t.length!==3)return a.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const u=a.parse(t[1],1,_t),p=a.parse(t[2],2,_t);return u&&p?ao(u.type,[bt,Et,$e,gn,_t])?new Ft(u,p):a.error(`Expected first argument to be of type boolean, string, number or null, but found ${Wt(u.type)} instead`):null}evaluate(t){const a=this.needle.evaluate(t),u=this.haystack.evaluate(t);if(!u)return!1;if(!so(a,["boolean","string","number","null"]))throw new He(`Expected first argument to be of type boolean, string, number or null, but found ${Wt(we(a))} instead.`);if(!so(u,["string","array"]))throw new He(`Expected second argument to be of type array or string, but found ${Wt(we(u))} instead.`);return u.indexOf(a)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}}class qt{constructor(t,a,u){this.type=$e,this.needle=t,this.haystack=a,this.fromIndex=u}static parse(t,a){if(t.length<=2||t.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const u=a.parse(t[1],1,_t),p=a.parse(t[2],2,_t);if(!u||!p)return null;if(!ao(u.type,[bt,Et,$e,gn,_t]))return a.error(`Expected first argument to be of type boolean, string, number or null, but found ${Wt(u.type)} instead`);if(t.length===4){const g=a.parse(t[3],3,$e);return g?new qt(u,p,g):null}return new qt(u,p)}evaluate(t){const a=this.needle.evaluate(t),u=this.haystack.evaluate(t);if(!so(a,["boolean","string","number","null"]))throw new He(`Expected first argument to be of type boolean, string, number or null, but found ${Wt(we(a))} instead.`);if(!so(u,["string","array"]))throw new He(`Expected second argument to be of type array or string, but found ${Wt(we(u))} instead.`);if(this.fromIndex){const p=this.fromIndex.evaluate(t);return u.indexOf(a,p)}return u.indexOf(a)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}}class sr{constructor(t,a,u,p,g,_){this.inputType=t,this.type=a,this.input=u,this.cases=p,this.outputs=g,this.otherwise=_}static parse(t,a){if(t.length<5)return a.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return a.error("Expected an even number of arguments.");let u,p;a.expectedType&&a.expectedType.kind!=="value"&&(p=a.expectedType);const g={},_=[];for(let k=2;k<t.length-1;k+=2){let A=t[k];const P=t[k+1];Array.isArray(A)||(A=[A]);const L=a.concat(k);if(A.length===0)return L.error("Expected at least one branch label.");for(const O of A){if(typeof O!="number"&&typeof O!="string")return L.error("Branch labels must be numbers or strings.");if(typeof O=="number"&&Math.abs(O)>Number.MAX_SAFE_INTEGER)return L.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof O=="number"&&Math.floor(O)!==O)return L.error("Numeric branch labels must be integer values.");if(u){if(L.checkSubtype(u,we(O)))return null}else u=we(O);if(g[String(O)]!==void 0)return L.error("Branch labels must be unique.");g[String(O)]=_.length}const F=a.parse(P,k,p);if(!F)return null;p=p||F.type,_.push(F)}const b=a.parse(t[1],1,_t);if(!b)return null;const w=a.parse(t[t.length-1],t.length-1,p);return w?b.type.kind!=="value"&&a.concat(1).checkSubtype(u,b.type)?null:new sr(u,p,b,g,_,w):null}evaluate(t){const a=this.input.evaluate(t);return(we(a)===this.inputType&&this.outputs[this.cases[a]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every(t=>t.outputDefined())&&this.otherwise.outputDefined()}}class Mt{constructor(t,a,u){this.type=t,this.branches=a,this.otherwise=u}static parse(t,a){if(t.length<4)return a.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return a.error("Expected an odd number of arguments.");let u;a.expectedType&&a.expectedType.kind!=="value"&&(u=a.expectedType);const p=[];for(let _=1;_<t.length-1;_+=2){const b=a.parse(t[_],_,bt);if(!b)return null;const w=a.parse(t[_+1],_+1,u);if(!w)return null;p.push([b,w]),u=u||w.type}const g=a.parse(t[t.length-1],t.length-1,u);if(!g)return null;if(!u)throw new Error("Can't infer output type");return new Mt(u,p,g)}evaluate(t){for(const[a,u]of this.branches)if(a.evaluate(t))return u.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[a,u]of this.branches)t(a),t(u);t(this.otherwise)}outputDefined(){return this.branches.every(([t,a])=>a.outputDefined())&&this.otherwise.outputDefined()}}class rr{constructor(t,a,u,p){this.type=t,this.input=a,this.beginIndex=u,this.endIndex=p}static parse(t,a){if(t.length<=2||t.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const u=a.parse(t[1],1,_t),p=a.parse(t[2],2,$e);if(!u||!p)return null;if(!ao(u.type,[hn(_t),Et,_t]))return a.error(`Expected first argument to be of type array or string, but found ${Wt(u.type)} instead`);if(t.length===4){const g=a.parse(t[3],3,$e);return g?new rr(u.type,u,p,g):null}return new rr(u.type,u,p)}evaluate(t){const a=this.input.evaluate(t),u=this.beginIndex.evaluate(t);if(!so(a,["string","array"]))throw new He(`Expected first argument to be of type array or string, but found ${Wt(we(a))} instead.`);if(this.endIndex){const p=this.endIndex.evaluate(t);return a.slice(u,p)}return a.slice(u)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}}function Ln(i,t){return i==="=="||i==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function yn(i,t,a,u){return u.compare(t,a)===0}function mi(i,t,a){const u=i!=="=="&&i!=="!=";return class C2{constructor(g,_,b){this.type=bt,this.lhs=g,this.rhs=_,this.collator=b,this.hasUntypedArgument=g.type.kind==="value"||_.type.kind==="value"}static parse(g,_){if(g.length!==3&&g.length!==4)return _.error("Expected two or three arguments.");const b=g[0];let w=_.parse(g[1],1,_t);if(!w)return null;if(!Ln(b,w.type))return _.concat(1).error(`"${b}" comparisons are not supported for type '${Wt(w.type)}'.`);let k=_.parse(g[2],2,_t);if(!k)return null;if(!Ln(b,k.type))return _.concat(2).error(`"${b}" comparisons are not supported for type '${Wt(k.type)}'.`);if(w.type.kind!==k.type.kind&&w.type.kind!=="value"&&k.type.kind!=="value")return _.error(`Cannot compare types '${Wt(w.type)}' and '${Wt(k.type)}'.`);u&&(w.type.kind==="value"&&k.type.kind!=="value"?w=new gt(k.type,[w]):w.type.kind!=="value"&&k.type.kind==="value"&&(k=new gt(w.type,[k])));let A=null;if(g.length===4){if(w.type.kind!=="string"&&k.type.kind!=="string"&&w.type.kind!=="value"&&k.type.kind!=="value")return _.error("Cannot use collator to compare non-string types.");if(A=_.parse(g[3],3,Ii),!A)return null}return new C2(w,k,A)}evaluate(g){const _=this.lhs.evaluate(g),b=this.rhs.evaluate(g);if(u&&this.hasUntypedArgument){const w=we(_),k=we(b);if(w.kind!==k.kind||w.kind!=="string"&&w.kind!=="number")throw new He(`Expected arguments for "${i}" to be (string, string) or (number, number), but found (${w.kind}, ${k.kind}) instead.`)}if(this.collator&&!u&&this.hasUntypedArgument){const w=we(_),k=we(b);if(w.kind!=="string"||k.kind!=="string")return t(g,_,b)}return this.collator?a(g,_,b,this.collator.evaluate(g)):t(g,_,b)}eachChild(g){g(this.lhs),g(this.rhs),this.collator&&g(this.collator)}outputDefined(){return!0}}}const Vs=mi("==",function(i,t,a){return t===a},yn),js=mi("!=",function(i,t,a){return t!==a},function(i,t,a,u){return!yn(0,t,a,u)}),$l=mi("<",function(i,t,a){return t<a},function(i,t,a,u){return u.compare(t,a)<0}),Vf=mi(">",function(i,t,a){return t>a},function(i,t,a,u){return u.compare(t,a)>0}),jf=mi("<=",function(i,t,a){return t<=a},function(i,t,a,u){return u.compare(t,a)<=0}),Gf=mi(">=",function(i,t,a){return t>=a},function(i,t,a,u){return u.compare(t,a)>=0});class Yu{constructor(t,a,u,p,g){this.type=Et,this.number=t,this.locale=a,this.currency=u,this.minFractionDigits=p,this.maxFractionDigits=g}static parse(t,a){if(t.length!==3)return a.error("Expected two arguments.");const u=a.parse(t[1],1,$e);if(!u)return null;const p=t[2];if(typeof p!="object"||Array.isArray(p))return a.error("NumberFormat options argument must be an object.");let g=null;if(p.locale&&(g=a.parse(p.locale,1,Et),!g))return null;let _=null;if(p.currency&&(_=a.parse(p.currency,1,Et),!_))return null;let b=null;if(p["min-fraction-digits"]&&(b=a.parse(p["min-fraction-digits"],1,$e),!b))return null;let w=null;return p["max-fraction-digits"]&&(w=a.parse(p["max-fraction-digits"],1,$e),!w)?null:new Yu(u,g,_,b,w)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}}class Ul{constructor(t){this.type=pr,this.sections=t}static parse(t,a){if(t.length<2)return a.error("Expected at least one argument.");const u=t[1];if(!Array.isArray(u)&&typeof u=="object")return a.error("First argument must be an image or text section.");const p=[];let g=!1;for(let _=1;_<=t.length-1;++_){const b=t[_];if(g&&typeof b=="object"&&!Array.isArray(b)){g=!1;let w=null;if(b["font-scale"]&&(w=a.parse(b["font-scale"],1,$e),!w))return null;let k=null;if(b["text-font"]&&(k=a.parse(b["text-font"],1,hn(Et)),!k))return null;let A=null;if(b["text-color"]&&(A=a.parse(b["text-color"],1,Xr),!A))return null;const P=p[p.length-1];P.scale=w,P.font=k,P.textColor=A}else{const w=a.parse(t[_],1,_t);if(!w)return null;const k=w.type.kind;if(k!=="string"&&k!=="value"&&k!=="null"&&k!=="resolvedImage")return a.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");g=!0,p.push({content:w,scale:null,font:null,textColor:null})}}return new Ul(p)}evaluate(t){return new te(this.sections.map(a=>{const u=a.content.evaluate(t);return we(u)===Mr?new ae("",u,null,null,null):new ae(it(u),null,a.scale?a.scale.evaluate(t):null,a.font?a.font.evaluate(t).join(","):null,a.textColor?a.textColor.evaluate(t):null)}))}eachChild(t){for(const a of this.sections)t(a.content),a.scale&&t(a.scale),a.font&&t(a.font),a.textColor&&t(a.textColor)}outputDefined(){return!1}}class Ju{constructor(t){this.type=Mr,this.input=t}static parse(t,a){if(t.length!==2)return a.error("Expected two arguments.");const u=a.parse(t[1],1,Et);return u?new Ju(u):a.error("No image name provided.")}evaluate(t){const a=this.input.evaluate(t),u=se.fromString(a);return u&&t.availableImages&&(u.available=t.availableImages.indexOf(a)>-1),u}eachChild(t){t(this.input)}outputDefined(){return!1}}class Qu{constructor(t){this.type=$e,this.input=t}static parse(t,a){if(t.length!==2)return a.error(`Expected 1 argument, but found ${t.length-1} instead.`);const u=a.parse(t[1],1);return u?u.type.kind!=="array"&&u.type.kind!=="string"&&u.type.kind!=="value"?a.error(`Expected argument of type string or array, but found ${Wt(u.type)} instead.`):new Qu(u):null}evaluate(t){const a=this.input.evaluate(t);if(typeof a=="string"||Array.isArray(a))return a.length;throw new He(`Expected value to be of type string or array, but found ${Wt(we(a))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}}const Za={"==":Vs,"!=":js,">":Vf,"<":$l,">=":Gf,"<=":jf,array:gt,at,boolean:gt,case:Mt,coalesce:le,collator:Vr,format:Ul,image:Ju,in:Ft,"index-of":qt,interpolate:Rn,"interpolate-hcl":Rn,"interpolate-lab":Rn,length:Qu,let:xe,literal:ot,match:sr,number:gt,"number-format":Yu,object:gt,slice:rr,step:ca,string:gt,"to-boolean":vt,"to-color":vt,"to-number":vt,"to-string":vt,var:Ga,within:co};function Zh(i,[t,a,u,p]){t=t.evaluate(i),a=a.evaluate(i),u=u.evaluate(i);const g=p?p.evaluate(i):1,_=Te(t,a,u,g);if(_)throw new He(_);return new $(t/255*g,a/255*g,u/255*g,g)}function Hh(i,t){return i in t}function Vl(i,t){const a=t[i];return a===void 0?null:a}function ga(i){return{type:i}}function Xh(i){return{result:"success",value:i}}function Ha(i){return{result:"error",value:i}}function fr(i){return i["property-type"]==="data-driven"||i["property-type"]==="cross-faded-data-driven"}function Kh(i){return!!i.expression&&i.expression.parameters.indexOf("zoom")>-1}function Dt(i){return!!i.expression&&i.expression.interpolated}function jt(i){return i instanceof Number?"number":i instanceof String?"string":i instanceof Boolean?"boolean":Array.isArray(i)?"array":i===null?"null":typeof i}function cr(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)}function yr(i){return i}function Gs(i,t){const a=t.type==="color",u=i.stops&&typeof i.stops[0][0]=="object",p=u||!(u||i.property!==void 0),g=i.type||(Dt(t)?"exponential":"interval");if(a||t.type==="padding"){const k=a?$.parse:Q.parse;(i=Gn({},i)).stops&&(i.stops=i.stops.map(A=>[A[0],k(A[1])])),i.default=k(i.default?i.default:t.default)}if(i.colorSpace&&i.colorSpace!=="rgb"&&!Us[i.colorSpace])throw new Error(`Unknown color space: ${i.colorSpace}`);let _,b,w;if(g==="exponential")_=Yh;else if(g==="interval")_=qf;else if(g==="categorical"){_=Wf,b=Object.create(null);for(const k of i.stops)b[k[0]]=k[1];w=typeof i.stops[0][0]}else{if(g!=="identity")throw new Error(`Unknown function type "${g}"`);_=Zf}if(u){const k={},A=[];for(let F=0;F<i.stops.length;F++){const O=i.stops[F],Y=O[0].zoom;k[Y]===void 0&&(k[Y]={zoom:Y,type:i.type,property:i.property,default:i.default,stops:[]},A.push(Y)),k[Y].stops.push([O[0].value,O[1]])}const P=[];for(const F of A)P.push([k[F].zoom,Gs(k[F],t)]);const L={name:"linear"};return{kind:"composite",interpolationType:L,interpolationFactor:Rn.interpolationFactor.bind(void 0,L),zoomStops:P.map(F=>F[0]),evaluate:({zoom:F},O)=>Yh({stops:P,base:i.base},t,F).evaluate(F,O)}}if(p){const k=g==="exponential"?{name:"exponential",base:i.base!==void 0?i.base:1}:null;return{kind:"camera",interpolationType:k,interpolationFactor:Rn.interpolationFactor.bind(void 0,k),zoomStops:i.stops.map(A=>A[0]),evaluate:({zoom:A})=>_(i,t,A,b,w)}}return{kind:"source",evaluate(k,A){const P=A&&A.properties?A.properties[i.property]:void 0;return P===void 0?Xa(i.default,t.default):_(i,t,P,b,w)}}}function Xa(i,t,a){return i!==void 0?i:t!==void 0?t:a!==void 0?a:void 0}function Wf(i,t,a,u,p){return Xa(typeof a===p?u[a]:void 0,i.default,t.default)}function qf(i,t,a){if(jt(a)!=="number")return Xa(i.default,t.default);const u=i.stops.length;if(u===1||a<=i.stops[0][0])return i.stops[0][1];if(a>=i.stops[u-1][0])return i.stops[u-1][1];const p=Bo(i.stops.map(g=>g[0]),a);return i.stops[p][1]}function Yh(i,t,a){const u=i.base!==void 0?i.base:1;if(jt(a)!=="number")return Xa(i.default,t.default);const p=i.stops.length;if(p===1||a<=i.stops[0][0])return i.stops[0][1];if(a>=i.stops[p-1][0])return i.stops[p-1][1];const g=Bo(i.stops.map(A=>A[0]),a),_=function(A,P,L,F){const O=F-L,Y=A-L;return O===0?0:P===1?Y/O:(Math.pow(P,Y)-1)/(Math.pow(P,O)-1)}(a,u,i.stops[g][0],i.stops[g+1][0]),b=i.stops[g][1],w=i.stops[g+1][1];let k=ha[t.type]||yr;if(i.colorSpace&&i.colorSpace!=="rgb"){const A=Us[i.colorSpace];k=(P,L)=>A.reverse(A.interpolate(A.forward(P),A.forward(L),_))}return typeof b.evaluate=="function"?{evaluate(...A){const P=b.evaluate.apply(void 0,A),L=w.evaluate.apply(void 0,A);if(P!==void 0&&L!==void 0)return k(P,L,_)}}:k(b,w,_)}function Zf(i,t,a){switch(t.type){case"color":a=$.parse(a);break;case"formatted":a=te.fromString(a.toString());break;case"resolvedImage":a=se.fromString(a.toString());break;case"padding":a=Q.parse(a);break;default:jt(a)===t.type||t.type==="enum"&&t.values[a]||(a=void 0)}return Xa(a,i.default,t.default)}Xt.register(Za,{error:[{kind:"error"},[Et],(i,[t])=>{throw new He(t.evaluate(i))}],typeof:[Et,[_t],(i,[t])=>Wt(we(t.evaluate(i)))],"to-rgba":[hn($e,4),[Xr],(i,[t])=>t.evaluate(i).toArray()],rgb:[Xr,[$e,$e,$e],Zh],rgba:[Xr,[$e,$e,$e,$e],Zh],has:{type:bt,overloads:[[[Et],(i,[t])=>Hh(t.evaluate(i),i.properties())],[[Et,Ci],(i,[t,a])=>Hh(t.evaluate(i),a.evaluate(i))]]},get:{type:_t,overloads:[[[Et],(i,[t])=>Vl(t.evaluate(i),i.properties())],[[Et,Ci],(i,[t,a])=>Vl(t.evaluate(i),a.evaluate(i))]]},"feature-state":[_t,[Et],(i,[t])=>Vl(t.evaluate(i),i.featureState||{})],properties:[Ci,[],i=>i.properties()],"geometry-type":[Et,[],i=>i.geometryType()],id:[_t,[],i=>i.id()],zoom:[$e,[],i=>i.globals.zoom],"heatmap-density":[$e,[],i=>i.globals.heatmapDensity||0],"line-progress":[$e,[],i=>i.globals.lineProgress||0],accumulated:[_t,[],i=>i.globals.accumulated===void 0?null:i.globals.accumulated],"+":[$e,ga($e),(i,t)=>{let a=0;for(const u of t)a+=u.evaluate(i);return a}],"*":[$e,ga($e),(i,t)=>{let a=1;for(const u of t)a*=u.evaluate(i);return a}],"-":{type:$e,overloads:[[[$e,$e],(i,[t,a])=>t.evaluate(i)-a.evaluate(i)],[[$e],(i,[t])=>-t.evaluate(i)]]},"/":[$e,[$e,$e],(i,[t,a])=>t.evaluate(i)/a.evaluate(i)],"%":[$e,[$e,$e],(i,[t,a])=>t.evaluate(i)%a.evaluate(i)],ln2:[$e,[],()=>Math.LN2],pi:[$e,[],()=>Math.PI],e:[$e,[],()=>Math.E],"^":[$e,[$e,$e],(i,[t,a])=>Math.pow(t.evaluate(i),a.evaluate(i))],sqrt:[$e,[$e],(i,[t])=>Math.sqrt(t.evaluate(i))],log10:[$e,[$e],(i,[t])=>Math.log(t.evaluate(i))/Math.LN10],ln:[$e,[$e],(i,[t])=>Math.log(t.evaluate(i))],log2:[$e,[$e],(i,[t])=>Math.log(t.evaluate(i))/Math.LN2],sin:[$e,[$e],(i,[t])=>Math.sin(t.evaluate(i))],cos:[$e,[$e],(i,[t])=>Math.cos(t.evaluate(i))],tan:[$e,[$e],(i,[t])=>Math.tan(t.evaluate(i))],asin:[$e,[$e],(i,[t])=>Math.asin(t.evaluate(i))],acos:[$e,[$e],(i,[t])=>Math.acos(t.evaluate(i))],atan:[$e,[$e],(i,[t])=>Math.atan(t.evaluate(i))],min:[$e,ga($e),(i,t)=>Math.min(...t.map(a=>a.evaluate(i)))],max:[$e,ga($e),(i,t)=>Math.max(...t.map(a=>a.evaluate(i)))],abs:[$e,[$e],(i,[t])=>Math.abs(t.evaluate(i))],round:[$e,[$e],(i,[t])=>{const a=t.evaluate(i);return a<0?-Math.round(-a):Math.round(a)}],floor:[$e,[$e],(i,[t])=>Math.floor(t.evaluate(i))],ceil:[$e,[$e],(i,[t])=>Math.ceil(t.evaluate(i))],"filter-==":[bt,[Et,_t],(i,[t,a])=>i.properties()[t.value]===a.value],"filter-id-==":[bt,[_t],(i,[t])=>i.id()===t.value],"filter-type-==":[bt,[Et],(i,[t])=>i.geometryType()===t.value],"filter-<":[bt,[Et,_t],(i,[t,a])=>{const u=i.properties()[t.value],p=a.value;return typeof u==typeof p&&u<p}],"filter-id-<":[bt,[_t],(i,[t])=>{const a=i.id(),u=t.value;return typeof a==typeof u&&a<u}],"filter->":[bt,[Et,_t],(i,[t,a])=>{const u=i.properties()[t.value],p=a.value;return typeof u==typeof p&&u>p}],"filter-id->":[bt,[_t],(i,[t])=>{const a=i.id(),u=t.value;return typeof a==typeof u&&a>u}],"filter-<=":[bt,[Et,_t],(i,[t,a])=>{const u=i.properties()[t.value],p=a.value;return typeof u==typeof p&&u<=p}],"filter-id-<=":[bt,[_t],(i,[t])=>{const a=i.id(),u=t.value;return typeof a==typeof u&&a<=u}],"filter->=":[bt,[Et,_t],(i,[t,a])=>{const u=i.properties()[t.value],p=a.value;return typeof u==typeof p&&u>=p}],"filter-id->=":[bt,[_t],(i,[t])=>{const a=i.id(),u=t.value;return typeof a==typeof u&&a>=u}],"filter-has":[bt,[_t],(i,[t])=>t.value in i.properties()],"filter-has-id":[bt,[],i=>i.id()!==null&&i.id()!==void 0],"filter-type-in":[bt,[hn(Et)],(i,[t])=>t.value.indexOf(i.geometryType())>=0],"filter-id-in":[bt,[hn(_t)],(i,[t])=>t.value.indexOf(i.id())>=0],"filter-in-small":[bt,[Et,hn(_t)],(i,[t,a])=>a.value.indexOf(i.properties()[t.value])>=0],"filter-in-large":[bt,[Et,hn(_t)],(i,[t,a])=>function(u,p,g,_){for(;g<=_;){const b=g+_>>1;if(p[b]===u)return!0;p[b]>u?_=b-1:g=b+1}return!1}(i.properties()[t.value],a.value,0,a.value.length-1)],all:{type:bt,overloads:[[[bt,bt],(i,[t,a])=>t.evaluate(i)&&a.evaluate(i)],[ga(bt),(i,t)=>{for(const a of t)if(!a.evaluate(i))return!1;return!0}]]},any:{type:bt,overloads:[[[bt,bt],(i,[t,a])=>t.evaluate(i)||a.evaluate(i)],[ga(bt),(i,t)=>{for(const a of t)if(a.evaluate(i))return!0;return!1}]]},"!":[bt,[bt],(i,[t])=>!t.evaluate(i)],"is-supported-script":[bt,[Et],(i,[t])=>{const a=i.globals&&i.globals.isSupportedScript;return!a||a(t.evaluate(i))}],upcase:[Et,[Et],(i,[t])=>t.evaluate(i).toUpperCase()],downcase:[Et,[Et],(i,[t])=>t.evaluate(i).toLowerCase()],concat:[Et,ga(_t),(i,t)=>t.map(a=>it(a.evaluate(i))).join("")],"resolved-locale":[Et,[Ii],(i,[t])=>t.evaluate(i).resolvedLocale()]});class jl{constructor(t,a){this.expression=t,this._warningHistory={},this._evaluator=new Bt,this._defaultValue=a?function(u){return u.type==="color"&&cr(u.default)?new $(0,0,0,0):u.type==="color"?$.parse(u.default)||null:u.type==="padding"?Q.parse(u.default)||null:u.default===void 0?null:u.default}(a):null,this._enumValues=a&&a.type==="enum"?a.values:null}evaluateWithoutErrorHandling(t,a,u,p,g,_){return this._evaluator.globals=t,this._evaluator.feature=a,this._evaluator.featureState=u,this._evaluator.canonical=p,this._evaluator.availableImages=g||null,this._evaluator.formattedSection=_,this.expression.evaluate(this._evaluator)}evaluate(t,a,u,p,g,_){this._evaluator.globals=t,this._evaluator.feature=a||null,this._evaluator.featureState=u||null,this._evaluator.canonical=p,this._evaluator.availableImages=g||null,this._evaluator.formattedSection=_||null;try{const b=this.expression.evaluate(this._evaluator);if(b==null||typeof b=="number"&&b!=b)return this._defaultValue;if(this._enumValues&&!(b in this._enumValues))throw new He(`Expected value to be one of ${Object.keys(this._enumValues).map(w=>JSON.stringify(w)).join(", ")}, but found ${JSON.stringify(b)} instead.`);return b}catch(b){return this._warningHistory[b.message]||(this._warningHistory[b.message]=!0,typeof console!="undefined"&&console.warn(b.message)),this._defaultValue}}}function Ws(i){return Array.isArray(i)&&i.length>0&&typeof i[0]=="string"&&i[0]in Za}function qs(i,t){const a=new Lo(Za,[],t?function(p){const g={color:Xr,string:Et,number:$e,enum:Et,boolean:bt,formatted:pr,padding:zo,resolvedImage:Mr};return p.type==="array"?hn(g[p.value]||_t,p.length):g[p.type]}(t):void 0),u=a.parse(i,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return u?Xh(new jl(u,t)):Ha(a.errors)}class Zs{constructor(t,a){this.kind=t,this._styleExpression=a,this.isStateDependent=t!=="constant"&&!Ro(a.expression)}evaluateWithoutErrorHandling(t,a,u,p,g,_){return this._styleExpression.evaluateWithoutErrorHandling(t,a,u,p,g,_)}evaluate(t,a,u,p,g,_){return this._styleExpression.evaluate(t,a,u,p,g,_)}}class ec{constructor(t,a,u,p){this.kind=t,this.zoomStops=u,this._styleExpression=a,this.isStateDependent=t!=="camera"&&!Ro(a.expression),this.interpolationType=p}evaluateWithoutErrorHandling(t,a,u,p,g,_){return this._styleExpression.evaluateWithoutErrorHandling(t,a,u,p,g,_)}evaluate(t,a,u,p,g,_){return this._styleExpression.evaluate(t,a,u,p,g,_)}interpolationFactor(t,a,u){return this.interpolationType?Rn.interpolationFactor(this.interpolationType,t,a,u):0}}function Jh(i,t){const a=qs(i,t);if(a.result==="error")return a;const u=a.value.expression,p=la(u);if(!p&&!fr(t))return Ha([new Mn("","data expressions not supported")]);const g=ua(u,["zoom"]);if(!g&&!Kh(t))return Ha([new Mn("","zoom expressions not supported")]);const _=Wl(u);return _||g?_ instanceof Mn?Ha([_]):_ instanceof Rn&&!Dt(t)?Ha([new Mn("",'"interpolate" expressions cannot be used with this property')]):Xh(_?new ec(p?"camera":"composite",a.value,_.labels,_ instanceof Rn?_.interpolation:void 0):new Zs(p?"constant":"source",a.value)):Ha([new Mn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Gl{constructor(t,a){this._parameters=t,this._specification=a,Gn(this,Gs(this._parameters,this._specification))}static deserialize(t){return new Gl(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function Wl(i){let t=null;if(i instanceof xe)t=Wl(i.result);else if(i instanceof le){for(const a of i.args)if(t=Wl(a),t)break}else(i instanceof ca||i instanceof Rn)&&i.input instanceof Xt&&i.input.name==="zoom"&&(t=i);return t instanceof Mn||i.eachChild(a=>{const u=Wl(a);u instanceof Mn?t=u:!t&&u?t=new Mn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&u&&t!==u&&(t=new Mn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t}function zi(i){const t=i.key,a=i.value,u=i.valueSpec||{},p=i.objectElementValidators||{},g=i.style,_=i.styleSpec;let b=[];const w=jt(a);if(w!=="object")return[new Ve(t,a,`object expected, ${w} found`)];for(const k in a){const A=k.split(".")[0],P=u[A]||u["*"];let L;if(p[A])L=p[A];else if(u[A])L=ni;else if(p["*"])L=p["*"];else{if(!u["*"]){b.push(new Ve(t,a[k],`unknown property "${k}"`));continue}L=ni}b=b.concat(L({key:(t&&`${t}.`)+k,value:a[k],valueSpec:P,style:g,styleSpec:_,object:a,objectKey:k},a))}for(const k in u)p[k]||u[k].required&&u[k].default===void 0&&a[k]===void 0&&b.push(new Ve(t,a,`missing required property "${k}"`));return b}function Qh(i){const t=i.value,a=i.valueSpec,u=i.style,p=i.styleSpec,g=i.key,_=i.arrayElementValidator||ni;if(jt(t)!=="array")return[new Ve(g,t,`array expected, ${jt(t)} found`)];if(a.length&&t.length!==a.length)return[new Ve(g,t,`array length ${a.length} expected, length ${t.length} found`)];if(a["min-length"]&&t.length<a["min-length"])return[new Ve(g,t,`array length at least ${a["min-length"]} expected, length ${t.length} found`)];let b={type:a.value,values:a.values};p.$version<7&&(b.function=a.function),jt(a.value)==="object"&&(b=a.value);let w=[];for(let k=0;k<t.length;k++)w=w.concat(_({array:t,arrayIndex:k,value:t[k],valueSpec:b,style:u,styleSpec:p,key:`${g}[${k}]`}));return w}function tc(i){const t=i.key,a=i.value,u=i.valueSpec;let p=jt(a);return p==="number"&&a!=a&&(p="NaN"),p!=="number"?[new Ve(t,a,`number expected, ${p} found`)]:"minimum"in u&&a<u.minimum?[new Ve(t,a,`${a} is less than the minimum value ${u.minimum}`)]:"maximum"in u&&a>u.maximum?[new Ve(t,a,`${a} is greater than the maximum value ${u.maximum}`)]:[]}function ed(i){const t=i.valueSpec,a=Pt(i.value.type);let u,p,g,_={};const b=a!=="categorical"&&i.value.property===void 0,w=!b,k=jt(i.value.stops)==="array"&&jt(i.value.stops[0])==="array"&&jt(i.value.stops[0][0])==="object",A=zi({key:i.key,value:i.value,valueSpec:i.styleSpec.function,style:i.style,styleSpec:i.styleSpec,objectElementValidators:{stops:function(F){if(a==="identity")return[new Ve(F.key,F.value,'identity function may not have a "stops" property')];let O=[];const Y=F.value;return O=O.concat(Qh({key:F.key,value:Y,valueSpec:F.valueSpec,style:F.style,styleSpec:F.styleSpec,arrayElementValidator:P})),jt(Y)==="array"&&Y.length===0&&O.push(new Ve(F.key,Y,"array must have at least one stop")),O},default:function(F){return ni({key:F.key,value:F.value,valueSpec:t,style:F.style,styleSpec:F.styleSpec})}}});return a==="identity"&&b&&A.push(new Ve(i.key,i.value,'missing required property "property"')),a==="identity"||i.value.stops||A.push(new Ve(i.key,i.value,'missing required property "stops"')),a==="exponential"&&i.valueSpec.expression&&!Dt(i.valueSpec)&&A.push(new Ve(i.key,i.value,"exponential functions not supported")),i.styleSpec.$version>=8&&(w&&!fr(i.valueSpec)?A.push(new Ve(i.key,i.value,"property functions not supported")):b&&!Kh(i.valueSpec)&&A.push(new Ve(i.key,i.value,"zoom functions not supported"))),a!=="categorical"&&!k||i.value.property!==void 0||A.push(new Ve(i.key,i.value,'"property" property is required')),A;function P(F){let O=[];const Y=F.value,K=F.key;if(jt(Y)!=="array")return[new Ve(K,Y,`array expected, ${jt(Y)} found`)];if(Y.length!==2)return[new Ve(K,Y,`array length 2 expected, length ${Y.length} found`)];if(k){if(jt(Y[0])!=="object")return[new Ve(K,Y,`object expected, ${jt(Y[0])} found`)];if(Y[0].zoom===void 0)return[new Ve(K,Y,"object stop key must have zoom")];if(Y[0].value===void 0)return[new Ve(K,Y,"object stop key must have value")];if(g&&g>Pt(Y[0].zoom))return[new Ve(K,Y[0].zoom,"stop zoom values must appear in ascending order")];Pt(Y[0].zoom)!==g&&(g=Pt(Y[0].zoom),p=void 0,_={}),O=O.concat(zi({key:`${K}[0]`,value:Y[0],valueSpec:{zoom:{}},style:F.style,styleSpec:F.styleSpec,objectElementValidators:{zoom:tc,value:L}}))}else O=O.concat(L({key:`${K}[0]`,value:Y[0],valueSpec:{},style:F.style,styleSpec:F.styleSpec},Y));return Ws(Pn(Y[1]))?O.concat([new Ve(`${K}[1]`,Y[1],"expressions are not allowed in function stops.")]):O.concat(ni({key:`${K}[1]`,value:Y[1],valueSpec:t,style:F.style,styleSpec:F.styleSpec}))}function L(F,O){const Y=jt(F.value),K=Pt(F.value),de=F.value!==null?F.value:O;if(u){if(Y!==u)return[new Ve(F.key,de,`${Y} stop domain type must match previous stop domain type ${u}`)]}else u=Y;if(Y!=="number"&&Y!=="string"&&Y!=="boolean")return[new Ve(F.key,de,"stop domain value must be a number, string, or boolean")];if(Y!=="number"&&a!=="categorical"){let ve=`number expected, ${Y} found`;return fr(t)&&a===void 0&&(ve+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ve(F.key,de,ve)]}return a!=="categorical"||Y!=="number"||isFinite(K)&&Math.floor(K)===K?a!=="categorical"&&Y==="number"&&p!==void 0&&K<p?[new Ve(F.key,de,"stop domain values must appear in ascending order")]:(p=K,a==="categorical"&&K in _?[new Ve(F.key,de,"stop domain values must be unique")]:(_[K]=!0,[])):[new Ve(F.key,de,`integer expected, found ${K}`)]}}function ya(i){const t=(i.expressionContext==="property"?Jh:qs)(Pn(i.value),i.valueSpec);if(t.result==="error")return t.value.map(u=>new Ve(`${i.key}${u.key}`,i.value,u.message));const a=t.value.expression||t.value._styleExpression.expression;if(i.expressionContext==="property"&&i.propertyKey==="text-font"&&!a.outputDefined())return[new Ve(i.key,i.value,`Invalid data expression for "${i.propertyKey}". Output values must be contained as literals within the expression.`)];if(i.expressionContext==="property"&&i.propertyType==="layout"&&!Ro(a))return[new Ve(i.key,i.value,'"feature-state" data expressions are not supported with layout properties.')];if(i.expressionContext==="filter"&&!Ro(a))return[new Ve(i.key,i.value,'"feature-state" data expressions are not supported with filters.')];if(i.expressionContext&&i.expressionContext.indexOf("cluster")===0){if(!ua(a,["zoom","feature-state"]))return[new Ve(i.key,i.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(i.expressionContext==="cluster-initial"&&!la(a))return[new Ve(i.key,i.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Hs(i){const t=i.key,a=i.value,u=i.valueSpec,p=[];return Array.isArray(u.values)?u.values.indexOf(Pt(a))===-1&&p.push(new Ve(t,a,`expected one of [${u.values.join(", ")}], ${JSON.stringify(a)} found`)):Object.keys(u.values).indexOf(Pt(a))===-1&&p.push(new Ve(t,a,`expected one of [${Object.keys(u.values).join(", ")}], ${JSON.stringify(a)} found`)),p}function Ka(i){if(i===!0||i===!1)return!0;if(!Array.isArray(i)||i.length===0)return!1;switch(i[0]){case"has":return i.length>=2&&i[1]!=="$id"&&i[1]!=="$type";case"in":return i.length>=3&&(typeof i[1]!="string"||Array.isArray(i[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return i.length!==3||Array.isArray(i[1])||Array.isArray(i[2]);case"any":case"all":for(const t of i.slice(1))if(!Ka(t)&&typeof t!="boolean")return!1;return!0;default:return!0}}const Hf={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function ql(i){if(i==null)return{filter:()=>!0,needGeometry:!1};Ka(i)||(i=Xs(i));const t=qs(i,Hf);if(t.result==="error")throw new Error(t.value.map(a=>`${a.key}: ${a.message}`).join(", "));return{filter:(a,u,p)=>t.value.evaluate(a,u,{},p),needGeometry:rd(i)}}function td(i,t){return i<t?-1:i>t?1:0}function rd(i){if(!Array.isArray(i))return!1;if(i[0]==="within")return!0;for(let t=1;t<i.length;t++)if(rd(i[t]))return!0;return!1}function Xs(i){if(!i)return!0;const t=i[0];return i.length<=1?t!=="any":t==="=="?rc(i[1],i[2],"=="):t==="!="?Ya(rc(i[1],i[2],"==")):t==="<"||t===">"||t==="<="||t===">="?rc(i[1],i[2],t):t==="any"?(a=i.slice(1),["any"].concat(a.map(Xs))):t==="all"?["all"].concat(i.slice(1).map(Xs)):t==="none"?["all"].concat(i.slice(1).map(Xs).map(Ya)):t==="in"?Zl(i[1],i.slice(2)):t==="!in"?Ya(Zl(i[1],i.slice(2))):t==="has"?Ks(i[1]):t==="!has"?Ya(Ks(i[1])):t!=="within"||i;var a}function rc(i,t,a){switch(i){case"$type":return[`filter-type-${a}`,t];case"$id":return[`filter-id-${a}`,t];default:return[`filter-${a}`,i,t]}}function Zl(i,t){if(t.length===0)return!1;switch(i){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(a=>typeof a!=typeof t[0])?["filter-in-large",i,["literal",t.sort(td)]]:["filter-in-small",i,["literal",t]]}}function Ks(i){switch(i){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",i]}}function Ya(i){return["!",i]}function Ys(i){return Ka(Pn(i.value))?ya(Gn({},i,{expressionContext:"filter",valueSpec:{value:"boolean"}})):nd(i)}function nd(i){const t=i.value,a=i.key;if(jt(t)!=="array")return[new Ve(a,t,`array expected, ${jt(t)} found`)];const u=i.styleSpec;let p,g=[];if(t.length<1)return[new Ve(a,t,"filter array must have at least 1 element")];switch(g=g.concat(Hs({key:`${a}[0]`,value:t[0],valueSpec:u.filter_operator,style:i.style,styleSpec:i.styleSpec})),Pt(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&Pt(t[1])==="$type"&&g.push(new Ve(a,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":t.length!==3&&g.push(new Ve(a,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(p=jt(t[1]),p!=="string"&&g.push(new Ve(`${a}[1]`,t[1],`string expected, ${p} found`)));for(let _=2;_<t.length;_++)p=jt(t[_]),Pt(t[1])==="$type"?g=g.concat(Hs({key:`${a}[${_}]`,value:t[_],valueSpec:u.geometry_type,style:i.style,styleSpec:i.styleSpec})):p!=="string"&&p!=="number"&&p!=="boolean"&&g.push(new Ve(`${a}[${_}]`,t[_],`string, number, or boolean expected, ${p} found`));break;case"any":case"all":case"none":for(let _=1;_<t.length;_++)g=g.concat(nd({key:`${a}[${_}]`,value:t[_],style:i.style,styleSpec:i.styleSpec}));break;case"has":case"!has":p=jt(t[1]),t.length!==2?g.push(new Ve(a,t,`filter array for "${t[0]}" operator must have 2 elements`)):p!=="string"&&g.push(new Ve(`${a}[1]`,t[1],`string expected, ${p} found`));break;case"within":p=jt(t[1]),t.length!==2?g.push(new Ve(a,t,`filter array for "${t[0]}" operator must have 2 elements`)):p!=="object"&&g.push(new Ve(`${a}[1]`,t[1],`object expected, ${p} found`))}return g}function Js(i,t){const a=i.key,u=i.style,p=i.styleSpec,g=i.value,_=i.objectKey,b=p[`${t}_${i.layerType}`];if(!b)return[];const w=_.match(/^(.*)-transition$/);if(t==="paint"&&w&&b[w[1]]&&b[w[1]].transition)return ni({key:a,value:g,valueSpec:p.transition,style:u,styleSpec:p});const k=i.valueSpec||b[_];if(!k)return[new Ve(a,g,`unknown property "${_}"`)];let A;if(jt(g)==="string"&&fr(k)&&!k.tokens&&(A=/^{([^}]+)}$/.exec(g)))return[new Ve(a,g,`"${_}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(A[1])} }\`.`)];const P=[];return i.layerType==="symbol"&&(_==="text-field"&&u&&!u.glyphs&&P.push(new Ve(a,g,'use of "text-field" requires a style "glyphs" property')),_==="text-font"&&cr(Pn(g))&&Pt(g.type)==="identity"&&P.push(new Ve(a,g,'"text-font" does not support identity functions'))),P.concat(ni({key:i.key,value:g,valueSpec:k,style:u,styleSpec:p,expressionContext:"property",propertyType:t,propertyKey:_}))}function id(i){return Js(i,"paint")}function od(i){return Js(i,"layout")}function ad(i){let t=[];const a=i.value,u=i.key,p=i.style,g=i.styleSpec;a.type||a.ref||t.push(new Ve(u,a,'either "type" or "ref" is required'));let _=Pt(a.type);const b=Pt(a.ref);if(a.id){const w=Pt(a.id);for(let k=0;k<i.arrayIndex;k++){const A=p.layers[k];Pt(A.id)===w&&t.push(new Ve(u,a.id,`duplicate layer id "${a.id}", previously used at line ${A.id.__line__}`))}}if("ref"in a){let w;["type","source","source-layer","filter","layout"].forEach(k=>{k in a&&t.push(new Ve(u,a[k],`"${k}" is prohibited for ref layers`))}),p.layers.forEach(k=>{Pt(k.id)===b&&(w=k)}),w?w.ref?t.push(new Ve(u,a.ref,"ref cannot reference another ref layer")):_=Pt(w.type):t.push(new Ve(u,a.ref,`ref layer "${b}" not found`))}else if(_!=="background")if(a.source){const w=p.sources&&p.sources[a.source],k=w&&Pt(w.type);w?k==="vector"&&_==="raster"?t.push(new Ve(u,a.source,`layer "${a.id}" requires a raster source`)):k==="raster"&&_!=="raster"?t.push(new Ve(u,a.source,`layer "${a.id}" requires a vector source`)):k!=="vector"||a["source-layer"]?k==="raster-dem"&&_!=="hillshade"?t.push(new Ve(u,a.source,"raster-dem source can only be used with layer type 'hillshade'.")):_!=="line"||!a.paint||!a.paint["line-gradient"]||k==="geojson"&&w.lineMetrics||t.push(new Ve(u,a,`layer "${a.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new Ve(u,a,`layer "${a.id}" must specify a "source-layer"`)):t.push(new Ve(u,a.source,`source "${a.source}" not found`))}else t.push(new Ve(u,a,'missing required property "source"'));return t=t.concat(zi({key:u,value:a,valueSpec:g.layer,style:i.style,styleSpec:i.styleSpec,objectElementValidators:{"*":()=>[],type:()=>ni({key:`${u}.type`,value:a.type,valueSpec:g.layer.type,style:i.style,styleSpec:i.styleSpec,object:a,objectKey:"type"}),filter:Ys,layout:w=>zi({layer:a,key:w.key,value:w.value,style:w.style,styleSpec:w.styleSpec,objectElementValidators:{"*":k=>od(Gn({layerType:_},k))}}),paint:w=>zi({layer:a,key:w.key,value:w.value,style:w.style,styleSpec:w.styleSpec,objectElementValidators:{"*":k=>id(Gn({layerType:_},k))}})}})),t}function Ja(i){const t=i.value,a=i.key,u=jt(t);return u!=="string"?[new Ve(a,t,`string expected, ${u} found`)]:[]}const sd={promoteId:function({key:i,value:t}){if(jt(t)==="string")return Ja({key:i,value:t});{const a=[];for(const u in t)a.push(...Ja({key:`${i}.${u}`,value:t[u]}));return a}}};function Qs(i){const t=i.value,a=i.key,u=i.styleSpec,p=i.style;if(!t.type)return[new Ve(a,t,'"type" is required')];const g=Pt(t.type);let _;switch(g){case"vector":case"raster":case"raster-dem":return _=zi({key:a,value:t,valueSpec:u[`source_${g.replace("-","_")}`],style:i.style,styleSpec:u,objectElementValidators:sd}),_;case"geojson":if(_=zi({key:a,value:t,valueSpec:u.source_geojson,style:p,styleSpec:u,objectElementValidators:sd}),t.cluster)for(const b in t.clusterProperties){const[w,k]=t.clusterProperties[b],A=typeof w=="string"?[w,["accumulated"],["get",b]]:w;_.push(...ya({key:`${a}.${b}.map`,value:k,expressionContext:"cluster-map"})),_.push(...ya({key:`${a}.${b}.reduce`,value:A,expressionContext:"cluster-reduce"}))}return _;case"video":return zi({key:a,value:t,valueSpec:u.source_video,style:p,styleSpec:u});case"image":return zi({key:a,value:t,valueSpec:u.source_image,style:p,styleSpec:u});case"canvas":return[new Ve(a,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Hs({key:`${a}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:p,styleSpec:u})}}function el(i){const t=i.value,a=i.styleSpec,u=a.light,p=i.style;let g=[];const _=jt(t);if(t===void 0)return g;if(_!=="object")return g=g.concat([new Ve("light",t,`object expected, ${_} found`)]),g;for(const b in t){const w=b.match(/^(.*)-transition$/);g=g.concat(w&&u[w[1]]&&u[w[1]].transition?ni({key:b,value:t[b],valueSpec:a.transition,style:p,styleSpec:a}):u[b]?ni({key:b,value:t[b],valueSpec:u[b],style:p,styleSpec:a}):[new Ve(b,t[b],`unknown property "${b}"`)])}return g}function ri(i){const t=i.value,a=i.styleSpec,u=a.terrain,p=i.style;let g=[];const _=jt(t);if(t===void 0)return g;if(_!=="object")return g=g.concat([new Ve("terrain",t,`object expected, ${_} found`)]),g;for(const b in t)g=g.concat(u[b]?ni({key:b,value:t[b],valueSpec:u[b],style:p,styleSpec:a}):[new Ve(b,t[b],`unknown property "${b}"`)]);return g}const tl={"*":()=>[],array:Qh,boolean:function(i){const t=i.value,a=i.key,u=jt(t);return u!=="boolean"?[new Ve(a,t,`boolean expected, ${u} found`)]:[]},number:tc,color:function(i){const t=i.key,a=i.value,u=jt(a);return u!=="string"?[new Ve(t,a,`color expected, ${u} found`)]:Mo(a)===null?[new Ve(t,a,`color expected, "${a}" found`)]:[]},constants:qi,enum:Hs,filter:Ys,function:ed,layer:ad,object:zi,source:Qs,light:el,terrain:ri,string:Ja,formatted:function(i){return Ja(i).length===0?[]:ya(i)},resolvedImage:function(i){return Ja(i).length===0?[]:ya(i)},padding:function(i){const t=i.key,a=i.value;if(jt(a)==="array"){if(a.length<1||a.length>4)return[new Ve(t,a,`padding requires 1 to 4 values; ${a.length} values found`)];const u={type:"number"};let p=[];for(let g=0;g<a.length;g++)p=p.concat(ni({key:`${t}[${g}]`,value:a[g],valueSpec:u}));return p}return tc({key:t,value:a,valueSpec:{}})}};function ni(i){const t=i.value,a=i.valueSpec,u=i.styleSpec;return a.expression&&cr(Pt(t))?ed(i):a.expression&&Ws(Pn(t))?ya(i):a.type&&tl[a.type]?tl[a.type](i):zi(Gn({},i,{valueSpec:a.type?u[a.type]:a}))}function Xf(i){const t=i.value,a=i.key,u=Ja(i);return u.length||(t.indexOf("{fontstack}")===-1&&u.push(new Ve(a,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&u.push(new Ve(a,t,'"glyphs" url must include a "{range}" token'))),u}function Oo(i,t=ke){let a=[];return a=a.concat(ni({key:"",value:i,valueSpec:t.$root,styleSpec:t,style:i,objectElementValidators:{glyphs:Xf,"*":()=>[]}})),i.constants&&(a=a.concat(qi({key:"constants",value:i.constants,style:i,styleSpec:t}))),ld(a)}function ld(i){return[].concat(i).sort((t,a)=>t.line-a.line)}function po(i){return function(...t){return ld(i.apply(this,t))}}Oo.source=po(Qs),Oo.light=po(el),Oo.terrain=po(ri),Oo.layer=po(ad),Oo.filter=po(Ys),Oo.paintProperty=po(id),Oo.layoutProperty=po(od);const rl=Oo,nc=rl.light,Kf=rl.paintProperty,Yf=rl.layoutProperty;function Hl(i,t){let a=!1;if(t&&t.length)for(const u of t)i.fire(new Ao(new Error(u.message))),a=!0;return a}class nl{constructor(t,a,u){const p=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;const _=new Int32Array(this.arrayBuffer);t=_[0],this.d=(a=_[1])+2*(u=_[2]);for(let w=0;w<this.d*this.d;w++){const k=_[3+w],A=_[3+w+1];p.push(k===A?null:_.subarray(k,A))}const b=_[3+p.length+1];this.keys=_.subarray(_[3+p.length],b),this.bboxes=_.subarray(b),this.insert=this._insertReadonly}else{this.d=a+2*u;for(let _=0;_<this.d*this.d;_++)p.push([]);this.keys=[],this.bboxes=[]}this.n=a,this.extent=t,this.padding=u,this.scale=a/t,this.uid=0;const g=u/a*t;this.min=-g,this.max=t+g}insert(t,a,u,p,g){this._forEachCell(a,u,p,g,this._insertCell,this.uid++,void 0,void 0),this.keys.push(t),this.bboxes.push(a),this.bboxes.push(u),this.bboxes.push(p),this.bboxes.push(g)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(t,a,u,p,g,_){this.cells[g].push(_)}query(t,a,u,p,g){const _=this.min,b=this.max;if(t<=_&&a<=_&&b<=u&&b<=p&&!g)return Array.prototype.slice.call(this.keys);{const w=[];return this._forEachCell(t,a,u,p,this._queryCell,w,{},g),w}}_queryCell(t,a,u,p,g,_,b,w){const k=this.cells[g];if(k!==null){const A=this.keys,P=this.bboxes;for(let L=0;L<k.length;L++){const F=k[L];if(b[F]===void 0){const O=4*F;(w?w(P[O+0],P[O+1],P[O+2],P[O+3]):t<=P[O+2]&&a<=P[O+3]&&u>=P[O+0]&&p>=P[O+1])?(b[F]=!0,_.push(A[F])):b[F]=!1}}}}_forEachCell(t,a,u,p,g,_,b,w){const k=this._convertToCellCoord(t),A=this._convertToCellCoord(a),P=this._convertToCellCoord(u),L=this._convertToCellCoord(p);for(let F=k;F<=P;F++)for(let O=A;O<=L;O++){const Y=this.d*O+F;if((!w||w(this._convertFromCellCoord(F),this._convertFromCellCoord(O),this._convertFromCellCoord(F+1),this._convertFromCellCoord(O+1)))&&g.call(this,t,a,u,p,Y,_,b,w))return}}_convertFromCellCoord(t){return(t-this.padding)/this.scale}_convertToCellCoord(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const t=this.cells,a=3+this.cells.length+1+1;let u=0;for(let _=0;_<this.cells.length;_++)u+=this.cells[_].length;const p=new Int32Array(a+u+this.keys.length+this.bboxes.length);p[0]=this.extent,p[1]=this.n,p[2]=this.padding;let g=a;for(let _=0;_<t.length;_++){const b=t[_];p[3+_]=g,p.set(b,g),g+=b.length}return p[3+t.length]=g,p.set(this.keys,g),g+=this.keys.length,p[3+t.length+1]=g,p.set(this.bboxes,g),g+=this.bboxes.length,p.buffer}static serialize(t,a){const u=t.toArrayBuffer();return a&&a.push(u),{buffer:u}}static deserialize(t){return new nl(t.buffer)}}const fo={};function nt(i,t,a={}){if(fo[i])throw new Error(`${i} is already registered.`);Object.defineProperty(t,"_classRegistryKey",{value:i,writeable:!1}),fo[i]={klass:t,omit:a.omit||[],shallow:a.shallow||[]}}nt("Object",Object),nt("TransferableGridIndex",nl),nt("Color",$),nt("Error",Error),nt("AJAXError",In),nt("ResolvedImage",se),nt("StylePropertyFunction",Gl),nt("StyleExpression",jl,{omit:["_evaluator"]}),nt("ZoomDependentExpression",ec),nt("ZoomConstantExpression",Zs),nt("CompoundExpression",Xt,{omit:["_evaluate"]});for(const i in Za)Za[i]._classRegistryKey||nt(`Expression_${i}`,Za[i]);function ud(i){return i&&typeof ArrayBuffer!="undefined"&&(i instanceof ArrayBuffer||i.constructor&&i.constructor.name==="ArrayBuffer")}function _a(i,t){if(i==null||typeof i=="boolean"||typeof i=="number"||typeof i=="string"||i instanceof Boolean||i instanceof Number||i instanceof String||i instanceof Date||i instanceof RegExp||i instanceof Blob)return i;if(ud(i)||Fr(i))return t&&t.push(i),i;if(ArrayBuffer.isView(i)){const a=i;return t&&t.push(a.buffer),a}if(i instanceof ImageData)return t&&t.push(i.data.buffer),i;if(Array.isArray(i)){const a=[];for(const u of i)a.push(_a(u,t));return a}if(typeof i=="object"){const a=i.constructor,u=a._classRegistryKey;if(!u)throw new Error("can't serialize object of unregistered class");if(!fo[u])throw new Error(`${u} is not registered.`);const p=a.serialize?a.serialize(i,t):{};if(a.serialize){if(t&&p===t[t.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const g in i){if(!i.hasOwnProperty(g)||fo[u].omit.indexOf(g)>=0)continue;const _=i[g];p[g]=fo[u].shallow.indexOf(g)>=0?_:_a(_,t)}i instanceof Error&&(p.message=i.message)}if(p.$name)throw new Error("$name property is reserved for worker serialization logic.");return u!=="Object"&&(p.$name=u),p}throw new Error("can't serialize object of type "+typeof i)}function No(i){if(i==null||typeof i=="boolean"||typeof i=="number"||typeof i=="string"||i instanceof Boolean||i instanceof Number||i instanceof String||i instanceof Date||i instanceof RegExp||i instanceof Blob||ud(i)||Fr(i)||ArrayBuffer.isView(i)||i instanceof ImageData)return i;if(Array.isArray(i))return i.map(No);if(typeof i=="object"){const t=i.$name||"Object";if(!fo[t])throw new Error(`can't deserialize unregistered class ${t}`);const{klass:a}=fo[t];if(!a)throw new Error(`can't deserialize unregistered class ${t}`);if(a.deserialize)return a.deserialize(i);const u=Object.create(a.prototype);for(const p of Object.keys(i)){if(p==="$name")continue;const g=i[p];u[p]=fo[t].shallow.indexOf(p)>=0?g:No(g)}return u}throw new Error("can't deserialize object of type "+typeof i)}class ic{constructor(){this.first=!0}update(t,a){const u=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=u,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=u,!0):(this.lastFloorZoom>u?(this.lastIntegerZoom=u+1,this.lastIntegerZoomTime=a):this.lastFloorZoom<u&&(this.lastIntegerZoom=u,this.lastIntegerZoomTime=a),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=u,!0))}}const Xe={"Latin-1 Supplement":i=>i>=128&&i<=255,Arabic:i=>i>=1536&&i<=1791,"Arabic Supplement":i=>i>=1872&&i<=1919,"Arabic Extended-A":i=>i>=2208&&i<=2303,"Hangul Jamo":i=>i>=4352&&i<=4607,"Unified Canadian Aboriginal Syllabics":i=>i>=5120&&i<=5759,Khmer:i=>i>=6016&&i<=6143,"Unified Canadian Aboriginal Syllabics Extended":i=>i>=6320&&i<=6399,"General Punctuation":i=>i>=8192&&i<=8303,"Letterlike Symbols":i=>i>=8448&&i<=8527,"Number Forms":i=>i>=8528&&i<=8591,"Miscellaneous Technical":i=>i>=8960&&i<=9215,"Control Pictures":i=>i>=9216&&i<=9279,"Optical Character Recognition":i=>i>=9280&&i<=9311,"Enclosed Alphanumerics":i=>i>=9312&&i<=9471,"Geometric Shapes":i=>i>=9632&&i<=9727,"Miscellaneous Symbols":i=>i>=9728&&i<=9983,"Miscellaneous Symbols and Arrows":i=>i>=11008&&i<=11263,"CJK Radicals Supplement":i=>i>=11904&&i<=12031,"Kangxi Radicals":i=>i>=12032&&i<=12255,"Ideographic Description Characters":i=>i>=12272&&i<=12287,"CJK Symbols and Punctuation":i=>i>=12288&&i<=12351,Hiragana:i=>i>=12352&&i<=12447,Katakana:i=>i>=12448&&i<=12543,Bopomofo:i=>i>=12544&&i<=12591,"Hangul Compatibility Jamo":i=>i>=12592&&i<=12687,Kanbun:i=>i>=12688&&i<=12703,"Bopomofo Extended":i=>i>=12704&&i<=12735,"CJK Strokes":i=>i>=12736&&i<=12783,"Katakana Phonetic Extensions":i=>i>=12784&&i<=12799,"Enclosed CJK Letters and Months":i=>i>=12800&&i<=13055,"CJK Compatibility":i=>i>=13056&&i<=13311,"CJK Unified Ideographs Extension A":i=>i>=13312&&i<=19903,"Yijing Hexagram Symbols":i=>i>=19904&&i<=19967,"CJK Unified Ideographs":i=>i>=19968&&i<=40959,"Yi Syllables":i=>i>=40960&&i<=42127,"Yi Radicals":i=>i>=42128&&i<=42191,"Hangul Jamo Extended-A":i=>i>=43360&&i<=43391,"Hangul Syllables":i=>i>=44032&&i<=55215,"Hangul Jamo Extended-B":i=>i>=55216&&i<=55295,"Private Use Area":i=>i>=57344&&i<=63743,"CJK Compatibility Ideographs":i=>i>=63744&&i<=64255,"Arabic Presentation Forms-A":i=>i>=64336&&i<=65023,"Vertical Forms":i=>i>=65040&&i<=65055,"CJK Compatibility Forms":i=>i>=65072&&i<=65103,"Small Form Variants":i=>i>=65104&&i<=65135,"Arabic Presentation Forms-B":i=>i>=65136&&i<=65279,"Halfwidth and Fullwidth Forms":i=>i>=65280&&i<=65519};function Xl(i){for(const t of i)if(ac(t.charCodeAt(0)))return!0;return!1}function Jf(i){for(const t of i)if(!oc(t.charCodeAt(0)))return!1;return!0}function oc(i){return!(Xe.Arabic(i)||Xe["Arabic Supplement"](i)||Xe["Arabic Extended-A"](i)||Xe["Arabic Presentation Forms-A"](i)||Xe["Arabic Presentation Forms-B"](i))}function ac(i){return!(i!==746&&i!==747&&(i<4352||!(Xe["Bopomofo Extended"](i)||Xe.Bopomofo(i)||Xe["CJK Compatibility Forms"](i)&&!(i>=65097&&i<=65103)||Xe["CJK Compatibility Ideographs"](i)||Xe["CJK Compatibility"](i)||Xe["CJK Radicals Supplement"](i)||Xe["CJK Strokes"](i)||!(!Xe["CJK Symbols and Punctuation"](i)||i>=12296&&i<=12305||i>=12308&&i<=12319||i===12336)||Xe["CJK Unified Ideographs Extension A"](i)||Xe["CJK Unified Ideographs"](i)||Xe["Enclosed CJK Letters and Months"](i)||Xe["Hangul Compatibility Jamo"](i)||Xe["Hangul Jamo Extended-A"](i)||Xe["Hangul Jamo Extended-B"](i)||Xe["Hangul Jamo"](i)||Xe["Hangul Syllables"](i)||Xe.Hiragana(i)||Xe["Ideographic Description Characters"](i)||Xe.Kanbun(i)||Xe["Kangxi Radicals"](i)||Xe["Katakana Phonetic Extensions"](i)||Xe.Katakana(i)&&i!==12540||!(!Xe["Halfwidth and Fullwidth Forms"](i)||i===65288||i===65289||i===65293||i>=65306&&i<=65310||i===65339||i===65341||i===65343||i>=65371&&i<=65503||i===65507||i>=65512&&i<=65519)||!(!Xe["Small Form Variants"](i)||i>=65112&&i<=65118||i>=65123&&i<=65126)||Xe["Unified Canadian Aboriginal Syllabics"](i)||Xe["Unified Canadian Aboriginal Syllabics Extended"](i)||Xe["Vertical Forms"](i)||Xe["Yijing Hexagram Symbols"](i)||Xe["Yi Syllables"](i)||Xe["Yi Radicals"](i))))}function cd(i){return!(ac(i)||function(t){return!!(Xe["Latin-1 Supplement"](t)&&(t===167||t===169||t===174||t===177||t===188||t===189||t===190||t===215||t===247)||Xe["General Punctuation"](t)&&(t===8214||t===8224||t===8225||t===8240||t===8241||t===8251||t===8252||t===8258||t===8263||t===8264||t===8265||t===8273)||Xe["Letterlike Symbols"](t)||Xe["Number Forms"](t)||Xe["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||t===9003||t>=9085&&t<=9114||t>=9150&&t<=9165||t===9167||t>=9169&&t<=9179||t>=9186&&t<=9215)||Xe["Control Pictures"](t)&&t!==9251||Xe["Optical Character Recognition"](t)||Xe["Enclosed Alphanumerics"](t)||Xe["Geometric Shapes"](t)||Xe["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||Xe["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||Xe["CJK Symbols and Punctuation"](t)||Xe.Katakana(t)||Xe["Private Use Area"](t)||Xe["CJK Compatibility Forms"](t)||Xe["Small Form Variants"](t)||Xe["Halfwidth and Fullwidth Forms"](t)||t===8734||t===8756||t===8757||t>=9984&&t<=10087||t>=10102&&t<=10131||t===65532||t===65533)}(i))}function hd(i){return i>=1424&&i<=2303||Xe["Arabic Presentation Forms-A"](i)||Xe["Arabic Presentation Forms-B"](i)}function Qf(i,t){return!(!t&&hd(i)||i>=2304&&i<=3583||i>=3840&&i<=4255||Xe.Khmer(i))}function dd(i){for(const t of i)if(hd(t.charCodeAt(0)))return!0;return!1}const sc="deferred",lc="loading",uc="loaded";let cc=null,Wn="unavailable",$o=null;const pd=function(i){i&&typeof i=="string"&&i.indexOf("NetworkError")>-1&&(Wn="error"),cc&&cc(i)};function Qa(){hc.fire(new fi("pluginStateChange",{pluginStatus:Wn,pluginURL:$o}))}const hc=new ki,il=function(){return Wn},fd=function(){if(Wn!==sc||!$o)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Wn=lc,Qa(),$o&&Io({url:$o},i=>{i?pd(i):(Wn=uc,Qa())})},gi={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Wn===uc||gi.applyArabicShaping!=null,isLoading:()=>Wn===lc,setState(i){if(!rt())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Wn=i.pluginStatus,$o=i.pluginURL},isParsed(){if(!rt())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return gi.applyArabicShaping!=null&&gi.processBidirectionalText!=null&&gi.processStyledBidirectionalText!=null},getPluginURL(){if(!rt())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return $o}};class _r{constructor(t,a){this.zoom=t,a?(this.now=a.now,this.fadeDuration=a.fadeDuration,this.zoomHistory=a.zoomHistory,this.transition=a.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new ic,this.transition={})}isSupportedScript(t){return function(a,u){for(const p of a)if(!Qf(p.charCodeAt(0),u))return!1;return!0}(t,gi.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const t=this.zoom,a=t-Math.floor(t),u=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:a+(1-a)*u}:{fromScale:.5,toScale:1,t:1-(1-u)*a}}}class ol{constructor(t,a){this.property=t,this.value=a,this.expression=function(u,p){if(cr(u))return new Gl(u,p);if(Ws(u)){const g=Jh(u,p);if(g.result==="error")throw new Error(g.value.map(_=>`${_.key}: ${_.message}`).join(", "));return g.value}{let g=u;return p.type==="color"&&typeof u=="string"?g=$.parse(u):p.type!=="padding"||typeof u!="number"&&!Array.isArray(u)||(g=Q.parse(u)),{kind:"constant",evaluate:()=>g}}}(a===void 0?t.specification.default:a,t.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(t,a,u){return this.property.possiblyEvaluate(this,t,a,u)}}class Kl{constructor(t){this.property=t,this.value=new ol(t,void 0)}transitioned(t,a){return new gd(this.property,this.value,a,Ae({},t.transition,this.transition),t.now)}untransitioned(){return new gd(this.property,this.value,null,{},0)}}class md{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}getValue(t){return fe(this._values[t].value.value)}setValue(t,a){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new Kl(this._values[t].property)),this._values[t].value=new ol(this._values[t].property,a===null?void 0:fe(a))}getTransition(t){return fe(this._values[t].transition)}setTransition(t,a){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new Kl(this._values[t].property)),this._values[t].transition=fe(a)||void 0}serialize(){const t={};for(const a of Object.keys(this._values)){const u=this.getValue(a);u!==void 0&&(t[a]=u);const p=this.getTransition(a);p!==void 0&&(t[`${a}-transition`]=p)}return t}transitioned(t,a){const u=new yd(this._properties);for(const p of Object.keys(this._values))u._values[p]=this._values[p].transitioned(t,a._values[p]);return u}untransitioned(){const t=new yd(this._properties);for(const a of Object.keys(this._values))t._values[a]=this._values[a].untransitioned();return t}}class gd{constructor(t,a,u,p,g){this.property=t,this.value=a,this.begin=g+p.delay||0,this.end=this.begin+p.duration||0,t.specification.transition&&(p.delay||p.duration)&&(this.prior=u)}possiblyEvaluate(t,a,u){const p=t.now||0,g=this.value.possiblyEvaluate(t,a,u),_=this.prior;if(_){if(p>this.end)return this.prior=null,g;if(this.value.isDataDriven())return this.prior=null,g;if(p<this.begin)return _.possiblyEvaluate(t,a,u);{const b=(p-this.begin)/(this.end-this.begin);return this.property.interpolate(_.possiblyEvaluate(t,a,u),g,function(w){if(w<=0)return 0;if(w>=1)return 1;const k=w*w,A=k*w;return 4*(w<.5?A:3*(w-k)+A-.75)}(b))}}return g}}class yd{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,a,u){const p=new al(this._properties);for(const g of Object.keys(this._values))p._values[g]=this._values[g].possiblyEvaluate(t,a,u);return p}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class em{constructor(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}getValue(t){return fe(this._values[t].value)}setValue(t,a){this._values[t]=new ol(this._values[t].property,a===null?void 0:fe(a))}serialize(){const t={};for(const a of Object.keys(this._values)){const u=this.getValue(a);u!==void 0&&(t[a]=u)}return t}possiblyEvaluate(t,a,u){const p=new al(this._properties);for(const g of Object.keys(this._values))p._values[g]=this._values[g].possiblyEvaluate(t,a,u);return p}}class Zi{constructor(t,a,u){this.property=t,this.value=a,this.parameters=u}isConstant(){return this.value.kind==="constant"}constantOr(t){return this.value.kind==="constant"?this.value.value:t}evaluate(t,a,u,p){return this.property.evaluate(this.value,this.parameters,t,a,u,p)}}class al{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class ut{constructor(t){this.specification=t}possiblyEvaluate(t,a){if(t.isDataDriven())throw new Error("Value should not be data driven");return t.expression.evaluate(a)}interpolate(t,a,u){const p=ha[this.specification.type];return p?p(t,a,u):t}}class yt{constructor(t,a){this.specification=t,this.overrides=a}possiblyEvaluate(t,a,u,p){return new Zi(this,t.expression.kind==="constant"||t.expression.kind==="camera"?{kind:"constant",value:t.expression.evaluate(a,null,{},u,p)}:t.expression,a)}interpolate(t,a,u){if(t.value.kind!=="constant"||a.value.kind!=="constant")return t;if(t.value.value===void 0||a.value.value===void 0)return new Zi(this,{kind:"constant",value:void 0},t.parameters);const p=ha[this.specification.type];return p?new Zi(this,{kind:"constant",value:p(t.value.value,a.value.value,u)},t.parameters):t}evaluate(t,a,u,p,g,_){return t.kind==="constant"?t.value:t.evaluate(a,u,p,g,_)}}class es extends yt{possiblyEvaluate(t,a,u,p){if(t.value===void 0)return new Zi(this,{kind:"constant",value:void 0},a);if(t.expression.kind==="constant"){const g=t.expression.evaluate(a,null,{},u,p),_=t.property.specification.type==="resolvedImage"&&typeof g!="string"?g.name:g,b=this._calculate(_,_,_,a);return new Zi(this,{kind:"constant",value:b},a)}if(t.expression.kind==="camera"){const g=this._calculate(t.expression.evaluate({zoom:a.zoom-1}),t.expression.evaluate({zoom:a.zoom}),t.expression.evaluate({zoom:a.zoom+1}),a);return new Zi(this,{kind:"constant",value:g},a)}return new Zi(this,t.expression,a)}evaluate(t,a,u,p,g,_){if(t.kind==="source"){const b=t.evaluate(a,u,p,g,_);return this._calculate(b,b,b,a)}return t.kind==="composite"?this._calculate(t.evaluate({zoom:Math.floor(a.zoom)-1},u,p),t.evaluate({zoom:Math.floor(a.zoom)},u,p),t.evaluate({zoom:Math.floor(a.zoom)+1},u,p),a):t.value}_calculate(t,a,u,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:t,to:a}:{from:u,to:a}}interpolate(t){return t}}class dc{constructor(t){this.specification=t}possiblyEvaluate(t,a,u,p){if(t.value!==void 0){if(t.expression.kind==="constant"){const g=t.expression.evaluate(a,null,{},u,p);return this._calculate(g,g,g,a)}return this._calculate(t.expression.evaluate(new _r(Math.floor(a.zoom-1),a)),t.expression.evaluate(new _r(Math.floor(a.zoom),a)),t.expression.evaluate(new _r(Math.floor(a.zoom+1),a)),a)}}_calculate(t,a,u,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:t,to:a}:{from:u,to:a}}interpolate(t){return t}}class Uo{constructor(t){this.specification=t}possiblyEvaluate(t,a,u,p){return!!t.expression.evaluate(a,null,{},u,p)}interpolate(){return!1}}class dn{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const a in t){const u=t[a];u.specification.overridable&&this.overridableProperties.push(a);const p=this.defaultPropertyValues[a]=new ol(u,void 0),g=this.defaultTransitionablePropertyValues[a]=new Kl(u);this.defaultTransitioningPropertyValues[a]=g.untransitioned(),this.defaultPossiblyEvaluatedValues[a]=p.possiblyEvaluate({})}}}nt("DataDrivenProperty",yt),nt("DataConstantProperty",ut),nt("CrossFadedDataDrivenProperty",es),nt("CrossFadedProperty",dc),nt("ColorRampProperty",Uo);const Vo="-transition";class Hi extends ki{constructor(t,a){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1},t.type!=="custom"&&(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,t.type!=="background"&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),a.layout&&(this._unevaluatedLayout=new em(a.layout)),a.paint)){this._transitionablePaint=new md(a.paint);for(const u in t.paint)this.setPaintProperty(u,t.paint[u],{validate:!1});for(const u in t.layout)this.setLayoutProperty(u,t.layout[u],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new al(a.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(t){return t==="visibility"?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,a,u={}){a!=null&&this._validate(Yf,`layers.${this.id}.layout.${t}`,t,a,u)||(t!=="visibility"?this._unevaluatedLayout.setValue(t,a):this.visibility=a)}getPaintProperty(t){return t.endsWith(Vo)?this._transitionablePaint.getTransition(t.slice(0,-Vo.length)):this._transitionablePaint.getValue(t)}setPaintProperty(t,a,u={}){if(a!=null&&this._validate(Kf,`layers.${this.id}.paint.${t}`,t,a,u))return!1;if(t.endsWith(Vo))return this._transitionablePaint.setTransition(t.slice(0,-Vo.length),a||void 0),!1;{const p=this._transitionablePaint._values[t],g=p.property.specification["property-type"]==="cross-faded-data-driven",_=p.value.isDataDriven(),b=p.value;this._transitionablePaint.setValue(t,a),this._handleSpecialPaintPropertyUpdate(t);const w=this._transitionablePaint._values[t].value;return w.isDataDriven()||_||g||this._handleOverridablePaintPropertyUpdate(t,b,w)}}_handleSpecialPaintPropertyUpdate(t){}_handleOverridablePaintPropertyUpdate(t,a,u){return!1}isHidden(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||this.visibility==="none"}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,a){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,a)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,a)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),ee(t,(a,u)=>!(a===void 0||u==="layout"&&!Object.keys(a).length||u==="paint"&&!Object.keys(a).length))}_validate(t,a,u,p,g={}){return(!g||g.validate!==!1)&&Hl(this,t.call(rl,{key:a,layerType:this.type,objectKey:u,value:p,styleSpec:ke,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const a=this.paint.get(t);if(a instanceof Zi&&fr(a.property.specification)&&(a.value.kind==="source"||a.value.kind==="composite")&&a.value.isStateDependent)return!0}return!1}}const _d={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class jo{constructor(t,a){this._structArray=t,this._pos1=a*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Dr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,a){return t._trim(),a&&(t.isTransferred=!0,a.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const a=Object.create(this.prototype);return a.arrayBuffer=t.arrayBuffer,a.length=t.length,a.capacity=t.arrayBuffer.byteLength/a.bytesPerElement,a._refreshViews(),a}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const a=this.uint8;this._refreshViews(),a&&this.uint8.set(a)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function jr(i,t=1){let a=0,u=0;return{members:i.map(p=>{const g=_d[p.type].BYTES_PER_ELEMENT,_=a=pc(a,Math.max(t,g)),b=p.components||1;return u=Math.max(u,g),a+=g*b,{name:p.name,type:p.type,components:b,offset:_}}),size:pc(a,Math.max(u,t)),alignment:t}}function pc(i,t){return Math.ceil(i/t)*t}class va extends Dr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,a){const u=this.length;return this.resize(u+1),this.emplace(u,t,a)}emplace(t,a,u){const p=2*t;return this.int16[p+0]=a,this.int16[p+1]=u,t}}va.prototype.bytesPerElement=4,nt("StructArrayLayout2i4",va);class d extends Dr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,a,u,p){const g=this.length;return this.resize(g+1),this.emplace(g,t,a,u,p)}emplace(t,a,u,p,g){const _=4*t;return this.int16[_+0]=a,this.int16[_+1]=u,this.int16[_+2]=p,this.int16[_+3]=g,t}}d.prototype.bytesPerElement=8,nt("StructArrayLayout4i8",d);class n extends Dr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,a,u,p,g,_){const b=this.length;return this.resize(b+1),this.emplace(b,t,a,u,p,g,_)}emplace(t,a,u,p,g,_,b){const w=6*t;return this.int16[w+0]=a,this.int16[w+1]=u,this.int16[w+2]=p,this.int16[w+3]=g,this.int16[w+4]=_,this.int16[w+5]=b,t}}n.prototype.bytesPerElement=12,nt("StructArrayLayout2i4i12",n);class s extends Dr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,a,u,p,g,_){const b=this.length;return this.resize(b+1),this.emplace(b,t,a,u,p,g,_)}emplace(t,a,u,p,g,_,b){const w=4*t,k=8*t;return this.int16[w+0]=a,this.int16[w+1]=u,this.uint8[k+4]=p,this.uint8[k+5]=g,this.uint8[k+6]=_,this.uint8[k+7]=b,t}}s.prototype.bytesPerElement=8,nt("StructArrayLayout2i4ub8",s);class h extends Dr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,a){const u=this.length;return this.resize(u+1),this.emplace(u,t,a)}emplace(t,a,u){const p=2*t;return this.float32[p+0]=a,this.float32[p+1]=u,t}}h.prototype.bytesPerElement=8,nt("StructArrayLayout2f8",h);class f extends Dr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,a,u,p,g,_,b,w,k,A){const P=this.length;return this.resize(P+1),this.emplace(P,t,a,u,p,g,_,b,w,k,A)}emplace(t,a,u,p,g,_,b,w,k,A,P){const L=10*t;return this.uint16[L+0]=a,this.uint16[L+1]=u,this.uint16[L+2]=p,this.uint16[L+3]=g,this.uint16[L+4]=_,this.uint16[L+5]=b,this.uint16[L+6]=w,this.uint16[L+7]=k,this.uint16[L+8]=A,this.uint16[L+9]=P,t}}f.prototype.bytesPerElement=20,nt("StructArrayLayout10ui20",f);class y extends Dr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,a,u,p,g,_,b,w,k,A,P,L){const F=this.length;return this.resize(F+1),this.emplace(F,t,a,u,p,g,_,b,w,k,A,P,L)}emplace(t,a,u,p,g,_,b,w,k,A,P,L,F){const O=12*t;return this.int16[O+0]=a,this.int16[O+1]=u,this.int16[O+2]=p,this.int16[O+3]=g,this.uint16[O+4]=_,this.uint16[O+5]=b,this.uint16[O+6]=w,this.uint16[O+7]=k,this.int16[O+8]=A,this.int16[O+9]=P,this.int16[O+10]=L,this.int16[O+11]=F,t}}y.prototype.bytesPerElement=24,nt("StructArrayLayout4i4ui4i24",y);class x extends Dr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,a,u){const p=this.length;return this.resize(p+1),this.emplace(p,t,a,u)}emplace(t,a,u,p){const g=3*t;return this.float32[g+0]=a,this.float32[g+1]=u,this.float32[g+2]=p,t}}x.prototype.bytesPerElement=12,nt("StructArrayLayout3f12",x);class S extends Dr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const a=this.length;return this.resize(a+1),this.emplace(a,t)}emplace(t,a){return this.uint32[1*t+0]=a,t}}S.prototype.bytesPerElement=4,nt("StructArrayLayout1ul4",S);class E extends Dr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,a,u,p,g,_,b,w,k){const A=this.length;return this.resize(A+1),this.emplace(A,t,a,u,p,g,_,b,w,k)}emplace(t,a,u,p,g,_,b,w,k,A){const P=10*t,L=5*t;return this.int16[P+0]=a,this.int16[P+1]=u,this.int16[P+2]=p,this.int16[P+3]=g,this.int16[P+4]=_,this.int16[P+5]=b,this.uint32[L+3]=w,this.uint16[P+8]=k,this.uint16[P+9]=A,t}}E.prototype.bytesPerElement=20,nt("StructArrayLayout6i1ul2ui20",E);class C extends Dr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,a,u,p,g,_){const b=this.length;return this.resize(b+1),this.emplace(b,t,a,u,p,g,_)}emplace(t,a,u,p,g,_,b){const w=6*t;return this.int16[w+0]=a,this.int16[w+1]=u,this.int16[w+2]=p,this.int16[w+3]=g,this.int16[w+4]=_,this.int16[w+5]=b,t}}C.prototype.bytesPerElement=12,nt("StructArrayLayout2i2i2i12",C);class z extends Dr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,a,u,p,g){const _=this.length;return this.resize(_+1),this.emplace(_,t,a,u,p,g)}emplace(t,a,u,p,g,_){const b=4*t,w=8*t;return this.float32[b+0]=a,this.float32[b+1]=u,this.float32[b+2]=p,this.int16[w+6]=g,this.int16[w+7]=_,t}}z.prototype.bytesPerElement=16,nt("StructArrayLayout2f1f2i16",z);class R extends Dr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,a,u,p){const g=this.length;return this.resize(g+1),this.emplace(g,t,a,u,p)}emplace(t,a,u,p,g){const _=12*t,b=3*t;return this.uint8[_+0]=a,this.uint8[_+1]=u,this.float32[b+1]=p,this.float32[b+2]=g,t}}R.prototype.bytesPerElement=12,nt("StructArrayLayout2ub2f12",R);class B extends Dr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,a,u){const p=this.length;return this.resize(p+1),this.emplace(p,t,a,u)}emplace(t,a,u,p){const g=3*t;return this.uint16[g+0]=a,this.uint16[g+1]=u,this.uint16[g+2]=p,t}}B.prototype.bytesPerElement=6,nt("StructArrayLayout3ui6",B);class Z extends Dr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,a,u,p,g,_,b,w,k,A,P,L,F,O,Y,K,de){const ve=this.length;return this.resize(ve+1),this.emplace(ve,t,a,u,p,g,_,b,w,k,A,P,L,F,O,Y,K,de)}emplace(t,a,u,p,g,_,b,w,k,A,P,L,F,O,Y,K,de,ve){const ce=24*t,ge=12*t,Pe=48*t;return this.int16[ce+0]=a,this.int16[ce+1]=u,this.uint16[ce+2]=p,this.uint16[ce+3]=g,this.uint32[ge+2]=_,this.uint32[ge+3]=b,this.uint32[ge+4]=w,this.uint16[ce+10]=k,this.uint16[ce+11]=A,this.uint16[ce+12]=P,this.float32[ge+7]=L,this.float32[ge+8]=F,this.uint8[Pe+36]=O,this.uint8[Pe+37]=Y,this.uint8[Pe+38]=K,this.uint32[ge+10]=de,this.int16[ce+22]=ve,t}}Z.prototype.bytesPerElement=48,nt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Z);class G extends Dr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,a,u,p,g,_,b,w,k,A,P,L,F,O,Y,K,de,ve,ce,ge,Pe,ze,tt,lt,Ke,Ge,Ue,Ye){const qe=this.length;return this.resize(qe+1),this.emplace(qe,t,a,u,p,g,_,b,w,k,A,P,L,F,O,Y,K,de,ve,ce,ge,Pe,ze,tt,lt,Ke,Ge,Ue,Ye)}emplace(t,a,u,p,g,_,b,w,k,A,P,L,F,O,Y,K,de,ve,ce,ge,Pe,ze,tt,lt,Ke,Ge,Ue,Ye,qe){const Oe=34*t,mt=17*t;return this.int16[Oe+0]=a,this.int16[Oe+1]=u,this.int16[Oe+2]=p,this.int16[Oe+3]=g,this.int16[Oe+4]=_,this.int16[Oe+5]=b,this.int16[Oe+6]=w,this.int16[Oe+7]=k,this.uint16[Oe+8]=A,this.uint16[Oe+9]=P,this.uint16[Oe+10]=L,this.uint16[Oe+11]=F,this.uint16[Oe+12]=O,this.uint16[Oe+13]=Y,this.uint16[Oe+14]=K,this.uint16[Oe+15]=de,this.uint16[Oe+16]=ve,this.uint16[Oe+17]=ce,this.uint16[Oe+18]=ge,this.uint16[Oe+19]=Pe,this.uint16[Oe+20]=ze,this.uint16[Oe+21]=tt,this.uint16[Oe+22]=lt,this.uint32[mt+12]=Ke,this.float32[mt+13]=Ge,this.float32[mt+14]=Ue,this.float32[mt+15]=Ye,this.float32[mt+16]=qe,t}}G.prototype.bytesPerElement=68,nt("StructArrayLayout8i15ui1ul4f68",G);class W extends Dr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const a=this.length;return this.resize(a+1),this.emplace(a,t)}emplace(t,a){return this.float32[1*t+0]=a,t}}W.prototype.bytesPerElement=4,nt("StructArrayLayout1f4",W);class ie extends Dr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,a,u){const p=this.length;return this.resize(p+1),this.emplace(p,t,a,u)}emplace(t,a,u,p){const g=3*t;return this.int16[g+0]=a,this.int16[g+1]=u,this.int16[g+2]=p,t}}ie.prototype.bytesPerElement=6,nt("StructArrayLayout3i6",ie);class ue extends Dr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,a,u){const p=this.length;return this.resize(p+1),this.emplace(p,t,a,u)}emplace(t,a,u,p){const g=4*t;return this.uint32[2*t+0]=a,this.uint16[g+2]=u,this.uint16[g+3]=p,t}}ue.prototype.bytesPerElement=8,nt("StructArrayLayout1ul2ui8",ue);class pe extends Dr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,a){const u=this.length;return this.resize(u+1),this.emplace(u,t,a)}emplace(t,a,u){const p=2*t;return this.uint16[p+0]=a,this.uint16[p+1]=u,t}}pe.prototype.bytesPerElement=4,nt("StructArrayLayout2ui4",pe);class X extends Dr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const a=this.length;return this.resize(a+1),this.emplace(a,t)}emplace(t,a){return this.uint16[1*t+0]=a,t}}X.prototype.bytesPerElement=2,nt("StructArrayLayout1ui2",X);class ye extends Dr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,a,u,p){const g=this.length;return this.resize(g+1),this.emplace(g,t,a,u,p)}emplace(t,a,u,p,g){const _=4*t;return this.float32[_+0]=a,this.float32[_+1]=u,this.float32[_+2]=p,this.float32[_+3]=g,t}}ye.prototype.bytesPerElement=16,nt("StructArrayLayout4f16",ye);class me extends jo{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new dt(this.anchorPointX,this.anchorPointY)}}me.prototype.size=20;class Ce extends E{get(t){return new me(this,t)}}nt("CollisionBoxArray",Ce);class Ie extends jo{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(t){this._structArray.uint8[this._pos1+37]=t}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(t){this._structArray.uint8[this._pos1+38]=t}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(t){this._structArray.uint32[this._pos4+10]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Ie.prototype.size=48;class Be extends Z{get(t){return new Ie(this,t)}}nt("PlacedSymbolArray",Be);class Ee extends jo{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(t){this._structArray.uint32[this._pos4+12]=t}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}Ee.prototype.size=68;class Qe extends G{get(t){return new Ee(this,t)}}nt("SymbolInstanceArray",Qe);class je extends W{getoffsetX(t){return this.float32[1*t+0]}}nt("GlyphOffsetArray",je);class et extends ie{getx(t){return this.int16[3*t+0]}gety(t){return this.int16[3*t+1]}gettileUnitDistanceFromAnchor(t){return this.int16[3*t+2]}}nt("SymbolLineVertexArray",et);class St extends jo{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}St.prototype.size=8;class Ct extends ue{get(t){return new St(this,t)}}nt("FeatureIndexArray",Ct);class ft extends va{}class Yt extends va{}class Jt extends va{}class Ot extends n{}class Ut extends s{}class tr extends h{}class nn extends f{}class Xi extends y{}class Pi extends x{}class Ki extends S{}class Go extends C{}class yi extends R{}class qn extends B{}class mo extends pe{}const Yl=jr([{name:"a_pos",components:2,type:"Int16"}],4),{members:Kr}=Yl;class At{constructor(t=[]){this.segments=t}prepareSegment(t,a,u,p){let g=this.segments[this.segments.length-1];return t>At.MAX_VERTEX_ARRAY_LENGTH&&Ne(`Max vertices per segment is ${At.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}`),(!g||g.vertexLength+t>At.MAX_VERTEX_ARRAY_LENGTH||g.sortKey!==p)&&(g={vertexOffset:a.length,primitiveOffset:u.length,vertexLength:0,primitiveLength:0},p!==void 0&&(g.sortKey=p),this.segments.push(g)),g}get(){return this.segments}destroy(){for(const t of this.segments)for(const a in t.vaos)t.vaos[a].destroy()}static simpleSegment(t,a,u,p){return new At([{vertexOffset:t,primitiveOffset:a,vertexLength:u,primitiveLength:p,vaos:{},sortKey:0}])}}function Zt(i,t){return 256*(i=U(Math.floor(i),0,255))+U(Math.floor(t),0,255)}At.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,nt("SegmentVector",At);const on=jr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var an={exports:{}},vr={exports:{}};vr.exports=function(i,t){var a,u,p,g,_,b,w,k;for(u=i.length-(a=3&i.length),p=t,_=3432918353,b=461845907,k=0;k<u;)w=255&i.charCodeAt(k)|(255&i.charCodeAt(++k))<<8|(255&i.charCodeAt(++k))<<16|(255&i.charCodeAt(++k))<<24,++k,p=27492+(65535&(g=5*(65535&(p=(p^=w=(65535&(w=(w=(65535&w)*_+(((w>>>16)*_&65535)<<16)&4294967295)<<15|w>>>17))*b+(((w>>>16)*b&65535)<<16)&4294967295)<<13|p>>>19))+((5*(p>>>16)&65535)<<16)&4294967295))+((58964+(g>>>16)&65535)<<16);switch(w=0,a){case 3:w^=(255&i.charCodeAt(k+2))<<16;case 2:w^=(255&i.charCodeAt(k+1))<<8;case 1:p^=w=(65535&(w=(w=(65535&(w^=255&i.charCodeAt(k)))*_+(((w>>>16)*_&65535)<<16)&4294967295)<<15|w>>>17))*b+(((w>>>16)*b&65535)<<16)&4294967295}return p^=i.length,p=2246822507*(65535&(p^=p>>>16))+((2246822507*(p>>>16)&65535)<<16)&4294967295,p=3266489909*(65535&(p^=p>>>13))+((3266489909*(p>>>16)&65535)<<16)&4294967295,(p^=p>>>16)>>>0};var _i={exports:{}};_i.exports=function(i,t){for(var a,u=i.length,p=t^u,g=0;u>=4;)a=1540483477*(65535&(a=255&i.charCodeAt(g)|(255&i.charCodeAt(++g))<<8|(255&i.charCodeAt(++g))<<16|(255&i.charCodeAt(++g))<<24))+((1540483477*(a>>>16)&65535)<<16),p=1540483477*(65535&p)+((1540483477*(p>>>16)&65535)<<16)^(a=1540483477*(65535&(a^=a>>>24))+((1540483477*(a>>>16)&65535)<<16)),u-=4,++g;switch(u){case 3:p^=(255&i.charCodeAt(g+2))<<16;case 2:p^=(255&i.charCodeAt(g+1))<<8;case 1:p=1540483477*(65535&(p^=255&i.charCodeAt(g)))+((1540483477*(p>>>16)&65535)<<16)}return p=1540483477*(65535&(p^=p>>>13))+((1540483477*(p>>>16)&65535)<<16),(p^=p>>>15)>>>0};var xa=vr.exports,fc=_i.exports;an.exports=xa,an.exports.murmur3=xa,an.exports.murmur2=fc;class ts{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,a,u,p){this.ids.push(vd(t)),this.positions.push(a,u,p)}getPositions(t){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const a=vd(t);let u=0,p=this.ids.length-1;for(;u<p;){const _=u+p>>1;this.ids[_]>=a?p=_:u=_+1}const g=[];for(;this.ids[u]===a;)g.push({index:this.positions[3*u],start:this.positions[3*u+1],end:this.positions[3*u+2]}),u++;return g}static serialize(t,a){const u=new Float64Array(t.ids),p=new Uint32Array(t.positions);return mc(u,p,0,u.length-1),a&&a.push(u.buffer,p.buffer),{ids:u,positions:p}}static deserialize(t){const a=new ts;return a.ids=t.ids,a.positions=t.positions,a.indexed=!0,a}}function vd(i){const t=+i;return!isNaN(t)&&t<=Number.MAX_SAFE_INTEGER?t:an.exports(String(i))}function mc(i,t,a,u){for(;a<u;){const p=i[a+u>>1];let g=a-1,_=u+1;for(;;){do g++;while(i[g]<p);do _--;while(i[_]>p);if(g>=_)break;Wo(i,g,_),Wo(t,3*g,3*_),Wo(t,3*g+1,3*_+1),Wo(t,3*g+2,3*_+2)}_-a<u-_?(mc(i,t,a,_),a=_+1):(mc(i,t,_+1,u),u=_)}}function Wo(i,t,a){const u=i[t];i[t]=i[a],i[a]=u}nt("FeaturePositionMap",ts);class ba{constructor(t,a){this.gl=t.gl,this.location=a}}class wa extends ba{constructor(t,a){super(t,a),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))}}class Jl extends ba{constructor(t,a){super(t,a),this.current=[0,0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))}}class K0 extends ba{constructor(t,a){super(t,a),this.current=$.transparent}set(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))}}const I2=new Float32Array(16);function tm(i){return[Zt(255*i.r,255*i.g),Zt(255*i.b,255*i.a)]}class gc{constructor(t,a,u){this.value=t,this.uniformNames=a.map(p=>`u_${p}`),this.type=u}setUniform(t,a,u){t.set(u.constantOr(this.value))}getBinding(t,a,u){return this.type==="color"?new K0(t,a):new wa(t,a)}}class Ql{constructor(t,a){this.uniformNames=a.map(u=>`u_${u}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(t,a){this.pixelRatioFrom=a.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=a.tlbr,this.patternTo=t.tlbr}setUniform(t,a,u,p){const g=p==="u_pattern_to"?this.patternTo:p==="u_pattern_from"?this.patternFrom:p==="u_pixel_ratio_to"?this.pixelRatioTo:p==="u_pixel_ratio_from"?this.pixelRatioFrom:null;g&&t.set(g)}getBinding(t,a,u){return u.substr(0,9)==="u_pattern"?new Jl(t,a):new wa(t,a)}}class Sa{constructor(t,a,u,p){this.expression=t,this.type=u,this.maxValue=0,this.paintVertexAttributes=a.map(g=>({name:`a_${g}`,type:"Float32",components:u==="color"?2:1,offset:0})),this.paintVertexArray=new p}populatePaintArray(t,a,u,p,g){const _=this.paintVertexArray.length,b=this.expression.evaluate(new _r(0),a,{},p,[],g);this.paintVertexArray.resize(t),this._setPaintValue(_,t,b)}updatePaintArray(t,a,u,p){const g=this.expression.evaluate({zoom:0},u,p);this._setPaintValue(t,a,g)}_setPaintValue(t,a,u){if(this.type==="color"){const p=tm(u);for(let g=t;g<a;g++)this.paintVertexArray.emplace(g,p[0],p[1])}else{for(let p=t;p<a;p++)this.paintVertexArray.emplace(p,u);this.maxValue=Math.max(this.maxValue,Math.abs(u))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class go{constructor(t,a,u,p,g,_){this.expression=t,this.uniformNames=a.map(b=>`u_${b}_t`),this.type=u,this.useIntegerZoom=p,this.zoom=g,this.maxValue=0,this.paintVertexAttributes=a.map(b=>({name:`a_${b}`,type:"Float32",components:u==="color"?4:2,offset:0})),this.paintVertexArray=new _}populatePaintArray(t,a,u,p,g){const _=this.expression.evaluate(new _r(this.zoom),a,{},p,[],g),b=this.expression.evaluate(new _r(this.zoom+1),a,{},p,[],g),w=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(w,t,_,b)}updatePaintArray(t,a,u,p){const g=this.expression.evaluate({zoom:this.zoom},u,p),_=this.expression.evaluate({zoom:this.zoom+1},u,p);this._setPaintValue(t,a,g,_)}_setPaintValue(t,a,u,p){if(this.type==="color"){const g=tm(u),_=tm(p);for(let b=t;b<a;b++)this.paintVertexArray.emplace(b,g[0],g[1],_[0],_[1])}else{for(let g=t;g<a;g++)this.paintVertexArray.emplace(g,u,p);this.maxValue=Math.max(this.maxValue,Math.abs(u),Math.abs(p))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,a){const u=this.useIntegerZoom?Math.floor(a.zoom):a.zoom,p=U(this.expression.interpolationFactor(u,this.zoom,this.zoom+1),0,1);t.set(p)}getBinding(t,a,u){return new wa(t,a)}}class rs{constructor(t,a,u,p,g,_){this.expression=t,this.type=a,this.useIntegerZoom=u,this.zoom=p,this.layerId=_,this.zoomInPaintVertexArray=new g,this.zoomOutPaintVertexArray=new g}populatePaintArray(t,a,u){const p=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(p,t,a.patterns&&a.patterns[this.layerId],u)}updatePaintArray(t,a,u,p,g){this._setPaintValues(t,a,u.patterns&&u.patterns[this.layerId],g)}_setPaintValues(t,a,u,p){if(!p||!u)return;const{min:g,mid:_,max:b}=u,w=p[g],k=p[_],A=p[b];if(w&&k&&A)for(let P=t;P<a;P++)this.zoomInPaintVertexArray.emplace(P,k.tl[0],k.tl[1],k.br[0],k.br[1],w.tl[0],w.tl[1],w.br[0],w.br[1],k.pixelRatio,w.pixelRatio),this.zoomOutPaintVertexArray.emplace(P,k.tl[0],k.tl[1],k.br[0],k.br[1],A.tl[0],A.tl[1],A.br[0],A.br[1],k.pixelRatio,A.pixelRatio)}upload(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,on.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,on.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Y0{constructor(t,a,u){this.binders={},this._buffers=[];const p=[];for(const g in t.paint._values){if(!u(g))continue;const _=t.paint.get(g);if(!(_ instanceof Zi&&fr(_.property.specification)))continue;const b=A2(g,t.type),w=_.value,k=_.property.specification.type,A=_.property.useIntegerZoom,P=_.property.specification["property-type"],L=P==="cross-faded"||P==="cross-faded-data-driven";if(w.kind==="constant")this.binders[g]=L?new Ql(w.value,b):new gc(w.value,b,k),p.push(`/u_${g}`);else if(w.kind==="source"||L){const F=J0(g,k,"source");this.binders[g]=L?new rs(w,k,A,a,F,t.id):new Sa(w,b,k,F),p.push(`/a_${g}`)}else{const F=J0(g,k,"composite");this.binders[g]=new go(w,b,k,A,a,F),p.push(`/z_${g}`)}}this.cacheKey=p.sort().join("")}getMaxValue(t){const a=this.binders[t];return a instanceof Sa||a instanceof go?a.maxValue:0}populatePaintArrays(t,a,u,p,g){for(const _ in this.binders){const b=this.binders[_];(b instanceof Sa||b instanceof go||b instanceof rs)&&b.populatePaintArray(t,a,u,p,g)}}setConstantPatternPositions(t,a){for(const u in this.binders){const p=this.binders[u];p instanceof Ql&&p.setConstantPatternPositions(t,a)}}updatePaintArrays(t,a,u,p,g){let _=!1;for(const b in t){const w=a.getPositions(b);for(const k of w){const A=u.feature(k.index);for(const P in this.binders){const L=this.binders[P];if((L instanceof Sa||L instanceof go||L instanceof rs)&&L.expression.isStateDependent===!0){const F=p.paint.get(P);L.expression=F.value,L.updatePaintArray(k.start,k.end,A,t[b],g),_=!0}}}}return _}defines(){const t=[];for(const a in this.binders){const u=this.binders[a];(u instanceof gc||u instanceof Ql)&&t.push(...u.uniformNames.map(p=>`#define HAS_UNIFORM_${p}`))}return t}getBinderAttributes(){const t=[];for(const a in this.binders){const u=this.binders[a];if(u instanceof Sa||u instanceof go)for(let p=0;p<u.paintVertexAttributes.length;p++)t.push(u.paintVertexAttributes[p].name);else if(u instanceof rs)for(let p=0;p<on.members.length;p++)t.push(on.members[p].name)}return t}getBinderUniforms(){const t=[];for(const a in this.binders){const u=this.binders[a];if(u instanceof gc||u instanceof Ql||u instanceof go)for(const p of u.uniformNames)t.push(p)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t,a){const u=[];for(const p in this.binders){const g=this.binders[p];if(g instanceof gc||g instanceof Ql||g instanceof go){for(const _ of g.uniformNames)if(a[_]){const b=g.getBinding(t,a[_],_);u.push({name:_,property:p,binding:b})}}}return u}setUniforms(t,a,u,p){for(const{name:g,property:_,binding:b}of a)this.binders[_].setUniform(b,p,u.get(_),g)}updatePaintBuffers(t){this._buffers=[];for(const a in this.binders){const u=this.binders[a];if(t&&u instanceof rs){const p=t.fromScale===2?u.zoomInPaintVertexBuffer:u.zoomOutPaintVertexBuffer;p&&this._buffers.push(p)}else(u instanceof Sa||u instanceof go)&&u.paintVertexBuffer&&this._buffers.push(u.paintVertexBuffer)}}upload(t){for(const a in this.binders){const u=this.binders[a];(u instanceof Sa||u instanceof go||u instanceof rs)&&u.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const a=this.binders[t];(a instanceof Sa||a instanceof go||a instanceof rs)&&a.destroy()}}}class sl{constructor(t,a,u=()=>!0){this.programConfigurations={};for(const p of t)this.programConfigurations[p.id]=new Y0(p,a,u);this.needsUpload=!1,this._featureMap=new ts,this._bufferOffset=0}populatePaintArrays(t,a,u,p,g,_){for(const b in this.programConfigurations)this.programConfigurations[b].populatePaintArrays(t,a,p,g,_);a.id!==void 0&&this._featureMap.add(a.id,u,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,a,u,p){for(const g of u)this.needsUpload=this.programConfigurations[g.id].updatePaintArrays(t,this._featureMap,a,g,p)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const a in this.programConfigurations)this.programConfigurations[a].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}function A2(i,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[i]||[i.replace(`${t}-`,"").replace(/-/g,"_")]}function J0(i,t,a){const u={color:{source:h,composite:ye},number:{source:W,composite:h}},p=function(g){return{"line-pattern":{source:nn,composite:nn},"fill-pattern":{source:nn,composite:nn},"fill-extrusion-pattern":{source:nn,composite:nn}}[g]}(i);return p&&p[a]||u[t][a]}nt("ConstantBinder",gc),nt("CrossFadedConstantBinder",Ql),nt("SourceExpressionBinder",Sa),nt("CrossFadedCompositeBinder",rs),nt("CompositeExpressionBinder",go),nt("ProgramConfiguration",Y0,{omit:["_buffers"]}),nt("ProgramConfigurationSet",sl);var Yr=8192;const rm=Math.pow(2,14)-1,Q0=-rm-1;function ll(i){const t=Yr/i.extent,a=i.loadGeometry();for(let u=0;u<a.length;u++){const p=a[u];for(let g=0;g<p.length;g++){const _=p[g],b=Math.round(_.x*t),w=Math.round(_.y*t);_.x=U(b,Q0,rm),_.y=U(w,Q0,rm),(b<_.x||b>_.x+1||w<_.y||w>_.y+1)&&Ne("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return a}function ul(i,t){return{type:i.type,id:i.id,properties:i.properties,geometry:t?ll(i):[]}}function xd(i,t,a,u,p){i.emplaceBack(2*t+(u+1)/2,2*a+(p+1)/2)}class nm{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(a=>a.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Yt,this.indexArray=new qn,this.segments=new At,this.programConfigurations=new sl(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(t,a,u){const p=this.layers[0],g=[];let _=null,b=!1;p.type==="circle"&&(_=p.layout.get("circle-sort-key"),b=!_.isConstant());for(const{feature:w,id:k,index:A,sourceLayerIndex:P}of t){const L=this.layers[0]._featureFilter.needGeometry,F=ul(w,L);if(!this.layers[0]._featureFilter.filter(new _r(this.zoom),F,u))continue;const O=b?_.evaluate(F,{},u):void 0,Y={id:k,properties:w.properties,type:w.type,sourceLayerIndex:P,index:A,geometry:L?F.geometry:ll(w),patterns:{},sortKey:O};g.push(Y)}b&&g.sort((w,k)=>w.sortKey-k.sortKey);for(const w of g){const{geometry:k,index:A,sourceLayerIndex:P}=w,L=t[A].feature;this.addFeature(w,k,A,u),a.featureIndex.insert(L,k,A,P,this.index)}}update(t,a,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,a,this.stateDependentLayers,u)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Kr),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,a,u,p){for(const g of a)for(const _ of g){const b=_.x,w=_.y;if(b<0||b>=Yr||w<0||w>=Yr)continue;const k=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),A=k.vertexLength;xd(this.layoutVertexArray,b,w,-1,-1),xd(this.layoutVertexArray,b,w,1,-1),xd(this.layoutVertexArray,b,w,1,1),xd(this.layoutVertexArray,b,w,-1,1),this.indexArray.emplaceBack(A,A+1,A+2),this.indexArray.emplaceBack(A,A+3,A+2),k.vertexLength+=4,k.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,u,{},p)}}function e_(i,t){for(let a=0;a<i.length;a++)if(eu(t,i[a]))return!0;for(let a=0;a<t.length;a++)if(eu(i,t[a]))return!0;return!!im(i,t)}function z2(i,t,a){return!!eu(i,t)||!!om(t,i,a)}function t_(i,t){if(i.length===1)return n_(t,i[0]);for(let a=0;a<t.length;a++){const u=t[a];for(let p=0;p<u.length;p++)if(eu(i,u[p]))return!0}for(let a=0;a<i.length;a++)if(n_(t,i[a]))return!0;for(let a=0;a<t.length;a++)if(im(i,t[a]))return!0;return!1}function P2(i,t,a){if(i.length>1){if(im(i,t))return!0;for(let u=0;u<t.length;u++)if(om(t[u],i,a))return!0}for(let u=0;u<i.length;u++)if(om(i[u],t,a))return!0;return!1}function im(i,t){if(i.length===0||t.length===0)return!1;for(let a=0;a<i.length-1;a++){const u=i[a],p=i[a+1];for(let g=0;g<t.length-1;g++)if(M2(u,p,t[g],t[g+1]))return!0}return!1}function M2(i,t,a,u){return Re(i,a,u)!==Re(t,a,u)&&Re(i,t,a)!==Re(i,t,u)}function om(i,t,a){const u=a*a;if(t.length===1)return i.distSqr(t[0])<u;for(let p=1;p<t.length;p++)if(r_(i,t[p-1],t[p])<u)return!0;return!1}function r_(i,t,a){const u=t.distSqr(a);if(u===0)return i.distSqr(t);const p=((i.x-t.x)*(a.x-t.x)+(i.y-t.y)*(a.y-t.y))/u;return i.distSqr(p<0?t:p>1?a:a.sub(t)._mult(p)._add(t))}function n_(i,t){let a,u,p,g=!1;for(let _=0;_<i.length;_++){a=i[_];for(let b=0,w=a.length-1;b<a.length;w=b++)u=a[b],p=a[w],u.y>t.y!=p.y>t.y&&t.x<(p.x-u.x)*(t.y-u.y)/(p.y-u.y)+u.x&&(g=!g)}return g}function eu(i,t){let a=!1;for(let u=0,p=i.length-1;u<i.length;p=u++){const g=i[u],_=i[p];g.y>t.y!=_.y>t.y&&t.x<(_.x-g.x)*(t.y-g.y)/(_.y-g.y)+g.x&&(a=!a)}return a}function D2(i,t,a){const u=a[0],p=a[2];if(i.x<u.x&&t.x<u.x||i.x>p.x&&t.x>p.x||i.y<u.y&&t.y<u.y||i.y>p.y&&t.y>p.y)return!1;const g=Re(i,t,a[0]);return g!==Re(i,t,a[1])||g!==Re(i,t,a[2])||g!==Re(i,t,a[3])}function yc(i,t,a){const u=t.paint.get(i).value;return u.kind==="constant"?u.value:a.programConfigurations.get(t.id).getMaxValue(i)}function bd(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function wd(i,t,a,u,p){if(!t[0]&&!t[1])return i;const g=dt.convert(t)._mult(p);a==="viewport"&&g._rotate(-u);const _=[];for(let b=0;b<i.length;b++)_.push(i[b].sub(g));return _}nt("CircleBucket",nm,{omit:["layers"]});const R2=new dn({"circle-sort-key":new yt(ke.layout_circle["circle-sort-key"])});var L2={paint:new dn({"circle-radius":new yt(ke.paint_circle["circle-radius"]),"circle-color":new yt(ke.paint_circle["circle-color"]),"circle-blur":new yt(ke.paint_circle["circle-blur"]),"circle-opacity":new yt(ke.paint_circle["circle-opacity"]),"circle-translate":new ut(ke.paint_circle["circle-translate"]),"circle-translate-anchor":new ut(ke.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ut(ke.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ut(ke.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new yt(ke.paint_circle["circle-stroke-width"]),"circle-stroke-color":new yt(ke.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new yt(ke.paint_circle["circle-stroke-opacity"])}),layout:R2},Zn=1e-6,Hn=typeof Float32Array!="undefined"?Float32Array:Array;function i_(){var i=new Hn(9);return Hn!=Float32Array&&(i[1]=0,i[2]=0,i[3]=0,i[5]=0,i[6]=0,i[7]=0),i[0]=1,i[4]=1,i[8]=1,i}function am(i){return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function o_(i,t,a){var u=t[0],p=t[1],g=t[2],_=t[3],b=t[4],w=t[5],k=t[6],A=t[7],P=t[8],L=t[9],F=t[10],O=t[11],Y=t[12],K=t[13],de=t[14],ve=t[15],ce=a[0],ge=a[1],Pe=a[2],ze=a[3];return i[0]=ce*u+ge*b+Pe*P+ze*Y,i[1]=ce*p+ge*w+Pe*L+ze*K,i[2]=ce*g+ge*k+Pe*F+ze*de,i[3]=ce*_+ge*A+Pe*O+ze*ve,i[4]=(ce=a[4])*u+(ge=a[5])*b+(Pe=a[6])*P+(ze=a[7])*Y,i[5]=ce*p+ge*w+Pe*L+ze*K,i[6]=ce*g+ge*k+Pe*F+ze*de,i[7]=ce*_+ge*A+Pe*O+ze*ve,i[8]=(ce=a[8])*u+(ge=a[9])*b+(Pe=a[10])*P+(ze=a[11])*Y,i[9]=ce*p+ge*w+Pe*L+ze*K,i[10]=ce*g+ge*k+Pe*F+ze*de,i[11]=ce*_+ge*A+Pe*O+ze*ve,i[12]=(ce=a[12])*u+(ge=a[13])*b+(Pe=a[14])*P+(ze=a[15])*Y,i[13]=ce*p+ge*w+Pe*L+ze*K,i[14]=ce*g+ge*k+Pe*F+ze*de,i[15]=ce*_+ge*A+Pe*O+ze*ve,i}Math.hypot||(Math.hypot=function(){for(var i=0,t=arguments.length;t--;)i+=arguments[t]*arguments[t];return Math.sqrt(i)});var _c,B2=o_;function a_(){var i=new Hn(3);return Hn!=Float32Array&&(i[0]=0,i[1]=0,i[2]=0),i}function s_(i,t,a){var u=new Hn(3);return u[0]=i,u[1]=t,u[2]=a,u}function Sd(i,t,a){var u=t[0],p=t[1],g=t[2],_=t[3];return i[0]=a[0]*u+a[4]*p+a[8]*g+a[12]*_,i[1]=a[1]*u+a[5]*p+a[9]*g+a[13]*_,i[2]=a[2]*u+a[6]*p+a[10]*g+a[14]*_,i[3]=a[3]*u+a[7]*p+a[11]*g+a[15]*_,i}function l_(){var i=new Hn(4);return Hn!=Float32Array&&(i[0]=0,i[1]=0,i[2]=0),i[3]=1,i}function u_(i,t){const a=Sd([],[i.x,i.y,0,1],t);return new dt(a[0]/a[3],a[1]/a[3])}a_(),_c=new Hn(4),Hn!=Float32Array&&(_c[0]=0,_c[1]=0,_c[2]=0,_c[3]=0),a_(),s_(1,0,0),s_(0,1,0),l_(),l_(),i_(),function(){var i;i=new Hn(2),Hn!=Float32Array&&(i[0]=0,i[1]=0)}();class c_ extends nm{}nt("HeatmapBucket",c_,{omit:["layers"]});var F2={paint:new dn({"heatmap-radius":new yt(ke.paint_heatmap["heatmap-radius"]),"heatmap-weight":new yt(ke.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ut(ke.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Uo(ke.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ut(ke.paint_heatmap["heatmap-opacity"])})};function sm(i,{width:t,height:a},u,p){if(p){if(p instanceof Uint8ClampedArray)p=new Uint8Array(p.buffer);else if(p.length!==t*a*u)throw new RangeError(`mismatched image size. expected: ${p.length} but got: ${t*a*u}`)}else p=new Uint8Array(t*a*u);return i.width=t,i.height=a,i.data=p,i}function h_(i,{width:t,height:a},u){if(t===i.width&&a===i.height)return;const p=sm({},{width:t,height:a},u);lm(i,p,{x:0,y:0},{x:0,y:0},{width:Math.min(i.width,t),height:Math.min(i.height,a)},u),i.width=t,i.height=a,i.data=p.data}function lm(i,t,a,u,p,g){if(p.width===0||p.height===0)return t;if(p.width>i.width||p.height>i.height||a.x>i.width-p.width||a.y>i.height-p.height)throw new RangeError("out of range source coordinates for image copy");if(p.width>t.width||p.height>t.height||u.x>t.width-p.width||u.y>t.height-p.height)throw new RangeError("out of range destination coordinates for image copy");const _=i.data,b=t.data;if(_===b)throw new Error("srcData equals dstData, so image is already copied");for(let w=0;w<p.height;w++){const k=((a.y+w)*i.width+a.x)*g,A=((u.y+w)*t.width+u.x)*g;for(let P=0;P<p.width*g;P++)b[A+P]=_[k+P]}return t}class vc{constructor(t,a){sm(this,t,1,a)}resize(t){h_(this,t,1)}clone(){return new vc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,a,u,p,g){lm(t,a,u,p,g,1)}}class Mi{constructor(t,a){sm(this,t,4,a)}resize(t){h_(this,t,4)}replace(t,a){a?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new Mi({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,a,u,p,g){lm(t,a,u,p,g,4)}}function d_(i){const t={},a=i.resolution||256,u=i.clips?i.clips.length:1,p=i.image||new Mi({width:a,height:u});if(Math.log(a)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${a}`);const g=(_,b,w)=>{t[i.evaluationKey]=w;const k=i.expression.evaluate(t);p.data[_+b+0]=Math.floor(255*k.r/k.a),p.data[_+b+1]=Math.floor(255*k.g/k.a),p.data[_+b+2]=Math.floor(255*k.b/k.a),p.data[_+b+3]=Math.floor(255*k.a)};if(i.clips)for(let _=0,b=0;_<u;++_,b+=4*a)for(let w=0,k=0;w<a;w++,k+=4){const A=w/(a-1),{start:P,end:L}=i.clips[_];g(b,k,P*(1-A)+L*A)}else for(let _=0,b=0;_<a;_++,b+=4)g(0,b,_/(a-1));return p}nt("AlphaImage",vc),nt("RGBAImage",Mi);var O2={paint:new dn({"hillshade-illumination-direction":new ut(ke.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new ut(ke.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ut(ke.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ut(ke.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ut(ke.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ut(ke.paint_hillshade["hillshade-accent-color"])})};const N2=jr([{name:"a_pos",components:2,type:"Int16"}],4),{members:$2}=N2;var Td={exports:{}};function Ed(i,t,a){a=a||2;var u,p,g,_,b,w,k,A=t&&t.length,P=A?t[0]*a:i.length,L=p_(i,0,P,a,!0),F=[];if(!L||L.next===L.prev)return F;if(A&&(L=function(Y,K,de,ve){var ce,ge,Pe,ze=[];for(ce=0,ge=K.length;ce<ge;ce++)(Pe=p_(Y,K[ce]*ve,ce<ge-1?K[ce+1]*ve:Y.length,ve,!1))===Pe.next&&(Pe.steiner=!0),ze.push(H2(Pe));for(ze.sort(W2),ce=0;ce<ze.length;ce++)de=q2(ze[ce],de);return de}(i,t,L,a)),i.length>80*a){u=g=i[0],p=_=i[1];for(var O=a;O<P;O+=a)(b=i[O])<u&&(u=b),(w=i[O+1])<p&&(p=w),b>g&&(g=b),w>_&&(_=w);k=(k=Math.max(g-u,_-p))!==0?32767/k:0}return xc(L,F,a,u,p,k,0),F}function p_(i,t,a,u,p){var g,_;if(p===hm(i,t,a,u)>0)for(g=t;g<a;g+=u)_=g_(g,i[g],i[g+1],_);else for(g=a-u;g>=t;g-=u)_=g_(g,i[g],i[g+1],_);return _&&kd(_,_.next)&&(wc(_),_=_.next),_}function cl(i,t){if(!i)return i;t||(t=i);var a,u=i;do if(a=!1,u.steiner||!kd(u,u.next)&&Or(u.prev,u,u.next)!==0)u=u.next;else{if(wc(u),(u=t=u.prev)===u.next)break;a=!0}while(a||u!==t);return t}function xc(i,t,a,u,p,g,_){if(i){!_&&g&&function(A,P,L,F){var O=A;do O.z===0&&(O.z=um(O.x,O.y,P,L,F)),O.prevZ=O.prev,O.nextZ=O.next,O=O.next;while(O!==A);O.prevZ.nextZ=null,O.prevZ=null,function(Y){var K,de,ve,ce,ge,Pe,ze,tt,lt=1;do{for(de=Y,Y=null,ge=null,Pe=0;de;){for(Pe++,ve=de,ze=0,K=0;K<lt&&(ze++,ve=ve.nextZ);K++);for(tt=lt;ze>0||tt>0&&ve;)ze!==0&&(tt===0||!ve||de.z<=ve.z)?(ce=de,de=de.nextZ,ze--):(ce=ve,ve=ve.nextZ,tt--),ge?ge.nextZ=ce:Y=ce,ce.prevZ=ge,ge=ce;de=ve}ge.nextZ=null,lt*=2}while(Pe>1)}(O)}(i,u,p,g);for(var b,w,k=i;i.prev!==i.next;)if(b=i.prev,w=i.next,g?V2(i,u,p,g):U2(i))t.push(b.i/a|0),t.push(i.i/a|0),t.push(w.i/a|0),wc(i),i=w.next,k=w.next;else if((i=w)===k){_?_===1?xc(i=j2(cl(i),t,a),t,a,u,p,g,2):_===2&&G2(i,t,a,u,p,g):xc(cl(i),t,a,u,p,g,1);break}}}function U2(i){var t=i.prev,a=i,u=i.next;if(Or(t,a,u)>=0)return!1;for(var p=t.x,g=a.x,_=u.x,b=t.y,w=a.y,k=u.y,A=p<g?p<_?p:_:g<_?g:_,P=b<w?b<k?b:k:w<k?w:k,L=p>g?p>_?p:_:g>_?g:_,F=b>w?b>k?b:k:w>k?w:k,O=u.next;O!==t;){if(O.x>=A&&O.x<=L&&O.y>=P&&O.y<=F&&tu(p,b,g,w,_,k,O.x,O.y)&&Or(O.prev,O,O.next)>=0)return!1;O=O.next}return!0}function V2(i,t,a,u){var p=i.prev,g=i,_=i.next;if(Or(p,g,_)>=0)return!1;for(var b=p.x,w=g.x,k=_.x,A=p.y,P=g.y,L=_.y,F=b<w?b<k?b:k:w<k?w:k,O=A<P?A<L?A:L:P<L?P:L,Y=b>w?b>k?b:k:w>k?w:k,K=A>P?A>L?A:L:P>L?P:L,de=um(F,O,t,a,u),ve=um(Y,K,t,a,u),ce=i.prevZ,ge=i.nextZ;ce&&ce.z>=de&&ge&&ge.z<=ve;){if(ce.x>=F&&ce.x<=Y&&ce.y>=O&&ce.y<=K&&ce!==p&&ce!==_&&tu(b,A,w,P,k,L,ce.x,ce.y)&&Or(ce.prev,ce,ce.next)>=0||(ce=ce.prevZ,ge.x>=F&&ge.x<=Y&&ge.y>=O&&ge.y<=K&&ge!==p&&ge!==_&&tu(b,A,w,P,k,L,ge.x,ge.y)&&Or(ge.prev,ge,ge.next)>=0))return!1;ge=ge.nextZ}for(;ce&&ce.z>=de;){if(ce.x>=F&&ce.x<=Y&&ce.y>=O&&ce.y<=K&&ce!==p&&ce!==_&&tu(b,A,w,P,k,L,ce.x,ce.y)&&Or(ce.prev,ce,ce.next)>=0)return!1;ce=ce.prevZ}for(;ge&&ge.z<=ve;){if(ge.x>=F&&ge.x<=Y&&ge.y>=O&&ge.y<=K&&ge!==p&&ge!==_&&tu(b,A,w,P,k,L,ge.x,ge.y)&&Or(ge.prev,ge,ge.next)>=0)return!1;ge=ge.nextZ}return!0}function j2(i,t,a){var u=i;do{var p=u.prev,g=u.next.next;!kd(p,g)&&f_(p,u,u.next,g)&&bc(p,g)&&bc(g,p)&&(t.push(p.i/a|0),t.push(u.i/a|0),t.push(g.i/a|0),wc(u),wc(u.next),u=i=g),u=u.next}while(u!==i);return cl(u)}function G2(i,t,a,u,p,g){var _=i;do{for(var b=_.next.next;b!==_.prev;){if(_.i!==b.i&&X2(_,b)){var w=m_(_,b);return _=cl(_,_.next),w=cl(w,w.next),xc(_,t,a,u,p,g,0),void xc(w,t,a,u,p,g,0)}b=b.next}_=_.next}while(_!==i)}function W2(i,t){return i.x-t.x}function q2(i,t){var a=function(p,g){var _,b=g,w=p.x,k=p.y,A=-1/0;do{if(k<=b.y&&k>=b.next.y&&b.next.y!==b.y){var P=b.x+(k-b.y)*(b.next.x-b.x)/(b.next.y-b.y);if(P<=w&&P>A&&(A=P,_=b.x<b.next.x?b:b.next,P===w))return _}b=b.next}while(b!==g);if(!_)return null;var L,F=_,O=_.x,Y=_.y,K=1/0;b=_;do w>=b.x&&b.x>=O&&w!==b.x&&tu(k<Y?w:A,k,O,Y,k<Y?A:w,k,b.x,b.y)&&(L=Math.abs(k-b.y)/(w-b.x),bc(b,p)&&(L<K||L===K&&(b.x>_.x||b.x===_.x&&Z2(_,b)))&&(_=b,K=L)),b=b.next;while(b!==F);return _}(i,t);if(!a)return t;var u=m_(a,i);return cl(u,u.next),cl(a,a.next)}function Z2(i,t){return Or(i.prev,i,t.prev)<0&&Or(t.next,i,i.next)<0}function um(i,t,a,u,p){return(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-a)*p|0)|i<<8))|i<<4))|i<<2))|i<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-u)*p|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function H2(i){var t=i,a=i;do(t.x<a.x||t.x===a.x&&t.y<a.y)&&(a=t),t=t.next;while(t!==i);return a}function tu(i,t,a,u,p,g,_,b){return(p-_)*(t-b)>=(i-_)*(g-b)&&(i-_)*(u-b)>=(a-_)*(t-b)&&(a-_)*(g-b)>=(p-_)*(u-b)}function X2(i,t){return i.next.i!==t.i&&i.prev.i!==t.i&&!function(a,u){var p=a;do{if(p.i!==a.i&&p.next.i!==a.i&&p.i!==u.i&&p.next.i!==u.i&&f_(p,p.next,a,u))return!0;p=p.next}while(p!==a);return!1}(i,t)&&(bc(i,t)&&bc(t,i)&&function(a,u){var p=a,g=!1,_=(a.x+u.x)/2,b=(a.y+u.y)/2;do p.y>b!=p.next.y>b&&p.next.y!==p.y&&_<(p.next.x-p.x)*(b-p.y)/(p.next.y-p.y)+p.x&&(g=!g),p=p.next;while(p!==a);return g}(i,t)&&(Or(i.prev,i,t.prev)||Or(i,t.prev,t))||kd(i,t)&&Or(i.prev,i,i.next)>0&&Or(t.prev,t,t.next)>0)}function Or(i,t,a){return(t.y-i.y)*(a.x-t.x)-(t.x-i.x)*(a.y-t.y)}function kd(i,t){return i.x===t.x&&i.y===t.y}function f_(i,t,a,u){var p=Id(Or(i,t,a)),g=Id(Or(i,t,u)),_=Id(Or(a,u,i)),b=Id(Or(a,u,t));return p!==g&&_!==b||!(p!==0||!Cd(i,a,t))||!(g!==0||!Cd(i,u,t))||!(_!==0||!Cd(a,i,u))||!(b!==0||!Cd(a,t,u))}function Cd(i,t,a){return t.x<=Math.max(i.x,a.x)&&t.x>=Math.min(i.x,a.x)&&t.y<=Math.max(i.y,a.y)&&t.y>=Math.min(i.y,a.y)}function Id(i){return i>0?1:i<0?-1:0}function bc(i,t){return Or(i.prev,i,i.next)<0?Or(i,t,i.next)>=0&&Or(i,i.prev,t)>=0:Or(i,t,i.prev)<0||Or(i,i.next,t)<0}function m_(i,t){var a=new cm(i.i,i.x,i.y),u=new cm(t.i,t.x,t.y),p=i.next,g=t.prev;return i.next=t,t.prev=i,a.next=p,p.prev=a,u.next=a,a.prev=u,g.next=u,u.prev=g,u}function g_(i,t,a,u){var p=new cm(i,t,a);return u?(p.next=u.next,p.prev=u,u.next.prev=p,u.next=p):(p.prev=p,p.next=p),p}function wc(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function cm(i,t,a){this.i=i,this.x=t,this.y=a,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function hm(i,t,a,u){for(var p=0,g=t,_=a-u;g<a;g+=u)p+=(i[_]-i[g])*(i[g+1]+i[_+1]),_=g;return p}function K2(i,t,a,u,p){y_(i,t,a||0,u||i.length-1,p||Y2)}function y_(i,t,a,u,p){for(;u>a;){if(u-a>600){var g=u-a+1,_=t-a+1,b=Math.log(g),w=.5*Math.exp(2*b/3),k=.5*Math.sqrt(b*w*(g-w)/g)*(_-g/2<0?-1:1);y_(i,t,Math.max(a,Math.floor(t-_*w/g+k)),Math.min(u,Math.floor(t+(g-_)*w/g+k)),p)}var A=i[t],P=a,L=u;for(Sc(i,a,t),p(i[u],A)>0&&Sc(i,a,u);P<L;){for(Sc(i,P,L),P++,L--;p(i[P],A)<0;)P++;for(;p(i[L],A)>0;)L--}p(i[a],A)===0?Sc(i,a,L):Sc(i,++L,u),L<=t&&(a=L+1),t<=L&&(u=L-1)}}function Sc(i,t,a){var u=i[t];i[t]=i[a],i[a]=u}function Y2(i,t){return i<t?-1:i>t?1:0}function dm(i,t){const a=i.length;if(a<=1)return[i];const u=[];let p,g;for(let _=0;_<a;_++){const b=Le(i[_]);b!==0&&(i[_].area=Math.abs(b),g===void 0&&(g=b<0),g===b<0?(p&&u.push(p),p=[i[_]]):p.push(i[_]))}if(p&&u.push(p),t>1)for(let _=0;_<u.length;_++)u[_].length<=t||(K2(u[_],t,1,u[_].length-1,J2),u[_]=u[_].slice(0,t));return u}function J2(i,t){return t.area-i.area}function pm(i,t,a){const u=a.patternDependencies;let p=!1;for(const g of t){const _=g.paint.get(`${i}-pattern`);_.isConstant()||(p=!0);const b=_.constantOr(null);b&&(p=!0,u[b.to]=!0,u[b.from]=!0)}return p}function fm(i,t,a,u,p){const g=p.patternDependencies;for(const _ of t){const b=_.paint.get(`${i}-pattern`).value;if(b.kind!=="constant"){let w=b.evaluate({zoom:u-1},a,{},p.availableImages),k=b.evaluate({zoom:u},a,{},p.availableImages),A=b.evaluate({zoom:u+1},a,{},p.availableImages);w=w&&w.name?w.name:w,k=k&&k.name?k.name:k,A=A&&A.name?A.name:A,g[w]=!0,g[k]=!0,g[A]=!0,a.patterns[_.id]={min:w,mid:k,max:A}}}return a}Td.exports=Ed,Td.exports.default=Ed,Ed.deviation=function(i,t,a,u){var p=t&&t.length,g=Math.abs(hm(i,0,p?t[0]*a:i.length,a));if(p)for(var _=0,b=t.length;_<b;_++)g-=Math.abs(hm(i,t[_]*a,_<b-1?t[_+1]*a:i.length,a));var w=0;for(_=0;_<u.length;_+=3){var k=u[_]*a,A=u[_+1]*a,P=u[_+2]*a;w+=Math.abs((i[k]-i[P])*(i[A+1]-i[k+1])-(i[k]-i[A])*(i[P+1]-i[k+1]))}return g===0&&w===0?0:Math.abs((w-g)/g)},Ed.flatten=function(i){for(var t=i[0][0].length,a={vertices:[],holes:[],dimensions:t},u=0,p=0;p<i.length;p++){for(var g=0;g<i[p].length;g++)for(var _=0;_<t;_++)a.vertices.push(i[p][g][_]);p>0&&a.holes.push(u+=i[p-1].length)}return a};class mm{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(a=>a.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Jt,this.indexArray=new qn,this.indexArray2=new mo,this.programConfigurations=new sl(t.layers,t.zoom),this.segments=new At,this.segments2=new At,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(t,a,u){this.hasPattern=pm("fill",this.layers,a);const p=this.layers[0].layout.get("fill-sort-key"),g=!p.isConstant(),_=[];for(const{feature:b,id:w,index:k,sourceLayerIndex:A}of t){const P=this.layers[0]._featureFilter.needGeometry,L=ul(b,P);if(!this.layers[0]._featureFilter.filter(new _r(this.zoom),L,u))continue;const F=g?p.evaluate(L,{},u,a.availableImages):void 0,O={id:w,properties:b.properties,type:b.type,sourceLayerIndex:A,index:k,geometry:P?L.geometry:ll(b),patterns:{},sortKey:F};_.push(O)}g&&_.sort((b,w)=>b.sortKey-w.sortKey);for(const b of _){const{geometry:w,index:k,sourceLayerIndex:A}=b;if(this.hasPattern){const P=fm("fill",this.layers,b,this.zoom,a);this.patternFeatures.push(P)}else this.addFeature(b,w,k,u,{});a.featureIndex.insert(t[k].feature,w,k,A,this.index)}}update(t,a,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,a,this.stateDependentLayers,u)}addFeatures(t,a,u){for(const p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,a,u)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,$2),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,a,u,p,g){for(const _ of dm(a,500)){let b=0;for(const F of _)b+=F.length;const w=this.segments.prepareSegment(b,this.layoutVertexArray,this.indexArray),k=w.vertexLength,A=[],P=[];for(const F of _){if(F.length===0)continue;F!==_[0]&&P.push(A.length/2);const O=this.segments2.prepareSegment(F.length,this.layoutVertexArray,this.indexArray2),Y=O.vertexLength;this.layoutVertexArray.emplaceBack(F[0].x,F[0].y),this.indexArray2.emplaceBack(Y+F.length-1,Y),A.push(F[0].x),A.push(F[0].y);for(let K=1;K<F.length;K++)this.layoutVertexArray.emplaceBack(F[K].x,F[K].y),this.indexArray2.emplaceBack(Y+K-1,Y+K),A.push(F[K].x),A.push(F[K].y);O.vertexLength+=F.length,O.primitiveLength+=F.length}const L=Td.exports(A,P);for(let F=0;F<L.length;F+=3)this.indexArray.emplaceBack(k+L[F],k+L[F+1],k+L[F+2]);w.vertexLength+=b,w.primitiveLength+=L.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,u,g,p)}}nt("FillBucket",mm,{omit:["layers","patternFeatures"]});const Q2=new dn({"fill-sort-key":new yt(ke.layout_fill["fill-sort-key"])});var eS={paint:new dn({"fill-antialias":new ut(ke.paint_fill["fill-antialias"]),"fill-opacity":new yt(ke.paint_fill["fill-opacity"]),"fill-color":new yt(ke.paint_fill["fill-color"]),"fill-outline-color":new yt(ke.paint_fill["fill-outline-color"]),"fill-translate":new ut(ke.paint_fill["fill-translate"]),"fill-translate-anchor":new ut(ke.paint_fill["fill-translate-anchor"]),"fill-pattern":new es(ke.paint_fill["fill-pattern"])}),layout:Q2};const tS=jr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),rS=jr([{name:"a_centroid",components:2,type:"Int16"}],4),{members:nS}=tS;var ns={},iS=dt,__=ru;function ru(i,t,a,u,p){this.properties={},this.extent=a,this.type=0,this._pbf=i,this._geometry=-1,this._keys=u,this._values=p,i.readFields(oS,this,t)}function oS(i,t,a){i==1?t.id=a.readVarint():i==2?function(u,p){for(var g=u.readVarint()+u.pos;u.pos<g;){var _=p._keys[u.readVarint()],b=p._values[u.readVarint()];p.properties[_]=b}}(a,t):i==3?t.type=a.readVarint():i==4&&(t._geometry=a.pos)}function aS(i){for(var t,a,u=0,p=0,g=i.length,_=g-1;p<g;_=p++)u+=((a=i[_]).x-(t=i[p]).x)*(t.y+a.y);return u}ru.types=["Unknown","Point","LineString","Polygon"],ru.prototype.loadGeometry=function(){var i=this._pbf;i.pos=this._geometry;for(var t,a=i.readVarint()+i.pos,u=1,p=0,g=0,_=0,b=[];i.pos<a;){if(p<=0){var w=i.readVarint();u=7&w,p=w>>3}if(p--,u===1||u===2)g+=i.readSVarint(),_+=i.readSVarint(),u===1&&(t&&b.push(t),t=[]),t.push(new iS(g,_));else{if(u!==7)throw new Error("unknown command "+u);t&&t.push(t[0].clone())}}return t&&b.push(t),b},ru.prototype.bbox=function(){var i=this._pbf;i.pos=this._geometry;for(var t=i.readVarint()+i.pos,a=1,u=0,p=0,g=0,_=1/0,b=-1/0,w=1/0,k=-1/0;i.pos<t;){if(u<=0){var A=i.readVarint();a=7&A,u=A>>3}if(u--,a===1||a===2)(p+=i.readSVarint())<_&&(_=p),p>b&&(b=p),(g+=i.readSVarint())<w&&(w=g),g>k&&(k=g);else if(a!==7)throw new Error("unknown command "+a)}return[_,w,b,k]},ru.prototype.toGeoJSON=function(i,t,a){var u,p,g=this.extent*Math.pow(2,a),_=this.extent*i,b=this.extent*t,w=this.loadGeometry(),k=ru.types[this.type];function A(F){for(var O=0;O<F.length;O++){var Y=F[O];F[O]=[360*(Y.x+_)/g-180,360/Math.PI*Math.atan(Math.exp((180-360*(Y.y+b)/g)*Math.PI/180))-90]}}switch(this.type){case 1:var P=[];for(u=0;u<w.length;u++)P[u]=w[u][0];A(w=P);break;case 2:for(u=0;u<w.length;u++)A(w[u]);break;case 3:for(w=function(F){var O=F.length;if(O<=1)return[F];for(var Y,K,de=[],ve=0;ve<O;ve++){var ce=aS(F[ve]);ce!==0&&(K===void 0&&(K=ce<0),K===ce<0?(Y&&de.push(Y),Y=[F[ve]]):Y.push(F[ve]))}return Y&&de.push(Y),de}(w),u=0;u<w.length;u++)for(p=0;p<w[u].length;p++)A(w[u][p])}w.length===1?w=w[0]:k="Multi"+k;var L={type:"Feature",geometry:{type:k,coordinates:w},properties:this.properties};return"id"in this&&(L.id=this.id),L};var sS=__,v_=x_;function x_(i,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=i,this._keys=[],this._values=[],this._features=[],i.readFields(lS,this,t),this.length=this._features.length}function lS(i,t,a){i===15?t.version=a.readVarint():i===1?t.name=a.readString():i===5?t.extent=a.readVarint():i===2?t._features.push(a.pos):i===3?t._keys.push(a.readString()):i===4&&t._values.push(function(u){for(var p=null,g=u.readVarint()+u.pos;u.pos<g;){var _=u.readVarint()>>3;p=_===1?u.readString():_===2?u.readFloat():_===3?u.readDouble():_===4?u.readVarint64():_===5?u.readVarint():_===6?u.readSVarint():_===7?u.readBoolean():null}return p}(a))}x_.prototype.feature=function(i){if(i<0||i>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[i];var t=this._pbf.readVarint()+this._pbf.pos;return new sS(this._pbf,t,this.extent,this._keys,this._values)};var uS=v_;function cS(i,t,a){if(i===3){var u=new uS(a,a.readVarint()+a.pos);u.length&&(t[u.name]=u)}}ns.VectorTile=function(i,t){this.layers=i.readFields(cS,{},t)},ns.VectorTileFeature=__,ns.VectorTileLayer=v_;const hS=ns.VectorTileFeature.types,gm=Math.pow(2,13);function Tc(i,t,a,u,p,g,_,b){i.emplaceBack(t,a,2*Math.floor(u*gm)+_,p*gm*2,g*gm*2,Math.round(b))}class ym{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(a=>a.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Ot,this.centroidVertexArray=new ft,this.indexArray=new qn,this.programConfigurations=new sl(t.layers,t.zoom),this.segments=new At,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(t,a,u){this.features=[],this.hasPattern=pm("fill-extrusion",this.layers,a);for(const{feature:p,id:g,index:_,sourceLayerIndex:b}of t){const w=this.layers[0]._featureFilter.needGeometry,k=ul(p,w);if(!this.layers[0]._featureFilter.filter(new _r(this.zoom),k,u))continue;const A={id:g,sourceLayerIndex:b,index:_,geometry:w?k.geometry:ll(p),properties:p.properties,type:p.type,patterns:{}};this.hasPattern?this.features.push(fm("fill-extrusion",this.layers,A,this.zoom,a)):this.addFeature(A,A.geometry,_,u,{}),a.featureIndex.insert(p,A.geometry,_,b,this.index,!0)}}addFeatures(t,a,u){for(const p of this.features){const{geometry:g}=p;this.addFeature(p,g,p.index,a,u)}}update(t,a,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,a,this.stateDependentLayers,u)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,nS),this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,rS.members,!0),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(t,a,u,p,g){const _={x:0,y:0,vertexCount:0};for(const b of dm(a,500)){let w=0;for(const O of b)w+=O.length;let k=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const O of b){if(O.length===0||pS(O))continue;let Y=0;for(let K=0;K<O.length;K++){const de=O[K];if(K>=1){const ve=O[K-1];if(!dS(de,ve)){k.vertexLength+4>At.MAX_VERTEX_ARRAY_LENGTH&&(k=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const ce=de.sub(ve)._perp()._unit(),ge=ve.dist(de);Y+ge>32768&&(Y=0),Tc(this.layoutVertexArray,de.x,de.y,ce.x,ce.y,0,0,Y),Tc(this.layoutVertexArray,de.x,de.y,ce.x,ce.y,0,1,Y),_.x+=2*de.x,_.y+=2*de.y,_.vertexCount+=2,Y+=ge,Tc(this.layoutVertexArray,ve.x,ve.y,ce.x,ce.y,0,0,Y),Tc(this.layoutVertexArray,ve.x,ve.y,ce.x,ce.y,0,1,Y),_.x+=2*ve.x,_.y+=2*ve.y,_.vertexCount+=2;const Pe=k.vertexLength;this.indexArray.emplaceBack(Pe,Pe+2,Pe+1),this.indexArray.emplaceBack(Pe+1,Pe+2,Pe+3),k.vertexLength+=4,k.primitiveLength+=2}}}}if(k.vertexLength+w>At.MAX_VERTEX_ARRAY_LENGTH&&(k=this.segments.prepareSegment(w,this.layoutVertexArray,this.indexArray)),hS[t.type]!=="Polygon")continue;const A=[],P=[],L=k.vertexLength;for(const O of b)if(O.length!==0){O!==b[0]&&P.push(A.length/2);for(let Y=0;Y<O.length;Y++){const K=O[Y];Tc(this.layoutVertexArray,K.x,K.y,0,0,1,1,0),_.x+=K.x,_.y+=K.y,_.vertexCount+=1,A.push(K.x),A.push(K.y)}}const F=Td.exports(A,P);for(let O=0;O<F.length;O+=3)this.indexArray.emplaceBack(L+F[O],L+F[O+2],L+F[O+1]);k.primitiveLength+=F.length/3,k.vertexLength+=w}for(let b=0;b<_.vertexCount;b++)this.centroidVertexArray.emplaceBack(Math.floor(_.x/_.vertexCount),Math.floor(_.y/_.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,u,g,p)}}function dS(i,t){return i.x===t.x&&(i.x<0||i.x>Yr)||i.y===t.y&&(i.y<0||i.y>Yr)}function pS(i){return i.every(t=>t.x<0)||i.every(t=>t.x>Yr)||i.every(t=>t.y<0)||i.every(t=>t.y>Yr)}nt("FillExtrusionBucket",ym,{omit:["layers","features"]});var fS={paint:new dn({"fill-extrusion-opacity":new ut(ke["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new yt(ke["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ut(ke["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ut(ke["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new es(ke["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new yt(ke["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new yt(ke["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ut(ke["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function Ec(i,t){return i.x*t.x+i.y*t.y}function b_(i,t){if(i.length===1){let a=0;const u=t[a++];let p;for(;!p||u.equals(p);)if(p=t[a++],!p)return 1/0;for(;a<t.length;a++){const g=t[a],_=i[0],b=p.sub(u),w=g.sub(u),k=_.sub(u),A=Ec(b,b),P=Ec(b,w),L=Ec(w,w),F=Ec(k,b),O=Ec(k,w),Y=A*L-P*P,K=(L*F-P*O)/Y,de=(A*O-P*F)/Y,ve=u.z*(1-K-de)+p.z*K+g.z*de;if(isFinite(ve))return ve}return 1/0}{let a=1/0;for(const u of t)a=Math.min(a,u.z);return a}}const mS=jr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:gS}=mS,yS=jr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:_S}=yS,vS=ns.VectorTileFeature.types,xS=Math.cos(Math.PI/180*37.5),w_=Math.pow(2,14)/.5;class _m{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(a=>a.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(a=>{this.gradients[a.id]={}}),this.layoutVertexArray=new Ut,this.layoutVertexArray2=new tr,this.indexArray=new qn,this.programConfigurations=new sl(t.layers,t.zoom),this.segments=new At,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(t,a,u){this.hasPattern=pm("line",this.layers,a);const p=this.layers[0].layout.get("line-sort-key"),g=!p.isConstant(),_=[];for(const{feature:b,id:w,index:k,sourceLayerIndex:A}of t){const P=this.layers[0]._featureFilter.needGeometry,L=ul(b,P);if(!this.layers[0]._featureFilter.filter(new _r(this.zoom),L,u))continue;const F=g?p.evaluate(L,{},u):void 0,O={id:w,properties:b.properties,type:b.type,sourceLayerIndex:A,index:k,geometry:P?L.geometry:ll(b),patterns:{},sortKey:F};_.push(O)}g&&_.sort((b,w)=>b.sortKey-w.sortKey);for(const b of _){const{geometry:w,index:k,sourceLayerIndex:A}=b;if(this.hasPattern){const P=fm("line",this.layers,b,this.zoom,a);this.patternFeatures.push(P)}else this.addFeature(b,w,k,u,{});a.featureIndex.insert(t[k].feature,w,k,A,this.index)}}update(t,a,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,a,this.stateDependentLayers,u)}addFeatures(t,a,u){for(const p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,a,u)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,_S)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,gS),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,a,u,p,g){const _=this.layers[0].layout,b=_.get("line-join").evaluate(t,{}),w=_.get("line-cap"),k=_.get("line-miter-limit"),A=_.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const P of a)this.addLine(P,t,b,w,k,A);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,u,g,p)}addLine(t,a,u,p,g,_){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let de=0;de<t.length-1;de++)this.totalDistance+=t[de].dist(t[de+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const b=vS[a.type]==="Polygon";let w=t.length;for(;w>=2&&t[w-1].equals(t[w-2]);)w--;let k=0;for(;k<w-1&&t[k].equals(t[k+1]);)k++;if(w<(b?3:2))return;u==="bevel"&&(g=1.05);const A=this.overscaling<=16?122880/(512*this.overscaling):0,P=this.segments.prepareSegment(10*w,this.layoutVertexArray,this.indexArray);let L,F,O,Y,K;this.e1=this.e2=-1,b&&(L=t[w-2],K=t[k].sub(L)._unit()._perp());for(let de=k;de<w;de++){if(O=de===w-1?b?t[k+1]:void 0:t[de+1],O&&t[de].equals(O))continue;K&&(Y=K),L&&(F=L),L=t[de],K=O?O.sub(L)._unit()._perp():Y,Y=Y||K;let ve=Y.add(K);ve.x===0&&ve.y===0||ve._unit();const ce=Y.x*K.x+Y.y*K.y,ge=ve.x*K.x+ve.y*K.y,Pe=ge!==0?1/ge:1/0,ze=2*Math.sqrt(2-2*ge),tt=ge<xS&&F&&O,lt=Y.x*K.y-Y.y*K.x>0;if(tt&&de>k){const Ue=L.dist(F);if(Ue>2*A){const Ye=L.sub(L.sub(F)._mult(A/Ue)._round());this.updateDistance(F,Ye),this.addCurrentVertex(Ye,Y,0,0,P),F=Ye}}const Ke=F&&O;let Ge=Ke?u:b?"butt":p;if(Ke&&Ge==="round"&&(Pe<_?Ge="miter":Pe<=2&&(Ge="fakeround")),Ge==="miter"&&Pe>g&&(Ge="bevel"),Ge==="bevel"&&(Pe>2&&(Ge="flipbevel"),Pe<g&&(Ge="miter")),F&&this.updateDistance(F,L),Ge==="miter")ve._mult(Pe),this.addCurrentVertex(L,ve,0,0,P);else if(Ge==="flipbevel"){if(Pe>100)ve=K.mult(-1);else{const Ue=Pe*Y.add(K).mag()/Y.sub(K).mag();ve._perp()._mult(Ue*(lt?-1:1))}this.addCurrentVertex(L,ve,0,0,P),this.addCurrentVertex(L,ve.mult(-1),0,0,P)}else if(Ge==="bevel"||Ge==="fakeround"){const Ue=-Math.sqrt(Pe*Pe-1),Ye=lt?Ue:0,qe=lt?0:Ue;if(F&&this.addCurrentVertex(L,Y,Ye,qe,P),Ge==="fakeround"){const Oe=Math.round(180*ze/Math.PI/20);for(let mt=1;mt<Oe;mt++){let ct=mt/Oe;if(ct!==.5){const mr=ct-.5;ct+=ct*mr*(ct-1)*((1.0904+ce*(ce*(3.55645-1.43519*ce)-3.2452))*mr*mr+(.848013+ce*(.215638*ce-1.06021)))}const It=K.sub(Y)._mult(ct)._add(Y)._unit()._mult(lt?-1:1);this.addHalfVertex(L,It.x,It.y,!1,lt,0,P)}}O&&this.addCurrentVertex(L,K,-Ye,-qe,P)}else if(Ge==="butt")this.addCurrentVertex(L,ve,0,0,P);else if(Ge==="square"){const Ue=F?1:-1;this.addCurrentVertex(L,ve,Ue,Ue,P)}else Ge==="round"&&(F&&(this.addCurrentVertex(L,Y,0,0,P),this.addCurrentVertex(L,Y,1,1,P,!0)),O&&(this.addCurrentVertex(L,K,-1,-1,P,!0),this.addCurrentVertex(L,K,0,0,P)));if(tt&&de<w-1){const Ue=L.dist(O);if(Ue>2*A){const Ye=L.add(O.sub(L)._mult(A/Ue)._round());this.updateDistance(L,Ye),this.addCurrentVertex(Ye,K,0,0,P),L=Ye}}}}addCurrentVertex(t,a,u,p,g,_=!1){const b=a.y*p-a.x,w=-a.y-a.x*p;this.addHalfVertex(t,a.x+a.y*u,a.y-a.x*u,_,!1,u,g),this.addHalfVertex(t,b,w,_,!0,-p,g),this.distance>w_/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(t,a,u,p,g,_))}addHalfVertex({x:t,y:a},u,p,g,_,b,w){const k=.5*(this.lineClips?this.scaledDistance*(w_-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((t<<1)+(g?1:0),(a<<1)+(_?1:0),Math.round(63*u)+128,Math.round(63*p)+128,1+(b===0?0:b<0?-1:1)|(63&k)<<2,k>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const A=w.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,A),w.primitiveLength++),_?this.e2=A:this.e1=A}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(t,a){this.distance+=t.dist(a),this.updateScaledDistance()}}nt("LineBucket",_m,{omit:["layers","patternFeatures"]});const bS=new dn({"line-cap":new ut(ke.layout_line["line-cap"]),"line-join":new yt(ke.layout_line["line-join"]),"line-miter-limit":new ut(ke.layout_line["line-miter-limit"]),"line-round-limit":new ut(ke.layout_line["line-round-limit"]),"line-sort-key":new yt(ke.layout_line["line-sort-key"])});var S_={paint:new dn({"line-opacity":new yt(ke.paint_line["line-opacity"]),"line-color":new yt(ke.paint_line["line-color"]),"line-translate":new ut(ke.paint_line["line-translate"]),"line-translate-anchor":new ut(ke.paint_line["line-translate-anchor"]),"line-width":new yt(ke.paint_line["line-width"]),"line-gap-width":new yt(ke.paint_line["line-gap-width"]),"line-offset":new yt(ke.paint_line["line-offset"]),"line-blur":new yt(ke.paint_line["line-blur"]),"line-dasharray":new dc(ke.paint_line["line-dasharray"]),"line-pattern":new es(ke.paint_line["line-pattern"]),"line-gradient":new Uo(ke.paint_line["line-gradient"])}),layout:bS};const T_=new class extends yt{possiblyEvaluate(i,t){return t=new _r(Math.floor(t.zoom),{now:t.now,fadeDuration:t.fadeDuration,zoomHistory:t.zoomHistory,transition:t.transition}),super.possiblyEvaluate(i,t)}evaluate(i,t,a,u){return t=Ae({},t,{zoom:Math.floor(t.zoom)}),super.evaluate(i,t,a,u)}}(S_.paint.properties["line-width"].specification);function E_(i,t){return t>0?t+2*i:i}T_.useIntegerZoom=!0;const wS=jr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),SS=jr([{name:"a_projected_pos",components:3,type:"Float32"}],4);jr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const TS=jr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);jr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const k_=jr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),ES=jr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function kS(i,t,a){return i.sections.forEach(u=>{u.text=function(p,g,_){const b=g.layout.get("text-transform").evaluate(_,{});return b==="uppercase"?p=p.toLocaleUpperCase():b==="lowercase"&&(p=p.toLocaleLowerCase()),gi.applyArabicShaping&&(p=gi.applyArabicShaping(p)),p}(u.text,t,a)}),i}jr([{name:"triangle",components:3,type:"Uint16"}]),jr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),jr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),jr([{type:"Float32",name:"offsetX"}]),jr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const kc={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};var pn=24,vm=nr,C_=function(i,t,a,u,p){var g,_,b=8*p-u-1,w=(1<<b)-1,k=w>>1,A=-7,P=a?p-1:0,L=a?-1:1,F=i[t+P];for(P+=L,g=F&(1<<-A)-1,F>>=-A,A+=b;A>0;g=256*g+i[t+P],P+=L,A-=8);for(_=g&(1<<-A)-1,g>>=-A,A+=u;A>0;_=256*_+i[t+P],P+=L,A-=8);if(g===0)g=1-k;else{if(g===w)return _?NaN:1/0*(F?-1:1);_+=Math.pow(2,u),g-=k}return(F?-1:1)*_*Math.pow(2,g-u)},I_=function(i,t,a,u,p,g){var _,b,w,k=8*g-p-1,A=(1<<k)-1,P=A>>1,L=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,F=u?0:g-1,O=u?1:-1,Y=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(b=isNaN(t)?1:0,_=A):(_=Math.floor(Math.log(t)/Math.LN2),t*(w=Math.pow(2,-_))<1&&(_--,w*=2),(t+=_+P>=1?L/w:L*Math.pow(2,1-P))*w>=2&&(_++,w/=2),_+P>=A?(b=0,_=A):_+P>=1?(b=(t*w-1)*Math.pow(2,p),_+=P):(b=t*Math.pow(2,P-1)*Math.pow(2,p),_=0));p>=8;i[a+F]=255&b,F+=O,b/=256,p-=8);for(_=_<<p|b,k+=p;k>0;i[a+F]=255&_,F+=O,_/=256,k-=8);i[a+F-O]|=128*Y};function nr(i){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(i)?i:new Uint8Array(i||0),this.pos=0,this.type=0,this.length=this.buf.length}nr.Varint=0,nr.Fixed64=1,nr.Bytes=2,nr.Fixed32=5;var is,xm=4294967296,A_=1/xm,z_=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function Ta(i){return i.type===nr.Bytes?i.readVarint()+i.pos:i.pos+1}function nu(i,t,a){return a?4294967296*t+(i>>>0):4294967296*(t>>>0)+(i>>>0)}function P_(i,t,a){var u=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));a.realloc(u);for(var p=a.pos-1;p>=i;p--)a.buf[p+u]=a.buf[p]}function CS(i,t){for(var a=0;a<i.length;a++)t.writeVarint(i[a])}function IS(i,t){for(var a=0;a<i.length;a++)t.writeSVarint(i[a])}function AS(i,t){for(var a=0;a<i.length;a++)t.writeFloat(i[a])}function zS(i,t){for(var a=0;a<i.length;a++)t.writeDouble(i[a])}function PS(i,t){for(var a=0;a<i.length;a++)t.writeBoolean(i[a])}function MS(i,t){for(var a=0;a<i.length;a++)t.writeFixed32(i[a])}function DS(i,t){for(var a=0;a<i.length;a++)t.writeSFixed32(i[a])}function RS(i,t){for(var a=0;a<i.length;a++)t.writeFixed64(i[a])}function LS(i,t){for(var a=0;a<i.length;a++)t.writeSFixed64(i[a])}function Ad(i,t){return(i[t]|i[t+1]<<8|i[t+2]<<16)+16777216*i[t+3]}function iu(i,t,a){i[a]=t,i[a+1]=t>>>8,i[a+2]=t>>>16,i[a+3]=t>>>24}function M_(i,t){return(i[t]|i[t+1]<<8|i[t+2]<<16)+(i[t+3]<<24)}function BS(i,t,a){i===1&&a.readMessage(FS,t)}function FS(i,t,a){if(i===3){const{id:u,bitmap:p,width:g,height:_,left:b,top:w,advance:k}=a.readMessage(OS,{});t.push({id:u,bitmap:new vc({width:g+6,height:_+6},p),metrics:{width:g,height:_,left:b,top:w,advance:k}})}}function OS(i,t,a){i===1?t.id=a.readVarint():i===2?t.bitmap=a.readBytes():i===3?t.width=a.readVarint():i===4?t.height=a.readVarint():i===5?t.left=a.readSVarint():i===6?t.top=a.readSVarint():i===7&&(t.advance=a.readVarint())}function D_(i){let t=0,a=0;for(const _ of i)t+=_.w*_.h,a=Math.max(a,_.w);i.sort((_,b)=>b.h-_.h);const u=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),a),h:1/0}];let p=0,g=0;for(const _ of i)for(let b=u.length-1;b>=0;b--){const w=u[b];if(!(_.w>w.w||_.h>w.h)){if(_.x=w.x,_.y=w.y,g=Math.max(g,_.y+_.h),p=Math.max(p,_.x+_.w),_.w===w.w&&_.h===w.h){const k=u.pop();b<u.length&&(u[b]=k)}else _.h===w.h?(w.x+=_.w,w.w-=_.w):_.w===w.w?(w.y+=_.h,w.h-=_.h):(u.push({x:w.x+_.w,y:w.y,w:w.w-_.w,h:_.h}),w.y+=_.h,w.h-=_.h);break}}return{w:p,h:g,fill:t/(p*g)||0}}nr.prototype={destroy:function(){this.buf=null},readFields:function(i,t,a){for(a=a||this.length;this.pos<a;){var u=this.readVarint(),p=u>>3,g=this.pos;this.type=7&u,i(p,t,this),this.pos===g&&this.skip(u)}return t},readMessage:function(i,t){return this.readFields(i,t,this.readVarint()+this.pos)},readFixed32:function(){var i=Ad(this.buf,this.pos);return this.pos+=4,i},readSFixed32:function(){var i=M_(this.buf,this.pos);return this.pos+=4,i},readFixed64:function(){var i=Ad(this.buf,this.pos)+Ad(this.buf,this.pos+4)*xm;return this.pos+=8,i},readSFixed64:function(){var i=Ad(this.buf,this.pos)+M_(this.buf,this.pos+4)*xm;return this.pos+=8,i},readFloat:function(){var i=C_(this.buf,this.pos,!0,23,4);return this.pos+=4,i},readDouble:function(){var i=C_(this.buf,this.pos,!0,52,8);return this.pos+=8,i},readVarint:function(i){var t,a,u=this.buf;return t=127&(a=u[this.pos++]),a<128?t:(t|=(127&(a=u[this.pos++]))<<7,a<128?t:(t|=(127&(a=u[this.pos++]))<<14,a<128?t:(t|=(127&(a=u[this.pos++]))<<21,a<128?t:function(p,g,_){var b,w,k=_.buf;if(b=(112&(w=k[_.pos++]))>>4,w<128||(b|=(127&(w=k[_.pos++]))<<3,w<128)||(b|=(127&(w=k[_.pos++]))<<10,w<128)||(b|=(127&(w=k[_.pos++]))<<17,w<128)||(b|=(127&(w=k[_.pos++]))<<24,w<128)||(b|=(1&(w=k[_.pos++]))<<31,w<128))return nu(p,b,g);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(a=u[this.pos]))<<28,i,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var i=this.readVarint();return i%2==1?(i+1)/-2:i/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var i=this.readVarint()+this.pos,t=this.pos;return this.pos=i,i-t>=12&&z_?function(a,u,p){return z_.decode(a.subarray(u,p))}(this.buf,t,i):function(a,u,p){for(var g="",_=u;_<p;){var b,w,k,A=a[_],P=null,L=A>239?4:A>223?3:A>191?2:1;if(_+L>p)break;L===1?A<128&&(P=A):L===2?(192&(b=a[_+1]))==128&&(P=(31&A)<<6|63&b)<=127&&(P=null):L===3?(w=a[_+2],(192&(b=a[_+1]))==128&&(192&w)==128&&((P=(15&A)<<12|(63&b)<<6|63&w)<=2047||P>=55296&&P<=57343)&&(P=null)):L===4&&(w=a[_+2],k=a[_+3],(192&(b=a[_+1]))==128&&(192&w)==128&&(192&k)==128&&((P=(15&A)<<18|(63&b)<<12|(63&w)<<6|63&k)<=65535||P>=1114112)&&(P=null)),P===null?(P=65533,L=1):P>65535&&(P-=65536,g+=String.fromCharCode(P>>>10&1023|55296),P=56320|1023&P),g+=String.fromCharCode(P),_+=L}return g}(this.buf,t,i)},readBytes:function(){var i=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,i);return this.pos=i,t},readPackedVarint:function(i,t){if(this.type!==nr.Bytes)return i.push(this.readVarint(t));var a=Ta(this);for(i=i||[];this.pos<a;)i.push(this.readVarint(t));return i},readPackedSVarint:function(i){if(this.type!==nr.Bytes)return i.push(this.readSVarint());var t=Ta(this);for(i=i||[];this.pos<t;)i.push(this.readSVarint());return i},readPackedBoolean:function(i){if(this.type!==nr.Bytes)return i.push(this.readBoolean());var t=Ta(this);for(i=i||[];this.pos<t;)i.push(this.readBoolean());return i},readPackedFloat:function(i){if(this.type!==nr.Bytes)return i.push(this.readFloat());var t=Ta(this);for(i=i||[];this.pos<t;)i.push(this.readFloat());return i},readPackedDouble:function(i){if(this.type!==nr.Bytes)return i.push(this.readDouble());var t=Ta(this);for(i=i||[];this.pos<t;)i.push(this.readDouble());return i},readPackedFixed32:function(i){if(this.type!==nr.Bytes)return i.push(this.readFixed32());var t=Ta(this);for(i=i||[];this.pos<t;)i.push(this.readFixed32());return i},readPackedSFixed32:function(i){if(this.type!==nr.Bytes)return i.push(this.readSFixed32());var t=Ta(this);for(i=i||[];this.pos<t;)i.push(this.readSFixed32());return i},readPackedFixed64:function(i){if(this.type!==nr.Bytes)return i.push(this.readFixed64());var t=Ta(this);for(i=i||[];this.pos<t;)i.push(this.readFixed64());return i},readPackedSFixed64:function(i){if(this.type!==nr.Bytes)return i.push(this.readSFixed64());var t=Ta(this);for(i=i||[];this.pos<t;)i.push(this.readSFixed64());return i},skip:function(i){var t=7&i;if(t===nr.Varint)for(;this.buf[this.pos++]>127;);else if(t===nr.Bytes)this.pos=this.readVarint()+this.pos;else if(t===nr.Fixed32)this.pos+=4;else{if(t!==nr.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(i,t){this.writeVarint(i<<3|t)},realloc:function(i){for(var t=this.length||16;t<this.pos+i;)t*=2;if(t!==this.length){var a=new Uint8Array(t);a.set(this.buf),this.buf=a,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(i){this.realloc(4),iu(this.buf,i,this.pos),this.pos+=4},writeSFixed32:function(i){this.realloc(4),iu(this.buf,i,this.pos),this.pos+=4},writeFixed64:function(i){this.realloc(8),iu(this.buf,-1&i,this.pos),iu(this.buf,Math.floor(i*A_),this.pos+4),this.pos+=8},writeSFixed64:function(i){this.realloc(8),iu(this.buf,-1&i,this.pos),iu(this.buf,Math.floor(i*A_),this.pos+4),this.pos+=8},writeVarint:function(i){(i=+i||0)>268435455||i<0?function(t,a){var u,p;if(t>=0?(u=t%4294967296|0,p=t/4294967296|0):(p=~(-t/4294967296),4294967295^(u=~(-t%4294967296))?u=u+1|0:(u=0,p=p+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");a.realloc(10),function(g,_,b){b.buf[b.pos++]=127&g|128,g>>>=7,b.buf[b.pos++]=127&g|128,g>>>=7,b.buf[b.pos++]=127&g|128,g>>>=7,b.buf[b.pos++]=127&g|128,b.buf[b.pos]=127&(g>>>=7)}(u,0,a),function(g,_){var b=(7&g)<<4;_.buf[_.pos++]|=b|((g>>>=3)?128:0),g&&(_.buf[_.pos++]=127&g|((g>>>=7)?128:0),g&&(_.buf[_.pos++]=127&g|((g>>>=7)?128:0),g&&(_.buf[_.pos++]=127&g|((g>>>=7)?128:0),g&&(_.buf[_.pos++]=127&g|((g>>>=7)?128:0),g&&(_.buf[_.pos++]=127&g)))))}(p,a)}(i,this):(this.realloc(4),this.buf[this.pos++]=127&i|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=i>>>7&127))))},writeSVarint:function(i){this.writeVarint(i<0?2*-i-1:2*i)},writeBoolean:function(i){this.writeVarint(Boolean(i))},writeString:function(i){i=String(i),this.realloc(4*i.length),this.pos++;var t=this.pos;this.pos=function(u,p,g){for(var _,b,w=0;w<p.length;w++){if((_=p.charCodeAt(w))>55295&&_<57344){if(!b){_>56319||w+1===p.length?(u[g++]=239,u[g++]=191,u[g++]=189):b=_;continue}if(_<56320){u[g++]=239,u[g++]=191,u[g++]=189,b=_;continue}_=b-55296<<10|_-56320|65536,b=null}else b&&(u[g++]=239,u[g++]=191,u[g++]=189,b=null);_<128?u[g++]=_:(_<2048?u[g++]=_>>6|192:(_<65536?u[g++]=_>>12|224:(u[g++]=_>>18|240,u[g++]=_>>12&63|128),u[g++]=_>>6&63|128),u[g++]=63&_|128)}return g}(this.buf,i,this.pos);var a=this.pos-t;a>=128&&P_(t,a,this),this.pos=t-1,this.writeVarint(a),this.pos+=a},writeFloat:function(i){this.realloc(4),I_(this.buf,i,this.pos,!0,23,4),this.pos+=4},writeDouble:function(i){this.realloc(8),I_(this.buf,i,this.pos,!0,52,8),this.pos+=8},writeBytes:function(i){var t=i.length;this.writeVarint(t),this.realloc(t);for(var a=0;a<t;a++)this.buf[this.pos++]=i[a]},writeRawMessage:function(i,t){this.pos++;var a=this.pos;i(t,this);var u=this.pos-a;u>=128&&P_(a,u,this),this.pos=a-1,this.writeVarint(u),this.pos+=u},writeMessage:function(i,t,a){this.writeTag(i,nr.Bytes),this.writeRawMessage(t,a)},writePackedVarint:function(i,t){t.length&&this.writeMessage(i,CS,t)},writePackedSVarint:function(i,t){t.length&&this.writeMessage(i,IS,t)},writePackedBoolean:function(i,t){t.length&&this.writeMessage(i,PS,t)},writePackedFloat:function(i,t){t.length&&this.writeMessage(i,AS,t)},writePackedDouble:function(i,t){t.length&&this.writeMessage(i,zS,t)},writePackedFixed32:function(i,t){t.length&&this.writeMessage(i,MS,t)},writePackedSFixed32:function(i,t){t.length&&this.writeMessage(i,DS,t)},writePackedFixed64:function(i,t){t.length&&this.writeMessage(i,RS,t)},writePackedSFixed64:function(i,t){t.length&&this.writeMessage(i,LS,t)},writeBytesField:function(i,t){this.writeTag(i,nr.Bytes),this.writeBytes(t)},writeFixed32Field:function(i,t){this.writeTag(i,nr.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(i,t){this.writeTag(i,nr.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(i,t){this.writeTag(i,nr.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(i,t){this.writeTag(i,nr.Fixed64),this.writeSFixed64(t)},writeVarintField:function(i,t){this.writeTag(i,nr.Varint),this.writeVarint(t)},writeSVarintField:function(i,t){this.writeTag(i,nr.Varint),this.writeSVarint(t)},writeStringField:function(i,t){this.writeTag(i,nr.Bytes),this.writeString(t)},writeFloatField:function(i,t){this.writeTag(i,nr.Fixed32),this.writeFloat(t)},writeDoubleField:function(i,t){this.writeTag(i,nr.Fixed64),this.writeDouble(t)},writeBooleanField:function(i,t){this.writeVarintField(i,Boolean(t))}};class bm{constructor(t,{pixelRatio:a,version:u,stretchX:p,stretchY:g,content:_}){this.paddedRect=t,this.pixelRatio=a,this.stretchX=p,this.stretchY=g,this.content=_,this.version=u}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class R_{constructor(t,a){const u={},p={};this.haveRenderCallbacks=[];const g=[];this.addImages(t,u,g),this.addImages(a,p,g);const{w:_,h:b}=D_(g),w=new Mi({width:_||1,height:b||1});for(const k in t){const A=t[k],P=u[k].paddedRect;Mi.copy(A.data,w,{x:0,y:0},{x:P.x+1,y:P.y+1},A.data)}for(const k in a){const A=a[k],P=p[k].paddedRect,L=P.x+1,F=P.y+1,O=A.data.width,Y=A.data.height;Mi.copy(A.data,w,{x:0,y:0},{x:L,y:F},A.data),Mi.copy(A.data,w,{x:0,y:Y-1},{x:L,y:F-1},{width:O,height:1}),Mi.copy(A.data,w,{x:0,y:0},{x:L,y:F+Y},{width:O,height:1}),Mi.copy(A.data,w,{x:O-1,y:0},{x:L-1,y:F},{width:1,height:Y}),Mi.copy(A.data,w,{x:0,y:0},{x:L+O,y:F},{width:1,height:Y})}this.image=w,this.iconPositions=u,this.patternPositions=p}addImages(t,a,u){for(const p in t){const g=t[p],_={x:0,y:0,w:g.data.width+2,h:g.data.height+2};u.push(_),a[p]=new bm(_,g),g.hasRenderCallback&&this.haveRenderCallbacks.push(p)}}patchUpdatedImages(t,a){t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const u in t.updatedImages)this.patchUpdatedImage(this.iconPositions[u],t.getImage(u),a),this.patchUpdatedImage(this.patternPositions[u],t.getImage(u),a)}patchUpdatedImage(t,a,u){if(!t||!a||t.version===a.version)return;t.version=a.version;const[p,g]=t.tl;u.update(a.data,void 0,{x:p,y:g})}}nt("ImagePosition",bm),nt("ImageAtlas",R_),l.WritingMode=void 0,(is=l.WritingMode||(l.WritingMode={}))[is.none=0]="none",is[is.horizontal=1]="horizontal",is[is.vertical=2]="vertical",is[is.horizontalOnly=3]="horizontalOnly";const zd=-17;class Cc{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(t,a){const u=new Cc;return u.scale=t||1,u.fontStack=a,u}static forImage(t){const a=new Cc;return a.imageName=t,a}}class ou{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,a){const u=new ou;for(let p=0;p<t.sections.length;p++){const g=t.sections[p];g.image?u.addImageSection(g):u.addTextSection(g,a)}return u}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(){this.text=function(t){let a="";for(let u=0;u<t.length;u++){const p=t.charCodeAt(u+1)||null,g=t.charCodeAt(u-1)||null;a+=p&&cd(p)&&!kc[t[u+1]]||g&&cd(g)&&!kc[t[u-1]]||!kc[t[u]]?t[u]:kc[t[u]]}return a}(this.text)}trim(){let t=0;for(let u=0;u<this.text.length&&Md[this.text.charCodeAt(u)];u++)t++;let a=this.text.length;for(let u=this.text.length-1;u>=0&&u>=t&&Md[this.text.charCodeAt(u)];u--)a--;this.text=this.text.substring(t,a),this.sectionIndex=this.sectionIndex.slice(t,a)}substring(t,a){const u=new ou;return u.text=this.text.substring(t,a),u.sectionIndex=this.sectionIndex.slice(t,a),u.sections=this.sections,u}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((t,a)=>Math.max(t,this.sections[a].scale),0)}addTextSection(t,a){this.text+=t.text,this.sections.push(Cc.forText(t.scale,t.fontStack||a));const u=this.sections.length-1;for(let p=0;p<t.text.length;++p)this.sectionIndex.push(u)}addImageSection(t){const a=t.image?t.image.name:"";if(a.length===0)return void Ne("Can't add FormattedSection with an empty image.");const u=this.getNextImageSectionCharCode();u?(this.text+=String.fromCharCode(u),this.sections.push(Cc.forImage(a)),this.sectionIndex.push(this.sections.length-1)):Ne("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Pd(i,t,a,u,p,g,_,b,w,k,A,P,L,F,O,Y){const K=ou.fromFeature(i,p);let de;P===l.WritingMode.vertical&&K.verticalizePunctuation();const{processBidirectionalText:ve,processStyledBidirectionalText:ce}=gi;if(ve&&K.sections.length===1){de=[];const ze=ve(K.toString(),wm(K,k,g,t,u,F,O));for(const tt of ze){const lt=new ou;lt.text=tt,lt.sections=K.sections;for(let Ke=0;Ke<tt.length;Ke++)lt.sectionIndex.push(0);de.push(lt)}}else if(ce){de=[];const ze=ce(K.text,K.sectionIndex,wm(K,k,g,t,u,F,O));for(const tt of ze){const lt=new ou;lt.text=tt[0],lt.sectionIndex=tt[1],lt.sections=K.sections,de.push(lt)}}else de=function(ze,tt){const lt=[],Ke=ze.text;let Ge=0;for(const Ue of tt)lt.push(ze.substring(Ge,Ue)),Ge=Ue;return Ge<Ke.length&&lt.push(ze.substring(Ge,Ke.length)),lt}(K,wm(K,k,g,t,u,F,O));const ge=[],Pe={positionedLines:ge,text:K.toString(),top:A[1],bottom:A[1],left:A[0],right:A[0],writingMode:P,iconsInText:!1,verticalizable:!1};return function(ze,tt,lt,Ke,Ge,Ue,Ye,qe,Oe,mt,ct,It){let mr=0,xr=zd,Jr=0,Ri=0;const _n=qe==="right"?1:qe==="left"?0:.5;let Gr=0;for(const Wr of Ge){Wr.trim();const xn=Wr.getMaxScale(),Fn=(xn-1)*pn,Xn={positionedGlyphs:[],lineOffset:0};ze.positionedLines[Gr]=Xn;const oi=Xn.positionedGlyphs;let ai=0;if(!Wr.length()){xr+=Ue,++Gr;continue}for(let ln=0;ln<Wr.length();ln++){const zt=Wr.getSection(ln),vi=Wr.getSectionIndex(ln),bn=Wr.getCharCode(ln);let On=0,Yi=null,yo=null,_o=null,ka=pn;const Ji=!(Oe===l.WritingMode.horizontal||!ct&&!ac(bn)||ct&&(Md[bn]||(sn=bn,Xe.Arabic(sn)||Xe["Arabic Supplement"](sn)||Xe["Arabic Extended-A"](sn)||Xe["Arabic Presentation Forms-A"](sn)||Xe["Arabic Presentation Forms-B"](sn))));if(zt.imageName){const Li=Ke[zt.imageName];if(!Li)continue;_o=zt.imageName,ze.iconsInText=ze.iconsInText||!0,yo=Li.paddedRect;const si=Li.displaySize;zt.scale=zt.scale*pn/It,Yi={width:si[0],height:si[1],left:1,top:-3,advance:Ji?si[1]:si[0]},On=Fn+(pn-si[1]*zt.scale),ka=Yi.advance;const Ca=Ji?si[0]*zt.scale-pn*xn:si[1]*zt.scale-pn*xn;Ca>0&&Ca>ai&&(ai=Ca)}else{const Li=lt[zt.fontStack],si=Li&&Li[bn];if(si&&si.rect)yo=si.rect,Yi=si.metrics;else{const Ca=tt[zt.fontStack],zc=Ca&&Ca[bn];if(!zc)continue;Yi=zc.metrics}On=(xn-zt.scale)*pn}Ji?(ze.verticalizable=!0,oi.push({glyph:bn,imageName:_o,x:mr,y:xr+On,vertical:Ji,scale:zt.scale,fontStack:zt.fontStack,sectionIndex:vi,metrics:Yi,rect:yo}),mr+=ka*zt.scale+mt):(oi.push({glyph:bn,imageName:_o,x:mr,y:xr+On,vertical:Ji,scale:zt.scale,fontStack:zt.fontStack,sectionIndex:vi,metrics:Yi,rect:yo}),mr+=Yi.advance*zt.scale+mt)}oi.length!==0&&(Jr=Math.max(mr-mt,Jr),US(oi,0,oi.length-1,_n,ai)),mr=0;const Sr=Ue*xn+ai;Xn.lineOffset=Math.max(ai,Fn),xr+=Sr,Ri=Math.max(Sr,Ri),++Gr}var sn;const vn=xr-zd,{horizontalAlign:Bn,verticalAlign:ii}=Sm(Ye);(function(Wr,xn,Fn,Xn,oi,ai,Sr,ln,zt){const vi=(xn-Fn)*oi;let bn=0;bn=ai!==Sr?-ln*Xn-zd:(-Xn*zt+.5)*Sr;for(const On of Wr)for(const Yi of On.positionedGlyphs)Yi.x+=vi,Yi.y+=bn})(ze.positionedLines,_n,Bn,ii,Jr,Ri,Ue,vn,Ge.length),ze.top+=-ii*vn,ze.bottom=ze.top+vn,ze.left+=-Bn*Jr,ze.right=ze.left+Jr}(Pe,t,a,u,de,_,b,w,P,k,L,Y),!function(ze){for(const tt of ze)if(tt.positionedGlyphs.length!==0)return!1;return!0}(ge)&&Pe}const Md={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},NS={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function L_(i,t,a,u,p,g){if(t.imageName){const _=u[t.imageName];return _?_.displaySize[0]*t.scale*pn/g+p:0}{const _=a[t.fontStack],b=_&&_[i];return b?b.metrics.advance*t.scale+p:0}}function B_(i,t,a,u){const p=Math.pow(i-t,2);return u?i<t?p/2:2*p:p+Math.abs(a)*a}function $S(i,t,a){let u=0;return i===10&&(u-=1e4),a&&(u+=150),i!==40&&i!==65288||(u+=50),t!==41&&t!==65289||(u+=50),u}function F_(i,t,a,u,p,g){let _=null,b=B_(t,a,p,g);for(const w of u){const k=B_(t-w.x,a,p,g)+w.badness;k<=b&&(_=w,b=k)}return{index:i,x:t,priorBreak:_,badness:b}}function O_(i){return i?O_(i.priorBreak).concat(i.index):[]}function wm(i,t,a,u,p,g,_){if(g!=="point")return[];if(!i)return[];const b=[],w=function(L,F,O,Y,K,de){let ve=0;for(let ce=0;ce<L.length();ce++){const ge=L.getSection(ce);ve+=L_(L.getCharCode(ce),ge,Y,K,F,de)}return ve/Math.max(1,Math.ceil(ve/O))}(i,t,a,u,p,_),k=i.text.indexOf("\u200B")>=0;let A=0;for(let L=0;L<i.length();L++){const F=i.getSection(L),O=i.getCharCode(L);if(Md[O]||(A+=L_(O,F,u,p,t,_)),L<i.length()-1){const Y=!((P=O)<11904||!(Xe["Bopomofo Extended"](P)||Xe.Bopomofo(P)||Xe["CJK Compatibility Forms"](P)||Xe["CJK Compatibility Ideographs"](P)||Xe["CJK Compatibility"](P)||Xe["CJK Radicals Supplement"](P)||Xe["CJK Strokes"](P)||Xe["CJK Symbols and Punctuation"](P)||Xe["CJK Unified Ideographs Extension A"](P)||Xe["CJK Unified Ideographs"](P)||Xe["Enclosed CJK Letters and Months"](P)||Xe["Halfwidth and Fullwidth Forms"](P)||Xe.Hiragana(P)||Xe["Ideographic Description Characters"](P)||Xe["Kangxi Radicals"](P)||Xe["Katakana Phonetic Extensions"](P)||Xe.Katakana(P)||Xe["Vertical Forms"](P)||Xe["Yi Radicals"](P)||Xe["Yi Syllables"](P)));(NS[O]||Y||F.imageName)&&b.push(F_(L+1,A,w,b,$S(O,i.getCharCode(L+1),Y&&k),!1))}}var P;return O_(F_(i.length(),A,w,b,0,!0))}function Sm(i){let t=.5,a=.5;switch(i){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(i){case"bottom":case"bottom-right":case"bottom-left":a=1;break;case"top":case"top-right":case"top-left":a=0}return{horizontalAlign:t,verticalAlign:a}}function US(i,t,a,u,p){if(!u&&!p)return;const g=i[a],_=(i[a].x+g.metrics.advance*g.scale)*u;for(let b=t;b<=a;b++)i[b].x-=_,i[b].y+=p}function VS(i,t,a){const{horizontalAlign:u,verticalAlign:p}=Sm(a),g=t[0]-i.displaySize[0]*u,_=t[1]-i.displaySize[1]*p;return{image:i,top:_,bottom:_+i.displaySize[1],left:g,right:g+i.displaySize[0]}}function N_(i,t,a,u,p,g){const _=i.image;let b;if(_.content){const K=_.content,de=_.pixelRatio||1;b=[K[0]/de,K[1]/de,_.displaySize[0]-K[2]/de,_.displaySize[1]-K[3]/de]}const w=t.left*g,k=t.right*g;let A,P,L,F;a==="width"||a==="both"?(F=p[0]+w-u[3],P=p[0]+k+u[1]):(F=p[0]+(w+k-_.displaySize[0])/2,P=F+_.displaySize[0]);const O=t.top*g,Y=t.bottom*g;return a==="height"||a==="both"?(A=p[1]+O-u[0],L=p[1]+Y+u[2]):(A=p[1]+(O+Y-_.displaySize[1])/2,L=A+_.displaySize[1]),{image:_,top:A,right:P,bottom:L,left:F,collisionPadding:b}}const Ea=128;function $_(i,t){const{expression:a}=t;if(a.kind==="constant")return{kind:"constant",layoutSize:a.evaluate(new _r(i+1))};if(a.kind==="source")return{kind:"source"};{const{zoomStops:u,interpolationType:p}=a;let g=0;for(;g<u.length&&u[g]<=i;)g++;g=Math.max(0,g-1);let _=g;for(;_<u.length&&u[_]<i+1;)_++;_=Math.min(u.length-1,_);const b=u[g],w=u[_];return a.kind==="composite"?{kind:"composite",minZoom:b,maxZoom:w,interpolationType:p}:{kind:"camera",minZoom:b,maxZoom:w,minSize:a.evaluate(new _r(b)),maxSize:a.evaluate(new _r(w)),interpolationType:p}}}class os extends dt{constructor(t,a,u,p){super(t,a),this.angle=u,p!==void 0&&(this.segment=p)}clone(){return new os(this.x,this.y,this.angle,this.segment)}}function U_(i,t,a,u,p){if(t.segment===void 0)return!0;let g=t,_=t.segment+1,b=0;for(;b>-a/2;){if(_--,_<0)return!1;b-=i[_].dist(g),g=i[_]}b+=i[_].dist(i[_+1]),_++;const w=[];let k=0;for(;b<a/2;){const A=i[_],P=i[_+1];if(!P)return!1;let L=i[_-1].angleTo(A)-A.angleTo(P);for(L=Math.abs((L+3*Math.PI)%(2*Math.PI)-Math.PI),w.push({distance:b,angleDelta:L}),k+=L;b-w[0].distance>u;)k-=w.shift().angleDelta;if(k>p)return!1;_++,b+=A.dist(P)}return!0}function V_(i){let t=0;for(let a=0;a<i.length-1;a++)t+=i[a].dist(i[a+1]);return t}function j_(i,t,a){return i?.6*t*a:0}function G_(i,t){return Math.max(i?i.right-i.left:0,t?t.right-t.left:0)}function jS(i,t,a,u,p,g){const _=j_(a,p,g),b=G_(a,u)*g;let w=0;const k=V_(i)/2;for(let A=0;A<i.length-1;A++){const P=i[A],L=i[A+1],F=P.dist(L);if(w+F>k){const O=(k-w)/F,Y=ur(P.x,L.x,O),K=ur(P.y,L.y,O),de=new os(Y,K,L.angleTo(P),A);return de._round(),!_||U_(i,de,b,_,t)?de:void 0}w+=F}}function GS(i,t,a,u,p,g,_,b,w){const k=j_(u,g,_),A=G_(u,p),P=A*_,L=i[0].x===0||i[0].x===w||i[0].y===0||i[0].y===w;return t-P<t/4&&(t=P+t/4),W_(i,L?t/2*b%t:(A/2+2*g)*_*b%t,t,k,a,P,L,!1,w)}function W_(i,t,a,u,p,g,_,b,w){const k=g/2,A=V_(i);let P=0,L=t-a,F=[];for(let O=0;O<i.length-1;O++){const Y=i[O],K=i[O+1],de=Y.dist(K),ve=K.angleTo(Y);for(;L+a<P+de;){L+=a;const ce=(L-P)/de,ge=ur(Y.x,K.x,ce),Pe=ur(Y.y,K.y,ce);if(ge>=0&&ge<w&&Pe>=0&&Pe<w&&L-k>=0&&L+k<=A){const ze=new os(ge,Pe,ve,O);ze._round(),u&&!U_(i,ze,g,u,p)||F.push(ze)}}P+=de}return b||F.length||_||(F=W_(i,P/2,a,u,p,g,_,!0,w)),F}function q_(i,t,a,u,p){const g=[];for(let _=0;_<i.length;_++){const b=i[_];let w;for(let k=0;k<b.length-1;k++){let A=b[k],P=b[k+1];A.x<t&&P.x<t||(A.x<t?A=new dt(t,A.y+(t-A.x)/(P.x-A.x)*(P.y-A.y))._round():P.x<t&&(P=new dt(t,A.y+(t-A.x)/(P.x-A.x)*(P.y-A.y))._round()),A.y<a&&P.y<a||(A.y<a?A=new dt(A.x+(a-A.y)/(P.y-A.y)*(P.x-A.x),a)._round():P.y<a&&(P=new dt(A.x+(a-A.y)/(P.y-A.y)*(P.x-A.x),a)._round()),A.x>=u&&P.x>=u||(A.x>=u?A=new dt(u,A.y+(u-A.x)/(P.x-A.x)*(P.y-A.y))._round():P.x>=u&&(P=new dt(u,A.y+(u-A.x)/(P.x-A.x)*(P.y-A.y))._round()),A.y>=p&&P.y>=p||(A.y>=p?A=new dt(A.x+(p-A.y)/(P.y-A.y)*(P.x-A.x),p)._round():P.y>=p&&(P=new dt(A.x+(p-A.y)/(P.y-A.y)*(P.x-A.x),p)._round()),w&&A.equals(w[w.length-1])||(w=[A],g.push(w)),w.push(P)))))}}return g}function Z_(i,t,a,u){const p=[],g=i.image,_=g.pixelRatio,b=g.paddedRect.w-2,w=g.paddedRect.h-2,k=i.right-i.left,A=i.bottom-i.top,P=g.stretchX||[[0,b]],L=g.stretchY||[[0,w]],F=(Ue,Ye)=>Ue+Ye[1]-Ye[0],O=P.reduce(F,0),Y=L.reduce(F,0),K=b-O,de=w-Y;let ve=0,ce=O,ge=0,Pe=Y,ze=0,tt=K,lt=0,Ke=de;if(g.content&&u){const Ue=g.content;ve=Dd(P,0,Ue[0]),ge=Dd(L,0,Ue[1]),ce=Dd(P,Ue[0],Ue[2]),Pe=Dd(L,Ue[1],Ue[3]),ze=Ue[0]-ve,lt=Ue[1]-ge,tt=Ue[2]-Ue[0]-ce,Ke=Ue[3]-Ue[1]-Pe}const Ge=(Ue,Ye,qe,Oe)=>{const mt=Rd(Ue.stretch-ve,ce,k,i.left),ct=Ld(Ue.fixed-ze,tt,Ue.stretch,O),It=Rd(Ye.stretch-ge,Pe,A,i.top),mr=Ld(Ye.fixed-lt,Ke,Ye.stretch,Y),xr=Rd(qe.stretch-ve,ce,k,i.left),Jr=Ld(qe.fixed-ze,tt,qe.stretch,O),Ri=Rd(Oe.stretch-ge,Pe,A,i.top),_n=Ld(Oe.fixed-lt,Ke,Oe.stretch,Y),Gr=new dt(mt,It),sn=new dt(xr,It),vn=new dt(xr,Ri),Bn=new dt(mt,Ri),ii=new dt(ct/_,mr/_),Wr=new dt(Jr/_,_n/_),xn=t*Math.PI/180;if(xn){const oi=Math.sin(xn),ai=Math.cos(xn),Sr=[ai,-oi,oi,ai];Gr._matMult(Sr),sn._matMult(Sr),Bn._matMult(Sr),vn._matMult(Sr)}const Fn=Ue.stretch+Ue.fixed,Xn=Ye.stretch+Ye.fixed;return{tl:Gr,tr:sn,bl:Bn,br:vn,tex:{x:g.paddedRect.x+1+Fn,y:g.paddedRect.y+1+Xn,w:qe.stretch+qe.fixed-Fn,h:Oe.stretch+Oe.fixed-Xn},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ii,pixelOffsetBR:Wr,minFontScaleX:tt/_/k,minFontScaleY:Ke/_/A,isSDF:a}};if(u&&(g.stretchX||g.stretchY)){const Ue=H_(P,K,O),Ye=H_(L,de,Y);for(let qe=0;qe<Ue.length-1;qe++){const Oe=Ue[qe],mt=Ue[qe+1];for(let ct=0;ct<Ye.length-1;ct++)p.push(Ge(Oe,Ye[ct],mt,Ye[ct+1]))}}else p.push(Ge({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:b+1},{fixed:0,stretch:w+1}));return p}function Dd(i,t,a){let u=0;for(const p of i)u+=Math.max(t,Math.min(a,p[1]))-Math.max(t,Math.min(a,p[0]));return u}function H_(i,t,a){const u=[{fixed:-1,stretch:0}];for(const[p,g]of i){const _=u[u.length-1];u.push({fixed:p-_.stretch,stretch:_.stretch}),u.push({fixed:p-_.stretch,stretch:_.stretch+(g-p)})}return u.push({fixed:t+1,stretch:a}),u}function Rd(i,t,a,u){return i/t*a+u}function Ld(i,t,a,u){return i-t*a/u}nt("Anchor",os);class Bd{constructor(t,a,u,p,g,_,b,w,k,A){if(this.boxStartIndex=t.length,k){let P=_.top,L=_.bottom;const F=_.collisionPadding;F&&(P-=F[1],L+=F[3]);let O=L-P;O>0&&(O=Math.max(10,O),this.circleDiameter=O)}else{let P=_.top*b-w[0],L=_.bottom*b+w[2],F=_.left*b-w[3],O=_.right*b+w[1];const Y=_.collisionPadding;if(Y&&(F-=Y[0]*b,P-=Y[1]*b,O+=Y[2]*b,L+=Y[3]*b),A){const K=new dt(F,P),de=new dt(O,P),ve=new dt(F,L),ce=new dt(O,L),ge=A*Math.PI/180;K._rotate(ge),de._rotate(ge),ve._rotate(ge),ce._rotate(ge),F=Math.min(K.x,de.x,ve.x,ce.x),O=Math.max(K.x,de.x,ve.x,ce.x),P=Math.min(K.y,de.y,ve.y,ce.y),L=Math.max(K.y,de.y,ve.y,ce.y)}t.emplaceBack(a.x,a.y,F,P,O,L,u,p,g)}this.boxEndIndex=t.length}}class WS{constructor(t=[],a=qS){if(this.data=t,this.length=this.data.length,this.compare=a,this.length>0)for(let u=(this.length>>1)-1;u>=0;u--)this._down(u)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const t=this.data[0],a=this.data.pop();return this.length--,this.length>0&&(this.data[0]=a,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:a,compare:u}=this,p=a[t];for(;t>0;){const g=t-1>>1,_=a[g];if(u(p,_)>=0)break;a[t]=_,t=g}a[t]=p}_down(t){const{data:a,compare:u}=this,p=this.length>>1,g=a[t];for(;t<p;){let _=1+(t<<1),b=a[_];const w=_+1;if(w<this.length&&u(a[w],b)<0&&(_=w,b=a[w]),u(b,g)>=0)break;a[t]=b,t=_}a[t]=g}}function qS(i,t){return i<t?-1:i>t?1:0}function ZS(i,t=1,a=!1){let u=1/0,p=1/0,g=-1/0,_=-1/0;const b=i[0];for(let F=0;F<b.length;F++){const O=b[F];(!F||O.x<u)&&(u=O.x),(!F||O.y<p)&&(p=O.y),(!F||O.x>g)&&(g=O.x),(!F||O.y>_)&&(_=O.y)}const w=Math.min(g-u,_-p);let k=w/2;const A=new WS([],HS);if(w===0)return new dt(u,p);for(let F=u;F<g;F+=w)for(let O=p;O<_;O+=w)A.push(new au(F+k,O+k,k,i));let P=function(F){let O=0,Y=0,K=0;const de=F[0];for(let ve=0,ce=de.length,ge=ce-1;ve<ce;ge=ve++){const Pe=de[ve],ze=de[ge],tt=Pe.x*ze.y-ze.x*Pe.y;Y+=(Pe.x+ze.x)*tt,K+=(Pe.y+ze.y)*tt,O+=3*tt}return new au(Y/O,K/O,0,F)}(i),L=A.length;for(;A.length;){const F=A.pop();(F.d>P.d||!P.d)&&(P=F,a&&console.log("found best %d after %d probes",Math.round(1e4*F.d)/1e4,L)),F.max-P.d<=t||(k=F.h/2,A.push(new au(F.p.x-k,F.p.y-k,k,i)),A.push(new au(F.p.x+k,F.p.y-k,k,i)),A.push(new au(F.p.x-k,F.p.y+k,k,i)),A.push(new au(F.p.x+k,F.p.y+k,k,i)),L+=4)}return a&&(console.log(`num probes: ${L}`),console.log(`best distance: ${P.d}`)),P.p}function HS(i,t){return t.max-i.max}function au(i,t,a,u){this.p=new dt(i,t),this.h=a,this.d=function(p,g){let _=!1,b=1/0;for(let w=0;w<g.length;w++){const k=g[w];for(let A=0,P=k.length,L=P-1;A<P;L=A++){const F=k[A],O=k[L];F.y>p.y!=O.y>p.y&&p.x<(O.x-F.x)*(p.y-F.y)/(O.y-F.y)+F.x&&(_=!_),b=Math.min(b,r_(p,F,O))}}return(_?1:-1)*Math.sqrt(b)}(this.p,u),this.max=this.d+this.h*Math.SQRT2}const Tm=Number.POSITIVE_INFINITY;function X_(i,t){return t[1]!==Tm?function(a,u,p){let g=0,_=0;switch(u=Math.abs(u),p=Math.abs(p),a){case"top-right":case"top-left":case"top":_=p-7;break;case"bottom-right":case"bottom-left":case"bottom":_=7-p}switch(a){case"top-right":case"bottom-right":case"right":g=-u;break;case"top-left":case"bottom-left":case"left":g=u}return[g,_]}(i,t[0],t[1]):function(a,u){let p=0,g=0;u<0&&(u=0);const _=u/Math.sqrt(2);switch(a){case"top-right":case"top-left":g=_-7;break;case"bottom-right":case"bottom-left":g=7-_;break;case"bottom":g=7-u;break;case"top":g=u-7}switch(a){case"top-right":case"bottom-right":p=-_;break;case"top-left":case"bottom-left":p=_;break;case"left":p=u;break;case"right":p=-u}return[p,g]}(i,t[0])}function Em(i){switch(i){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function XS(i,t,a,u,p,g,_,b,w,k,A){let P=g.textMaxSize.evaluate(t,{});P===void 0&&(P=_);const L=i.layers[0].layout,F=L.get("icon-offset").evaluate(t,{},A),O=Y_(a.horizontal),Y=_/24,K=i.tilePixelRatio*Y,de=i.tilePixelRatio*P/24,ve=i.tilePixelRatio*b,ce=i.tilePixelRatio*L.get("symbol-spacing"),ge=L.get("text-padding")*i.tilePixelRatio,Pe=function(Oe,mt,ct,It=1){const mr=Oe.get("icon-padding").evaluate(mt,{},ct),xr=mr&&mr.values;return[xr[0]*It,xr[1]*It,xr[2]*It,xr[3]*It]}(L,t,A,i.tilePixelRatio),ze=L.get("text-max-angle")/180*Math.PI,tt=L.get("text-rotation-alignment")!=="viewport"&&L.get("symbol-placement")!=="point",lt=L.get("icon-rotation-alignment")==="map"&&L.get("symbol-placement")!=="point",Ke=L.get("symbol-placement"),Ge=ce/2,Ue=L.get("icon-text-fit");let Ye;u&&Ue!=="none"&&(i.allowVerticalPlacement&&a.vertical&&(Ye=N_(u,a.vertical,Ue,L.get("icon-text-fit-padding"),F,Y)),O&&(u=N_(u,O,Ue,L.get("icon-text-fit-padding"),F,Y)));const qe=(Oe,mt)=>{mt.x<0||mt.x>=Yr||mt.y<0||mt.y>=Yr||function(ct,It,mr,xr,Jr,Ri,_n,Gr,sn,vn,Bn,ii,Wr,xn,Fn,Xn,oi,ai,Sr,ln,zt,vi,bn,On,Yi){const yo=ct.addToLineVertexArray(It,mr);let _o,ka,Ji,Li,si=0,Ca=0,zc=0,pv=0,Lm=-1,Bm=-1;const Ia={};let fv=an.exports(""),Fm=0,Om=0;if(Gr._unevaluatedLayout.getValue("text-radial-offset")===void 0?[Fm,Om]=Gr.layout.get("text-offset").evaluate(zt,{},On).map(li=>li*pn):(Fm=Gr.layout.get("text-radial-offset").evaluate(zt,{},On)*pn,Om=Tm),ct.allowVerticalPlacement&&xr.vertical){const li=Gr.layout.get("text-rotate").evaluate(zt,{},On)+90;Ji=new Bd(sn,It,vn,Bn,ii,xr.vertical,Wr,xn,Fn,li),_n&&(Li=new Bd(sn,It,vn,Bn,ii,_n,oi,ai,Fn,li))}if(Jr){const li=Gr.layout.get("icon-rotate").evaluate(zt,{}),qo=Gr.layout.get("icon-text-fit")!=="none",Pc=Z_(Jr,li,bn,qo),Mc=_n?Z_(_n,li,bn,qo):void 0;ka=new Bd(sn,It,vn,Bn,ii,Jr,oi,ai,!1,li),si=4*Pc.length;const yv=ct.iconSizeData;let dl=null;yv.kind==="source"?(dl=[Ea*Gr.layout.get("icon-size").evaluate(zt,{})],dl[0]>as&&Ne(`${ct.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):yv.kind==="composite"&&(dl=[Ea*vi.compositeIconSizes[0].evaluate(zt,{},On),Ea*vi.compositeIconSizes[1].evaluate(zt,{},On)],(dl[0]>as||dl[1]>as)&&Ne(`${ct.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),ct.addSymbols(ct.icon,Pc,dl,ln,Sr,zt,l.WritingMode.none,It,yo.lineStartIndex,yo.lineLength,-1,On),Lm=ct.icon.placedSymbolArray.length-1,Mc&&(Ca=4*Mc.length,ct.addSymbols(ct.icon,Mc,dl,ln,Sr,zt,l.WritingMode.vertical,It,yo.lineStartIndex,yo.lineLength,-1,On),Bm=ct.icon.placedSymbolArray.length-1)}const mv=Object.keys(xr.horizontal);for(const li of mv){const qo=xr.horizontal[li];if(!_o){fv=an.exports(qo.text);const Mc=Gr.layout.get("text-rotate").evaluate(zt,{},On);_o=new Bd(sn,It,vn,Bn,ii,qo,Wr,xn,Fn,Mc)}const Pc=qo.positionedLines.length===1;if(zc+=K_(ct,It,qo,Ri,Gr,Fn,zt,Xn,yo,xr.vertical?l.WritingMode.horizontal:l.WritingMode.horizontalOnly,Pc?mv:[li],Ia,Lm,vi,On),Pc)break}xr.vertical&&(pv+=K_(ct,It,xr.vertical,Ri,Gr,Fn,zt,Xn,yo,l.WritingMode.vertical,["vertical"],Ia,Bm,vi,On));const lT=_o?_o.boxStartIndex:ct.collisionBoxArray.length,uT=_o?_o.boxEndIndex:ct.collisionBoxArray.length,cT=Ji?Ji.boxStartIndex:ct.collisionBoxArray.length,hT=Ji?Ji.boxEndIndex:ct.collisionBoxArray.length,dT=ka?ka.boxStartIndex:ct.collisionBoxArray.length,pT=ka?ka.boxEndIndex:ct.collisionBoxArray.length,fT=Li?Li.boxStartIndex:ct.collisionBoxArray.length,mT=Li?Li.boxEndIndex:ct.collisionBoxArray.length;let vo=-1;const Ud=(li,qo)=>li&&li.circleDiameter?Math.max(li.circleDiameter,qo):qo;vo=Ud(_o,vo),vo=Ud(Ji,vo),vo=Ud(ka,vo),vo=Ud(Li,vo);const gv=vo>-1?1:0;gv&&(vo*=Yi/pn),ct.glyphOffsetArray.length>=su.MAX_GLYPHS&&Ne("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),zt.sortKey!==void 0&&ct.addToSortKeyRanges(ct.symbolInstances.length,zt.sortKey),ct.symbolInstances.emplaceBack(It.x,It.y,Ia.right>=0?Ia.right:-1,Ia.center>=0?Ia.center:-1,Ia.left>=0?Ia.left:-1,Ia.vertical||-1,Lm,Bm,fv,lT,uT,cT,hT,dT,pT,fT,mT,vn,zc,pv,si,Ca,gv,0,Wr,Fm,Om,vo)}(i,mt,Oe,a,u,p,Ye,i.layers[0],i.collisionBoxArray,t.index,t.sourceLayerIndex,i.index,K,[ge,ge,ge,ge],tt,w,ve,Pe,lt,F,t,g,k,A,_)};if(Ke==="line")for(const Oe of q_(t.geometry,0,0,Yr,Yr)){const mt=GS(Oe,ce,ze,a.vertical||O,u,24,de,i.overscaling,Yr);for(const ct of mt){const It=O;It&&KS(i,It.text,Ge,ct)||qe(Oe,ct)}}else if(Ke==="line-center"){for(const Oe of t.geometry)if(Oe.length>1){const mt=jS(Oe,ze,a.vertical||O,u,24,de);mt&&qe(Oe,mt)}}else if(t.type==="Polygon")for(const Oe of dm(t.geometry,0)){const mt=ZS(Oe,16);qe(Oe[0],new os(mt.x,mt.y,0))}else if(t.type==="LineString")for(const Oe of t.geometry)qe(Oe,new os(Oe[0].x,Oe[0].y,0));else if(t.type==="Point")for(const Oe of t.geometry)for(const mt of Oe)qe([mt],new os(mt.x,mt.y,0))}const as=32640;function K_(i,t,a,u,p,g,_,b,w,k,A,P,L,F,O){const Y=function(ve,ce,ge,Pe,ze,tt,lt,Ke){const Ge=Pe.layout.get("text-rotate").evaluate(tt,{})*Math.PI/180,Ue=[];for(const Ye of ce.positionedLines)for(const qe of Ye.positionedGlyphs){if(!qe.rect)continue;const Oe=qe.rect||{};let mt=4,ct=!0,It=1,mr=0;const xr=(ze||Ke)&&qe.vertical,Jr=qe.metrics.advance*qe.scale/2;if(Ke&&ce.verticalizable){const Sr=(qe.scale-1)*pn,ln=(pn-qe.metrics.width*qe.scale)/2;mr=Ye.lineOffset/2-(qe.imageName?-ln:Sr)}if(qe.imageName){const Sr=lt[qe.imageName];ct=Sr.sdf,It=Sr.pixelRatio,mt=1/It}const Ri=ze?[qe.x+Jr,qe.y]:[0,0];let _n=ze?[0,0]:[qe.x+Jr+ge[0],qe.y+ge[1]-mr],Gr=[0,0];xr&&(Gr=_n,_n=[0,0]);const sn=(qe.metrics.left-mt)*qe.scale-Jr+_n[0],vn=(-qe.metrics.top-mt)*qe.scale+_n[1],Bn=sn+Oe.w*qe.scale/It,ii=vn+Oe.h*qe.scale/It,Wr=new dt(sn,vn),xn=new dt(Bn,vn),Fn=new dt(sn,ii),Xn=new dt(Bn,ii);if(xr){const Sr=new dt(-Jr,Jr-zd),ln=-Math.PI/2,zt=12-Jr,vi=new dt(22-zt,-(qe.imageName?zt:0)),bn=new dt(...Gr);Wr._rotateAround(ln,Sr)._add(vi)._add(bn),xn._rotateAround(ln,Sr)._add(vi)._add(bn),Fn._rotateAround(ln,Sr)._add(vi)._add(bn),Xn._rotateAround(ln,Sr)._add(vi)._add(bn)}if(Ge){const Sr=Math.sin(Ge),ln=Math.cos(Ge),zt=[ln,-Sr,Sr,ln];Wr._matMult(zt),xn._matMult(zt),Fn._matMult(zt),Xn._matMult(zt)}const oi=new dt(0,0),ai=new dt(0,0);Ue.push({tl:Wr,tr:xn,bl:Fn,br:Xn,tex:Oe,writingMode:ce.writingMode,glyphOffset:Ri,sectionIndex:qe.sectionIndex,isSDF:ct,pixelOffsetTL:oi,pixelOffsetBR:ai,minFontScaleX:0,minFontScaleY:0})}return Ue}(0,a,b,p,g,_,u,i.allowVerticalPlacement),K=i.textSizeData;let de=null;K.kind==="source"?(de=[Ea*p.layout.get("text-size").evaluate(_,{})],de[0]>as&&Ne(`${i.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):K.kind==="composite"&&(de=[Ea*F.compositeTextSizes[0].evaluate(_,{},O),Ea*F.compositeTextSizes[1].evaluate(_,{},O)],(de[0]>as||de[1]>as)&&Ne(`${i.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),i.addSymbols(i.text,Y,de,b,g,_,k,t,w.lineStartIndex,w.lineLength,L,O);for(const ve of A)P[ve]=i.text.placedSymbolArray.length-1;return 4*Y.length}function Y_(i){for(const t in i)return i[t];return null}function KS(i,t,a,u){const p=i.compareText;if(t in p){const g=p[t];for(let _=g.length-1;_>=0;_--)if(u.dist(g[_])<a)return!0}else p[t]=[];return p[t].push(u),!1}const YS=ns.VectorTileFeature.types,JS=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Fd(i,t,a,u,p,g,_,b,w,k,A,P,L){const F=b?Math.min(as,Math.round(b[0])):0,O=b?Math.min(as,Math.round(b[1])):0;i.emplaceBack(t,a,Math.round(32*u),Math.round(32*p),g,_,(F<<1)+(w?1:0),O,16*k,16*A,256*P,256*L)}function km(i,t,a){i.emplaceBack(t.x,t.y,a),i.emplaceBack(t.x,t.y,a),i.emplaceBack(t.x,t.y,a),i.emplaceBack(t.x,t.y,a)}function QS(i){for(const t of i.sections)if(dd(t.text))return!0;return!1}class Cm{constructor(t){this.layoutVertexArray=new Xi,this.indexArray=new qn,this.programConfigurations=t,this.segments=new At,this.dynamicLayoutVertexArray=new Pi,this.opacityVertexArray=new Ki,this.placedSymbolArray=new Be}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(t,a,u,p){this.isEmpty()||(u&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,wS.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,a),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,SS.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,JS,!0),this.opacityVertexBuffer.itemSize=1),(u||p)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}nt("SymbolBuffers",Cm);class Im{constructor(t,a,u){this.layoutVertexArray=new t,this.layoutAttributes=a,this.indexArray=new u,this.segments=new At,this.collisionVertexArray=new yi}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,TS.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}nt("CollisionBuffers",Im);class su{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(_=>_.id),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=am([]),this.placementViewportMatrix=am([]);const a=this.layers[0]._unevaluatedLayout._values;this.textSizeData=$_(this.zoom,a["text-size"]),this.iconSizeData=$_(this.zoom,a["icon-size"]);const u=this.layers[0].layout,p=u.get("symbol-sort-key"),g=u.get("symbol-z-order");this.canOverlap=zm(u,"text-overlap","text-allow-overlap")!=="never"||zm(u,"icon-overlap","icon-allow-overlap")!=="never"||u.get("text-ignore-placement")||u.get("icon-ignore-placement"),this.sortFeaturesByKey=g!=="viewport-y"&&!p.isConstant(),this.sortFeaturesByY=(g==="viewport-y"||g==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,u.get("symbol-placement")==="point"&&(this.writingModes=u.get("text-writing-mode").map(_=>l.WritingMode[_])),this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id),this.sourceID=t.sourceID}createArrays(){this.text=new Cm(new sl(this.layers,this.zoom,t=>/^text/.test(t))),this.icon=new Cm(new sl(this.layers,this.zoom,t=>/^icon/.test(t))),this.glyphOffsetArray=new je,this.lineVertexArray=new et,this.symbolInstances=new Qe}calculateGlyphDependencies(t,a,u,p,g){for(let _=0;_<t.length;_++)if(a[t.charCodeAt(_)]=!0,(u||p)&&g){const b=kc[t.charAt(_)];b&&(a[b.charCodeAt(0)]=!0)}}populate(t,a,u){const p=this.layers[0],g=p.layout,_=g.get("text-font"),b=g.get("text-field"),w=g.get("icon-image"),k=(b.value.kind!=="constant"||b.value.value instanceof te&&!b.value.value.isEmpty()||b.value.value.toString().length>0)&&(_.value.kind!=="constant"||_.value.value.length>0),A=w.value.kind!=="constant"||!!w.value.value||Object.keys(w.parameters).length>0,P=g.get("symbol-sort-key");if(this.features=[],!k&&!A)return;const L=a.iconDependencies,F=a.glyphDependencies,O=a.availableImages,Y=new _r(this.zoom);for(const{feature:K,id:de,index:ve,sourceLayerIndex:ce}of t){const ge=p._featureFilter.needGeometry,Pe=ul(K,ge);if(!p._featureFilter.filter(Y,Pe,u))continue;let ze,tt;if(ge||(Pe.geometry=ll(K)),k){const Ke=p.getValueAndResolveTokens("text-field",Pe,u,O),Ge=te.factory(Ke);QS(Ge)&&(this.hasRTLText=!0),(!this.hasRTLText||il()==="unavailable"||this.hasRTLText&&gi.isParsed())&&(ze=kS(Ge,p,Pe))}if(A){const Ke=p.getValueAndResolveTokens("icon-image",Pe,u,O);tt=Ke instanceof se?Ke:se.fromString(Ke)}if(!ze&&!tt)continue;const lt=this.sortFeaturesByKey?P.evaluate(Pe,{},u):void 0;if(this.features.push({id:de,text:ze,icon:tt,index:ve,sourceLayerIndex:ce,geometry:Pe.geometry,properties:K.properties,type:YS[K.type],sortKey:lt}),tt&&(L[tt.name]=!0),ze){const Ke=_.evaluate(Pe,{},u).join(","),Ge=g.get("text-rotation-alignment")!=="viewport"&&g.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(l.WritingMode.vertical)>=0;for(const Ue of ze.sections)if(Ue.image)L[Ue.image.name]=!0;else{const Ye=Xl(ze.toString()),qe=Ue.fontStack||Ke,Oe=F[qe]=F[qe]||{};this.calculateGlyphDependencies(Ue.text,Oe,Ge,this.allowVerticalPlacement,Ye)}}}g.get("symbol-placement")==="line"&&(this.features=function(K){const de={},ve={},ce=[];let ge=0;function Pe(Ke){ce.push(K[Ke]),ge++}function ze(Ke,Ge,Ue){const Ye=ve[Ke];return delete ve[Ke],ve[Ge]=Ye,ce[Ye].geometry[0].pop(),ce[Ye].geometry[0]=ce[Ye].geometry[0].concat(Ue[0]),Ye}function tt(Ke,Ge,Ue){const Ye=de[Ge];return delete de[Ge],de[Ke]=Ye,ce[Ye].geometry[0].shift(),ce[Ye].geometry[0]=Ue[0].concat(ce[Ye].geometry[0]),Ye}function lt(Ke,Ge,Ue){const Ye=Ue?Ge[0][Ge[0].length-1]:Ge[0][0];return`${Ke}:${Ye.x}:${Ye.y}`}for(let Ke=0;Ke<K.length;Ke++){const Ge=K[Ke],Ue=Ge.geometry,Ye=Ge.text?Ge.text.toString():null;if(!Ye){Pe(Ke);continue}const qe=lt(Ye,Ue),Oe=lt(Ye,Ue,!0);if(qe in ve&&Oe in de&&ve[qe]!==de[Oe]){const mt=tt(qe,Oe,Ue),ct=ze(qe,Oe,ce[mt].geometry);delete de[qe],delete ve[Oe],ve[lt(Ye,ce[ct].geometry,!0)]=ct,ce[mt].geometry=null}else qe in ve?ze(qe,Oe,Ue):Oe in de?tt(qe,Oe,Ue):(Pe(Ke),de[qe]=ge-1,ve[Oe]=ge-1)}return ce.filter(Ke=>Ke.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((K,de)=>K.sortKey-de.sortKey)}update(t,a,u){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,a,this.layers,u),this.icon.programConfigurations.updatePaintArrays(t,a,this.layers,u))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,a){const u=this.lineVertexArray.length;if(t.segment!==void 0){let p=t.dist(a[t.segment+1]),g=t.dist(a[t.segment]);const _={};for(let b=t.segment+1;b<a.length;b++)_[b]={x:a[b].x,y:a[b].y,tileUnitDistanceFromAnchor:p},b<a.length-1&&(p+=a[b+1].dist(a[b]));for(let b=t.segment||0;b>=0;b--)_[b]={x:a[b].x,y:a[b].y,tileUnitDistanceFromAnchor:g},b>0&&(g+=a[b-1].dist(a[b]));for(let b=0;b<a.length;b++){const w=_[b];this.lineVertexArray.emplaceBack(w.x,w.y,w.tileUnitDistanceFromAnchor)}}return{lineStartIndex:u,lineLength:this.lineVertexArray.length-u}}addSymbols(t,a,u,p,g,_,b,w,k,A,P,L){const F=t.indexArray,O=t.layoutVertexArray,Y=t.segments.prepareSegment(4*a.length,O,F,this.canOverlap?_.sortKey:void 0),K=this.glyphOffsetArray.length,de=Y.vertexLength,ve=this.allowVerticalPlacement&&b===l.WritingMode.vertical?Math.PI/2:0,ce=_.text&&_.text.sections;for(let ge=0;ge<a.length;ge++){const{tl:Pe,tr:ze,bl:tt,br:lt,tex:Ke,pixelOffsetTL:Ge,pixelOffsetBR:Ue,minFontScaleX:Ye,minFontScaleY:qe,glyphOffset:Oe,isSDF:mt,sectionIndex:ct}=a[ge],It=Y.vertexLength,mr=Oe[1];Fd(O,w.x,w.y,Pe.x,mr+Pe.y,Ke.x,Ke.y,u,mt,Ge.x,Ge.y,Ye,qe),Fd(O,w.x,w.y,ze.x,mr+ze.y,Ke.x+Ke.w,Ke.y,u,mt,Ue.x,Ge.y,Ye,qe),Fd(O,w.x,w.y,tt.x,mr+tt.y,Ke.x,Ke.y+Ke.h,u,mt,Ge.x,Ue.y,Ye,qe),Fd(O,w.x,w.y,lt.x,mr+lt.y,Ke.x+Ke.w,Ke.y+Ke.h,u,mt,Ue.x,Ue.y,Ye,qe),km(t.dynamicLayoutVertexArray,w,ve),F.emplaceBack(It,It+1,It+2),F.emplaceBack(It+1,It+2,It+3),Y.vertexLength+=4,Y.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Oe[0]),ge!==a.length-1&&ct===a[ge+1].sectionIndex||t.programConfigurations.populatePaintArrays(O.length,_,_.index,{},L,ce&&ce[ct])}t.placedSymbolArray.emplaceBack(w.x,w.y,K,this.glyphOffsetArray.length-K,de,k,A,w.segment,u?u[0]:0,u?u[1]:0,p[0],p[1],b,0,!1,0,P)}_addCollisionDebugVertex(t,a,u,p,g,_){return a.emplaceBack(0,0),t.emplaceBack(u.x,u.y,p,g,Math.round(_.x),Math.round(_.y))}addCollisionDebugVertices(t,a,u,p,g,_,b){const w=g.segments.prepareSegment(4,g.layoutVertexArray,g.indexArray),k=w.vertexLength,A=g.layoutVertexArray,P=g.collisionVertexArray,L=b.anchorX,F=b.anchorY;this._addCollisionDebugVertex(A,P,_,L,F,new dt(t,a)),this._addCollisionDebugVertex(A,P,_,L,F,new dt(u,a)),this._addCollisionDebugVertex(A,P,_,L,F,new dt(u,p)),this._addCollisionDebugVertex(A,P,_,L,F,new dt(t,p)),w.vertexLength+=4;const O=g.indexArray;O.emplaceBack(k,k+1),O.emplaceBack(k+1,k+2),O.emplaceBack(k+2,k+3),O.emplaceBack(k+3,k),w.primitiveLength+=4}addDebugCollisionBoxes(t,a,u,p){for(let g=t;g<a;g++){const _=this.collisionBoxArray.get(g);this.addCollisionDebugVertices(_.x1,_.y1,_.x2,_.y2,p?this.textCollisionBox:this.iconCollisionBox,_.anchorPoint,u)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Im(Go,k_.members,mo),this.iconCollisionBox=new Im(Go,k_.members,mo);for(let t=0;t<this.symbolInstances.length;t++){const a=this.symbolInstances.get(t);this.addDebugCollisionBoxes(a.textBoxStartIndex,a.textBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.iconBoxStartIndex,a.iconBoxEndIndex,a,!1),this.addDebugCollisionBoxes(a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex,a,!1)}}_deserializeCollisionBoxesForSymbol(t,a,u,p,g,_,b,w,k){const A={};for(let P=a;P<u;P++){const L=t.get(P);A.textBox={x1:L.x1,y1:L.y1,x2:L.x2,y2:L.y2,anchorPointX:L.anchorPointX,anchorPointY:L.anchorPointY},A.textFeatureIndex=L.featureIndex;break}for(let P=p;P<g;P++){const L=t.get(P);A.verticalTextBox={x1:L.x1,y1:L.y1,x2:L.x2,y2:L.y2,anchorPointX:L.anchorPointX,anchorPointY:L.anchorPointY},A.verticalTextFeatureIndex=L.featureIndex;break}for(let P=_;P<b;P++){const L=t.get(P);A.iconBox={x1:L.x1,y1:L.y1,x2:L.x2,y2:L.y2,anchorPointX:L.anchorPointX,anchorPointY:L.anchorPointY},A.iconFeatureIndex=L.featureIndex;break}for(let P=w;P<k;P++){const L=t.get(P);A.verticalIconBox={x1:L.x1,y1:L.y1,x2:L.x2,y2:L.y2,anchorPointX:L.anchorPointX,anchorPointY:L.anchorPointY},A.verticalIconFeatureIndex=L.featureIndex;break}return A}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let a=0;a<this.symbolInstances.length;a++){const u=this.symbolInstances.get(a);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,u.textBoxStartIndex,u.textBoxEndIndex,u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u.iconBoxStartIndex,u.iconBoxEndIndex,u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,a){const u=t.placedSymbolArray.get(a),p=u.vertexStartIndex+4*u.numGlyphs;for(let g=u.vertexStartIndex;g<p;g+=4)t.indexArray.emplaceBack(g,g+1,g+2),t.indexArray.emplaceBack(g+1,g+2,g+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const a=Math.sin(t),u=Math.cos(t),p=[],g=[],_=[];for(let b=0;b<this.symbolInstances.length;++b){_.push(b);const w=this.symbolInstances.get(b);p.push(0|Math.round(a*w.anchorX+u*w.anchorY)),g.push(w.featureIndex)}return _.sort((b,w)=>p[b]-p[w]||g[w]-g[b]),_}addToSortKeyRanges(t,a){const u=this.sortKeyRanges[this.sortKeyRanges.length-1];u&&u.sortKey===a?u.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:a,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const a of this.symbolInstanceIndexes){const u=this.symbolInstances.get(a);this.featureSortOrder.push(u.featureIndex),[u.rightJustifiedTextSymbolIndex,u.centerJustifiedTextSymbolIndex,u.leftJustifiedTextSymbolIndex].forEach((p,g,_)=>{p>=0&&_.indexOf(p)===g&&this.addIndicesForPlacedSymbol(this.text,p)}),u.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,u.verticalPlacedTextSymbolIndex),u.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,u.placedIconSymbolIndex),u.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,u.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}nt("SymbolBucket",su,{omit:["layers","collisionBoxArray","features","compareText"]}),su.MAX_GLYPHS=65535,su.addDynamicAttributes=km;const eT=new dn({"symbol-placement":new ut(ke.layout_symbol["symbol-placement"]),"symbol-spacing":new ut(ke.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ut(ke.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new yt(ke.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ut(ke.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ut(ke.layout_symbol["icon-allow-overlap"]),"icon-overlap":new ut(ke.layout_symbol["icon-overlap"]),"icon-ignore-placement":new ut(ke.layout_symbol["icon-ignore-placement"]),"icon-optional":new ut(ke.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ut(ke.layout_symbol["icon-rotation-alignment"]),"icon-size":new yt(ke.layout_symbol["icon-size"]),"icon-text-fit":new ut(ke.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ut(ke.layout_symbol["icon-text-fit-padding"]),"icon-image":new yt(ke.layout_symbol["icon-image"]),"icon-rotate":new yt(ke.layout_symbol["icon-rotate"]),"icon-padding":new yt(ke.layout_symbol["icon-padding"]),"icon-keep-upright":new ut(ke.layout_symbol["icon-keep-upright"]),"icon-offset":new yt(ke.layout_symbol["icon-offset"]),"icon-anchor":new yt(ke.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ut(ke.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ut(ke.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ut(ke.layout_symbol["text-rotation-alignment"]),"text-field":new yt(ke.layout_symbol["text-field"]),"text-font":new yt(ke.layout_symbol["text-font"]),"text-size":new yt(ke.layout_symbol["text-size"]),"text-max-width":new yt(ke.layout_symbol["text-max-width"]),"text-line-height":new ut(ke.layout_symbol["text-line-height"]),"text-letter-spacing":new yt(ke.layout_symbol["text-letter-spacing"]),"text-justify":new yt(ke.layout_symbol["text-justify"]),"text-radial-offset":new yt(ke.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ut(ke.layout_symbol["text-variable-anchor"]),"text-anchor":new yt(ke.layout_symbol["text-anchor"]),"text-max-angle":new ut(ke.layout_symbol["text-max-angle"]),"text-writing-mode":new ut(ke.layout_symbol["text-writing-mode"]),"text-rotate":new yt(ke.layout_symbol["text-rotate"]),"text-padding":new ut(ke.layout_symbol["text-padding"]),"text-keep-upright":new ut(ke.layout_symbol["text-keep-upright"]),"text-transform":new yt(ke.layout_symbol["text-transform"]),"text-offset":new yt(ke.layout_symbol["text-offset"]),"text-allow-overlap":new ut(ke.layout_symbol["text-allow-overlap"]),"text-overlap":new ut(ke.layout_symbol["text-overlap"]),"text-ignore-placement":new ut(ke.layout_symbol["text-ignore-placement"]),"text-optional":new ut(ke.layout_symbol["text-optional"])});var Am={paint:new dn({"icon-opacity":new yt(ke.paint_symbol["icon-opacity"]),"icon-color":new yt(ke.paint_symbol["icon-color"]),"icon-halo-color":new yt(ke.paint_symbol["icon-halo-color"]),"icon-halo-width":new yt(ke.paint_symbol["icon-halo-width"]),"icon-halo-blur":new yt(ke.paint_symbol["icon-halo-blur"]),"icon-translate":new ut(ke.paint_symbol["icon-translate"]),"icon-translate-anchor":new ut(ke.paint_symbol["icon-translate-anchor"]),"text-opacity":new yt(ke.paint_symbol["text-opacity"]),"text-color":new yt(ke.paint_symbol["text-color"],{runtimeType:Xr,getOverride:i=>i.textColor,hasOverride:i=>!!i.textColor}),"text-halo-color":new yt(ke.paint_symbol["text-halo-color"]),"text-halo-width":new yt(ke.paint_symbol["text-halo-width"]),"text-halo-blur":new yt(ke.paint_symbol["text-halo-blur"]),"text-translate":new ut(ke.paint_symbol["text-translate"]),"text-translate-anchor":new ut(ke.paint_symbol["text-translate-anchor"])}),layout:eT};class J_{constructor(t){if(t.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=t.property.overrides?t.property.overrides.runtimeType:gn,this.defaultValue=t}evaluate(t){if(t.formattedSection){const a=this.defaultValue.property.overrides;if(a&&a.hasOverride(t.formattedSection))return a.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}nt("FormatSectionOverride",J_,{omit:["defaultValue"]});class Od extends Hi{constructor(t){super(t,Am)}recalculate(t,a){if(super.recalculate(t,a),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const u=this.layout.get("text-writing-mode");if(u){const p=[];for(const g of u)p.indexOf(g)<0&&p.push(g);this.layout._values["text-writing-mode"]=p}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(t,a,u,p){const g=this.layout.get(t).evaluate(a,{},u,p),_=this._unevaluatedLayout._values[t];return _.isDataDriven()||Ws(_.value)||!g?g:function(b,w){return w.replace(/{([^{}]+)}/g,(k,A)=>A in b?String(b[A]):"")}(a.properties,g)}createBucket(t){return new su(t)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const t of Am.paint.overridableProperties){if(!Od.hasPaintOverride(this.layout,t))continue;const a=this.paint.get(t),u=new J_(a),p=new jl(u,a.property.specification);let g=null;g=a.value.kind==="constant"||a.value.kind==="source"?new Zs("source",p):new ec("composite",p,a.value.zoomStops),this.paint._values[t]=new Zi(a.property,g,a.parameters)}}_handleOverridablePaintPropertyUpdate(t,a,u){return!(!this.layout||a.isDataDriven()||u.isDataDriven())&&Od.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,a){const u=t.get("text-field"),p=Am.paint.properties[a];let g=!1;const _=b=>{for(const w of b)if(p.overrides&&p.overrides.hasOverride(w))return void(g=!0)};if(u.value.kind==="constant"&&u.value.value instanceof te)_(u.value.value.sections);else if(u.value.kind==="source"){const b=k=>{g||(k instanceof ot&&we(k.value)===pr?_(k.value.sections):k instanceof Ul?_(k.sections):k.eachChild(b))},w=u.value;w._styleExpression&&b(w._styleExpression.expression)}return g}}function zm(i,t,a){let u="never";const p=i.get(t);return p?u=p:i.get(a)&&(u="always"),u}var tT={paint:new dn({"background-color":new ut(ke.paint_background["background-color"]),"background-pattern":new dc(ke.paint_background["background-pattern"]),"background-opacity":new ut(ke.paint_background["background-opacity"])})},rT={paint:new dn({"raster-opacity":new ut(ke.paint_raster["raster-opacity"]),"raster-hue-rotate":new ut(ke.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ut(ke.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ut(ke.paint_raster["raster-brightness-max"]),"raster-saturation":new ut(ke.paint_raster["raster-saturation"]),"raster-contrast":new ut(ke.paint_raster["raster-contrast"]),"raster-resampling":new ut(ke.paint_raster["raster-resampling"]),"raster-fade-duration":new ut(ke.paint_raster["raster-fade-duration"])})};class nT extends Hi{constructor(t){super(t,{}),this.onAdd=a=>{this.implementation.onAdd&&this.implementation.onAdd(a,a.painter.context.gl)},this.onRemove=a=>{this.implementation.onRemove&&this.implementation.onRemove(a,a.painter.context.gl)},this.implementation=t}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}const iT={circle:class extends Hi{constructor(i){super(i,L2)}createBucket(i){return new nm(i)}queryRadius(i){const t=i;return yc("circle-radius",this,t)+yc("circle-stroke-width",this,t)+bd(this.paint.get("circle-translate"))}queryIntersectsFeature(i,t,a,u,p,g,_,b){const w=wd(i,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),g.angle,_),k=this.paint.get("circle-radius").evaluate(t,a)+this.paint.get("circle-stroke-width").evaluate(t,a),A=this.paint.get("circle-pitch-alignment")==="map",P=A?w:function(F,O){return F.map(Y=>u_(Y,O))}(w,b),L=A?k*_:k;for(const F of u)for(const O of F){const Y=A?O:u_(O,b);let K=L;const de=Sd([],[O.x,O.y,0,1],b);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?K*=de[3]/g.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(K*=g.cameraToCenterDistance/de[3]),z2(P,Y,K))return!0}return!1}},heatmap:class extends Hi{constructor(i){super(i,F2),this._updateColorRamp()}createBucket(i){return new c_(i)}_handleSpecialPaintPropertyUpdate(i){i==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=d_({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}},hillshade:class extends Hi{constructor(i){super(i,O2)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}},fill:class extends Hi{constructor(i){super(i,eS)}recalculate(i,t){super.recalculate(i,t);const a=this.paint._values["fill-outline-color"];a.value.kind==="constant"&&a.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(i){return new mm(i)}queryRadius(){return bd(this.paint.get("fill-translate"))}queryIntersectsFeature(i,t,a,u,p,g,_){return t_(wd(i,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),g.angle,_),u)}isTileClipped(){return!0}},"fill-extrusion":class extends Hi{constructor(i){super(i,fS)}createBucket(i){return new ym(i)}queryRadius(){return bd(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(i,t,a,u,p,g,_,b){const w=wd(i,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),g.angle,_),k=this.paint.get("fill-extrusion-height").evaluate(t,a),A=this.paint.get("fill-extrusion-base").evaluate(t,a),P=function(F,O,Y,K){const de=[];for(const ve of F){const ce=[ve.x,ve.y,0,1];Sd(ce,ce,O),de.push(new dt(ce[0]/ce[3],ce[1]/ce[3]))}return de}(w,b),L=function(F,O,Y,K){const de=[],ve=[],ce=K[8]*O,ge=K[9]*O,Pe=K[10]*O,ze=K[11]*O,tt=K[8]*Y,lt=K[9]*Y,Ke=K[10]*Y,Ge=K[11]*Y;for(const Ue of F){const Ye=[],qe=[];for(const Oe of Ue){const mt=Oe.x,ct=Oe.y,It=K[0]*mt+K[4]*ct+K[12],mr=K[1]*mt+K[5]*ct+K[13],xr=K[2]*mt+K[6]*ct+K[14],Jr=K[3]*mt+K[7]*ct+K[15],Ri=xr+Pe,_n=Jr+ze,Gr=It+tt,sn=mr+lt,vn=xr+Ke,Bn=Jr+Ge,ii=new dt((It+ce)/_n,(mr+ge)/_n);ii.z=Ri/_n,Ye.push(ii);const Wr=new dt(Gr/Bn,sn/Bn);Wr.z=vn/Bn,qe.push(Wr)}de.push(Ye),ve.push(qe)}return[de,ve]}(u,A,k,b);return function(F,O,Y){let K=1/0;t_(Y,O)&&(K=b_(Y,O[0]));for(let de=0;de<O.length;de++){const ve=O[de],ce=F[de];for(let ge=0;ge<ve.length-1;ge++){const Pe=ve[ge],ze=[Pe,ve[ge+1],ce[ge+1],ce[ge],Pe];e_(Y,ze)&&(K=Math.min(K,b_(Y,ze)))}}return K!==1/0&&K}(L[0],L[1],P)}},line:class extends Hi{constructor(i){super(i,S_),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(i){i==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof ca,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(i,t){super.recalculate(i,t),this.paint._values["line-floorwidth"]=T_.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)}createBucket(i){return new _m(i)}queryRadius(i){const t=i,a=E_(yc("line-width",this,t),yc("line-gap-width",this,t)),u=yc("line-offset",this,t);return a/2+Math.abs(u)+bd(this.paint.get("line-translate"))}queryIntersectsFeature(i,t,a,u,p,g,_){const b=wd(i,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),g.angle,_),w=_/2*E_(this.paint.get("line-width").evaluate(t,a),this.paint.get("line-gap-width").evaluate(t,a)),k=this.paint.get("line-offset").evaluate(t,a);return k&&(u=function(A,P){const L=[];for(let F=0;F<A.length;F++){const O=A[F],Y=[];for(let K=0;K<O.length;K++){const de=O[K-1],ve=O[K],ce=O[K+1],ge=K===0?new dt(0,0):ve.sub(de)._unit()._perp(),Pe=K===O.length-1?new dt(0,0):ce.sub(ve)._unit()._perp(),ze=ge._add(Pe)._unit(),tt=ze.x*Pe.x+ze.y*Pe.y;tt!==0&&ze._mult(1/tt),Y.push(ze._mult(P)._add(ve))}L.push(Y)}return L}(u,k*_)),function(A,P,L){for(let F=0;F<P.length;F++){const O=P[F];if(A.length>=3){for(let Y=0;Y<O.length;Y++)if(eu(A,O[Y]))return!0}if(P2(A,O,L))return!0}return!1}(b,u,w)}isTileClipped(){return!0}},symbol:Od,background:class extends Hi{constructor(i){super(i,tT)}},raster:class extends Hi{constructor(i){super(i,rT)}}};class oT{constructor(t){this._callback=t,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const Q_=63710088e-1;class Rr{constructor(t,a){if(isNaN(t)||isNaN(a))throw new Error(`Invalid LngLat object: (${t}, ${a})`);if(this.lng=+t,this.lat=+a,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Rr(Se(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){const a=Math.PI/180,u=this.lat*a,p=t.lat*a,g=Math.sin(u)*Math.sin(p)+Math.cos(u)*Math.cos(p)*Math.cos((t.lng-this.lng)*a);return Q_*Math.acos(Math.min(g,1))}toBounds(t=0){const a=360*t/40075017,u=a/Math.cos(Math.PI/180*this.lat);return new hl(new Rr(this.lng-u,this.lat-a),new Rr(this.lng+u,this.lat+a))}static convert(t){if(t instanceof Rr)return t;if(Array.isArray(t)&&(t.length===2||t.length===3))return new Rr(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&typeof t=="object"&&t!==null)return new Rr(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class hl{constructor(t,a){t&&(a?this.setSouthWest(t).setNorthEast(a):t.length===4?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))}setNorthEast(t){return this._ne=t instanceof Rr?new Rr(t.lng,t.lat):Rr.convert(t),this}setSouthWest(t){return this._sw=t instanceof Rr?new Rr(t.lng,t.lat):Rr.convert(t),this}extend(t){const a=this._sw,u=this._ne;let p,g;if(t instanceof Rr)p=t,g=t;else{if(!(t instanceof hl))return Array.isArray(t)?t.length===4||t.every(Array.isArray)?this.extend(hl.convert(t)):this.extend(Rr.convert(t)):this;if(p=t._sw,g=t._ne,!p||!g)return this}return a||u?(a.lng=Math.min(p.lng,a.lng),a.lat=Math.min(p.lat,a.lat),u.lng=Math.max(g.lng,u.lng),u.lat=Math.max(g.lat,u.lat)):(this._sw=new Rr(p.lng,p.lat),this._ne=new Rr(g.lng,g.lat)),this}getCenter(){return new Rr((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Rr(this.getWest(),this.getNorth())}getSouthEast(){return new Rr(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(t){const{lng:a,lat:u}=Rr.convert(t);let p=this._sw.lng<=a&&a<=this._ne.lng;return this._sw.lng>this._ne.lng&&(p=this._sw.lng>=a&&a>=this._ne.lng),this._sw.lat<=u&&u<=this._ne.lat&&p}static convert(t){return t instanceof hl?t:t&&new hl(t)}}const ev=2*Math.PI*Q_;function tv(i){return ev*Math.cos(i*Math.PI/180)}function rv(i){return(180+i)/360}function nv(i){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i*Math.PI/360)))/360}function iv(i,t){return i/tv(t)}function Pm(i){return 360/Math.PI*Math.atan(Math.exp((180-360*i)*Math.PI/180))-90}class Nd{constructor(t,a,u=0){this.x=+t,this.y=+a,this.z=+u}static fromLngLat(t,a=0){const u=Rr.convert(t);return new Nd(rv(u.lng),nv(u.lat),iv(a,u.lat))}toLngLat(){return new Rr(360*this.x-180,Pm(this.y))}toAltitude(){return this.z*tv(Pm(this.y))}meterInMercatorCoordinateUnits(){return 1/ev*(t=Pm(this.y),1/Math.cos(t*Math.PI/180));var t}}function ov(i,t,a){var u=2*Math.PI*6378137/256/Math.pow(2,a);return[i*u-2*Math.PI*6378137/2,t*u-2*Math.PI*6378137/2]}class Mm{constructor(t,a,u){if(t<0||t>25||u<0||u>=Math.pow(2,t)||a<0||a>=Math.pow(2,t))throw new Error(`x=${a}, y=${u}, z=${t} outside of bounds. 0<=x<${Math.pow(2,t)}, 0<=y<${Math.pow(2,t)} 0<=z<=25 `);this.z=t,this.x=a,this.y=u,this.key=Ic(0,t,t,a,u)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,a,u){const p=(_=this.y,b=this.z,w=ov(256*(g=this.x),256*(_=Math.pow(2,b)-_-1),b),k=ov(256*(g+1),256*(_+1),b),w[0]+","+w[1]+","+k[0]+","+k[1]);var g,_,b,w,k;const A=function(P,L,F){let O,Y="";for(let K=P;K>0;K--)O=1<<K-1,Y+=(L&O?1:0)+(F&O?2:0);return Y}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(u==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,a>1?"@2x":"").replace(/{quadkey}/g,A).replace(/{bbox-epsg-3857}/g,p)}isChildOf(t){const a=this.z-t.z;return a>0&&t.x===this.x>>a&&t.y===this.y>>a}getTilePoint(t){const a=Math.pow(2,this.z);return new dt((t.x*a-this.x)*Yr,(t.y*a-this.y)*Yr)}toString(){return`${this.z}/${this.x}/${this.y}`}}class av{constructor(t,a){this.wrap=t,this.canonical=a,this.key=Ic(t,a.z,a.z,a.x,a.y)}}class Di{constructor(t,a,u,p,g){if(t<u)throw new Error(`overscaledZ should be >= z; overscaledZ = ${t}; z = ${u}`);this.overscaledZ=t,this.wrap=a,this.canonical=new Mm(u,+p,+g),this.key=Ic(a,t,u,p,g)}clone(){return new Di(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const a=this.canonical.z-t;return t>this.canonical.z?new Di(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Di(t,this.wrap,t,this.canonical.x>>a,this.canonical.y>>a)}calculateScaledKey(t,a){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const u=this.canonical.z-t;return t>this.canonical.z?Ic(this.wrap*+a,t,this.canonical.z,this.canonical.x,this.canonical.y):Ic(this.wrap*+a,t,t,this.canonical.x>>u,this.canonical.y>>u)}isChildOf(t){if(t.wrap!==this.wrap)return!1;const a=this.canonical.z-t.canonical.z;return t.overscaledZ===0||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>a&&t.canonical.y===this.canonical.y>>a}children(t){if(this.overscaledZ>=t)return[new Di(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const a=this.canonical.z+1,u=2*this.canonical.x,p=2*this.canonical.y;return[new Di(a,this.wrap,a,u,p),new Di(a,this.wrap,a,u+1,p),new Di(a,this.wrap,a,u,p+1),new Di(a,this.wrap,a,u+1,p+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new Di(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new Di(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new av(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(t){return this.canonical.getTilePoint(new Nd(t.x-this.wrap,t.y))}}function Ic(i,t,a,u,p){(i*=2)<0&&(i=-1*i-1);const g=1<<a;return(g*g*i+g*p+u).toString(36)+a.toString(36)+t.toString(36)}nt("CanonicalTileID",Mm),nt("OverscaledTileID",Di,{omit:["posMatrix"]});class sv{constructor(t,a,u){if(this.uid=t,a.height!==a.width)throw new RangeError("DEM tiles must be square");if(u&&u!=="mapbox"&&u!=="terrarium")return void Ne(`"${u}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=a.height;const p=this.dim=a.height-2;this.data=new Uint32Array(a.data.buffer),this.encoding=u||"mapbox";for(let g=0;g<p;g++)this.data[this._idx(-1,g)]=this.data[this._idx(0,g)],this.data[this._idx(p,g)]=this.data[this._idx(p-1,g)],this.data[this._idx(g,-1)]=this.data[this._idx(g,0)],this.data[this._idx(g,p)]=this.data[this._idx(g,p-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(p,-1)]=this.data[this._idx(p-1,0)],this.data[this._idx(-1,p)]=this.data[this._idx(0,p-1)],this.data[this._idx(p,p)]=this.data[this._idx(p-1,p-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let g=0;g<p;g++)for(let _=0;_<p;_++){const b=this.get(g,_);b>this.max&&(this.max=b),b<this.min&&(this.min=b)}}get(t,a){const u=new Uint8Array(this.data.buffer),p=4*this._idx(t,a);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(u[p],u[p+1],u[p+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(t,a){if(t<-1||t>=this.dim+1||a<-1||a>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(a+1)*this.stride+(t+1)}_unpackMapbox(t,a,u){return(256*t*256+256*a+u)/10-1e4}_unpackTerrarium(t,a,u){return 256*t+a+u/256-32768}getPixels(){return new Mi({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(t,a,u){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let p=a*this.dim,g=a*this.dim+this.dim,_=u*this.dim,b=u*this.dim+this.dim;switch(a){case-1:p=g-1;break;case 1:g=p+1}switch(u){case-1:_=b-1;break;case 1:b=_+1}const w=-a*this.dim,k=-u*this.dim;for(let A=_;A<b;A++)for(let P=p;P<g;P++)this.data[this._idx(P,A)]=t.data[this._idx(P+w,A+k)]}}nt("DEMData",sv);class lv{constructor(t){this._stringToNumber={},this._numberToString=[];for(let a=0;a<t.length;a++){const u=t[a];this._stringToNumber[u]=a,this._numberToString[a]=u}}encode(t){return this._stringToNumber[t]}decode(t){if(t>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${t} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[t]}}class uv{constructor(t,a,u,p,g){this.type="Feature",this._vectorTileFeature=t,t._z=a,t._x=u,t._y=p,this.properties=t.properties,this.id=g}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={geometry:this.geometry};for(const a in this)a!=="_geometry"&&a!=="_vectorTileFeature"&&(t[a]=this[a]);return t}}class cv{constructor(t,a){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new nl(Yr,16,0),this.grid3D=new nl(Yr,16,0),this.featureIndexArray=new Ct,this.promoteId=a}insert(t,a,u,p,g,_){const b=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(u,p,g);const w=_?this.grid3D:this.grid;for(let k=0;k<a.length;k++){const A=a[k],P=[1/0,1/0,-1/0,-1/0];for(let L=0;L<A.length;L++){const F=A[L];P[0]=Math.min(P[0],F.x),P[1]=Math.min(P[1],F.y),P[2]=Math.max(P[2],F.x),P[3]=Math.max(P[3],F.y)}P[0]<Yr&&P[1]<Yr&&P[2]>=0&&P[3]>=0&&w.insert(b,P[0],P[1],P[2],P[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new ns.VectorTile(new vm(this.rawTileData)).layers,this.sourceLayerCoder=new lv(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(t,a,u,p){this.loadVTLayers();const g=t.params||{},_=Yr/t.tileSize/t.scale,b=ql(g.filter),w=t.queryGeometry,k=t.queryPadding*_,A=dv(w),P=this.grid.query(A.minX-k,A.minY-k,A.maxX+k,A.maxY+k),L=dv(t.cameraQueryGeometry),F=this.grid3D.query(L.minX-k,L.minY-k,L.maxX+k,L.maxY+k,(K,de,ve,ce)=>function(ge,Pe,ze,tt,lt){for(const Ge of ge)if(Pe<=Ge.x&&ze<=Ge.y&&tt>=Ge.x&&lt>=Ge.y)return!0;const Ke=[new dt(Pe,ze),new dt(Pe,lt),new dt(tt,lt),new dt(tt,ze)];if(ge.length>2){for(const Ge of Ke)if(eu(ge,Ge))return!0}for(let Ge=0;Ge<ge.length-1;Ge++)if(D2(ge[Ge],ge[Ge+1],Ke))return!0;return!1}(t.cameraQueryGeometry,K-k,de-k,ve+k,ce+k));for(const K of F)P.push(K);P.sort(aT);const O={};let Y;for(let K=0;K<P.length;K++){const de=P[K];if(de===Y)continue;Y=de;const ve=this.featureIndexArray.get(de);let ce=null;this.loadMatchingFeature(O,ve.bucketIndex,ve.sourceLayerIndex,ve.featureIndex,b,g.layers,g.availableImages,a,u,p,(ge,Pe,ze)=>(ce||(ce=ll(ge)),Pe.queryIntersectsFeature(w,ge,ze,ce,this.z,t.transform,_,t.pixelPosMatrix)))}return O}loadMatchingFeature(t,a,u,p,g,_,b,w,k,A,P){const L=this.bucketLayerIDs[a];if(_&&!function(K,de){for(let ve=0;ve<K.length;ve++)if(de.indexOf(K[ve])>=0)return!0;return!1}(_,L))return;const F=this.sourceLayerCoder.decode(u),O=this.vtLayers[F].feature(p);if(g.needGeometry){const K=ul(O,!0);if(!g.filter(new _r(this.tileID.overscaledZ),K,this.tileID.canonical))return}else if(!g.filter(new _r(this.tileID.overscaledZ),O))return;const Y=this.getId(O,F);for(let K=0;K<L.length;K++){const de=L[K];if(_&&_.indexOf(de)<0)continue;const ve=w[de];if(!ve)continue;let ce={};Y&&A&&(ce=A.getState(ve.sourceLayer||"_geojsonTileLayer",Y));const ge=Ae({},k[de]);ge.paint=hv(ge.paint,ve.paint,O,ce,b),ge.layout=hv(ge.layout,ve.layout,O,ce,b);const Pe=!P||P(O,ve,ce);if(!Pe)continue;const ze=new uv(O,this.z,this.x,this.y,Y);ze.layer=ge;let tt=t[de];tt===void 0&&(tt=t[de]=[]),tt.push({featureIndex:p,feature:ze,intersectionZ:Pe})}}lookupSymbolFeatures(t,a,u,p,g,_,b,w){const k={};this.loadVTLayers();const A=ql(g);for(const P of t)this.loadMatchingFeature(k,u,p,P,A,_,b,w,a);return k}hasLayer(t){for(const a of this.bucketLayerIDs)for(const u of a)if(t===u)return!0;return!1}getId(t,a){let u=t.id;return this.promoteId&&(u=t.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[a]],typeof u=="boolean"&&(u=Number(u))),u}}function hv(i,t,a,u,p){return H(i,(g,_)=>{const b=t instanceof al?t.get(_):null;return b&&b.evaluate?b.evaluate(a,u,p):b})}function dv(i){let t=1/0,a=1/0,u=-1/0,p=-1/0;for(const g of i)t=Math.min(t,g.x),a=Math.min(a,g.y),u=Math.max(u,g.x),p=Math.max(p,g.y);return{minX:t,minY:a,maxX:u,maxY:p}}function aT(i,t){return t-i}var Dm;nt("FeatureIndex",cv,{omit:["rawTileData","sourceLayerCoder"]}),l.PerformanceMarkers=void 0,(Dm=l.PerformanceMarkers||(l.PerformanceMarkers={})).create="create",Dm.load="load",Dm.fullLoad="fullLoad";let $d=null,Ac=[];const Rm=1e3/30,sT={mark(i){performance.mark(i)},frame(i){const t=i;$d!=null&&Ac.push(t-$d),$d=t},clearMetrics(){$d=null,Ac=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const i in l.PerformanceMarkers)performance.clearMarks(l.PerformanceMarkers[i])},getPerformanceMetrics(){performance.measure("loadTime",l.PerformanceMarkers.create,l.PerformanceMarkers.load),performance.measure("fullLoadTime",l.PerformanceMarkers.create,l.PerformanceMarkers.fullLoad);const i=performance.getEntriesByName("loadTime")[0].duration,t=performance.getEntriesByName("fullLoadTime")[0].duration,a=Ac.length,u=1/(Ac.reduce((g,_)=>g+_,0)/a/1e3),p=Ac.filter(g=>g>Rm).reduce((g,_)=>g+(_-Rm)/Rm,0);return{loadTime:i,fullLoadTime:t,fps:u,percentDroppedFrames:p/(a+p)*100}}};l.AJAXError=In,l.ARRAY_TYPE=Hn,l.Actor=class{constructor(i,t,a){this.target=i,this.parent=t,this.mapId=a,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},re(["receive","process"],this),this.invoker=new oT(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=rt()?i:window}send(i,t,a,u,p=!1){const g=Math.round(1e18*Math.random()).toString(36).substring(0,10);a&&(this.callbacks[g]=a);const _=Vt(this.globalScope)?void 0:[];return this.target.postMessage({id:g,type:i,hasCallback:!!a,targetMapId:u,mustQueue:p,sourceMapId:this.mapId,data:_a(t,_)},_),{cancel:()=>{a&&delete this.callbacks[g],this.target.postMessage({id:g,type:"<cancel>",targetMapId:u,sourceMapId:this.mapId})}}}receive(i){const t=i.data,a=t.id;if(a&&(!t.targetMapId||this.mapId===t.targetMapId))if(t.type==="<cancel>"){delete this.tasks[a];const u=this.cancelCallbacks[a];delete this.cancelCallbacks[a],u&&u()}else rt()||t.mustQueue?(this.tasks[a]=t,this.taskQueue.push(a),this.invoker.trigger()):this.processTask(a,t)}process(){if(!this.taskQueue.length)return;const i=this.taskQueue.shift(),t=this.tasks[i];delete this.tasks[i],this.taskQueue.length&&this.invoker.trigger(),t&&this.processTask(i,t)}processTask(i,t){if(t.type==="<response>"){const a=this.callbacks[i];delete this.callbacks[i],a&&(t.error?a(No(t.error)):a(null,No(t.data)))}else{let a=!1;const u=Vt(this.globalScope)?void 0:[],p=t.hasCallback?(b,w)=>{a=!0,delete this.cancelCallbacks[i],this.target.postMessage({id:i,type:"<response>",sourceMapId:this.mapId,error:b?_a(b):null,data:_a(w,u)},u)}:b=>{a=!0};let g=null;const _=No(t.data);if(this.parent[t.type])g=this.parent[t.type](t.sourceMapId,_,p);else if(this.parent.getWorkerSource){const b=t.type.split(".");g=this.parent.getWorkerSource(t.sourceMapId,b[0],_.source)[b[1]](_,p)}else p(new Error(`Could not find function ${t.type}`));!a&&g&&g.cancel&&(this.cancelCallbacks[i]=g.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},l.AlphaImage=vc,l.CanonicalTileID=Mm,l.CollisionBoxArray=Ce,l.CollisionCircleLayoutArray=class extends z{},l.Color=$,l.DEMData=sv,l.DataConstantProperty=ut,l.DictionaryCoder=lv,l.EXTENT=Yr,l.ErrorEvent=Ao,l.EvaluationParameters=_r,l.Event=fi,l.Evented=ki,l.FeatureIndex=cv,l.FillBucket=mm,l.FillExtrusionBucket=ym,l.GeoJSONFeature=uv,l.ImageAtlas=R_,l.ImagePosition=bm,l.LineBucket=_m,l.LineStripIndexArray=class extends X{},l.LngLat=Rr,l.LngLatBounds=hl,l.MercatorCoordinate=Nd,l.ONE_EM=pn,l.OverscaledTileID=Di,l.PerformanceUtils=sT,l.PosArray=ft,l.Properties=dn,l.QuadTriangleArray=class extends B{},l.RGBAImage=Mi,l.RasterBoundsArray=class extends d{},l.RequestPerformance=class{constructor(i){this._marks={start:[i.url,"start"].join("#"),end:[i.url,"end"].join("#"),measure:i.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let i=performance.getEntriesByName(this._marks.measure);return i.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),i=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),i}},l.ResourceType=hi,l.SegmentVector=At,l.SymbolBucket=su,l.Transitionable=md,l.TriangleIndexArray=qn,l.Uniform1f=wa,l.Uniform1i=class extends ba{constructor(i,t){super(i,t),this.current=0}set(i){this.current!==i&&(this.current=i,this.gl.uniform1i(this.location,i))}},l.Uniform2f=class extends ba{constructor(i,t){super(i,t),this.current=[0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]||(this.current=i,this.gl.uniform2f(this.location,i[0],i[1]))}},l.Uniform3f=class extends ba{constructor(i,t){super(i,t),this.current=[0,0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]||(this.current=i,this.gl.uniform3f(this.location,i[0],i[1],i[2]))}},l.Uniform4f=Jl,l.UniformColor=K0,l.UniformMatrix4f=class extends ba{constructor(i,t){super(i,t),this.current=I2}set(i){if(i[12]!==this.current[12]||i[0]!==this.current[0])return this.current=i,void this.gl.uniformMatrix4fv(this.location,!1,i);for(let t=1;t<16;t++)if(i[t]!==this.current[t]){this.current=i,this.gl.uniformMatrix4fv(this.location,!1,i);break}}},l.UnwrappedTileID=av,l.ValidationError=Ve,l.ZoomHistory=ic,l.add=function(i,t,a){return i[0]=t[0]+a[0],i[1]=t[1]+a[1],i[2]=t[2]+a[2],i},l.addDynamicAttributes=km,l.asyncAll=function(i,t,a){if(!i.length)return a(null,[]);let u=i.length;const p=new Array(i.length);let g=null;i.forEach((_,b)=>{t(_,(w,k)=>{w&&(g=w),p[b]=k,--u==0&&a(g,p)})})},l.bezier=oe,l.bindAll=re,l.cacheEntryPossiblyAdded=function(i){er++,er>st&&(i.getActor().send("enforceCacheSizeLimit",xt),er=0)},l.clamp=U,l.clearTileCache=function(i){const t=caches.delete(cn);i&&t.catch(i).then(()=>i())},l.clipLine=q_,l.clone=function(i){var t=new Hn(16);return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],t},l.clone$1=fe,l.clone$2=function(i){var t=new Hn(3);return t[0]=i[0],t[1]=i[1],t[2]=i[2],t},l.collisionCircleLayout=ES,l.config=kn,l.copy=function(i,t){return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[8]=t[8],i[9]=t[9],i[10]=t[10],i[11]=t[11],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15],i},l.create=function(){var i=new Hn(16);return Hn!=Float32Array&&(i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0),i[0]=1,i[5]=1,i[10]=1,i[15]=1,i},l.create$1=i_,l.createExpression=qs,l.createFilter=ql,l.createLayout=jr,l.createStyleLayer=function(i){return i.type==="custom"?new nT(i):new iT[i.type](i)},l.cross=function(i,t,a){var u=t[0],p=t[1],g=t[2],_=a[0],b=a[1],w=a[2];return i[0]=p*w-g*b,i[1]=g*_-u*w,i[2]=u*b-p*_,i},l.dot=function(i,t){return i[0]*t[0]+i[1]*t[1]+i[2]*t[2]},l.dot$1=function(i,t){return i[0]*t[0]+i[1]*t[1]+i[2]*t[2]+i[3]*t[3]},l.ease=ne,l.emitValidationErrors=Hl,l.enforceCacheSizeLimit=function(i){Ht(),Cn&&Cn.then(t=>{t.keys().then(a=>{for(let u=0;u<a.length-i;u++)t.delete(a[u])})})},l.equals=function(i,t){var a=i[0],u=i[1],p=i[2],g=i[3],_=i[4],b=i[5],w=i[6],k=i[7],A=i[8],P=i[9],L=i[10],F=i[11],O=i[12],Y=i[13],K=i[14],de=i[15],ve=t[0],ce=t[1],ge=t[2],Pe=t[3],ze=t[4],tt=t[5],lt=t[6],Ke=t[7],Ge=t[8],Ue=t[9],Ye=t[10],qe=t[11],Oe=t[12],mt=t[13],ct=t[14],It=t[15];return Math.abs(a-ve)<=Zn*Math.max(1,Math.abs(a),Math.abs(ve))&&Math.abs(u-ce)<=Zn*Math.max(1,Math.abs(u),Math.abs(ce))&&Math.abs(p-ge)<=Zn*Math.max(1,Math.abs(p),Math.abs(ge))&&Math.abs(g-Pe)<=Zn*Math.max(1,Math.abs(g),Math.abs(Pe))&&Math.abs(_-ze)<=Zn*Math.max(1,Math.abs(_),Math.abs(ze))&&Math.abs(b-tt)<=Zn*Math.max(1,Math.abs(b),Math.abs(tt))&&Math.abs(w-lt)<=Zn*Math.max(1,Math.abs(w),Math.abs(lt))&&Math.abs(k-Ke)<=Zn*Math.max(1,Math.abs(k),Math.abs(Ke))&&Math.abs(A-Ge)<=Zn*Math.max(1,Math.abs(A),Math.abs(Ge))&&Math.abs(P-Ue)<=Zn*Math.max(1,Math.abs(P),Math.abs(Ue))&&Math.abs(L-Ye)<=Zn*Math.max(1,Math.abs(L),Math.abs(Ye))&&Math.abs(F-qe)<=Zn*Math.max(1,Math.abs(F),Math.abs(qe))&&Math.abs(O-Oe)<=Zn*Math.max(1,Math.abs(O),Math.abs(Oe))&&Math.abs(Y-mt)<=Zn*Math.max(1,Math.abs(Y),Math.abs(mt))&&Math.abs(K-ct)<=Zn*Math.max(1,Math.abs(K),Math.abs(ct))&&Math.abs(de-It)<=Zn*Math.max(1,Math.abs(de),Math.abs(It))},l.evaluateSizeForFeature=function(i,{uSize:t,uSizeT:a},{lowerSize:u,upperSize:p}){return i.kind==="source"?u/Ea:i.kind==="composite"?ur(u/Ea,p/Ea,a):t},l.evaluateSizeForZoom=function(i,t){let a=0,u=0;if(i.kind==="constant")u=i.layoutSize;else if(i.kind!=="source"){const{interpolationType:p,minZoom:g,maxZoom:_}=i,b=p?U(Rn.interpolationFactor(p,t,g,_),0,1):0;i.kind==="camera"?u=ur(i.minSize,i.maxSize,b):a=b}return{uSizeT:a,uSize:u}},l.evaluateVariableOffset=X_,l.evented=hc,l.exported=kr,l.exported$1=Pr,l.extend=Ae,l.filterObject=ee,l.fromRotation=function(i,t){var a=Math.sin(t),u=Math.cos(t);return i[0]=u,i[1]=a,i[2]=0,i[3]=-a,i[4]=u,i[5]=0,i[6]=0,i[7]=0,i[8]=1,i},l.fromScaling=function(i,t){return i[0]=t[0],i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=t[1],i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=t[2],i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i},l.getAnchorAlignment=Sm,l.getAnchorJustification=Em,l.getArrayBuffer=Io,l.getImage=ti,l.getJSON=function(i,t){return Co(Ae(i,{type:"json"}),t)},l.getOverlapMode=zm,l.getRTLTextPluginStatus=il,l.getReferrer=ia,l.getVideo=function(i,t){const a=window.document.createElement("video");a.muted=!0,a.onloadstart=function(){t(null,a)};for(let u=0;u<i.length;u++){const p=window.document.createElement("source");oa(i[u])||(a.crossOrigin="Anonymous"),p.src=i[u],a.appendChild(p)}return{cancel:()=>{}}},l.identity=am,l.invert=function(i,t){var a=t[0],u=t[1],p=t[2],g=t[3],_=t[4],b=t[5],w=t[6],k=t[7],A=t[8],P=t[9],L=t[10],F=t[11],O=t[12],Y=t[13],K=t[14],de=t[15],ve=a*b-u*_,ce=a*w-p*_,ge=a*k-g*_,Pe=u*w-p*b,ze=u*k-g*b,tt=p*k-g*w,lt=A*Y-P*O,Ke=A*K-L*O,Ge=A*de-F*O,Ue=P*K-L*Y,Ye=P*de-F*Y,qe=L*de-F*K,Oe=ve*qe-ce*Ye+ge*Ue+Pe*Ge-ze*Ke+tt*lt;return Oe?(i[0]=(b*qe-w*Ye+k*Ue)*(Oe=1/Oe),i[1]=(p*Ye-u*qe-g*Ue)*Oe,i[2]=(Y*tt-K*ze+de*Pe)*Oe,i[3]=(L*ze-P*tt-F*Pe)*Oe,i[4]=(w*Ge-_*qe-k*Ke)*Oe,i[5]=(a*qe-p*Ge+g*Ke)*Oe,i[6]=(K*ge-O*tt-de*ce)*Oe,i[7]=(A*tt-L*ge+F*ce)*Oe,i[8]=(_*Ye-b*Ge+k*lt)*Oe,i[9]=(u*Ge-a*Ye-g*lt)*Oe,i[10]=(O*ze-Y*ge+de*ve)*Oe,i[11]=(P*ge-A*ze-F*ve)*Oe,i[12]=(b*Ke-_*Ue-w*lt)*Oe,i[13]=(a*Ue-u*Ke+p*lt)*Oe,i[14]=(Y*ce-O*Pe-K*ve)*Oe,i[15]=(A*Pe-P*ce+L*ve)*Oe,i):null},l.isImageBitmap=Fr,l.isSafari=Vt,l.isWorker=rt,l.keysDifference=function(i,t){const a=[];for(const u in i)u in t||a.push(u);return a},l.lazyLoadRTLTextPlugin=function(){gi.isLoading()||gi.isLoaded()||il()!=="deferred"||fd()},l.makeRequest=Co,l.mapObject=H,l.mercatorXfromLng=rv,l.mercatorYfromLat=nv,l.mercatorZfromAltitude=iv,l.mul=B2,l.mul$1=function(i,t,a){return i[0]=t[0]*a[0],i[1]=t[1]*a[1],i[2]=t[2]*a[2],i[3]=t[3]*a[3],i},l.multiply=o_,l.nextPowerOfTwo=function(i){return i<=1?1:Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))},l.normalize=function(i,t){var a=t[0],u=t[1],p=t[2],g=a*a+u*u+p*p;return g>0&&(g=1/Math.sqrt(g)),i[0]=t[0]*g,i[1]=t[1]*g,i[2]=t[2]*g,i},l.number=ur,l.ortho=function(i,t,a,u,p,g,_){var b=1/(t-a),w=1/(u-p),k=1/(g-_);return i[0]=-2*b,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=-2*w,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2*k,i[11]=0,i[12]=(t+a)*b,i[13]=(p+u)*w,i[14]=(_+g)*k,i[15]=1,i},l.parseCacheControl=Je,l.parseGlyphPbf=function(i){return new vm(i).readFields(BS,[])},l.pbf=vm,l.performSymbolLayout=function(i){i.bucket.createArrays(),i.bucket.tilePixelRatio=Yr/(512*i.bucket.overscaling),i.bucket.compareText={},i.bucket.iconsNeedLinear=!1;const t=i.bucket.layers[0].layout,a=i.bucket.layers[0]._unevaluatedLayout._values,u={layoutIconSize:a["icon-size"].possiblyEvaluate(new _r(i.bucket.zoom+1),i.canonical),layoutTextSize:a["text-size"].possiblyEvaluate(new _r(i.bucket.zoom+1),i.canonical),textMaxSize:a["text-size"].possiblyEvaluate(new _r(18))};if(i.bucket.textSizeData.kind==="composite"){const{minZoom:w,maxZoom:k}=i.bucket.textSizeData;u.compositeTextSizes=[a["text-size"].possiblyEvaluate(new _r(w),i.canonical),a["text-size"].possiblyEvaluate(new _r(k),i.canonical)]}if(i.bucket.iconSizeData.kind==="composite"){const{minZoom:w,maxZoom:k}=i.bucket.iconSizeData;u.compositeIconSizes=[a["icon-size"].possiblyEvaluate(new _r(w),i.canonical),a["icon-size"].possiblyEvaluate(new _r(k),i.canonical)]}const p=t.get("text-line-height")*pn,g=t.get("text-rotation-alignment")!=="viewport"&&t.get("symbol-placement")!=="point",_=t.get("text-keep-upright"),b=t.get("text-size");for(const w of i.bucket.features){const k=t.get("text-font").evaluate(w,{},i.canonical).join(","),A=b.evaluate(w,{},i.canonical),P=u.layoutTextSize.evaluate(w,{},i.canonical),L=u.layoutIconSize.evaluate(w,{},i.canonical),F={horizontal:{},vertical:void 0},O=w.text;let Y,K=[0,0];if(O){const ce=O.toString(),ge=t.get("text-letter-spacing").evaluate(w,{},i.canonical)*pn,Pe=Jf(ce)?ge:0,ze=t.get("text-anchor").evaluate(w,{},i.canonical),tt=t.get("text-variable-anchor");if(!tt){const Ye=t.get("text-radial-offset").evaluate(w,{},i.canonical);K=Ye?X_(ze,[Ye*pn,Tm]):t.get("text-offset").evaluate(w,{},i.canonical).map(qe=>qe*pn)}let lt=g?"center":t.get("text-justify").evaluate(w,{},i.canonical);const Ke=t.get("symbol-placement"),Ge=Ke==="point"?t.get("text-max-width").evaluate(w,{},i.canonical)*pn:0,Ue=()=>{i.bucket.allowVerticalPlacement&&Xl(ce)&&(F.vertical=Pd(O,i.glyphMap,i.glyphPositions,i.imagePositions,k,Ge,p,ze,"left",Pe,K,l.WritingMode.vertical,!0,Ke,P,A))};if(!g&&tt){const Ye=lt==="auto"?tt.map(Oe=>Em(Oe)):[lt];let qe=!1;for(let Oe=0;Oe<Ye.length;Oe++){const mt=Ye[Oe];if(!F.horizontal[mt])if(qe)F.horizontal[mt]=F.horizontal[0];else{const ct=Pd(O,i.glyphMap,i.glyphPositions,i.imagePositions,k,Ge,p,"center",mt,Pe,K,l.WritingMode.horizontal,!1,Ke,P,A);ct&&(F.horizontal[mt]=ct,qe=ct.positionedLines.length===1)}}Ue()}else{lt==="auto"&&(lt=Em(ze));const Ye=Pd(O,i.glyphMap,i.glyphPositions,i.imagePositions,k,Ge,p,ze,lt,Pe,K,l.WritingMode.horizontal,!1,Ke,P,A);Ye&&(F.horizontal[lt]=Ye),Ue(),Xl(ce)&&g&&_&&(F.vertical=Pd(O,i.glyphMap,i.glyphPositions,i.imagePositions,k,Ge,p,ze,lt,Pe,K,l.WritingMode.vertical,!1,Ke,P,A))}}let de=!1;if(w.icon&&w.icon.name){const ce=i.imageMap[w.icon.name];ce&&(Y=VS(i.imagePositions[w.icon.name],t.get("icon-offset").evaluate(w,{},i.canonical),t.get("icon-anchor").evaluate(w,{},i.canonical)),de=!!ce.sdf,i.bucket.sdfIcons===void 0?i.bucket.sdfIcons=de:i.bucket.sdfIcons!==de&&Ne("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ce.pixelRatio!==i.bucket.pixelRatio||t.get("icon-rotate").constantOr(1)!==0)&&(i.bucket.iconsNeedLinear=!0))}const ve=Y_(F.horizontal)||F.vertical;i.bucket.iconsInText=!!ve&&ve.iconsInText,(ve||Y)&&XS(i.bucket,w,F,Y,i.imageMap,u,P,L,K,de,i.canonical)}i.showCollisionBoxes&&i.bucket.generateCollisionDebugBuffers()},l.perspective=function(i,t,a,u,p){var g,_=1/Math.tan(t/2);return i[0]=_/a,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=_,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=-1,i[12]=0,i[13]=0,i[15]=0,p!=null&&p!==1/0?(i[10]=(p+u)*(g=1/(u-p)),i[14]=2*p*u*g):(i[10]=-1,i[14]=-2*u),i},l.pick=function(i,t){const a={};for(let u=0;u<t.length;u++){const p=t[u];p in i&&(a[p]=i[p])}return a},l.plugin=gi,l.pointGeometry=dt,l.polygonIntersectsPolygon=e_,l.potpack=D_,l.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],l.register=nt,l.registerForPluginStateChange=function(i){return i({pluginStatus:Wn,pluginURL:$o}),hc.on("pluginStateChange",i),i},l.renderColorRamp=d_,l.rotateX=function(i,t,a){var u=Math.sin(a),p=Math.cos(a),g=t[4],_=t[5],b=t[6],w=t[7],k=t[8],A=t[9],P=t[10],L=t[11];return t!==i&&(i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15]),i[4]=g*p+k*u,i[5]=_*p+A*u,i[6]=b*p+P*u,i[7]=w*p+L*u,i[8]=k*p-g*u,i[9]=A*p-_*u,i[10]=P*p-b*u,i[11]=L*p-w*u,i},l.rotateZ=function(i,t,a){var u=Math.sin(a),p=Math.cos(a),g=t[0],_=t[1],b=t[2],w=t[3],k=t[4],A=t[5],P=t[6],L=t[7];return t!==i&&(i[8]=t[8],i[9]=t[9],i[10]=t[10],i[11]=t[11],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15]),i[0]=g*p+k*u,i[1]=_*p+A*u,i[2]=b*p+P*u,i[3]=w*p+L*u,i[4]=k*p-g*u,i[5]=A*p-_*u,i[6]=P*p-b*u,i[7]=L*p-w*u,i},l.scale=function(i,t,a){var u=a[0],p=a[1],g=a[2];return i[0]=t[0]*u,i[1]=t[1]*u,i[2]=t[2]*u,i[3]=t[3]*u,i[4]=t[4]*p,i[5]=t[5]*p,i[6]=t[6]*p,i[7]=t[7]*p,i[8]=t[8]*g,i[9]=t[9]*g,i[10]=t[10]*g,i[11]=t[11]*g,i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15],i},l.scale$1=function(i,t,a){return i[0]=t[0]*a,i[1]=t[1]*a,i[2]=t[2]*a,i},l.setCacheLimits=function(i,t){xt=i,st=t},l.setRTLTextPlugin=function(i,t,a=!1){if(Wn===sc||Wn===lc||Wn===uc)throw new Error("setRTLTextPlugin cannot be called multiple times.");$o=kr.resolveURL(i),Wn=sc,cc=t,Qa(),a||fd()},l.spec=ke,l.sphericalToCartesian=function([i,t,a]){return t+=90,t*=Math.PI/180,a*=Math.PI/180,{x:i*Math.cos(t)*Math.sin(a),y:i*Math.sin(t)*Math.sin(a),z:i*Math.cos(a)}},l.sqrLen=function(i){var t=i[0],a=i[1];return t*t+a*a},l.sub=function(i,t,a){return i[0]=t[0]-a[0],i[1]=t[1]-a[1],i[2]=t[2]-a[2],i},l.toEvaluationFeature=ul,l.transformMat3=function(i,t,a){var u=t[0],p=t[1],g=t[2];return i[0]=u*a[0]+p*a[3]+g*a[6],i[1]=u*a[1]+p*a[4]+g*a[7],i[2]=u*a[2]+p*a[5]+g*a[8],i},l.transformMat4=Sd,l.transformMat4$1=function(i,t,a){var u=t[0],p=t[1];return i[0]=a[0]*u+a[4]*p+a[12],i[1]=a[1]*u+a[5]*p+a[13],i},l.translate=function(i,t,a){var u,p,g,_,b,w,k,A,P,L,F,O,Y=a[0],K=a[1],de=a[2];return t===i?(i[12]=t[0]*Y+t[4]*K+t[8]*de+t[12],i[13]=t[1]*Y+t[5]*K+t[9]*de+t[13],i[14]=t[2]*Y+t[6]*K+t[10]*de+t[14],i[15]=t[3]*Y+t[7]*K+t[11]*de+t[15]):(p=t[1],g=t[2],_=t[3],b=t[4],w=t[5],k=t[6],A=t[7],P=t[8],L=t[9],F=t[10],O=t[11],i[0]=u=t[0],i[1]=p,i[2]=g,i[3]=_,i[4]=b,i[5]=w,i[6]=k,i[7]=A,i[8]=P,i[9]=L,i[10]=F,i[11]=O,i[12]=u*Y+b*K+P*de+t[12],i[13]=p*Y+w*K+L*de+t[13],i[14]=g*Y+k*K+F*de+t[14],i[15]=_*Y+A*K+O*de+t[15]),i},l.triggerPluginCompletionEvent=pd,l.unicodeBlockLookup=Xe,l.uniqueId=function(){return _e++},l.validateCustomStyleLayer=function(i){const t=[],a=i.id;return a===void 0&&t.push({message:`layers.${a}: missing required property "id"`}),i.render===void 0&&t.push({message:`layers.${a}: missing required method "render"`}),i.renderingMode&&i.renderingMode!=="2d"&&i.renderingMode!=="3d"&&t.push({message:`layers.${a}: property "renderingMode" must be either "2d" or "3d"`}),t},l.validateLight=nc,l.validateStyle=rl,l.vectorTile=ns,l.warnOnce=Ne,l.wrap=Se}),v(["./shared"],function(l){function D(V){const I=typeof V;if(I==="number"||I==="boolean"||I==="string"||V==null)return JSON.stringify(V);if(Array.isArray(V)){let $="[";for(const J of V)$+=`${D(J)},`;return`${$}]`}const M=Object.keys(V).sort();let N="{";for(let $=0;$<M.length;$++)N+=`${JSON.stringify(M[$])}:${D(V[M[$]])},`;return`${N}}`}function j(V){let I="";for(const M of l.refProperties)I+=`/${D(V[M])}`;return I}class oe{constructor(I){this.keyCache={},I&&this.replace(I)}replace(I){this._layerConfigs={},this._layers={},this.update(I,[])}update(I,M){for(const $ of I){this._layerConfigs[$.id]=$;const J=this._layers[$.id]=l.createStyleLayer($);J._featureFilter=l.createFilter(J.filter),this.keyCache[$.id]&&delete this.keyCache[$.id]}for(const $ of M)delete this.keyCache[$],delete this._layerConfigs[$],delete this._layers[$];this.familiesBySource={};const N=function($,J){const ae={};for(let Q=0;Q<$.length;Q++){const se=J&&J[$[Q].id]||j($[Q]);J&&(J[$[Q].id]=se);let Te=ae[se];Te||(Te=ae[se]=[]),Te.push($[Q])}const te=[];for(const Q in ae)te.push(ae[Q]);return te}(Object.values(this._layerConfigs),this.keyCache);for(const $ of N){const J=$.map(Me=>this._layers[Me.id]),ae=J[0];if(ae.visibility==="none")continue;const te=ae.source||"";let Q=this.familiesBySource[te];Q||(Q=this.familiesBySource[te]={});const se=ae.sourceLayer||"_geojsonTileLayer";let Te=Q[se];Te||(Te=Q[se]=[]),Te.push(J)}}}class ne{constructor(I){const M={},N=[];for(const te in I){const Q=I[te],se=M[te]={};for(const Te in Q){const Me=Q[+Te];if(!Me||Me.bitmap.width===0||Me.bitmap.height===0)continue;const we={x:0,y:0,w:Me.bitmap.width+2,h:Me.bitmap.height+2};N.push(we),se[Te]={rect:we,metrics:Me.metrics}}}const{w:$,h:J}=l.potpack(N),ae=new l.AlphaImage({width:$||1,height:J||1});for(const te in I){const Q=I[te];for(const se in Q){const Te=Q[+se];if(!Te||Te.bitmap.width===0||Te.bitmap.height===0)continue;const Me=M[te][se].rect;l.AlphaImage.copy(Te.bitmap,ae,{x:0,y:0},{x:Me.x+1,y:Me.y+1},Te.bitmap)}}this.image=ae,this.positions=M}}l.register("GlyphAtlas",ne);class U{constructor(I){this.tileID=new l.OverscaledTileID(I.tileID.overscaledZ,I.tileID.wrap,I.tileID.canonical.z,I.tileID.canonical.x,I.tileID.canonical.y),this.uid=I.uid,this.zoom=I.zoom,this.pixelRatio=I.pixelRatio,this.tileSize=I.tileSize,this.source=I.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=I.showCollisionBoxes,this.collectResourceTiming=!!I.collectResourceTiming,this.returnDependencies=!!I.returnDependencies,this.promoteId=I.promoteId}parse(I,M,N,$,J){this.status="parsing",this.data=I,this.collisionBoxArray=new l.CollisionBoxArray;const ae=new l.DictionaryCoder(Object.keys(I.layers).sort()),te=new l.FeatureIndex(this.tileID,this.promoteId);te.bucketLayerIDs=[];const Q={},se={featureIndex:te,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:N},Te=M.familiesBySource[this.source];for(const vt in Te){const Tt=I.layers[vt];if(!Tt)continue;Tt.version===1&&l.warnOnce(`Vector tile source "${this.source}" layer "${vt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Bt=ae.encode(vt),Xt=[];for(let Vr=0;Vr<Tt.length;Vr++){const ar=Tt.feature(Vr),rn=te.getId(ar,vt);Xt.push({feature:ar,id:rn,index:Vr,sourceLayerIndex:Bt})}for(const Vr of Te[vt]){const ar=Vr[0];ar.source!==this.source&&l.warnOnce(`layer.source = ${ar.source} does not equal this.source = ${this.source}`),ar.minzoom&&this.zoom<Math.floor(ar.minzoom)||ar.maxzoom&&this.zoom>=ar.maxzoom||ar.visibility!=="none"&&(Se(Vr,this.zoom,N),(Q[ar.id]=ar.createBucket({index:te.bucketLayerIDs.length,layers:Vr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Bt,sourceID:this.source})).populate(Xt,se,this.tileID.canonical),te.bucketLayerIDs.push(Vr.map(rn=>rn.id)))}}let Me,we,it,ot;const He=l.mapObject(se.glyphDependencies,vt=>Object.keys(vt).map(Number));Object.keys(He).length?$.send("getGlyphs",{uid:this.uid,stacks:He},(vt,Tt)=>{Me||(Me=vt,we=Tt,Lt.call(this))}):we={};const pt=Object.keys(se.iconDependencies);pt.length?$.send("getImages",{icons:pt,source:this.source,tileID:this.tileID,type:"icons"},(vt,Tt)=>{Me||(Me=vt,it=Tt,Lt.call(this))}):it={};const gt=Object.keys(se.patternDependencies);function Lt(){if(Me)return J(Me);if(we&&it&&ot){const vt=new ne(we),Tt=new l.ImageAtlas(it,ot);for(const Bt in Q){const Xt=Q[Bt];Xt instanceof l.SymbolBucket?(Se(Xt.layers,this.zoom,N),l.performSymbolLayout({bucket:Xt,glyphMap:we,glyphPositions:vt.positions,imageMap:it,imagePositions:Tt.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Xt.hasPattern&&(Xt instanceof l.LineBucket||Xt instanceof l.FillBucket||Xt instanceof l.FillExtrusionBucket)&&(Se(Xt.layers,this.zoom,N),Xt.addFeatures(se,this.tileID.canonical,Tt.patternPositions))}this.status="done",J(null,{buckets:Object.values(Q).filter(Bt=>!Bt.isEmpty()),featureIndex:te,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:vt.image,imageAtlas:Tt,glyphMap:this.returnDependencies?we:null,iconMap:this.returnDependencies?it:null,glyphPositions:this.returnDependencies?vt.positions:null})}}gt.length?$.send("getImages",{icons:gt,source:this.source,tileID:this.tileID,type:"patterns"},(vt,Tt)=>{Me||(Me=vt,ot=Tt,Lt.call(this))}):ot={},Lt.call(this)}}function Se(V,I,M){const N=new l.EvaluationParameters(I);for(const $ of V)$.recalculate(N,M)}function Ae(V,I){const M=l.getArrayBuffer(V.request,(N,$,J,ae)=>{N?I(N):$&&I(null,{vectorTile:new l.vectorTile.VectorTile(new l.pbf($)),rawData:$,cacheControl:J,expires:ae})});return()=>{M.cancel(),I()}}class _e{constructor(I,M,N,$){this.actor=I,this.layerIndex=M,this.availableImages=N,this.loadVectorData=$||Ae,this.loading={},this.loaded={}}loadTile(I,M){const N=I.uid;this.loading||(this.loading={});const $=!!(I&&I.request&&I.request.collectResourceTiming)&&new l.RequestPerformance(I.request),J=this.loading[N]=new U(I);J.abort=this.loadVectorData(I,(ae,te)=>{if(delete this.loading[N],ae||!te)return J.status="done",this.loaded[N]=J,M(ae);const Q=te.rawData,se={};te.expires&&(se.expires=te.expires),te.cacheControl&&(se.cacheControl=te.cacheControl);const Te={};if($){const Me=$.finish();Me&&(Te.resourceTiming=JSON.parse(JSON.stringify(Me)))}J.vectorTile=te.vectorTile,J.parse(te.vectorTile,this.layerIndex,this.availableImages,this.actor,(Me,we)=>{if(Me||!we)return M(Me);M(null,l.extend({rawTileData:Q.slice(0)},we,se,Te))}),this.loaded=this.loaded||{},this.loaded[N]=J})}reloadTile(I,M){const N=this.loaded,$=I.uid,J=this;if(N&&N[$]){const ae=N[$];ae.showCollisionBoxes=I.showCollisionBoxes;const te=(Q,se)=>{const Te=ae.reloadCallback;Te&&(delete ae.reloadCallback,ae.parse(ae.vectorTile,J.layerIndex,this.availableImages,J.actor,Te)),M(Q,se)};ae.status==="parsing"?ae.reloadCallback=te:ae.status==="done"&&(ae.vectorTile?ae.parse(ae.vectorTile,this.layerIndex,this.availableImages,this.actor,te):te())}}abortTile(I,M){const N=this.loading,$=I.uid;N&&N[$]&&N[$].abort&&(N[$].abort(),delete N[$]),M()}removeTile(I,M){const N=this.loaded,$=I.uid;N&&N[$]&&delete N[$],M()}}class re{constructor(){this.loaded={}}loadTile(I,M){const{uid:N,encoding:$,rawImageData:J}=I,ae=l.isImageBitmap(J)?this.getImageData(J):J,te=new l.DEMData(N,ae,$);this.loaded=this.loaded||{},this.loaded[N]=te,M(null,te)}getImageData(I){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(I.width,I.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=I.width,this.offscreenCanvas.height=I.height,this.offscreenCanvasContext.drawImage(I,0,0,I.width,I.height);const M=this.offscreenCanvasContext.getImageData(-1,-1,I.width+2,I.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new l.RGBAImage({width:M.width,height:M.height},M.data)}removeTile(I){const M=this.loaded,N=I.uid;M&&M[N]&&delete M[N]}}var H=function V(I,M){var N,$=I&&I.type;if($==="FeatureCollection")for(N=0;N<I.features.length;N++)V(I.features[N],M);else if($==="GeometryCollection")for(N=0;N<I.geometries.length;N++)V(I.geometries[N],M);else if($==="Feature")V(I.geometry,M);else if($==="Polygon")ee(I.coordinates,M);else if($==="MultiPolygon")for(N=0;N<I.coordinates.length;N++)ee(I.coordinates[N],M);return I};function ee(V,I){if(V.length!==0){fe(V[0],I);for(var M=1;M<V.length;M++)fe(V[M],!I)}}function fe(V,I){for(var M=0,N=0,$=0,J=V.length,ae=J-1;$<J;ae=$++){var te=(V[$][0]-V[ae][0])*(V[ae][1]+V[$][1]),Q=M+te;N+=Math.abs(M)>=Math.abs(te)?M-Q+te:te-Q+M,M=Q}M+N>=0!=!!I&&V.reverse()}const be=l.vectorTile.VectorTileFeature.prototype.toGeoJSON;class Ne{constructor(I){this._feature=I,this.extent=l.EXTENT,this.type=I.type,this.properties=I.tags,"id"in I&&!isNaN(I.id)&&(this.id=parseInt(I.id,10))}loadGeometry(){if(this._feature.type===1){const I=[];for(const M of this._feature.geometry)I.push([new l.pointGeometry(M[0],M[1])]);return I}{const I=[];for(const M of this._feature.geometry){const N=[];for(const $ of M)N.push(new l.pointGeometry($[0],$[1]));I.push(N)}return I}}toGeoJSON(I,M,N){return be.call(this,I,M,N)}}class Re{constructor(I){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.EXTENT,this.length=I.length,this._features=I}feature(I){return new Ne(this._features[I])}}var Le={exports:{}},rt=l.pointGeometry,Je=l.vectorTile.VectorTileFeature,wt=Er;function Er(V,I){this.options=I||{},this.features=V,this.length=V.length}function Nt(V,I){this.id=typeof V.id=="number"?V.id:void 0,this.type=V.type,this.rawGeometry=V.type===1?[V.geometry]:V.geometry,this.properties=V.tags,this.extent=I||4096}Er.prototype.feature=function(V){return new Nt(this.features[V],this.options.extent)},Nt.prototype.loadGeometry=function(){var V=this.rawGeometry;this.geometry=[];for(var I=0;I<V.length;I++){for(var M=V[I],N=[],$=0;$<M.length;$++)N.push(new rt(M[$][0],M[$][1]));this.geometry.push(N)}return this.geometry},Nt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var V=this.geometry,I=1/0,M=-1/0,N=1/0,$=-1/0,J=0;J<V.length;J++)for(var ae=V[J],te=0;te<ae.length;te++){var Q=ae[te];I=Math.min(I,Q.x),M=Math.max(M,Q.x),N=Math.min(N,Q.y),$=Math.max($,Q.y)}return[I,N,M,$]},Nt.prototype.toGeoJSON=Je.prototype.toGeoJSON;var Vt=l.pbf,Fr=wt;function kr(V){var I=new Vt;return function(M,N){for(var $ in M.layers)N.writeMessage(3,dt,M.layers[$])}(V,I),I.finish()}function dt(V,I){var M;I.writeVarintField(15,V.version||1),I.writeStringField(1,V.name||""),I.writeVarintField(5,V.extent||4096);var N={keys:[],values:[],keycache:{},valuecache:{}};for(M=0;M<V.length;M++)N.feature=V.feature(M),I.writeMessage(2,En,N);var $=N.keys;for(M=0;M<$.length;M++)I.writeStringField(3,$[M]);var J=N.values;for(M=0;M<J.length;M++)I.writeMessage(4,xt,J[M])}function En(V,I){var M=V.feature;M.id!==void 0&&I.writeVarintField(1,M.id),I.writeMessage(2,kn,V),I.writeVarintField(3,M.type),I.writeMessage(4,Ze,M)}function kn(V,I){var M=V.feature,N=V.keys,$=V.values,J=V.keycache,ae=V.valuecache;for(var te in M.properties){var Q=M.properties[te],se=J[te];if(Q!==null){se===void 0&&(N.push(te),J[te]=se=N.length-1),I.writeVarint(se);var Te=typeof Q;Te!=="string"&&Te!=="boolean"&&Te!=="number"&&(Q=JSON.stringify(Q));var Me=Te+":"+Q,we=ae[Me];we===void 0&&($.push(Q),ae[Me]=we=$.length-1),I.writeVarint(we)}}}function cn(V,I){return(I<<3)+(7&V)}function Cn(V){return V<<1^V>>31}function Ze(V,I){for(var M=V.loadGeometry(),N=V.type,$=0,J=0,ae=M.length,te=0;te<ae;te++){var Q=M[te],se=1;N===1&&(se=Q.length),I.writeVarint(cn(1,se));for(var Te=N===3?Q.length-1:Q.length,Me=0;Me<Te;Me++){Me===1&&N!==1&&I.writeVarint(cn(2,Te-1));var we=Q[Me].x-$,it=Q[Me].y-J;I.writeVarint(Cn(we)),I.writeVarint(Cn(it)),$+=we,J+=it}N===3&&I.writeVarint(cn(7,1))}}function xt(V,I){var M=typeof V;M==="string"?I.writeStringField(1,V):M==="boolean"?I.writeBooleanField(7,V):M==="number"&&(V%1!=0?I.writeDoubleField(3,V):V<0?I.writeSVarintField(6,V):I.writeVarintField(5,V))}function st(V,I,M,N,$,J){if($-N<=M)return;const ae=N+$>>1;Ht(V,I,ae,N,$,J%2),st(V,I,M,N,ae-1,J+1),st(V,I,M,ae+1,$,J+1)}function Ht(V,I,M,N,$,J){for(;$>N;){if($-N>600){const se=$-N+1,Te=M-N+1,Me=Math.log(se),we=.5*Math.exp(2*Me/3),it=.5*Math.sqrt(Me*we*(se-we)/se)*(Te-se/2<0?-1:1);Ht(V,I,M,Math.max(N,Math.floor(M-Te*we/se+it)),Math.min($,Math.floor(M+(se-Te)*we/se+it)),J)}const ae=I[2*M+J];let te=N,Q=$;for(er(V,I,N,M),I[2*$+J]>ae&&er(V,I,N,$);te<Q;){for(er(V,I,te,Q),te++,Q--;I[2*te+J]<ae;)te++;for(;I[2*Q+J]>ae;)Q--}I[2*N+J]===ae?er(V,I,N,Q):(Q++,er(V,I,Q,$)),Q<=M&&(N=Q+1),M<=Q&&($=Q-1)}}function er(V,I,M,N){Pr(V,M,N),Pr(I,2*M,2*N),Pr(I,2*M+1,2*N+1)}function Pr(V,I,M){const N=V[I];V[I]=V[M],V[M]=N}function Hr(V,I,M,N){const $=V-M,J=I-N;return $*$+J*J}Le.exports=kr,Le.exports.fromVectorTileJs=kr,Le.exports.fromGeojsonVt=function(V,I){I=I||{};var M={};for(var N in V)M[N]=new Fr(V[N].features,I),M[N].name=N,M[N].version=I.version,M[N].extent=I.extent;return kr({layers:M})},Le.exports.GeoJSONWrapper=Fr;const $r=V=>V[0],wr=V=>V[1];class Gi{constructor(I,M=$r,N=wr,$=64,J=Float64Array){this.nodeSize=$,this.points=I;const ae=I.length<65536?Uint16Array:Uint32Array,te=this.ids=new ae(I.length),Q=this.coords=new J(2*I.length);for(let se=0;se<I.length;se++)te[se]=se,Q[2*se]=M(I[se]),Q[2*se+1]=N(I[se]);st(te,Q,$,0,te.length-1,0)}range(I,M,N,$){return function(J,ae,te,Q,se,Te,Me){const we=[0,J.length-1,0],it=[];let ot,He;for(;we.length;){const pt=we.pop(),gt=we.pop(),Lt=we.pop();if(gt-Lt<=Me){for(let Bt=Lt;Bt<=gt;Bt++)ot=ae[2*Bt],He=ae[2*Bt+1],ot>=te&&ot<=se&&He>=Q&&He<=Te&&it.push(J[Bt]);continue}const vt=Math.floor((Lt+gt)/2);ot=ae[2*vt],He=ae[2*vt+1],ot>=te&&ot<=se&&He>=Q&&He<=Te&&it.push(J[vt]);const Tt=(pt+1)%2;(pt===0?te<=ot:Q<=He)&&(we.push(Lt),we.push(vt-1),we.push(Tt)),(pt===0?se>=ot:Te>=He)&&(we.push(vt+1),we.push(gt),we.push(Tt))}return it}(this.ids,this.coords,I,M,N,$,this.nodeSize)}within(I,M,N){return function($,J,ae,te,Q,se){const Te=[0,$.length-1,0],Me=[],we=Q*Q;for(;Te.length;){const it=Te.pop(),ot=Te.pop(),He=Te.pop();if(ot-He<=se){for(let Tt=He;Tt<=ot;Tt++)Hr(J[2*Tt],J[2*Tt+1],ae,te)<=we&&Me.push($[Tt]);continue}const pt=Math.floor((He+ot)/2),gt=J[2*pt],Lt=J[2*pt+1];Hr(gt,Lt,ae,te)<=we&&Me.push($[pt]);const vt=(it+1)%2;(it===0?ae-Q<=gt:te-Q<=Lt)&&(Te.push(He),Te.push(pt-1),Te.push(vt)),(it===0?ae+Q>=gt:te+Q>=Lt)&&(Te.push(pt+1),Te.push(ot),Te.push(vt))}return Me}(this.ids,this.coords,I,M,N,this.nodeSize)}}const ko={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:V=>V},hi=Math.fround||(In=new Float32Array(1),V=>(In[0]=+V,In[0]));var In;class ia{constructor(I){this.options=ti(Object.create(ko),I),this.trees=new Array(this.options.maxZoom+1)}load(I){const{log:M,minZoom:N,maxZoom:$,nodeSize:J}=this.options;M&&console.time("total time");const ae=`prepare ${I.length} points`;M&&console.time(ae),this.points=I;let te=[];for(let Q=0;Q<I.length;Q++)I[Q].geometry&&te.push(Co(I[Q],Q));this.trees[$+1]=new Gi(te,zn,pi,J,Float32Array),M&&console.timeEnd(ae);for(let Q=$;Q>=N;Q--){const se=+Date.now();te=this._cluster(te,Q),this.trees[Q]=new Gi(te,zn,pi,J,Float32Array),M&&console.log("z%d: %d clusters in %dms",Q,te.length,+Date.now()-se)}return M&&console.timeEnd("total time"),this}getClusters(I,M){let N=((I[0]+180)%360+360)%360-180;const $=Math.max(-90,Math.min(90,I[1]));let J=I[2]===180?180:((I[2]+180)%360+360)%360-180;const ae=Math.max(-90,Math.min(90,I[3]));if(I[2]-I[0]>=360)N=-180,J=180;else if(N>J){const Te=this.getClusters([N,$,180,ae],M),Me=this.getClusters([-180,$,J,ae],M);return Te.concat(Me)}const te=this.trees[this._limitZoom(M)],Q=te.range(Rt(N),An(ae),Rt(J),An($)),se=[];for(const Te of Q){const Me=te.points[Te];se.push(Me.numPoints?Io(Me):this.points[Me.index])}return se}getChildren(I){const M=this._getOriginId(I),N=this._getOriginZoom(I),$="No cluster with the specified id.",J=this.trees[N];if(!J)throw new Error($);const ae=J.points[M];if(!ae)throw new Error($);const te=this.options.radius/(this.options.extent*Math.pow(2,N-1)),Q=J.within(ae.x,ae.y,te),se=[];for(const Te of Q){const Me=J.points[Te];Me.parentId===I&&se.push(Me.numPoints?Io(Me):this.points[Me.index])}if(se.length===0)throw new Error($);return se}getLeaves(I,M,N){const $=[];return this._appendLeaves($,I,M=M||10,N=N||0,0),$}getTile(I,M,N){const $=this.trees[this._limitZoom(I)],J=Math.pow(2,I),{extent:ae,radius:te}=this.options,Q=te/ae,se=(N-Q)/J,Te=(N+1+Q)/J,Me={features:[]};return this._addTileFeatures($.range((M-Q)/J,se,(M+1+Q)/J,Te),$.points,M,N,J,Me),M===0&&this._addTileFeatures($.range(1-Q/J,se,1,Te),$.points,J,N,J,Me),M===J-1&&this._addTileFeatures($.range(0,se,Q/J,Te),$.points,-1,N,J,Me),Me.features.length?Me:null}getClusterExpansionZoom(I){let M=this._getOriginZoom(I)-1;for(;M<=this.options.maxZoom;){const N=this.getChildren(I);if(M++,N.length!==1)break;I=N[0].properties.cluster_id}return M}_appendLeaves(I,M,N,$,J){const ae=this.getChildren(M);for(const te of ae){const Q=te.properties;if(Q&&Q.cluster?J+Q.point_count<=$?J+=Q.point_count:J=this._appendLeaves(I,Q.cluster_id,N,$,J):J<$?J++:I.push(te),I.length===N)break}return J}_addTileFeatures(I,M,N,$,J,ae){for(const te of I){const Q=M[te],se=Q.numPoints;let Te,Me,we;if(se)Te=oa(Q),Me=Q.x,we=Q.y;else{const He=this.points[Q.index];Te=He.properties,Me=Rt(He.geometry.coordinates[0]),we=An(He.geometry.coordinates[1])}const it={type:1,geometry:[[Math.round(this.options.extent*(Me*J-N)),Math.round(this.options.extent*(we*J-$))]],tags:Te};let ot;se?ot=Q.id:this.options.generateId?ot=Q.index:this.points[Q.index].id&&(ot=this.points[Q.index].id),ot!==void 0&&(it.id=ot),ae.features.push(it)}}_limitZoom(I){return Math.max(this.options.minZoom,Math.min(Math.floor(+I),this.options.maxZoom+1))}_cluster(I,M){const N=[],{radius:$,extent:J,reduce:ae,minPoints:te}=this.options,Q=$/(J*Math.pow(2,M));for(let se=0;se<I.length;se++){const Te=I[se];if(Te.zoom<=M)continue;Te.zoom=M;const Me=this.trees[M+1],we=Me.within(Te.x,Te.y,Q),it=Te.numPoints||1;let ot=it;for(const He of we){const pt=Me.points[He];pt.zoom>M&&(ot+=pt.numPoints||1)}if(ot>it&&ot>=te){let He=Te.x*it,pt=Te.y*it,gt=ae&&it>1?this._map(Te,!0):null;const Lt=(se<<5)+(M+1)+this.points.length;for(const vt of we){const Tt=Me.points[vt];if(Tt.zoom<=M)continue;Tt.zoom=M;const Bt=Tt.numPoints||1;He+=Tt.x*Bt,pt+=Tt.y*Bt,Tt.parentId=Lt,ae&&(gt||(gt=this._map(Te,!0)),ae(gt,this._map(Tt)))}Te.parentId=Lt,N.push(Wi(He/ot,pt/ot,Lt,ot,gt))}else if(N.push(Te),ot>1)for(const He of we){const pt=Me.points[He];pt.zoom<=M||(pt.zoom=M,N.push(pt))}}return N}_getOriginId(I){return I-this.points.length>>5}_getOriginZoom(I){return(I-this.points.length)%32}_map(I,M){if(I.numPoints)return M?ti({},I.properties):I.properties;const N=this.points[I.index].properties,$=this.options.map(N);return M&&$===N?ti({},$):$}}function Wi(V,I,M,N,$){return{x:hi(V),y:hi(I),zoom:1/0,id:M,parentId:-1,numPoints:N,properties:$}}function Co(V,I){const[M,N]=V.geometry.coordinates;return{x:hi(Rt(M)),y:hi(An(N)),zoom:1/0,index:I,parentId:-1}}function Io(V){return{type:"Feature",id:V.id,properties:oa(V),geometry:{type:"Point",coordinates:[(I=V.x,360*(I-.5)),di(V.y)]}};var I}function oa(V){const I=V.numPoints,M=I>=1e4?`${Math.round(I/1e3)}k`:I>=1e3?Math.round(I/100)/10+"k":I;return ti(ti({},V.properties),{cluster:!0,cluster_id:V.id,point_count:I,point_count_abbreviated:M})}function Rt(V){return V/360+.5}function An(V){const I=Math.sin(V*Math.PI/180),M=.5-.25*Math.log((1+I)/(1-I))/Math.PI;return M<0?0:M>1?1:M}function di(V){const I=(180-360*V)*Math.PI/180;return 360*Math.atan(Math.exp(I))/Math.PI-90}function ti(V,I){for(const M in I)V[M]=I[M];return V}function zn(V){return V.x}function pi(V){return V.y}function fi(V,I,M,N){for(var $,J=N,ae=M-I>>1,te=M-I,Q=V[I],se=V[I+1],Te=V[M],Me=V[M+1],we=I+3;we<M;we+=3){var it=Ao(V[we],V[we+1],Q,se,Te,Me);if(it>J)$=we,J=it;else if(it===J){var ot=Math.abs(we-ae);ot<te&&($=we,te=ot)}}J>N&&($-I>3&&fi(V,I,$,N),V[$+2]=J,M-$>3&&fi(V,$,M,N))}function Ao(V,I,M,N,$,J){var ae=$-M,te=J-N;if(ae!==0||te!==0){var Q=((V-M)*ae+(I-N)*te)/(ae*ae+te*te);Q>1?(M=$,N=J):Q>0&&(M+=ae*Q,N+=te*Q)}return(ae=V-M)*ae+(te=I-N)*te}function ki(V,I,M,N){var $={id:V===void 0?null:V,type:I,geometry:M,tags:N,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(J){var ae=J.geometry,te=J.type;if(te==="Point"||te==="MultiPoint"||te==="LineString")ke(J,ae);else if(te==="Polygon"||te==="MultiLineString")for(var Q=0;Q<ae.length;Q++)ke(J,ae[Q]);else if(te==="MultiPolygon")for(Q=0;Q<ae.length;Q++)for(var se=0;se<ae[Q].length;se++)ke(J,ae[Q][se])}($),$}function ke(V,I){for(var M=0;M<I.length;M+=3)V.minX=Math.min(V.minX,I[M]),V.minY=Math.min(V.minY,I[M+1]),V.maxX=Math.max(V.maxX,I[M]),V.maxY=Math.max(V.maxY,I[M+1])}function Ve(V,I,M,N){if(I.geometry){var $=I.geometry.coordinates,J=I.geometry.type,ae=Math.pow(M.tolerance/((1<<M.maxZoom)*M.extent),2),te=[],Q=I.id;if(M.promoteId?Q=I.properties[M.promoteId]:M.generateId&&(Q=N||0),J==="Point")qi($,te);else if(J==="MultiPoint")for(var se=0;se<$.length;se++)qi($[se],te);else if(J==="LineString")Gn($,te,ae,!1);else if(J==="MultiLineString"){if(M.lineMetrics){for(se=0;se<$.length;se++)Gn($[se],te=[],ae,!1),V.push(ki(Q,"LineString",te,I.properties));return}Pt($,te,ae,!1)}else if(J==="Polygon")Pt($,te,ae,!0);else{if(J!=="MultiPolygon"){if(J==="GeometryCollection"){for(se=0;se<I.geometry.geometries.length;se++)Ve(V,{id:Q,geometry:I.geometry.geometries[se],properties:I.properties},M,N);return}throw new Error("Input data is not a valid GeoJSON object.")}for(se=0;se<$.length;se++){var Te=[];Pt($[se],Te,ae,!0),te.push(Te)}}V.push(ki(Q,J,te,I.properties))}}function qi(V,I){I.push(Pn(V[0])),I.push(Mn(V[1])),I.push(0)}function Gn(V,I,M,N){for(var $,J,ae=0,te=0;te<V.length;te++){var Q=Pn(V[te][0]),se=Mn(V[te][1]);I.push(Q),I.push(se),I.push(0),te>0&&(ae+=N?($*se-Q*J)/2:Math.sqrt(Math.pow(Q-$,2)+Math.pow(se-J,2))),$=Q,J=se}var Te=I.length-3;I[2]=1,fi(I,0,Te,M),I[Te+2]=1,I.size=Math.abs(ae),I.start=0,I.end=I.size}function Pt(V,I,M,N){for(var $=0;$<V.length;$++){var J=[];Gn(V[$],J,M,N),I.push(J)}}function Pn(V){return V/360+.5}function Mn(V){var I=Math.sin(V*Math.PI/180),M=.5-.25*Math.log((1+I)/(1-I))/Math.PI;return M<0?0:M>1?1:M}function Dn(V,I,M,N,$,J,ae,te){if(N/=I,J>=(M/=I)&&ae<N)return V;if(ae<M||J>=N)return null;for(var Q=[],se=0;se<V.length;se++){var Te=V[se],Me=Te.geometry,we=Te.type,it=$===0?Te.minX:Te.minY,ot=$===0?Te.maxX:Te.maxY;if(it>=M&&ot<N)Q.push(Te);else if(!(ot<M||it>=N)){var He=[];if(we==="Point"||we==="MultiPoint")gn(Me,He,M,N,$);else if(we==="LineString")$e(Me,He,M,N,$,!1,te.lineMetrics);else if(we==="MultiLineString")bt(Me,He,M,N,$,!1);else if(we==="Polygon")bt(Me,He,M,N,$,!0);else if(we==="MultiPolygon")for(var pt=0;pt<Me.length;pt++){var gt=[];bt(Me[pt],gt,M,N,$,!0),gt.length&&He.push(gt)}if(He.length){if(te.lineMetrics&&we==="LineString"){for(pt=0;pt<He.length;pt++)Q.push(ki(Te.id,we,He[pt],Te.tags));continue}we!=="LineString"&&we!=="MultiLineString"||(He.length===1?(we="LineString",He=He[0]):we="MultiLineString"),we!=="Point"&&we!=="MultiPoint"||(we=He.length===3?"Point":"MultiPoint"),Q.push(ki(Te.id,we,He,Te.tags))}}}return Q.length?Q:null}function gn(V,I,M,N,$){for(var J=0;J<V.length;J+=3){var ae=V[J+$];ae>=M&&ae<=N&&(I.push(V[J]),I.push(V[J+1]),I.push(V[J+2]))}}function $e(V,I,M,N,$,J,ae){for(var te,Q,se=Et(V),Te=$===0?Ci:_t,Me=V.start,we=0;we<V.length-3;we+=3){var it=V[we],ot=V[we+1],He=V[we+2],pt=V[we+3],gt=V[we+4],Lt=$===0?it:ot,vt=$===0?pt:gt,Tt=!1;ae&&(te=Math.sqrt(Math.pow(it-pt,2)+Math.pow(ot-gt,2))),Lt<M?vt>M&&(Q=Te(se,it,ot,pt,gt,M),ae&&(se.start=Me+te*Q)):Lt>N?vt<N&&(Q=Te(se,it,ot,pt,gt,N),ae&&(se.start=Me+te*Q)):Xr(se,it,ot,He),vt<M&&Lt>=M&&(Q=Te(se,it,ot,pt,gt,M),Tt=!0),vt>N&&Lt<=N&&(Q=Te(se,it,ot,pt,gt,N),Tt=!0),!J&&Tt&&(ae&&(se.end=Me+te*Q),I.push(se),se=Et(V)),ae&&(Me+=te)}var Bt=V.length-3;it=V[Bt],ot=V[Bt+1],He=V[Bt+2],(Lt=$===0?it:ot)>=M&&Lt<=N&&Xr(se,it,ot,He),Bt=se.length-3,J&&Bt>=3&&(se[Bt]!==se[0]||se[Bt+1]!==se[1])&&Xr(se,se[0],se[1],se[2]),se.length&&I.push(se)}function Et(V){var I=[];return I.size=V.size,I.start=V.start,I.end=V.end,I}function bt(V,I,M,N,$,J){for(var ae=0;ae<V.length;ae++)$e(V[ae],I,M,N,$,J,!1)}function Xr(V,I,M,N){V.push(I),V.push(M),V.push(N)}function Ci(V,I,M,N,$,J){var ae=(J-I)/(N-I);return V.push(J),V.push(M+($-M)*ae),V.push(1),ae}function _t(V,I,M,N,$,J){var ae=(J-M)/($-M);return V.push(I+(N-I)*ae),V.push(J),V.push(1),ae}function Ii(V,I){for(var M=[],N=0;N<V.length;N++){var $,J=V[N],ae=J.type;if(ae==="Point"||ae==="MultiPoint"||ae==="LineString")$=pr(J.geometry,I);else if(ae==="MultiLineString"||ae==="Polygon"){$=[];for(var te=0;te<J.geometry.length;te++)$.push(pr(J.geometry[te],I))}else if(ae==="MultiPolygon")for($=[],te=0;te<J.geometry.length;te++){for(var Q=[],se=0;se<J.geometry[te].length;se++)Q.push(pr(J.geometry[te][se],I));$.push(Q)}M.push(ki(J.id,ae,$,J.tags))}return M}function pr(V,I){var M=[];M.size=V.size,V.start!==void 0&&(M.start=V.start,M.end=V.end);for(var N=0;N<V.length;N+=3)M.push(V[N]+I,V[N+1],V[N+2]);return M}function zo(V,I){if(V.transformed)return V;var M,N,$,J=1<<V.z,ae=V.x,te=V.y;for(M=0;M<V.features.length;M++){var Q=V.features[M],se=Q.geometry,Te=Q.type;if(Q.geometry=[],Te===1)for(N=0;N<se.length;N+=2)Q.geometry.push(Mr(se[N],se[N+1],I,J,ae,te));else for(N=0;N<se.length;N++){var Me=[];for($=0;$<se[N].length;$+=2)Me.push(Mr(se[N][$],se[N][$+1],I,J,ae,te));Q.geometry.push(Me)}}return V.transformed=!0,V}function Mr(V,I,M,N,$,J){return[Math.round(M*(V*N-$)),Math.round(M*(I*N-J))]}function hn(V,I,M,N,$){for(var J=I===$.maxZoom?0:$.tolerance/((1<<I)*$.extent),ae={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:M,y:N,z:I,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},te=0;te<V.length;te++){ae.numFeatures++,Wt(ae,V[te],J,$);var Q=V[te].minX,se=V[te].minY,Te=V[te].maxX,Me=V[te].maxY;Q<ae.minX&&(ae.minX=Q),se<ae.minY&&(ae.minY=se),Te>ae.maxX&&(ae.maxX=Te),Me>ae.maxY&&(ae.maxY=Me)}return ae}function Wt(V,I,M,N){var $=I.geometry,J=I.type,ae=[];if(J==="Point"||J==="MultiPoint")for(var te=0;te<$.length;te+=3)ae.push($[te]),ae.push($[te+1]),V.numPoints++,V.numSimplified++;else if(J==="LineString")Po(ae,$,V,M,!1,!1);else if(J==="MultiLineString"||J==="Polygon")for(te=0;te<$.length;te++)Po(ae,$[te],V,M,J==="Polygon",te===0);else if(J==="MultiPolygon")for(var Q=0;Q<$.length;Q++){var se=$[Q];for(te=0;te<se.length;te++)Po(ae,se[te],V,M,!0,te===0)}if(ae.length){var Te=I.tags||null;if(J==="LineString"&&N.lineMetrics){for(var Me in Te={},I.tags)Te[Me]=I.tags[Me];Te.mapbox_clip_start=$.start/$.size,Te.mapbox_clip_end=$.end/$.size}var we={geometry:ae,type:J==="Polygon"||J==="MultiPolygon"?3:J==="LineString"||J==="MultiLineString"?2:1,tags:Te};I.id!==null&&(we.id=I.id),V.features.push(we)}}function Po(V,I,M,N,$,J){var ae=N*N;if(N>0&&I.size<($?ae:N))M.numPoints+=I.length/3;else{for(var te=[],Q=0;Q<I.length;Q+=3)(N===0||I[Q+2]>ae)&&(M.numSimplified++,te.push(I[Q]),te.push(I[Q+1])),M.numPoints++;$&&function(se,Te){for(var Me=0,we=0,it=se.length,ot=it-2;we<it;ot=we,we+=2)Me+=(se[we]-se[ot])*(se[we+1]+se[ot+1]);if(Me>0===Te)for(we=0,it=se.length;we<it/2;we+=2){var He=se[we],pt=se[we+1];se[we]=se[it-2-we],se[we+1]=se[it-1-we],se[it-2-we]=He,se[it-1-we]=pt}}(te,J),V.push(te)}}function Ur(V,I){var M=(I=this.options=function($,J){for(var ae in J)$[ae]=J[ae];return $}(Object.create(this.options),I)).debug;if(M&&console.time("preprocess data"),I.maxZoom<0||I.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(I.promoteId&&I.generateId)throw new Error("promoteId and generateId cannot be used together.");var N=function($,J){var ae=[];if($.type==="FeatureCollection")for(var te=0;te<$.features.length;te++)Ve(ae,$.features[te],J,te);else Ve(ae,$.type==="Feature"?$:{geometry:$},J);return ae}(V,I);this.tiles={},this.tileCoords=[],M&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",I.indexMaxZoom,I.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),N=function($,J){var ae=J.buffer/J.extent,te=$,Q=Dn($,1,-1-ae,ae,0,-1,2,J),se=Dn($,1,1-ae,2+ae,0,-1,2,J);return(Q||se)&&(te=Dn($,1,-ae,1+ae,0,-1,2,J)||[],Q&&(te=Ii(Q,1).concat(te)),se&&(te=te.concat(Ii(se,-1)))),te}(N,I),N.length&&this.splitTile(N,0,0,0),M&&(N.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function ao(V,I,M){return 32*((1<<V)*M+I)+V}function so(V,I){const M=V.tileID.canonical;if(!this._geoJSONIndex)return I(null,null);const N=this._geoJSONIndex.getTile(M.z,M.x,M.y);if(!N)return I(null,null);const $=new Re(N.features);let J=Le.exports($);J.byteOffset===0&&J.byteLength===J.buffer.byteLength||(J=new Uint8Array(J)),I(null,{vectorTile:$,rawData:J.buffer})}Ur.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Ur.prototype.splitTile=function(V,I,M,N,$,J,ae){for(var te=[V,I,M,N],Q=this.options,se=Q.debug;te.length;){N=te.pop(),M=te.pop(),I=te.pop(),V=te.pop();var Te=1<<I,Me=ao(I,M,N),we=this.tiles[Me];if(!we&&(se>1&&console.time("creation"),we=this.tiles[Me]=hn(V,I,M,N,Q),this.tileCoords.push({z:I,x:M,y:N}),se)){se>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",I,M,N,we.numFeatures,we.numPoints,we.numSimplified),console.timeEnd("creation"));var it="z"+I;this.stats[it]=(this.stats[it]||0)+1,this.total++}if(we.source=V,$){if(I===Q.maxZoom||I===$)continue;var ot=1<<$-I;if(M!==Math.floor(J/ot)||N!==Math.floor(ae/ot))continue}else if(I===Q.indexMaxZoom||we.numPoints<=Q.indexMaxPoints)continue;if(we.source=null,V.length!==0){se>1&&console.time("clipping");var He,pt,gt,Lt,vt,Tt,Bt=.5*Q.buffer/Q.extent,Xt=.5-Bt,Vr=.5+Bt,ar=1+Bt;He=pt=gt=Lt=null,vt=Dn(V,Te,M-Bt,M+Vr,0,we.minX,we.maxX,Q),Tt=Dn(V,Te,M+Xt,M+ar,0,we.minX,we.maxX,Q),V=null,vt&&(He=Dn(vt,Te,N-Bt,N+Vr,1,we.minY,we.maxY,Q),pt=Dn(vt,Te,N+Xt,N+ar,1,we.minY,we.maxY,Q),vt=null),Tt&&(gt=Dn(Tt,Te,N-Bt,N+Vr,1,we.minY,we.maxY,Q),Lt=Dn(Tt,Te,N+Xt,N+ar,1,we.minY,we.maxY,Q),Tt=null),se>1&&console.timeEnd("clipping"),te.push(He||[],I+1,2*M,2*N),te.push(pt||[],I+1,2*M,2*N+1),te.push(gt||[],I+1,2*M+1,2*N),te.push(Lt||[],I+1,2*M+1,2*N+1)}}},Ur.prototype.getTile=function(V,I,M){var N=this.options,$=N.extent,J=N.debug;if(V<0||V>24)return null;var ae=1<<V,te=ao(V,I=(I%ae+ae)%ae,M);if(this.tiles[te])return zo(this.tiles[te],$);J>1&&console.log("drilling down to z%d-%d-%d",V,I,M);for(var Q,se=V,Te=I,Me=M;!Q&&se>0;)se--,Te=Math.floor(Te/2),Me=Math.floor(Me/2),Q=this.tiles[ao(se,Te,Me)];return Q&&Q.source?(J>1&&console.log("found parent tile z%d-%d-%d",se,Te,Me),J>1&&console.time("drilling down"),this.splitTile(Q.source,se,Te,Me,V,I,M),J>1&&console.timeEnd("drilling down"),this.tiles[te]?zo(this.tiles[te],$):null):null};class Mo extends _e{constructor(I,M,N,$){super(I,M,N,so),$&&(this.loadGeoJSON=$)}loadData(I,M){var N;(N=this._pendingRequest)===null||N===void 0||N.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const $=!!(I&&I.request&&I.request.collectResourceTiming)&&new l.RequestPerformance(I.request);this._pendingCallback=M,this._pendingRequest=this.loadGeoJSON(I,(J,ae)=>{if(delete this._pendingCallback,delete this._pendingRequest,J||!ae)return M(J);if(typeof ae!="object")return M(new Error(`Input data given to '${I.source}' is not a valid GeoJSON object.`));{H(ae,!0);try{if(I.filter){const Q=l.createExpression(I.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Q.result==="error")throw new Error(Q.value.map(Te=>`${Te.key}: ${Te.message}`).join(", "));const se=ae.features.filter(Te=>Q.value.evaluate({zoom:0},Te));ae={type:"FeatureCollection",features:se}}this._geoJSONIndex=I.cluster?new ia(function({superclusterOptions:Q,clusterProperties:se}){if(!se||!Q)return Q;const Te={},Me={},we={accumulated:null,zoom:0},it={properties:null},ot=Object.keys(se);for(const He of ot){const[pt,gt]=se[He],Lt=l.createExpression(gt),vt=l.createExpression(typeof pt=="string"?[pt,["accumulated"],["get",He]]:pt);Te[He]=Lt.value,Me[He]=vt.value}return Q.map=He=>{it.properties=He;const pt={};for(const gt of ot)pt[gt]=Te[gt].evaluate(we,it);return pt},Q.reduce=(He,pt)=>{it.properties=pt;for(const gt of ot)we.accumulated=He[gt],He[gt]=Me[gt].evaluate(we,it)},Q}(I)).load(ae.features):function(Q,se){return new Ur(Q,se)}(ae,I.geojsonVtOptions)}catch(Q){return M(Q)}this.loaded={};const te={};if($){const Q=$.finish();Q&&(te.resourceTiming={},te.resourceTiming[I.source]=JSON.parse(JSON.stringify(Q)))}M(null,te)}})}reloadTile(I,M){const N=this.loaded;return N&&N[I.uid]?super.reloadTile(I,M):this.loadTile(I,M)}loadGeoJSON(I,M){if(I.request)return l.getJSON(I.request,M);if(typeof I.data=="string")try{M(null,JSON.parse(I.data))}catch{M(new Error(`Input data given to '${I.source}' is not a valid GeoJSON object.`))}else M(new Error(`Input data given to '${I.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}}removeSource(I,M){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),M()}getClusterExpansionZoom(I,M){try{M(null,this._geoJSONIndex.getClusterExpansionZoom(I.clusterId))}catch(N){M(N)}}getClusterChildren(I,M){try{M(null,this._geoJSONIndex.getChildren(I.clusterId))}catch(N){M(N)}}getClusterLeaves(I,M){try{M(null,this._geoJSONIndex.getLeaves(I.clusterId,I.limit,I.offset))}catch(N){M(N)}}}class lo{constructor(I){this.self=I,this.actor=new l.Actor(I,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:_e,geojson:Mo},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(M,N)=>{if(this.workerSourceTypes[M])throw new Error(`Worker source with name "${M}" already registered.`);this.workerSourceTypes[M]=N},this.self.registerRTLTextPlugin=M=>{if(l.plugin.isParsed())throw new Error("RTL text plugin already registered.");l.plugin.applyArabicShaping=M.applyArabicShaping,l.plugin.processBidirectionalText=M.processBidirectionalText,l.plugin.processStyledBidirectionalText=M.processStyledBidirectionalText}}setReferrer(I,M){this.referrer=M}setImages(I,M,N){this.availableImages[I]=M;for(const $ in this.workerSources[I]){const J=this.workerSources[I][$];for(const ae in J)J[ae].availableImages=M}N()}setLayers(I,M,N){this.getLayerIndex(I).replace(M),N()}updateLayers(I,M,N){this.getLayerIndex(I).update(M.layers,M.removedIds),N()}loadTile(I,M,N){this.getWorkerSource(I,M.type,M.source).loadTile(M,N)}loadDEMTile(I,M,N){this.getDEMWorkerSource(I,M.source).loadTile(M,N)}reloadTile(I,M,N){this.getWorkerSource(I,M.type,M.source).reloadTile(M,N)}abortTile(I,M,N){this.getWorkerSource(I,M.type,M.source).abortTile(M,N)}removeTile(I,M,N){this.getWorkerSource(I,M.type,M.source).removeTile(M,N)}removeDEMTile(I,M){this.getDEMWorkerSource(I,M.source).removeTile(M)}removeSource(I,M,N){if(!this.workerSources[I]||!this.workerSources[I][M.type]||!this.workerSources[I][M.type][M.source])return;const $=this.workerSources[I][M.type][M.source];delete this.workerSources[I][M.type][M.source],$.removeSource!==void 0?$.removeSource(M,N):N()}loadWorkerSource(I,M,N){try{this.self.importScripts(M.url),N()}catch($){N($.toString())}}syncRTLPluginState(I,M,N){try{l.plugin.setState(M);const $=l.plugin.getPluginURL();if(l.plugin.isLoaded()&&!l.plugin.isParsed()&&$!=null){this.self.importScripts($);const J=l.plugin.isParsed();N(J?void 0:new Error(`RTL Text Plugin failed to import scripts from ${$}`),J)}}catch($){N($.toString())}}getAvailableImages(I){let M=this.availableImages[I];return M||(M=[]),M}getLayerIndex(I){let M=this.layerIndexes[I];return M||(M=this.layerIndexes[I]=new oe),M}getWorkerSource(I,M,N){if(this.workerSources[I]||(this.workerSources[I]={}),this.workerSources[I][M]||(this.workerSources[I][M]={}),!this.workerSources[I][M][N]){const $={send:(J,ae,te)=>{this.actor.send(J,ae,te,I)}};this.workerSources[I][M][N]=new this.workerSourceTypes[M]($,this.getLayerIndex(I),this.getAvailableImages(I))}return this.workerSources[I][M][N]}getDEMWorkerSource(I,M){return this.demWorkerSources[I]||(this.demWorkerSources[I]={}),this.demWorkerSources[I][M]||(this.demWorkerSources[I][M]=new re),this.demWorkerSources[I][M]}enforceCacheSizeLimit(I,M){l.enforceCacheSizeLimit(M)}}return l.isWorker()&&(self.worker=new lo(self)),lo}),v(["./shared"],function(l){var D=j;function j(d){return!function(n){return typeof window=="undefined"||typeof document=="undefined"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var h,f,y=new Blob([""],{type:"text/javascript"}),x=URL.createObjectURL(y);try{f=new Worker(x),h=!0}catch{h=!1}return f&&f.terminate(),URL.revokeObjectURL(x),h}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var h=document.createElement("canvas");h.width=h.height=1;var f=h.getContext("2d");if(!f)return!1;var y=f.getImageData(0,0,1,1);return y&&y.width===h.width}()?(oe[s=n&&n.failIfMajorPerformanceCaveat]===void 0&&(oe[s]=function(h){var f,y=function(x){var S=document.createElement("canvas"),E=Object.create(j.webGLContextAttributes);return E.failIfMajorPerformanceCaveat=x,S.getContext("webgl",E)||S.getContext("experimental-webgl",E)}(h);if(!y)return!1;try{f=y.createShader(y.VERTEX_SHADER)}catch{return!1}return!(!f||y.isContextLost())&&(y.shaderSource(f,"void main() {}"),y.compileShader(f),y.getShaderParameter(f,y.COMPILE_STATUS)===!0)}(s)),oe[s]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var s}(d)}var oe={};function ne(d,n){if(Array.isArray(d)){if(!Array.isArray(n)||d.length!==n.length)return!1;for(let s=0;s<d.length;s++)if(!ne(d[s],n[s]))return!1;return!0}if(typeof d=="object"&&d!==null&&n!==null){if(typeof n!="object"||Object.keys(d).length!==Object.keys(n).length)return!1;for(const s in d)if(!ne(d[s],n[s]))return!1;return!0}return d===n}j.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class U{static testProp(n){if(!U.docStyle)return n[0];for(let s=0;s<n.length;s++)if(n[s]in U.docStyle)return n[s];return n[0]}static create(n,s,h){const f=window.document.createElement(n);return s!==void 0&&(f.className=s),h&&h.appendChild(f),f}static createNS(n,s){return window.document.createElementNS(n,s)}static disableDrag(){U.docStyle&&U.selectProp&&(U.userSelect=U.docStyle[U.selectProp],U.docStyle[U.selectProp]="none")}static enableDrag(){U.docStyle&&U.selectProp&&(U.docStyle[U.selectProp]=U.userSelect)}static setTransform(n,s){n.style[U.transformProp]=s}static addEventListener(n,s,h,f={}){n.addEventListener(s,h,"passive"in f?f:f.capture)}static removeEventListener(n,s,h,f={}){n.removeEventListener(s,h,"passive"in f?f:f.capture)}static suppressClickInternal(n){n.preventDefault(),n.stopPropagation(),window.removeEventListener("click",U.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",U.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",U.suppressClickInternal,!0)},0)}static mousePos(n,s){const h=n.getBoundingClientRect();return new l.pointGeometry(s.clientX-h.left-n.clientLeft,s.clientY-h.top-n.clientTop)}static touchPos(n,s){const h=n.getBoundingClientRect(),f=[];for(let y=0;y<s.length;y++)f.push(new l.pointGeometry(s[y].clientX-h.left-n.clientLeft,s[y].clientY-h.top-n.clientTop));return f}static mouseButton(n){return n.button}static remove(n){n.parentNode&&n.parentNode.removeChild(n)}}U.docStyle=typeof window!="undefined"&&window.document&&window.document.documentElement.style,U.selectProp=U.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),U.transformProp=U.testProp(["transform","WebkitTransform"]);class Se{constructor(n){this._transformRequestFn=n}transformRequest(n,s){return this._transformRequestFn&&this._transformRequestFn(n,s)||{url:n}}normalizeSpriteURL(n,s,h){const f=function(y){const x=y.match(Ae);if(!x)throw new Error(`Unable to parse URL "${y}"`);return{protocol:x[1],authority:x[2],path:x[3]||"/",params:x[4]?x[4].split("&"):[]}}(n);return f.path+=`${s}${h}`,function(y){const x=y.params.length?`?${y.params.join("&")}`:"";return`${y.protocol}://${y.authority}${y.path}${x}`}(f)}setTransformRequest(n){this._transformRequestFn=n}}const Ae=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;class _e{constructor(n,s,h,f){this.context=n,this.format=h,this.texture=n.gl.createTexture(),this.update(s,f)}update(n,s,h){const{width:f,height:y}=n,x=!(this.size&&this.size[0]===f&&this.size[1]===y||h),{context:S}=this,{gl:E}=S;if(this.useMipmap=Boolean(s&&s.useMipmap),E.bindTexture(E.TEXTURE_2D,this.texture),S.pixelStoreUnpackFlipY.set(!1),S.pixelStoreUnpack.set(1),S.pixelStoreUnpackPremultiplyAlpha.set(this.format===E.RGBA&&(!s||s.premultiply!==!1)),x)this.size=[f,y],n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||l.isImageBitmap(n)?E.texImage2D(E.TEXTURE_2D,0,this.format,this.format,E.UNSIGNED_BYTE,n):E.texImage2D(E.TEXTURE_2D,0,this.format,f,y,0,this.format,E.UNSIGNED_BYTE,n.data);else{const{x:C,y:z}=h||{x:0,y:0};n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||l.isImageBitmap(n)?E.texSubImage2D(E.TEXTURE_2D,0,C,z,E.RGBA,E.UNSIGNED_BYTE,n):E.texSubImage2D(E.TEXTURE_2D,0,C,z,f,y,E.RGBA,E.UNSIGNED_BYTE,n.data)}this.useMipmap&&this.isSizePowerOfTwo()&&E.generateMipmap(E.TEXTURE_2D)}bind(n,s,h){const{context:f}=this,{gl:y}=f;y.bindTexture(y.TEXTURE_2D,this.texture),h!==y.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(h=y.LINEAR),n!==this.filter&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,n),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,h||n),this.filter=n),s!==this.wrap&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,s),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,s),this.wrap=s)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:n}=this.context;n.deleteTexture(this.texture),this.texture=null}}function re(d){const{userImage:n}=d;return!!(n&&n.render&&n.render())&&(d.data.replace(new Uint8Array(n.data.buffer)),!0)}class H extends l.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(n){if(this.loaded!==n&&(this.loaded=n,n)){for(const{ids:s,callback:h}of this.requestors)this._notify(s,h);this.requestors=[]}}getImage(n){return this.images[n]}addImage(n,s){if(this.images[n])throw new Error(`Image id ${n} already exist, use updateImage instead`);this._validate(n,s)&&(this.images[n]=s)}_validate(n,s){let h=!0;return this._validateStretch(s.stretchX,s.data&&s.data.width)||(this.fire(new l.ErrorEvent(new Error(`Image "${n}" has invalid "stretchX" value`))),h=!1),this._validateStretch(s.stretchY,s.data&&s.data.height)||(this.fire(new l.ErrorEvent(new Error(`Image "${n}" has invalid "stretchY" value`))),h=!1),this._validateContent(s.content,s)||(this.fire(new l.ErrorEvent(new Error(`Image "${n}" has invalid "content" value`))),h=!1),h}_validateStretch(n,s){if(!n)return!0;let h=0;for(const f of n){if(f[0]<h||f[1]<f[0]||s<f[1])return!1;h=f[1]}return!0}_validateContent(n,s){return!(n&&(n.length!==4||n[0]<0||s.data.width<n[0]||n[1]<0||s.data.height<n[1]||n[2]<0||s.data.width<n[2]||n[3]<0||s.data.height<n[3]||n[2]<n[0]||n[3]<n[1]))}updateImage(n,s){const h=this.images[n];if(h.data.width!==s.data.width||h.data.height!==s.data.height)throw new Error(`size mismatch between old image (${h.data.width}x${h.data.height}) and new image (${s.data.width}x${s.data.height}).`);s.version=h.version+1,this.images[n]=s,this.updatedImages[n]=!0}removeImage(n){const s=this.images[n];delete this.images[n],delete this.patterns[n],s.userImage&&s.userImage.onRemove&&s.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(n,s){let h=!0;if(!this.isLoaded())for(const f of n)this.images[f]||(h=!1);this.isLoaded()||h?this._notify(n,s):this.requestors.push({ids:n,callback:s})}_notify(n,s){const h={};for(const f of n){this.images[f]||this.fire(new l.Event("styleimagemissing",{id:f}));const y=this.images[f];y?h[f]={data:y.data.clone(),pixelRatio:y.pixelRatio,sdf:y.sdf,version:y.version,stretchX:y.stretchX,stretchY:y.stretchY,content:y.content,hasRenderCallback:Boolean(y.userImage&&y.userImage.render)}:l.warnOnce(`Image "${f}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}s(null,h)}getPixelSize(){const{width:n,height:s}=this.atlasImage;return{width:n,height:s}}getPattern(n){const s=this.patterns[n],h=this.getImage(n);if(!h)return null;if(s&&s.position.version===h.version)return s.position;if(s)s.position.version=h.version;else{const f={w:h.data.width+2,h:h.data.height+2,x:0,y:0},y=new l.ImagePosition(f,h);this.patterns[n]={bin:f,position:y}}return this._updatePatternAtlas(),this.patterns[n].position}bind(n){const s=n.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new _e(n,this.atlasImage,s.RGBA),this.atlasTexture.bind(s.LINEAR,s.CLAMP_TO_EDGE)}_updatePatternAtlas(){const n=[];for(const y in this.patterns)n.push(this.patterns[y].bin);const{w:s,h}=l.potpack(n),f=this.atlasImage;f.resize({width:s||1,height:h||1});for(const y in this.patterns){const{bin:x}=this.patterns[y],S=x.x+1,E=x.y+1,C=this.images[y].data,z=C.width,R=C.height;l.RGBAImage.copy(C,f,{x:0,y:0},{x:S,y:E},{width:z,height:R}),l.RGBAImage.copy(C,f,{x:0,y:R-1},{x:S,y:E-1},{width:z,height:1}),l.RGBAImage.copy(C,f,{x:0,y:0},{x:S,y:E+R},{width:z,height:1}),l.RGBAImage.copy(C,f,{x:z-1,y:0},{x:S-1,y:E},{width:1,height:R}),l.RGBAImage.copy(C,f,{x:0,y:0},{x:S+z,y:E},{width:1,height:R})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(n){for(const s of n){if(this.callbackDispatchedThisFrame[s])continue;this.callbackDispatchedThisFrame[s]=!0;const h=this.images[s];h||l.warnOnce(`Image with ID: "${s}" was not found`),re(h)&&this.updateImage(s,h)}}}const ee=1e20;function fe(d,n,s,h,f,y,x,S,E){for(let C=n;C<n+h;C++)be(d,s*y+C,y,f,x,S,E);for(let C=s;C<s+f;C++)be(d,C*y+n,1,h,x,S,E)}function be(d,n,s,h,f,y,x){y[0]=0,x[0]=-ee,x[1]=ee,f[0]=d[n];for(let S=1,E=0,C=0;S<h;S++){f[S]=d[n+S*s];const z=S*S;do{const R=y[E];C=(f[S]-f[R]+z-R*R)/(S-R)/2}while(C<=x[E]&&--E>-1);E++,y[E]=S,x[E]=C,x[E+1]=ee}for(let S=0,E=0;S<h;S++){for(;x[E+1]<S;)E++;const C=y[E],z=S-C;d[n+S*s]=f[C]+z*z}}class Ne{constructor(n,s){this.requestManager=n,this.localIdeographFontFamily=s,this.entries={}}setURL(n){this.url=n}getGlyphs(n,s){const h=[];for(const f in n)for(const y of n[f])h.push({stack:f,id:y});l.asyncAll(h,({stack:f,id:y},x)=>{let S=this.entries[f];S||(S=this.entries[f]={glyphs:{},requests:{},ranges:{}});let E=S.glyphs[y];if(E!==void 0)return void x(null,{stack:f,id:y,glyph:E});if(E=this._tinySDF(S,f,y),E)return S.glyphs[y]=E,void x(null,{stack:f,id:y,glyph:E});const C=Math.floor(y/256);if(256*C>65535)return void x(new Error("glyphs > 65535 not supported"));if(S.ranges[C])return void x(null,{stack:f,id:y,glyph:E});let z=S.requests[C];z||(z=S.requests[C]=[],Ne.loadGlyphRange(f,C,this.url,this.requestManager,(R,B)=>{if(B){for(const Z in B)this._doesCharSupportLocalGlyph(+Z)||(S.glyphs[+Z]=B[+Z]);S.ranges[C]=!0}for(const Z of z)Z(R,B);delete S.requests[C]})),z.push((R,B)=>{R?x(R):B&&x(null,{stack:f,id:y,glyph:B[y]||null})})},(f,y)=>{if(f)s(f);else if(y){const x={};for(const{stack:S,id:E,glyph:C}of y)(x[S]||(x[S]={}))[E]=C&&{id:C.id,bitmap:C.bitmap.clone(),metrics:C.metrics};s(null,x)}})}_doesCharSupportLocalGlyph(n){return!!this.localIdeographFontFamily&&(l.unicodeBlockLookup["CJK Unified Ideographs"](n)||l.unicodeBlockLookup["Hangul Syllables"](n)||l.unicodeBlockLookup.Hiragana(n)||l.unicodeBlockLookup.Katakana(n))}_tinySDF(n,s,h){const f=this.localIdeographFontFamily;if(!f||!this._doesCharSupportLocalGlyph(h))return;let y=n.tinySDF;if(!y){let S="400";/bold/i.test(s)?S="900":/medium/i.test(s)?S="500":/light/i.test(s)&&(S="200"),y=n.tinySDF=new Ne.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:f,fontWeight:S})}const x=y.draw(String.fromCharCode(h));return{id:h,bitmap:new l.AlphaImage({width:x.width||30,height:x.height||30},x.data),metrics:{width:x.glyphWidth||24,height:x.glyphHeight||24,left:x.glyphLeft||0,top:x.glyphTop-27||-8,advance:x.glyphAdvance||24}}}}Ne.loadGlyphRange=function(d,n,s,h,f){const y=256*n,x=y+255,S=h.transformRequest(s.replace("{fontstack}",d).replace("{range}",`${y}-${x}`),l.ResourceType.Glyphs);l.getArrayBuffer(S,(E,C)=>{if(E)f(E);else if(C){const z={};for(const R of l.parseGlyphPbf(C))z[R.id]=R;f(null,z)}})},Ne.TinySDF=class{constructor({fontSize:d=24,buffer:n=3,radius:s=8,cutoff:h=.25,fontFamily:f="sans-serif",fontWeight:y="normal",fontStyle:x="normal"}={}){this.buffer=n,this.cutoff=h,this.radius=s;const S=this.size=d+4*n,E=this._createCanvas(S),C=this.ctx=E.getContext("2d",{willReadFrequently:!0});C.font=`${x} ${y} ${d}px ${f}`,C.textBaseline="alphabetic",C.textAlign="left",C.fillStyle="black",this.gridOuter=new Float64Array(S*S),this.gridInner=new Float64Array(S*S),this.f=new Float64Array(S),this.z=new Float64Array(S+1),this.v=new Uint16Array(S)}_createCanvas(d){const n=document.createElement("canvas");return n.width=n.height=d,n}draw(d){const{width:n,actualBoundingBoxAscent:s,actualBoundingBoxDescent:h,actualBoundingBoxLeft:f,actualBoundingBoxRight:y}=this.ctx.measureText(d),x=Math.ceil(s),S=Math.min(this.size-this.buffer,Math.ceil(y-f)),E=Math.min(this.size-this.buffer,x+Math.ceil(h)),C=S+2*this.buffer,z=E+2*this.buffer,R=Math.max(C*z,0),B=new Uint8ClampedArray(R),Z={data:B,width:C,height:z,glyphWidth:S,glyphHeight:E,glyphTop:x,glyphLeft:0,glyphAdvance:n};if(S===0||E===0)return Z;const{ctx:G,buffer:W,gridInner:ie,gridOuter:ue}=this;G.clearRect(W,W,S,E),G.fillText(d,W,W+x);const pe=G.getImageData(W,W,S,E);ue.fill(ee,0,R),ie.fill(0,0,R);for(let X=0;X<E;X++)for(let ye=0;ye<S;ye++){const me=pe.data[4*(X*S+ye)+3]/255;if(me===0)continue;const Ce=(X+W)*C+ye+W;if(me===1)ue[Ce]=0,ie[Ce]=ee;else{const Ie=.5-me;ue[Ce]=Ie>0?Ie*Ie:0,ie[Ce]=Ie<0?Ie*Ie:0}}fe(ue,0,0,C,z,C,this.f,this.v,this.z),fe(ie,W,W,S,E,C,this.f,this.v,this.z);for(let X=0;X<R;X++){const ye=Math.sqrt(ue[X])-Math.sqrt(ie[X]);B[X]=Math.round(255-255*(ye/this.radius+this.cutoff))}return Z}};const Re=new l.Properties({anchor:new l.DataConstantProperty(l.spec.light.anchor),position:new class{constructor(){this.specification=l.spec.light.position}possiblyEvaluate(d,n){return l.sphericalToCartesian(d.expression.evaluate(n))}interpolate(d,n,s){return{x:l.number(d.x,n.x,s),y:l.number(d.y,n.y,s),z:l.number(d.z,n.z,s)}}},color:new l.DataConstantProperty(l.spec.light.color),intensity:new l.DataConstantProperty(l.spec.light.intensity)}),Le="-transition";class rt extends l.Evented{constructor(n){super(),this._transitionable=new l.Transitionable(Re),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(n,s={}){if(!this._validate(l.validateLight,n,s))for(const h in n){const f=n[h];h.endsWith(Le)?this._transitionable.setTransition(h.slice(0,-Le.length),f):this._transitionable.setValue(h,f)}}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}_validate(n,s,h){return(!h||h.validate!==!1)&&l.emitValidationErrors(this,n.call(l.validateStyle,l.extend({value:s,style:{glyphs:!0,sprite:!0},styleSpec:l.spec})))}}class Je{constructor(n,s){this.width=n,this.height=s,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(n,s){const h=n.join(",")+String(s);return this.dashEntry[h]||(this.dashEntry[h]=this.addDash(n,s)),this.dashEntry[h]}getDashRanges(n,s,h){const f=[];let y=n.length%2==1?-n[n.length-1]*h:0,x=n[0]*h,S=!0;f.push({left:y,right:x,isDash:S,zeroLength:n[0]===0});let E=n[0];for(let C=1;C<n.length;C++){S=!S;const z=n[C];y=E*h,E+=z,x=E*h,f.push({left:y,right:x,isDash:S,zeroLength:z===0})}return f}addRoundDash(n,s,h){const f=s/2;for(let y=-h;y<=h;y++){const x=this.width*(this.nextRow+h+y);let S=0,E=n[S];for(let C=0;C<this.width;C++){C/E.right>1&&(E=n[++S]);const z=Math.abs(C-E.left),R=Math.abs(C-E.right),B=Math.min(z,R);let Z;const G=y/h*(f+1);if(E.isDash){const W=f-Math.abs(G);Z=Math.sqrt(B*B+W*W)}else Z=f-Math.sqrt(B*B+G*G);this.data[x+C]=Math.max(0,Math.min(255,Z+128))}}}addRegularDash(n){for(let S=n.length-1;S>=0;--S){const E=n[S],C=n[S+1];E.zeroLength?n.splice(S,1):C&&C.isDash===E.isDash&&(C.left=E.left,n.splice(S,1))}const s=n[0],h=n[n.length-1];s.isDash===h.isDash&&(s.left=h.left-this.width,h.right=s.right+this.width);const f=this.width*this.nextRow;let y=0,x=n[y];for(let S=0;S<this.width;S++){S/x.right>1&&(x=n[++y]);const E=Math.abs(S-x.left),C=Math.abs(S-x.right),z=Math.min(E,C);this.data[f+S]=Math.max(0,Math.min(255,(x.isDash?z:-z)+128))}}addDash(n,s){const h=s?7:0,f=2*h+1;if(this.nextRow+f>this.height)return l.warnOnce("LineAtlas out of space"),null;let y=0;for(let S=0;S<n.length;S++)y+=n[S];if(y!==0){const S=this.width/y,E=this.getDashRanges(n,this.width,S);s?this.addRoundDash(E,S,h):this.addRegularDash(E)}const x={y:(this.nextRow+h+.5)/this.height,height:2*h/this.height,width:y};return this.nextRow+=f,this.dirty=!0,x}bind(n){const s=n.gl;this.texture?(s.bindTexture(s.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,s.texSubImage2D(s.TEXTURE_2D,0,0,0,this.width,this.height,s.ALPHA,s.UNSIGNED_BYTE,this.data))):(this.texture=s.createTexture(),s.bindTexture(s.TEXTURE_2D,this.texture),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),s.texImage2D(s.TEXTURE_2D,0,s.ALPHA,this.width,this.height,0,s.ALPHA,s.UNSIGNED_BYTE,this.data))}}class wt{constructor(n,s){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=l.uniqueId();const h=this.workerPool.acquire(this.id);for(let f=0;f<h.length;f++){const y=new wt.Actor(h[f],s,this.id);y.name=`Worker ${f}`,this.actors.push(y)}if(!this.actors.length)throw new Error("No actors found")}broadcast(n,s,h){l.asyncAll(this.actors,(f,y)=>{f.send(n,s,y)},h=h||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(n=>{n.remove()}),this.actors=[],this.workerPool.release(this.id)}}function Er(d,n,s){const h=function(f,y){if(f)return s(f);if(y){const x=l.pick(l.extend(y,d),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);y.vector_layers&&(x.vectorLayers=y.vector_layers,x.vectorLayerIds=x.vectorLayers.map(S=>S.id)),s(null,x)}};return d.url?l.getJSON(n.transformRequest(d.url,l.ResourceType.Source),h):l.exported.frame(()=>h(null,d))}wt.Actor=l.Actor;class Nt{constructor(n,s,h){this.bounds=l.LngLatBounds.convert(this.validateBounds(n)),this.minzoom=s||0,this.maxzoom=h||24}validateBounds(n){return Array.isArray(n)&&n.length===4?[Math.max(-180,n[0]),Math.max(-90,n[1]),Math.min(180,n[2]),Math.min(90,n[3])]:[-180,-90,180,90]}contains(n){const s=Math.pow(2,n.z),h=Math.floor(l.mercatorXfromLng(this.bounds.getWest())*s),f=Math.floor(l.mercatorYfromLat(this.bounds.getNorth())*s),y=Math.ceil(l.mercatorXfromLng(this.bounds.getEast())*s),x=Math.ceil(l.mercatorYfromLat(this.bounds.getSouth())*s);return n.x>=h&&n.x<y&&n.y>=f&&n.y<x}}class Vt extends l.Evented{constructor(n,s,h,f){if(super(),this.id=n,this.dispatcher=h,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.extend(this,l.pick(s,["url","scheme","tileSize","promoteId"])),this._options=l.extend({type:"vector"},s),this._collectResourceTiming=s.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(f)}load(){this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Er(this._options,this.map._requestManager,(n,s)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),n?this.fire(new l.ErrorEvent(n)):s&&(l.extend(this,s),s.bounds&&(this.tileBounds=new Nt(s.bounds,this.minzoom,this.maxzoom)),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}onAdd(n){this.map=n,this.load()}setSourceProperty(n){this._tileJSONRequest&&this._tileJSONRequest.cancel(),n(),this.load()}setTiles(n){return this.setSourceProperty(()=>{this._options.tiles=n}),this}setUrl(n){return this.setSourceProperty(()=>{this.url=n,this._options.url=n}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return l.extend({},this._options)}loadTile(n,s){const h=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),f={request:this.map._requestManager.transformRequest(h,l.ResourceType.Tile),uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,tileSize:this.tileSize*n.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function y(x,S){return delete n.request,n.aborted?s(null):x&&x.status!==404?s(x):(S&&S.resourceTiming&&(n.resourceTiming=S.resourceTiming),this.map._refreshExpiredTiles&&S&&n.setExpiryData(S),n.loadVectorData(S,this.map.painter),l.cacheEntryPossiblyAdded(this.dispatcher),s(null),void(n.reloadCallback&&(this.loadTile(n,n.reloadCallback),n.reloadCallback=null)))}f.request.collectResourceTiming=this._collectResourceTiming,n.actor&&n.state!=="expired"?n.state==="loading"?n.reloadCallback=s:n.request=n.actor.send("reloadTile",f,y.bind(this)):(n.actor=this.dispatcher.getActor(),n.request=n.actor.send("loadTile",f,y.bind(this)))}abortTile(n){n.request&&(n.request.cancel(),delete n.request),n.actor&&n.actor.send("abortTile",{uid:n.uid,type:this.type,source:this.id},void 0)}unloadTile(n){n.unloadVectorData(),n.actor&&n.actor.send("removeTile",{uid:n.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class Fr extends l.Evented{constructor(n,s,h,f){super(),this.id=n,this.dispatcher=h,this.setEventedParent(f),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.extend({type:"raster"},s),l.extend(this,l.pick(s,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Er(this._options,this.map._requestManager,(n,s)=>{this._tileJSONRequest=null,this._loaded=!0,n?this.fire(new l.ErrorEvent(n)):s&&(l.extend(this,s),s.bounds&&(this.tileBounds=new Nt(s.bounds,this.minzoom,this.maxzoom)),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(n){this.map=n,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return l.extend({},this._options)}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}loadTile(n,s){const h=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);n.request=l.getImage(this.map._requestManager.transformRequest(h,l.ResourceType.Tile),(f,y,x)=>{if(delete n.request,n.aborted)n.state="unloaded",s(null);else if(f)n.state="errored",s(f);else if(y){this.map._refreshExpiredTiles&&n.setExpiryData(x);const S=this.map.painter.context,E=S.gl;n.texture=this.map.painter.getTileTexture(y.width),n.texture?n.texture.update(y,{useMipmap:!0}):(n.texture=new _e(S,y,E.RGBA,{useMipmap:!0}),n.texture.bind(E.LINEAR,E.CLAMP_TO_EDGE,E.LINEAR_MIPMAP_NEAREST),S.extTextureFilterAnisotropic&&E.texParameterf(E.TEXTURE_2D,S.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,S.extTextureFilterAnisotropicMax)),n.state="loaded",l.cacheEntryPossiblyAdded(this.dispatcher),s(null)}})}abortTile(n,s){n.request&&(n.request.cancel(),delete n.request),s()}unloadTile(n,s){n.texture&&this.map.painter.saveTileTexture(n.texture),s()}hasTransition(){return!1}}let kr;class dt extends Fr{constructor(n,s,h,f){super(n,s,h,f),this.type="raster-dem",this.maxzoom=22,this._options=l.extend({type:"raster-dem"},s),this.encoding=s.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(n,s){const h=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function f(y,x){y&&(n.state="errored",s(y)),x&&(n.dem=x,n.needsHillshadePrepare=!0,n.needsTerrainPrepare=!0,n.state="loaded",s(null))}n.request=l.getImage(this.map._requestManager.transformRequest(h,l.ResourceType.Tile),function(y,x){if(delete n.request,n.aborted)n.state="unloaded",s(null);else if(y)n.state="errored",s(y);else if(x){this.map._refreshExpiredTiles&&n.setExpiryData(x),delete x.cacheControl,delete x.expires;const S=l.isImageBitmap(x)&&(kr==null&&(kr=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),kr)?x:l.exported.getImageData(x,1),E={uid:n.uid,coord:n.tileID,source:this.id,rawImageData:S,encoding:this.encoding};n.actor&&n.state!=="expired"||(n.actor=this.dispatcher.getActor(),n.actor.send("loadDEMTile",E,f.bind(this)))}}.bind(this)),n.neighboringTiles=this._getNeighboringTiles(n.tileID)}_getNeighboringTiles(n){const s=n.canonical,h=Math.pow(2,s.z),f=(s.x-1+h)%h,y=s.x===0?n.wrap-1:n.wrap,x=(s.x+1+h)%h,S=s.x+1===h?n.wrap+1:n.wrap,E={};return E[new l.OverscaledTileID(n.overscaledZ,y,s.z,f,s.y).key]={backfilled:!1},E[new l.OverscaledTileID(n.overscaledZ,S,s.z,x,s.y).key]={backfilled:!1},s.y>0&&(E[new l.OverscaledTileID(n.overscaledZ,y,s.z,f,s.y-1).key]={backfilled:!1},E[new l.OverscaledTileID(n.overscaledZ,n.wrap,s.z,s.x,s.y-1).key]={backfilled:!1},E[new l.OverscaledTileID(n.overscaledZ,S,s.z,x,s.y-1).key]={backfilled:!1}),s.y+1<h&&(E[new l.OverscaledTileID(n.overscaledZ,y,s.z,f,s.y+1).key]={backfilled:!1},E[new l.OverscaledTileID(n.overscaledZ,n.wrap,s.z,s.x,s.y+1).key]={backfilled:!1},E[new l.OverscaledTileID(n.overscaledZ,S,s.z,x,s.y+1).key]={backfilled:!1}),E}unloadTile(n){n.demTexture&&this.map.painter.saveTileTexture(n.demTexture),n.fbo&&(n.fbo.destroy(),delete n.fbo),n.dem&&delete n.dem,delete n.neighboringTiles,n.state="unloaded",n.actor&&n.actor.send("removeDEMTile",{uid:n.uid,source:this.id})}}class En extends l.Evented{constructor(n,s,h,f){super(),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=h.getActor(),this.setEventedParent(f),this._data=s.data,this._options=l.extend({},s),this._collectResourceTiming=s.collectResourceTiming,s.maxzoom!==void 0&&(this.maxzoom=s.maxzoom),s.type&&(this.type=s.type),s.attribution&&(this.attribution=s.attribution),this.promoteId=s.promoteId;const y=l.EXTENT/this.tileSize;this.workerOptions=l.extend({source:this.id,cluster:s.cluster||!1,geojsonVtOptions:{buffer:(s.buffer!==void 0?s.buffer:128)*y,tolerance:(s.tolerance!==void 0?s.tolerance:.375)*y,extent:l.EXTENT,maxZoom:this.maxzoom,lineMetrics:s.lineMetrics||!1,generateId:s.generateId||!1},superclusterOptions:{maxZoom:s.clusterMaxZoom!==void 0?s.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,s.clusterMinPoints||2),extent:l.EXTENT,radius:(s.clusterRadius||50)*y,log:!1,generateId:s.generateId||!1},clusterProperties:s.clusterProperties,filter:s.filter},s.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(n){this.map=n,this.load()}setData(n){return this._data=n,this._updateWorkerData("content"),this}getClusterExpansionZoom(n,s){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:n,source:this.id},s),this}getClusterChildren(n,s){return this.actor.send("geojson.getClusterChildren",{clusterId:n,source:this.id},s),this}getClusterLeaves(n,s,h,f){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:n,limit:s,offset:h},f),this}_updateWorkerData(n){const s=l.extend({},this.workerOptions),h=this._data;typeof h=="string"?(s.request=this.map._requestManager.transformRequest(l.exported.resolveURL(h),l.ResourceType.Source),s.request.collectResourceTiming=this._collectResourceTiming):s.data=JSON.stringify(h),this._pendingLoads++,this.fire(new l.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,s,(f,y)=>{if(this._pendingLoads--,this._removed||y&&y.abandoned)return void this.fire(new l.Event("dataabort",{dataType:"source",sourceDataType:n}));let x=null;if(y&&y.resourceTiming&&y.resourceTiming[this.id]&&(x=y.resourceTiming[this.id].slice(0)),f)return void this.fire(new l.ErrorEvent(f));const S={dataType:"source",sourceDataType:n};this._collectResourceTiming&&x&&x.length>0&&l.extend(S,{resourceTiming:x}),this.fire(new l.Event("data",S))})}loaded(){return this._pendingLoads===0}loadTile(n,s){const h=n.actor?"reloadTile":"loadTile";n.actor=this.actor;const f={type:this.type,uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};n.request=this.actor.send(h,f,(y,x)=>(delete n.request,n.unloadVectorData(),n.aborted?s(null):y?s(y):(n.loadVectorData(x,this.map.painter,h==="reloadTile"),s(null))))}abortTile(n){n.request&&(n.request.cancel(),delete n.request),n.aborted=!0}unloadTile(n){n.unloadVectorData(),this.actor.send("removeTile",{uid:n.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return l.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var kn=l.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class cn extends l.Evented{constructor(n,s,h,f){super(),this.id=n,this.dispatcher=h,this.coordinates=s.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(f),this.options=s}load(n,s){this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this.url=this.options.url,l.getImage(this.map._requestManager.transformRequest(this.url,l.ResourceType.Image),(h,f)=>{this._loaded=!0,h?this.fire(new l.ErrorEvent(h)):f&&(this.image=f,n&&(this.coordinates=n),s&&s(),this._finishLoading())})}loaded(){return this._loaded}updateImage(n){return this.image&&n.url?(this.options.url=n.url,this.load(n.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(n){this.map=n,this.load()}setCoordinates(n){this.coordinates=n;const s=n.map(l.MercatorCoordinate.fromLngLat);this.tileID=function(f){let y=1/0,x=1/0,S=-1/0,E=-1/0;for(const B of f)y=Math.min(y,B.x),x=Math.min(x,B.y),S=Math.max(S,B.x),E=Math.max(E,B.y);const C=Math.max(S-y,E-x),z=Math.max(0,Math.floor(-Math.log(C)/Math.LN2)),R=Math.pow(2,z);return new l.CanonicalTileID(z,Math.floor((y+S)/2*R),Math.floor((x+E)/2*R))}(s),this.minzoom=this.maxzoom=this.tileID.z;const h=s.map(f=>this.tileID.getTilePoint(f)._round());return this._boundsArray=new l.RasterBoundsArray,this._boundsArray.emplaceBack(h[0].x,h[0].y,0,0),this._boundsArray.emplaceBack(h[1].x,h[1].y,l.EXTENT,0),this._boundsArray.emplaceBack(h[3].x,h[3].y,0,l.EXTENT),this._boundsArray.emplaceBack(h[2].x,h[2].y,l.EXTENT,l.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const n=this.map.painter.context,s=n.gl;this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,kn.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new _e(n,this.image,s.RGBA),this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE));for(const h in this.tiles){const f=this.tiles[h];f.state!=="loaded"&&(f.state="loaded",f.texture=this.texture)}}loadTile(n,s){this.tileID&&this.tileID.equals(n.tileID.canonical)?(this.tiles[String(n.tileID.wrap)]=n,n.buckets={},s(null)):(n.state="errored",s(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Cn extends cn{constructor(n,s,h,f){super(n,s,h,f),this.roundZoom=!0,this.type="video",this.options=s}load(){this._loaded=!1;const n=this.options;this.urls=[];for(const s of n.urls)this.urls.push(this.map._requestManager.transformRequest(s,l.ResourceType.Source).url);l.getVideo(this.urls,(s,h)=>{this._loaded=!0,s?this.fire(new l.ErrorEvent(s)):h&&(this.video=h,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(n){if(this.video){const s=this.video.seekable;n<s.start(0)||n>s.end(0)?this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${s.start(0)} and ${s.end(0)}-second mark.`))):this.video.currentTime=n}}getVideo(){return this.video}onAdd(n){this.map||(this.map=n,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const n=this.map.painter.context,s=n.gl;this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,kn.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE),s.texSubImage2D(s.TEXTURE_2D,0,0,0,s.RGBA,s.UNSIGNED_BYTE,this.video)):(this.texture=new _e(n,this.video,s.RGBA),this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE));for(const h in this.tiles){const f=this.tiles[h];f.state!=="loaded"&&(f.state="loaded",f.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Ze extends cn{constructor(n,s,h,f){super(n,s,h,f),s.coordinates?Array.isArray(s.coordinates)&&s.coordinates.length===4&&!s.coordinates.some(y=>!Array.isArray(y)||y.length!==2||y.some(x=>typeof x!="number"))||this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${n}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${n}`,null,'missing required property "coordinates"'))),s.animate&&typeof s.animate!="boolean"&&this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${n}`,null,'optional "animate" property must be a boolean value'))),s.canvas?typeof s.canvas=="string"||s.canvas instanceof HTMLCanvasElement||this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${n}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${n}`,null,'missing required property "canvas"'))),this.options=s,this.animate=s.animate===void 0||s.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(n){this.map=n,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let n=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,n=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,n=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const s=this.map.painter.context,h=s.gl;this.boundsBuffer||(this.boundsBuffer=s.createVertexBuffer(this._boundsArray,kn.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(n||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new _e(s,this.canvas,h.RGBA,{premultiply:!0});for(const f in this.tiles){const y=this.tiles[f];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const n of[this.canvas.width,this.canvas.height])if(isNaN(n)||n<=0)return!0;return!1}}const xt={vector:Vt,raster:Fr,"raster-dem":dt,geojson:En,video:Cn,image:cn,canvas:Ze};function st(d,n){const s=l.create();return l.translate(s,s,[1,1,0]),l.scale(s,s,[.5*d.width,.5*d.height,1]),l.multiply(s,s,d.calculatePosMatrix(n.toUnwrapped()))}function Ht(d,n,s,h,f,y){const x=function(R,B,Z){if(R)for(const G of R){const W=B[G];if(W&&W.source===Z&&W.type==="fill-extrusion")return!0}else for(const G in B){const W=B[G];if(W.source===Z&&W.type==="fill-extrusion")return!0}return!1}(f&&f.layers,n,d.id),S=y.maxPitchScaleFactor(),E=d.tilesIn(h,S,x);E.sort(er);const C=[];for(const R of E)C.push({wrappedTileID:R.tileID.wrapped().key,queryResults:R.tile.queryRenderedFeatures(n,s,d._state,R.queryGeometry,R.cameraQueryGeometry,R.scale,f,y,S,st(d.transform,R.tileID))});const z=function(R){const B={},Z={};for(const G of R){const W=G.queryResults,ie=G.wrappedTileID,ue=Z[ie]=Z[ie]||{};for(const pe in W){const X=W[pe],ye=ue[pe]=ue[pe]||{},me=B[pe]=B[pe]||[];for(const Ce of X)ye[Ce.featureIndex]||(ye[Ce.featureIndex]=!0,me.push(Ce))}}return B}(C);for(const R in z)z[R].forEach(B=>{const Z=B.feature,G=d.getFeatureState(Z.layer["source-layer"],Z.id);Z.source=Z.layer.source,Z.layer["source-layer"]&&(Z.sourceLayer=Z.layer["source-layer"]),Z.state=G});return z}function er(d,n){const s=d.tileID,h=n.tileID;return s.overscaledZ-h.overscaledZ||s.canonical.y-h.canonical.y||s.wrap-h.wrap||s.canonical.x-h.canonical.x}class Pr{constructor(n,s){this.tileID=n,this.uid=l.uniqueId(),this.uses=0,this.tileSize=s,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.textures=[],this.textureCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(n){const s=n+this.timeAdded;s<l.exported.now()||this.fadeEndTime&&s<this.fadeEndTime||(this.fadeEndTime=s)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(n){this.demTexture&&n.saveTileTexture(this.demTexture),this.textures.forEach(s=>n.saveTileTexture(s)),this.demTexture=null,this.textures=[],this.textureCoords={}}loadVectorData(n,s,h){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",n){n.featureIndex&&(this.latestFeatureIndex=n.featureIndex,n.rawTileData?(this.latestRawTileData=n.rawTileData,this.latestFeatureIndex.rawTileData=n.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=n.collisionBoxArray,this.buckets=function(f,y){const x={};if(!y)return x;for(const S of f){const E=S.layerIds.map(C=>y.getLayer(C)).filter(Boolean);if(E.length!==0){S.layers=E,S.stateDependentLayerIds&&(S.stateDependentLayers=S.stateDependentLayerIds.map(C=>E.filter(z=>z.id===C)[0]));for(const C of E)x[C.id]=S}}return x}(n.buckets,s.style),this.hasSymbolBuckets=!1;for(const f in this.buckets){const y=this.buckets[f];if(y instanceof l.SymbolBucket){if(this.hasSymbolBuckets=!0,!h)break;y.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const f in this.buckets){const y=this.buckets[f];if(y instanceof l.SymbolBucket&&y.hasRTLText){this.hasRTLText=!0,l.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const f in this.buckets){const y=this.buckets[f];this.queryPadding=Math.max(this.queryPadding,s.style.getLayer(f).queryRadius(y))}n.imageAtlas&&(this.imageAtlas=n.imageAtlas),n.glyphAtlasImage&&(this.glyphAtlasImage=n.glyphAtlasImage)}else this.collisionBoxArray=new l.CollisionBoxArray}unloadVectorData(){for(const n in this.buckets)this.buckets[n].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(n){return this.buckets[n.id]}upload(n){for(const h in this.buckets){const f=this.buckets[h];f.uploadPending()&&f.upload(n)}const s=n.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new _e(n,this.imageAtlas.image,s.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new _e(n,this.glyphAtlasImage,s.ALPHA),this.glyphAtlasImage=null)}prepare(n){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(n,this.imageAtlasTexture)}queryRenderedFeatures(n,s,h,f,y,x,S,E,C,z){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:f,cameraQueryGeometry:y,scale:x,tileSize:this.tileSize,pixelPosMatrix:z,transform:E,params:S,queryPadding:this.queryPadding*C},n,s,h):{}}querySourceFeatures(n,s){const h=this.latestFeatureIndex;if(!h||!h.rawTileData)return;const f=h.loadVTLayers(),y=s?s.sourceLayer:"",x=f._geojsonTileLayer||f[y];if(!x)return;const S=l.createFilter(s&&s.filter),{z:E,x:C,y:z}=this.tileID.canonical,R={z:E,x:C,y:z};for(let B=0;B<x.length;B++){const Z=x.feature(B);if(S.needGeometry){const ie=l.toEvaluationFeature(Z,!0);if(!S.filter(new l.EvaluationParameters(this.tileID.overscaledZ),ie,this.tileID.canonical))continue}else if(!S.filter(new l.EvaluationParameters(this.tileID.overscaledZ),Z))continue;const G=h.getId(Z,y),W=new l.GeoJSONFeature(Z,E,C,z,G);W.tile=R,n.push(W)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(n){const s=this.expirationTime;if(n.cacheControl){const h=l.parseCacheControl(n.cacheControl);h["max-age"]&&(this.expirationTime=Date.now()+1e3*h["max-age"])}else n.expires&&(this.expirationTime=new Date(n.expires).getTime());if(this.expirationTime){const h=Date.now();let f=!1;if(this.expirationTime>h)f=!1;else if(s)if(this.expirationTime<s)f=!0;else{const y=this.expirationTime-s;y?this.expirationTime=h+Math.max(y,3e4):f=!0}else f=!0;f?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(n,s){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(n).length===0)return;const h=this.latestFeatureIndex.loadVTLayers();for(const f in this.buckets){if(!s.style.hasLayer(f))continue;const y=this.buckets[f],x=y.layers[0].sourceLayer||"_geojsonTileLayer",S=h[x],E=n[x];if(!S||!E||Object.keys(E).length===0)continue;y.update(E,S,this.imageAtlas&&this.imageAtlas.patternPositions||{});const C=s&&s.style&&s.style.getLayer(f);C&&(this.queryPadding=Math.max(this.queryPadding,C.queryRadius(y)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<l.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(n){this.symbolFadeHoldUntil=l.exported.now()+n}setDependencies(n,s){const h={};for(const f of s)h[f]=!0;this.dependencies[n]=h}hasDependency(n,s){for(const h of n){const f=this.dependencies[h];if(f){for(const y of s)if(f[y])return!0}}return!1}}class Hr{constructor(n,s){this.max=n,this.onRemove=s,this.reset()}reset(){for(const n in this.data)for(const s of this.data[n])s.timeout&&clearTimeout(s.timeout),this.onRemove(s.value);return this.data={},this.order=[],this}add(n,s,h){const f=n.wrapped().key;this.data[f]===void 0&&(this.data[f]=[]);const y={value:s,timeout:void 0};if(h!==void 0&&(y.timeout=setTimeout(()=>{this.remove(n,y)},h)),this.data[f].push(y),this.order.push(f),this.order.length>this.max){const x=this._getAndRemoveByKey(this.order[0]);x&&this.onRemove(x)}return this}has(n){return n.wrapped().key in this.data}getAndRemove(n){return this.has(n)?this._getAndRemoveByKey(n.wrapped().key):null}_getAndRemoveByKey(n){const s=this.data[n].shift();return s.timeout&&clearTimeout(s.timeout),this.data[n].length===0&&delete this.data[n],this.order.splice(this.order.indexOf(n),1),s.value}getByKey(n){const s=this.data[n];return s?s[0].value:null}get(n){return this.has(n)?this.data[n.wrapped().key][0].value:null}remove(n,s){if(!this.has(n))return this;const h=n.wrapped().key,f=s===void 0?0:this.data[h].indexOf(s),y=this.data[h][f];return this.data[h].splice(f,1),y.timeout&&clearTimeout(y.timeout),this.data[h].length===0&&delete this.data[h],this.onRemove(y.value),this.order.splice(this.order.indexOf(h),1),this}setMaxSize(n){for(this.max=n;this.order.length>this.max;){const s=this._getAndRemoveByKey(this.order[0]);s&&this.onRemove(s)}return this}filter(n){const s=[];for(const h in this.data)for(const f of this.data[h])n(f.value)||s.push(f);for(const h of s)this.remove(h.value.tileID,h)}}class $r{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(n,s,h){const f=String(s);if(this.stateChanges[n]=this.stateChanges[n]||{},this.stateChanges[n][f]=this.stateChanges[n][f]||{},l.extend(this.stateChanges[n][f],h),this.deletedStates[n]===null){this.deletedStates[n]={};for(const y in this.state[n])y!==f&&(this.deletedStates[n][y]=null)}else if(this.deletedStates[n]&&this.deletedStates[n][f]===null){this.deletedStates[n][f]={};for(const y in this.state[n][f])h[y]||(this.deletedStates[n][f][y]=null)}else for(const y in h)this.deletedStates[n]&&this.deletedStates[n][f]&&this.deletedStates[n][f][y]===null&&delete this.deletedStates[n][f][y]}removeFeatureState(n,s,h){if(this.deletedStates[n]===null)return;const f=String(s);if(this.deletedStates[n]=this.deletedStates[n]||{},h&&s!==void 0)this.deletedStates[n][f]!==null&&(this.deletedStates[n][f]=this.deletedStates[n][f]||{},this.deletedStates[n][f][h]=null);else if(s!==void 0)if(this.stateChanges[n]&&this.stateChanges[n][f])for(h in this.deletedStates[n][f]={},this.stateChanges[n][f])this.deletedStates[n][f][h]=null;else this.deletedStates[n][f]=null;else this.deletedStates[n]=null}getState(n,s){const h=String(s),f=l.extend({},(this.state[n]||{})[h],(this.stateChanges[n]||{})[h]);if(this.deletedStates[n]===null)return{};if(this.deletedStates[n]){const y=this.deletedStates[n][s];if(y===null)return{};for(const x in y)delete f[x]}return f}initializeTileState(n,s){n.setFeatureState(this.state,s)}coalesceChanges(n,s){const h={};for(const f in this.stateChanges){this.state[f]=this.state[f]||{};const y={};for(const x in this.stateChanges[f])this.state[f][x]||(this.state[f][x]={}),l.extend(this.state[f][x],this.stateChanges[f][x]),y[x]=this.state[f][x];h[f]=y}for(const f in this.deletedStates){this.state[f]=this.state[f]||{};const y={};if(this.deletedStates[f]===null)for(const x in this.state[f])y[x]={},this.state[f][x]={};else for(const x in this.deletedStates[f]){if(this.deletedStates[f][x]===null)this.state[f][x]={};else for(const S of Object.keys(this.deletedStates[f][x]))delete this.state[f][x][S];y[x]=this.state[f][x]}h[f]=h[f]||{},l.extend(h[f],y)}if(this.stateChanges={},this.deletedStates={},Object.keys(h).length!==0)for(const f in n)n[f].setFeatureState(h,s)}}class wr extends l.Evented{constructor(n,s,h){super(),this.id=n,this.dispatcher=h,this.on("data",f=>{f.dataType==="source"&&f.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&f.dataType==="source"&&f.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain))}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(f,y,x,S){const E=new xt[y.type](f,y,x,S);if(E.id!==f)throw new Error(`Expected Source id to be ${f} instead of ${E.id}`);return l.bindAll(["load","abort","unload","serialize","prepare"],E),E}(n,s,h,this),this._tiles={},this._cache=new Hr(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new $r}onAdd(n){this.map=n,this._maxTileCacheSize=n?n._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(n)}onRemove(n){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(n)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const n in this._tiles){const s=this._tiles[n];if(s.state!=="loaded"&&s.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const n=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,n&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(n,s){return this._source.loadTile(n,s)}_unloadTile(n){if(this._source.unloadTile)return this._source.unloadTile(n,()=>{})}_abortTile(n){this._source.abortTile&&this._source.abortTile(n,()=>{}),this._source.fire(new l.Event("dataabort",{tile:n,coord:n.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(n){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const s in this._tiles){const h=this._tiles[s];h.upload(n),h.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(n=>n.tileID).sort(Gi).map(n=>n.key)}getRenderableIds(n){const s=[];for(const h in this._tiles)this._isIdRenderable(h,n)&&s.push(this._tiles[h]);return n?s.sort((h,f)=>{const y=h.tileID,x=f.tileID,S=new l.pointGeometry(y.canonical.x,y.canonical.y)._rotate(this.transform.angle),E=new l.pointGeometry(x.canonical.x,x.canonical.y)._rotate(this.transform.angle);return y.overscaledZ-x.overscaledZ||E.y-S.y||E.x-S.x}).map(h=>h.tileID.key):s.map(h=>h.tileID).sort(Gi).map(h=>h.key)}hasRenderableParent(n){const s=this.findLoadedParent(n,0);return!!s&&this._isIdRenderable(s.tileID.key)}_isIdRenderable(n,s){return this._tiles[n]&&this._tiles[n].hasData()&&!this._coveredTiles[n]&&(s||!this._tiles[n].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const n in this._tiles)this._tiles[n].state!=="errored"&&this._reloadTile(n,"reloading")}}_reloadTile(n,s){const h=this._tiles[n];h&&(h.state!=="loading"&&(h.state=s),this._loadTile(h,this._tileLoaded.bind(this,h,n,s)))}_tileLoaded(n,s,h,f){if(f)return n.state="errored",void(f.status!==404?this._source.fire(new l.ErrorEvent(f,{tile:n})):this.update(this.transform,this.terrain));n.timeAdded=l.exported.now(),h==="expired"&&(n.refreshedUponExpiration=!0),this._setTileReloadTimer(s,n),this.getSource().type==="raster-dem"&&n.dem&&this._backfillDEM(n),this._state.initializeTileState(n,this.map?this.map.painter:null),n.aborted||this._source.fire(new l.Event("data",{dataType:"source",tile:n,coord:n.tileID}))}_backfillDEM(n){const s=this.getRenderableIds();for(let f=0;f<s.length;f++){const y=s[f];if(n.neighboringTiles&&n.neighboringTiles[y]){const x=this.getTileByID(y);h(n,x),h(x,n)}}function h(f,y){f.needsHillshadePrepare=!0,f.needsTerrainPrepare=!0;let x=y.tileID.canonical.x-f.tileID.canonical.x;const S=y.tileID.canonical.y-f.tileID.canonical.y,E=Math.pow(2,f.tileID.canonical.z),C=y.tileID.key;x===0&&S===0||Math.abs(S)>1||(Math.abs(x)>1&&(Math.abs(x+E)===1?x+=E:Math.abs(x-E)===1&&(x-=E)),y.dem&&f.dem&&(f.dem.backfillBorder(y.dem,x,S),f.neighboringTiles&&f.neighboringTiles[C]&&(f.neighboringTiles[C].backfilled=!0)))}}getTile(n){return this.getTileByID(n.key)}getTileByID(n){return this._tiles[n]}_retainLoadedChildren(n,s,h,f){for(const y in this._tiles){let x=this._tiles[y];if(f[y]||!x.hasData()||x.tileID.overscaledZ<=s||x.tileID.overscaledZ>h)continue;let S=x.tileID;for(;x&&x.tileID.overscaledZ>s+1;){const C=x.tileID.scaledTo(x.tileID.overscaledZ-1);x=this._tiles[C.key],x&&x.hasData()&&(S=C)}let E=S;for(;E.overscaledZ>s;)if(E=E.scaledTo(E.overscaledZ-1),n[E.key]){f[S.key]=S;break}}}findLoadedParent(n,s){if(n.key in this._loadedParentTiles){const h=this._loadedParentTiles[n.key];return h&&h.tileID.overscaledZ>=s?h:null}for(let h=n.overscaledZ-1;h>=s;h--){const f=n.scaledTo(h),y=this._getLoadedTile(f);if(y)return y}}_getLoadedTile(n){const s=this._tiles[n.key];return s&&s.hasData()?s:this._cache.getByKey(n.wrapped().key)}updateCacheSize(n){const s=Math.ceil(n.width/this._source.tileSize)+1,h=Math.ceil(n.height/this._source.tileSize)+1,f=Math.floor(s*h*5),y=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,f):f;this._cache.setMaxSize(y)}handleWrapJump(n){const s=Math.round((n-(this._prevLng===void 0?n:this._prevLng))/360);if(this._prevLng=n,s){const h={};for(const f in this._tiles){const y=this._tiles[f];y.tileID=y.tileID.unwrapTo(y.tileID.wrap+s),h[y.tileID.key]=y}this._tiles=h;for(const f in this._timers)clearTimeout(this._timers[f]),delete this._timers[f];for(const f in this._tiles)this._setTileReloadTimer(f,this._tiles[f])}}update(n,s){if(this.transform=n,this.terrain=s,!this._sourceLoaded||this._paused)return;let h;this.updateCacheSize(n),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?h=n.getVisibleUnwrappedCoordinates(this._source.tileID).map(C=>new l.OverscaledTileID(C.canonical.z,C.wrap,C.canonical.z,C.canonical.x,C.canonical.y)):(h=n.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:s}),this._source.hasTile&&(h=h.filter(C=>this._source.hasTile(C)))):h=[];const f=n.coveringZoomLevel(this._source),y=Math.max(f-wr.maxOverzooming,this._source.minzoom),x=Math.max(f+wr.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const C={};for(const z of h)if(z.canonical.z>this._source.minzoom){const R=z.scaledTo(z.canonical.z-1);C[R.key]=R;const B=z.scaledTo(Math.max(this._source.minzoom,Math.min(z.canonical.z,5)));C[B.key]=B}h=h.concat(Object.values(C))}const S=this._updateRetainedTiles(h,f);if(ko(this._source.type)){const C={},z={},R=Object.keys(S);for(const B of R){const Z=S[B],G=this._tiles[B];if(!G||G.fadeEndTime&&G.fadeEndTime<=l.exported.now())continue;const W=this.findLoadedParent(Z,y);W&&(this._addTile(W.tileID),C[W.tileID.key]=W.tileID),z[B]=Z}this._retainLoadedChildren(z,f,x,S);for(const B in C)S[B]||(this._coveredTiles[B]=!0,S[B]=C[B]);if(s){const B={},Z={};for(const G of h)this._tiles[G.key].hasData()?B[G.key]=G:Z[G.key]=G;for(const G in Z){const W=Z[G].children(this._source.maxzoom);this._tiles[W[0].key]&&this._tiles[W[1].key]&&this._tiles[W[2].key]&&this._tiles[W[3].key]&&(B[W[0].key]=S[W[0].key]=W[0],B[W[1].key]=S[W[1].key]=W[1],B[W[2].key]=S[W[2].key]=W[2],B[W[3].key]=S[W[3].key]=W[3],delete Z[G])}for(const G in Z){const W=this.findLoadedParent(Z[G],this._source.minzoom);if(W){B[W.tileID.key]=S[W.tileID.key]=W.tileID;for(const ie in B)B[ie].isChildOf(W.tileID)&&delete B[ie]}}for(const G in this._tiles)B[G]||(this._coveredTiles[G]=!0)}}for(const C in S)this._tiles[C].clearFadeHold();const E=l.keysDifference(this._tiles,S);for(const C of E){const z=this._tiles[C];z.hasSymbolBuckets&&!z.holdingForFade()?z.setHoldDuration(this.map._fadeDuration):z.hasSymbolBuckets&&!z.symbolFadeFinished()||this._removeTile(C)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const n in this._tiles)this._tiles[n].holdingForFade()&&this._removeTile(n)}_updateRetainedTiles(n,s){const h={},f={},y=Math.max(s-wr.maxOverzooming,this._source.minzoom),x=Math.max(s+wr.maxUnderzooming,this._source.minzoom),S={};for(const E of n){const C=this._addTile(E);h[E.key]=E,C.hasData()||s<this._source.maxzoom&&(S[E.key]=E)}this._retainLoadedChildren(S,s,x,h);for(const E of n){let C=this._tiles[E.key];if(C.hasData())continue;if(s+1>this._source.maxzoom){const R=E.children(this._source.maxzoom)[0],B=this.getTile(R);if(B&&B.hasData()){h[R.key]=R;continue}}else{const R=E.children(this._source.maxzoom);if(h[R[0].key]&&h[R[1].key]&&h[R[2].key]&&h[R[3].key])continue}let z=C.wasRequested();for(let R=E.overscaledZ-1;R>=y;--R){const B=E.scaledTo(R);if(f[B.key]||(f[B.key]=!0,C=this.getTile(B),!C&&z&&(C=this._addTile(B)),C&&(h[B.key]=B,z=C.wasRequested(),C.hasData())))break}}return h}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const n in this._tiles){const s=[];let h,f=this._tiles[n].tileID;for(;f.overscaledZ>0;){if(f.key in this._loadedParentTiles){h=this._loadedParentTiles[f.key];break}s.push(f.key);const y=f.scaledTo(f.overscaledZ-1);if(h=this._getLoadedTile(y),h)break;f=y}for(const y of s)this._loadedParentTiles[y]=h}}_addTile(n){let s=this._tiles[n.key];if(s)return s;s=this._cache.getAndRemove(n),s&&(this._setTileReloadTimer(n.key,s),s.tileID=n,this._state.initializeTileState(s,this.map?this.map.painter:null),this._cacheTimers[n.key]&&(clearTimeout(this._cacheTimers[n.key]),delete this._cacheTimers[n.key],this._setTileReloadTimer(n.key,s)));const h=s;return s||(s=new Pr(n,this._source.tileSize*n.overscaleFactor()),this._loadTile(s,this._tileLoaded.bind(this,s,n.key,s.state))),s.uses++,this._tiles[n.key]=s,h||this._source.fire(new l.Event("dataloading",{tile:s,coord:s.tileID,dataType:"source"})),s}_setTileReloadTimer(n,s){n in this._timers&&(clearTimeout(this._timers[n]),delete this._timers[n]);const h=s.getExpiryTimeout();h&&(this._timers[n]=setTimeout(()=>{this._reloadTile(n,"expired"),delete this._timers[n]},h))}_removeTile(n){const s=this._tiles[n];s&&(s.uses--,delete this._tiles[n],this._timers[n]&&(clearTimeout(this._timers[n]),delete this._timers[n]),s.uses>0||(s.hasData()&&s.state!=="reloading"?this._cache.add(s.tileID,s,s.getExpiryTimeout()):(s.aborted=!0,this._abortTile(s),this._unloadTile(s))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const n in this._tiles)this._removeTile(n);this._cache.reset()}tilesIn(n,s,h){const f=[],y=this.transform;if(!y)return f;const x=h?y.getCameraQueryGeometry(n):n,S=n.map(G=>y.pointCoordinate(G,this.terrain)),E=x.map(G=>y.pointCoordinate(G,this.terrain)),C=this.getIds();let z=1/0,R=1/0,B=-1/0,Z=-1/0;for(const G of E)z=Math.min(z,G.x),R=Math.min(R,G.y),B=Math.max(B,G.x),Z=Math.max(Z,G.y);for(let G=0;G<C.length;G++){const W=this._tiles[C[G]];if(W.holdingForFade())continue;const ie=W.tileID,ue=Math.pow(2,y.zoom-W.tileID.overscaledZ),pe=s*W.queryPadding*l.EXTENT/W.tileSize/ue,X=[ie.getTilePoint(new l.MercatorCoordinate(z,R)),ie.getTilePoint(new l.MercatorCoordinate(B,Z))];if(X[0].x-pe<l.EXTENT&&X[0].y-pe<l.EXTENT&&X[1].x+pe>=0&&X[1].y+pe>=0){const ye=S.map(Ce=>ie.getTilePoint(Ce)),me=E.map(Ce=>ie.getTilePoint(Ce));f.push({tile:W,tileID:ie,queryGeometry:ye,cameraQueryGeometry:me,scale:ue})}}return f}getVisibleCoordinates(n){const s=this.getRenderableIds(n).map(h=>this._tiles[h].tileID);for(const h of s)h.posMatrix=this.transform.calculatePosMatrix(h.toUnwrapped());return s}hasTransition(){if(this._source.hasTransition())return!0;if(ko(this._source.type))for(const n in this._tiles){const s=this._tiles[n];if(s.fadeEndTime!==void 0&&s.fadeEndTime>=l.exported.now())return!0}return!1}setFeatureState(n,s,h){this._state.updateState(n=n||"_geojsonTileLayer",s,h)}removeFeatureState(n,s,h){this._state.removeFeatureState(n=n||"_geojsonTileLayer",s,h)}getFeatureState(n,s){return this._state.getState(n=n||"_geojsonTileLayer",s)}setDependencies(n,s,h){const f=this._tiles[n];f&&f.setDependencies(s,h)}reloadTilesForDependencies(n,s){for(const h in this._tiles)this._tiles[h].hasDependency(n,s)&&this._reloadTile(h,"reloading");this._cache.filter(h=>!h.hasDependency(n,s))}}function Gi(d,n){const s=Math.abs(2*d.wrap)-+(d.wrap<0),h=Math.abs(2*n.wrap)-+(n.wrap<0);return d.overscaledZ-n.overscaledZ||h-s||n.canonical.y-d.canonical.y||n.canonical.x-d.canonical.x}function ko(d){return d==="raster"||d==="image"||d==="video"}wr.maxOverzooming=10,wr.maxUnderzooming=3;const hi="mapboxgl_preloaded_worker_pool";class In{constructor(){this.active={}}acquire(n){if(!this.workers)for(this.workers=[];this.workers.length<In.workerCount;)this.workers.push(new Worker(va.workerUrl));return this.active[n]=!0,this.workers.slice()}release(n){delete this.active[n],this.numActive()===0&&(this.workers.forEach(s=>{s.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[hi]}numActive(){return Object.keys(this.active).length}}const ia=Math.floor(l.exported.hardwareConcurrency/2);let Wi;function Co(){return Wi||(Wi=new In),Wi}function Io(d,n){const s={};for(const h in d)h!=="ref"&&(s[h]=d[h]);return l.refProperties.forEach(h=>{h in n&&(s[h]=n[h])}),s}function oa(d){d=d.slice();const n=Object.create(null);for(let s=0;s<d.length;s++)n[d[s].id]=d[s];for(let s=0;s<d.length;s++)"ref"in d[s]&&(d[s]=Io(d[s],n[d[s].ref]));return d}In.workerCount=Math.max(Math.min(ia,6),1);const Rt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function An(d,n,s){s.push({command:Rt.addSource,args:[d,n[d]]})}function di(d,n,s){n.push({command:Rt.removeSource,args:[d]}),s[d]=!0}function ti(d,n,s,h){di(d,s,h),An(d,n,s)}function zn(d,n,s){let h;for(h in d[s])if(Object.prototype.hasOwnProperty.call(d[s],h)&&h!=="data"&&!ne(d[s][h],n[s][h]))return!1;for(h in n[s])if(Object.prototype.hasOwnProperty.call(n[s],h)&&h!=="data"&&!ne(d[s][h],n[s][h]))return!1;return!0}function pi(d,n,s,h,f,y){let x;for(x in n=n||{},d=d||{})Object.prototype.hasOwnProperty.call(d,x)&&(ne(d[x],n[x])||s.push({command:y,args:[h,x,n[x],f]}));for(x in n)Object.prototype.hasOwnProperty.call(n,x)&&!Object.prototype.hasOwnProperty.call(d,x)&&(ne(d[x],n[x])||s.push({command:y,args:[h,x,n[x],f]}))}function fi(d){return d.id}function Ao(d,n){return d[n.id]=n,d}class ki{constructor(n,s){this.reset(n,s)}reset(n,s){this.points=n||[],this._distances=[0];for(let h=1;h<this.points.length;h++)this._distances[h]=this._distances[h-1]+this.points[h].dist(this.points[h-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(s||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(n){if(this.points.length===1)return this.points[0];n=l.clamp(n,0,1);let s=1,h=this._distances[s];const f=n*this.paddedLength+this.padding;for(;h<f&&s<this._distances.length;)h=this._distances[++s];const y=s-1,x=this._distances[y],S=h-x,E=S>0?(f-x)/S:0;return this.points[y].mult(1-E).add(this.points[s].mult(E))}}function ke(d,n){let s=!0;return d==="always"||d!=="never"&&n!=="never"||(s=!1),s}class Ve{constructor(n,s,h){const f=this.boxCells=[],y=this.circleCells=[];this.xCellCount=Math.ceil(n/h),this.yCellCount=Math.ceil(s/h);for(let x=0;x<this.xCellCount*this.yCellCount;x++)f.push([]),y.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=n,this.height=s,this.xScale=this.xCellCount/n,this.yScale=this.yCellCount/s,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(n,s,h,f,y){this._forEachCell(s,h,f,y,this._insertBoxCell,this.boxUid++),this.boxKeys.push(n),this.bboxes.push(s),this.bboxes.push(h),this.bboxes.push(f),this.bboxes.push(y)}insertCircle(n,s,h,f){this._forEachCell(s-f,h-f,s+f,h+f,this._insertCircleCell,this.circleUid++),this.circleKeys.push(n),this.circles.push(s),this.circles.push(h),this.circles.push(f)}_insertBoxCell(n,s,h,f,y,x){this.boxCells[y].push(x)}_insertCircleCell(n,s,h,f,y,x){this.circleCells[y].push(x)}_query(n,s,h,f,y,x,S){if(h<0||n>this.width||f<0||s>this.height)return[];const E=[];if(n<=0&&s<=0&&this.width<=h&&this.height<=f){if(y)return[{key:null,x1:n,y1:s,x2:h,y2:f}];for(let C=0;C<this.boxKeys.length;C++)E.push({key:this.boxKeys[C],x1:this.bboxes[4*C],y1:this.bboxes[4*C+1],x2:this.bboxes[4*C+2],y2:this.bboxes[4*C+3]});for(let C=0;C<this.circleKeys.length;C++){const z=this.circles[3*C],R=this.circles[3*C+1],B=this.circles[3*C+2];E.push({key:this.circleKeys[C],x1:z-B,y1:R-B,x2:z+B,y2:R+B})}}else this._forEachCell(n,s,h,f,this._queryCell,E,{hitTest:y,overlapMode:x,seenUids:{box:{},circle:{}}},S);return E}query(n,s,h,f){return this._query(n,s,h,f,!1,null)}hitTest(n,s,h,f,y,x){return this._query(n,s,h,f,!0,y,x).length>0}hitTestCircle(n,s,h,f,y){const x=n-h,S=n+h,E=s-h,C=s+h;if(S<0||x>this.width||C<0||E>this.height)return!1;const z=[];return this._forEachCell(x,E,S,C,this._queryCellCircle,z,{hitTest:!0,overlapMode:f,circle:{x:n,y:s,radius:h},seenUids:{box:{},circle:{}}},y),z.length>0}_queryCell(n,s,h,f,y,x,S,E){const{seenUids:C,hitTest:z,overlapMode:R}=S,B=this.boxCells[y];if(B!==null){const G=this.bboxes;for(const W of B)if(!C.box[W]){C.box[W]=!0;const ie=4*W,ue=this.boxKeys[W];if(n<=G[ie+2]&&s<=G[ie+3]&&h>=G[ie+0]&&f>=G[ie+1]&&(!E||E(ue))&&(!z||!ke(R,ue.overlapMode))&&(x.push({key:ue,x1:G[ie],y1:G[ie+1],x2:G[ie+2],y2:G[ie+3]}),z))return!0}}const Z=this.circleCells[y];if(Z!==null){const G=this.circles;for(const W of Z)if(!C.circle[W]){C.circle[W]=!0;const ie=3*W,ue=this.circleKeys[W];if(this._circleAndRectCollide(G[ie],G[ie+1],G[ie+2],n,s,h,f)&&(!E||E(ue))&&(!z||!ke(R,ue.overlapMode))){const pe=G[ie],X=G[ie+1],ye=G[ie+2];if(x.push({key:ue,x1:pe-ye,y1:X-ye,x2:pe+ye,y2:X+ye}),z)return!0}}}return!1}_queryCellCircle(n,s,h,f,y,x,S,E){const{circle:C,seenUids:z,overlapMode:R}=S,B=this.boxCells[y];if(B!==null){const G=this.bboxes;for(const W of B)if(!z.box[W]){z.box[W]=!0;const ie=4*W,ue=this.boxKeys[W];if(this._circleAndRectCollide(C.x,C.y,C.radius,G[ie+0],G[ie+1],G[ie+2],G[ie+3])&&(!E||E(ue))&&!ke(R,ue.overlapMode))return x.push(!0),!0}}const Z=this.circleCells[y];if(Z!==null){const G=this.circles;for(const W of Z)if(!z.circle[W]){z.circle[W]=!0;const ie=3*W,ue=this.circleKeys[W];if(this._circlesCollide(G[ie],G[ie+1],G[ie+2],C.x,C.y,C.radius)&&(!E||E(ue))&&!ke(R,ue.overlapMode))return x.push(!0),!0}}}_forEachCell(n,s,h,f,y,x,S,E){const C=this._convertToXCellCoord(n),z=this._convertToYCellCoord(s),R=this._convertToXCellCoord(h),B=this._convertToYCellCoord(f);for(let Z=C;Z<=R;Z++)for(let G=z;G<=B;G++)if(y.call(this,n,s,h,f,this.xCellCount*G+Z,x,S,E))return}_convertToXCellCoord(n){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(n*this.xScale)))}_convertToYCellCoord(n){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(n*this.yScale)))}_circlesCollide(n,s,h,f,y,x){const S=f-n,E=y-s,C=h+x;return C*C>S*S+E*E}_circleAndRectCollide(n,s,h,f,y,x,S){const E=(x-f)/2,C=Math.abs(n-(f+E));if(C>E+h)return!1;const z=(S-y)/2,R=Math.abs(s-(y+z));if(R>z+h)return!1;if(C<=E||R<=z)return!0;const B=C-E,Z=R-z;return B*B+Z*Z<=h*h}}function qi(d,n,s,h,f){const y=l.create();return n?(l.scale(y,y,[1/f,1/f,1]),s||l.rotateZ(y,y,h.angle)):l.multiply(y,h.labelPlaneMatrix,d),y}function Gn(d,n,s,h,f){if(n){const y=l.clone(d);return l.scale(y,y,[f,f,1]),s||l.rotateZ(y,y,-h.angle),y}return h.glCoordMatrix}function Pt(d,n,s){let h;s?(h=[d.x,d.y,s(d.x,d.y),1],l.transformMat4(h,h,n)):(h=[d.x,d.y,0,1],Ii(h,h,n));const f=h[3];return{point:new l.pointGeometry(h[0]/f,h[1]/f),signedDistanceFromCamera:f}}function Pn(d,n){return .5+d/n*.5}function Mn(d,n){const s=d[0]/d[3],h=d[1]/d[3];return s>=-n[0]&&s<=n[0]&&h>=-n[1]&&h<=n[1]}function Dn(d,n,s,h,f,y,x,S,E,C){const z=h?d.textSizeData:d.iconSizeData,R=l.evaluateSizeForZoom(z,s.transform.zoom),B=[256/s.width*2+1,256/s.height*2+1],Z=h?d.text.dynamicLayoutVertexArray:d.icon.dynamicLayoutVertexArray;Z.clear();const G=d.lineVertexArray,W=h?d.text.placedSymbolArray:d.icon.placedSymbolArray,ie=s.transform.width/s.transform.height;let ue=!1;for(let pe=0;pe<W.length;pe++){const X=W.get(pe);if(X.hidden||X.writingMode===l.WritingMode.vertical&&!ue){_t(X.numGlyphs,Z);continue}let ye;if(ue=!1,C?(ye=[X.anchorX,X.anchorY,C(X.anchorX,X.anchorY),1],l.transformMat4(ye,ye,n)):(ye=[X.anchorX,X.anchorY,0,1],Ii(ye,ye,n)),!Mn(ye,B)){_t(X.numGlyphs,Z);continue}const me=Pn(s.transform.cameraToCenterDistance,ye[3]),Ce=l.evaluateSizeForFeature(z,R,X),Ie=x?Ce/me:Ce*me,Be=new l.pointGeometry(X.anchorX,X.anchorY),Ee=Pt(Be,f,C).point,Qe={},je=Et(X,Ie,!1,S,n,f,y,d.glyphOffsetArray,G,Z,Ee,Be,Qe,ie,E,C);ue=je.useVertical,(je.notEnoughRoom||ue||je.needsFlipping&&Et(X,Ie,!0,S,n,f,y,d.glyphOffsetArray,G,Z,Ee,Be,Qe,ie,E,C).notEnoughRoom)&&_t(X.numGlyphs,Z)}h?d.text.dynamicLayoutVertexBuffer.updateData(Z):d.icon.dynamicLayoutVertexBuffer.updateData(Z)}function gn(d,n,s,h,f,y,x,S,E,C,z,R,B){const Z=S.glyphStartIndex+S.numGlyphs,G=S.lineStartIndex,W=S.lineStartIndex+S.lineLength,ie=n.getoffsetX(S.glyphStartIndex),ue=n.getoffsetX(Z-1),pe=Xr(d*ie,s,h,f,y,x,S.segment,G,W,E,C,z,R,B);if(!pe)return null;const X=Xr(d*ue,s,h,f,y,x,S.segment,G,W,E,C,z,R,B);return X?{first:pe,last:X}:null}function $e(d,n,s,h){return d===l.WritingMode.horizontal&&Math.abs(s.y-n.y)>Math.abs(s.x-n.x)*h?{useVertical:!0}:(d===l.WritingMode.vertical?n.y<s.y:n.x>s.x)?{needsFlipping:!0}:null}function Et(d,n,s,h,f,y,x,S,E,C,z,R,B,Z,G,W){const ie=n/24,ue=d.lineOffsetX*ie,pe=d.lineOffsetY*ie;let X;if(d.numGlyphs>1){const ye=d.glyphStartIndex+d.numGlyphs,me=d.lineStartIndex,Ce=d.lineStartIndex+d.lineLength,Ie=gn(ie,S,ue,pe,s,z,R,d,E,y,B,G,W);if(!Ie)return{notEnoughRoom:!0};const Be=Pt(Ie.first.point,x,W).point,Ee=Pt(Ie.last.point,x,W).point;if(h&&!s){const Qe=$e(d.writingMode,Be,Ee,Z);if(Qe)return Qe}X=[Ie.first];for(let Qe=d.glyphStartIndex+1;Qe<ye-1;Qe++)X.push(Xr(ie*S.getoffsetX(Qe),ue,pe,s,z,R,d.segment,me,Ce,E,y,B,G,W));X.push(Ie.last)}else{if(h&&!s){const me=Pt(R,f,W).point,Ce=d.lineStartIndex+d.segment+1,Ie=new l.pointGeometry(E.getx(Ce),E.gety(Ce)),Be=Pt(Ie,f,W),Ee=Be.signedDistanceFromCamera>0?Be.point:bt(R,Ie,me,1,f,W),Qe=$e(d.writingMode,me,Ee,Z);if(Qe)return Qe}const ye=Xr(ie*S.getoffsetX(d.glyphStartIndex),ue,pe,s,z,R,d.segment,d.lineStartIndex,d.lineStartIndex+d.lineLength,E,y,B,G,W);if(!ye)return{notEnoughRoom:!0};X=[ye]}for(const ye of X)l.addDynamicAttributes(C,ye.point,ye.angle);return{}}function bt(d,n,s,h,f,y){const x=Pt(d.add(d.sub(n)._unit()),f,y).point,S=s.sub(x);return s.add(S._mult(h/S.mag()))}function Xr(d,n,s,h,f,y,x,S,E,C,z,R,B,Z){const G=h?d-n:d+n;let W=G>0?1:-1,ie=0;h&&(W*=-1,ie=Math.PI),W<0&&(ie+=Math.PI);let ue=W>0?S+x:S+x+1,pe=f,X=f,ye=0,me=0;const Ce=Math.abs(G),Ie=[];for(;ye+me<=Ce;){if(ue+=W,ue<S||ue>=E)return null;if(X=pe,Ie.push(pe),pe=R[ue],pe===void 0){const et=new l.pointGeometry(C.getx(ue),C.gety(ue)),St=Pt(et,z,Z);if(St.signedDistanceFromCamera>0)pe=R[ue]=St.point;else{const Ct=ue-W;pe=bt(ye===0?y:new l.pointGeometry(C.getx(Ct),C.gety(Ct)),et,X,Ce-ye+1,z,Z)}}ye+=me,me=X.dist(pe)}const Be=(Ce-ye)/me,Ee=pe.sub(X),Qe=Ee.mult(Be)._add(X);Qe._add(Ee._unit()._perp()._mult(s*W));const je=ie+Math.atan2(pe.y-X.y,pe.x-X.x);return Ie.push(Qe),{point:Qe,angle:B?je:0,path:Ie}}const Ci=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function _t(d,n){for(let s=0;s<d;s++){const h=n.length;n.resize(h+4),n.float32.set(Ci,3*h)}}function Ii(d,n,s){const h=n[0],f=n[1];return d[0]=s[0]*h+s[4]*f+s[12],d[1]=s[1]*h+s[5]*f+s[13],d[3]=s[3]*h+s[7]*f+s[15],d}const pr=100;class zo{constructor(n,s=new Ve(n.width+200,n.height+200,25),h=new Ve(n.width+200,n.height+200,25)){this.transform=n,this.grid=s,this.ignoredGrid=h,this.pitchfactor=Math.cos(n._pitch)*n.cameraToCenterDistance,this.screenRightBoundary=n.width+pr,this.screenBottomBoundary=n.height+pr,this.gridRightBoundary=n.width+200,this.gridBottomBoundary=n.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(n,s,h,f,y,x){const S=this.projectAndGetPerspectiveRatio(f,n.anchorPointX,n.anchorPointY,x),E=h*S.perspectiveRatio,C=n.x1*E+S.point.x,z=n.y1*E+S.point.y,R=n.x2*E+S.point.x,B=n.y2*E+S.point.y;return!this.isInsideGrid(C,z,R,B)||s!=="always"&&this.grid.hitTest(C,z,R,B,s,y)||S.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[C,z,R,B],offscreen:this.isOffscreen(C,z,R,B)}}placeCollisionCircles(n,s,h,f,y,x,S,E,C,z,R,B,Z,G){const W=[],ie=new l.pointGeometry(s.anchorX,s.anchorY),ue=Pt(ie,x,G),pe=Pn(this.transform.cameraToCenterDistance,ue.signedDistanceFromCamera),X=(z?y/pe:y*pe)/l.ONE_EM,ye=Pt(ie,S,G).point,me=gn(X,f,s.lineOffsetX*X,s.lineOffsetY*X,!1,ye,ie,s,h,S,{},!1,G);let Ce=!1,Ie=!1,Be=!0;if(me){const Ee=.5*B*pe+Z,Qe=new l.pointGeometry(-100,-100),je=new l.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),et=new ki,St=me.first,Ct=me.last;let ft=[];for(let Ot=St.path.length-1;Ot>=1;Ot--)ft.push(St.path[Ot]);for(let Ot=1;Ot<Ct.path.length;Ot++)ft.push(Ct.path[Ot]);const Yt=2.5*Ee;if(E){const Ot=ft.map(Ut=>Pt(Ut,E,G));ft=Ot.some(Ut=>Ut.signedDistanceFromCamera<=0)?[]:Ot.map(Ut=>Ut.point)}let Jt=[];if(ft.length>0){const Ot=ft[0].clone(),Ut=ft[0].clone();for(let tr=1;tr<ft.length;tr++)Ot.x=Math.min(Ot.x,ft[tr].x),Ot.y=Math.min(Ot.y,ft[tr].y),Ut.x=Math.max(Ut.x,ft[tr].x),Ut.y=Math.max(Ut.y,ft[tr].y);Jt=Ot.x>=Qe.x&&Ut.x<=je.x&&Ot.y>=Qe.y&&Ut.y<=je.y?[ft]:Ut.x<Qe.x||Ot.x>je.x||Ut.y<Qe.y||Ot.y>je.y?[]:l.clipLine([ft],Qe.x,Qe.y,je.x,je.y)}for(const Ot of Jt){et.reset(Ot,.25*Ee);let Ut=0;Ut=et.length<=.5*Ee?1:Math.ceil(et.paddedLength/Yt)+1;for(let tr=0;tr<Ut;tr++){const nn=tr/Math.max(Ut-1,1),Xi=et.lerp(nn),Pi=Xi.x+pr,Ki=Xi.y+pr;W.push(Pi,Ki,Ee,0);const Go=Pi-Ee,yi=Ki-Ee,qn=Pi+Ee,mo=Ki+Ee;if(Be=Be&&this.isOffscreen(Go,yi,qn,mo),Ie=Ie||this.isInsideGrid(Go,yi,qn,mo),n!=="always"&&this.grid.hitTestCircle(Pi,Ki,Ee,n,R)&&(Ce=!0,!C))return{circles:[],offscreen:!1,collisionDetected:Ce}}}}return{circles:!C&&Ce||!Ie||pe<this.perspectiveRatioCutoff?[]:W,offscreen:Be,collisionDetected:Ce}}queryRenderedSymbols(n){if(n.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const s=[];let h=1/0,f=1/0,y=-1/0,x=-1/0;for(const z of n){const R=new l.pointGeometry(z.x+pr,z.y+pr);h=Math.min(h,R.x),f=Math.min(f,R.y),y=Math.max(y,R.x),x=Math.max(x,R.y),s.push(R)}const S=this.grid.query(h,f,y,x).concat(this.ignoredGrid.query(h,f,y,x)),E={},C={};for(const z of S){const R=z.key;if(E[R.bucketInstanceId]===void 0&&(E[R.bucketInstanceId]={}),E[R.bucketInstanceId][R.featureIndex])continue;const B=[new l.pointGeometry(z.x1,z.y1),new l.pointGeometry(z.x2,z.y1),new l.pointGeometry(z.x2,z.y2),new l.pointGeometry(z.x1,z.y2)];l.polygonIntersectsPolygon(s,B)&&(E[R.bucketInstanceId][R.featureIndex]=!0,C[R.bucketInstanceId]===void 0&&(C[R.bucketInstanceId]=[]),C[R.bucketInstanceId].push(R.featureIndex))}return C}insertCollisionBox(n,s,h,f,y,x){(h?this.ignoredGrid:this.grid).insert({bucketInstanceId:f,featureIndex:y,collisionGroupID:x,overlapMode:s},n[0],n[1],n[2],n[3])}insertCollisionCircles(n,s,h,f,y,x){const S=h?this.ignoredGrid:this.grid,E={bucketInstanceId:f,featureIndex:y,collisionGroupID:x,overlapMode:s};for(let C=0;C<n.length;C+=4)S.insertCircle(E,n[C],n[C+1],n[C+2])}projectAndGetPerspectiveRatio(n,s,h,f){let y;return f?(y=[s,h,f(s,h),1],l.transformMat4(y,y,n)):(y=[s,h,0,1],Ii(y,y,n)),{point:new l.pointGeometry((y[0]/y[3]+1)/2*this.transform.width+pr,(-y[1]/y[3]+1)/2*this.transform.height+pr),perspectiveRatio:.5+this.transform.cameraToCenterDistance/y[3]*.5}}isOffscreen(n,s,h,f){return h<pr||n>=this.screenRightBoundary||f<pr||s>this.screenBottomBoundary}isInsideGrid(n,s,h,f){return h>=0&&n<this.gridRightBoundary&&f>=0&&s<this.gridBottomBoundary}getViewportMatrix(){const n=l.identity([]);return l.translate(n,n,[-100,-100,0]),n}}function Mr(d,n,s){return n*(l.EXTENT/(d.tileSize*Math.pow(2,s-d.tileID.overscaledZ)))}class hn{constructor(n,s,h,f){this.opacity=n?Math.max(0,Math.min(1,n.opacity+(n.placed?s:-s))):f&&h?1:0,this.placed=h}isHidden(){return this.opacity===0&&!this.placed}}class Wt{constructor(n,s,h,f,y){this.text=new hn(n?n.text:null,s,h,y),this.icon=new hn(n?n.icon:null,s,f,y)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Po{constructor(n,s,h){this.text=n,this.icon=s,this.skipFade=h}}class Ur{constructor(){this.invProjMatrix=l.create(),this.viewportMatrix=l.create(),this.circles=[]}}class ao{constructor(n,s,h,f,y){this.bucketInstanceId=n,this.featureIndex=s,this.sourceLayerIndex=h,this.bucketIndex=f,this.tileID=y}}class so{constructor(n){this.crossSourceCollisions=n,this.maxGroupID=0,this.collisionGroups={}}get(n){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[n]){const s=++this.maxGroupID;this.collisionGroups[n]={ID:s,predicate:h=>h.collisionGroupID===s}}return this.collisionGroups[n]}}function Mo(d,n,s,h,f){const{horizontalAlign:y,verticalAlign:x}=l.getAnchorAlignment(d),S=-(y-.5)*n,E=-(x-.5)*s,C=l.evaluateVariableOffset(d,h);return new l.pointGeometry(S+C[0]*f,E+C[1]*f)}function lo(d,n,s,h,f,y){const{x1:x,x2:S,y1:E,y2:C,anchorPointX:z,anchorPointY:R}=d,B=new l.pointGeometry(n,s);return h&&B._rotate(f?y:-y),{x1:x+B.x,y1:E+B.y,x2:S+B.x,y2:C+B.y,anchorPointX:z,anchorPointY:R}}class V{constructor(n,s,h,f,y){this.transform=n.clone(),this.terrain=s,this.collisionIndex=new zo(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=h,this.retainedQueryData={},this.collisionGroups=new so(f),this.collisionCircleArrays={},this.prevPlacement=y,y&&(y.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(n,s,h,f){const y=h.getBucket(s),x=h.latestFeatureIndex;if(!y||!x||s.id!==y.layerIds[0])return;const S=h.collisionBoxArray,E=y.layers[0].layout,C=Math.pow(2,this.transform.zoom-h.tileID.overscaledZ),z=h.tileSize/l.EXTENT,R=this.transform.calculatePosMatrix(h.tileID.toUnwrapped()),B=E.get("text-pitch-alignment")==="map",Z=E.get("text-rotation-alignment")==="map",G=Mr(h,1,this.transform.zoom),W=qi(R,B,Z,this.transform,G);let ie=null;if(B){const pe=Gn(R,B,Z,this.transform,G);ie=l.multiply([],this.transform.labelPlaneMatrix,pe)}this.retainedQueryData[y.bucketInstanceId]=new ao(y.bucketInstanceId,x,y.sourceLayerIndex,y.index,h.tileID);const ue={bucket:y,layout:E,posMatrix:R,textLabelPlaneMatrix:W,labelToScreenMatrix:ie,scale:C,textPixelRatio:z,holdingForFade:h.holdingForFade(),collisionBoxArray:S,partiallyEvaluatedTextSize:l.evaluateSizeForZoom(y.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(y.sourceID)};if(f)for(const pe of y.sortKeyRanges){const{sortKey:X,symbolInstanceStart:ye,symbolInstanceEnd:me}=pe;n.push({sortKey:X,symbolInstanceStart:ye,symbolInstanceEnd:me,parameters:ue})}else n.push({symbolInstanceStart:0,symbolInstanceEnd:y.symbolInstances.length,parameters:ue})}attemptAnchorPlacement(n,s,h,f,y,x,S,E,C,z,R,B,Z,G,W,ie){const ue=[B.textOffset0,B.textOffset1],pe=Mo(n,h,f,ue,y),X=this.collisionIndex.placeCollisionBox(lo(s,pe.x,pe.y,x,S,this.transform.angle),R,E,C,z.predicate,ie);if((!W||this.collisionIndex.placeCollisionBox(lo(W,pe.x,pe.y,x,S,this.transform.angle),R,E,C,z.predicate,ie).box.length!==0)&&X.box.length>0){let ye;if(this.prevPlacement&&this.prevPlacement.variableOffsets[B.crossTileID]&&this.prevPlacement.placements[B.crossTileID]&&this.prevPlacement.placements[B.crossTileID].text&&(ye=this.prevPlacement.variableOffsets[B.crossTileID].anchor),B.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[B.crossTileID]={textOffset:ue,width:h,height:f,anchor:n,textBoxScale:y,prevAnchor:ye},this.markUsedJustification(Z,n,B,G),Z.allowVerticalPlacement&&(this.markUsedOrientation(Z,G,B),this.placedOrientations[B.crossTileID]=G),{shift:pe,placedGlyphBoxes:X}}}placeLayerBucketPart(n,s,h){const{bucket:f,layout:y,posMatrix:x,textLabelPlaneMatrix:S,labelToScreenMatrix:E,textPixelRatio:C,holdingForFade:z,collisionBoxArray:R,partiallyEvaluatedTextSize:B,collisionGroup:Z}=n.parameters,G=y.get("text-optional"),W=y.get("icon-optional"),ie=l.getOverlapMode(y,"text-overlap","text-allow-overlap"),ue=ie==="always",pe=l.getOverlapMode(y,"icon-overlap","icon-allow-overlap"),X=pe==="always",ye=y.get("text-rotation-alignment")==="map",me=y.get("text-pitch-alignment")==="map",Ce=y.get("icon-text-fit")!=="none",Ie=y.get("symbol-z-order")==="viewport-y",Be=ue&&(X||!f.hasIconData()||W),Ee=X&&(ue||!f.hasTextData()||G);!f.collisionArrays&&R&&f.deserializeCollisionBoxes(R);const Qe=(je,et)=>{if(s[je.crossTileID])return;if(z)return void(this.placements[je.crossTileID]=new Po(!1,!1,!1));let St=!1,Ct=!1,ft=!0,Yt=null,Jt={box:null,offscreen:null},Ot={box:null,offscreen:null},Ut=null,tr=null,nn=null,Xi=0,Pi=0,Ki=0;et.textFeatureIndex?Xi=et.textFeatureIndex:je.useRuntimeCollisionCircles&&(Xi=je.featureIndex),et.verticalTextFeatureIndex&&(Pi=et.verticalTextFeatureIndex);const Go=this.retainedQueryData[f.bucketInstanceId].tileID,yi=this.terrain?(Kr,At)=>this.terrain.getElevation(Go,Kr,At):null;for(const Kr of["textBox","verticalTextBox","iconBox","verticalIconBox"]){const At=et[Kr];At&&(At.elevation=yi?yi(At.anchorPointX,At.anchorPointY):0)}const qn=et.textBox;if(qn){const Kr=Zt=>{let on=l.WritingMode.horizontal;if(f.allowVerticalPlacement&&!Zt&&this.prevPlacement){const an=this.prevPlacement.placedOrientations[je.crossTileID];an&&(this.placedOrientations[je.crossTileID]=an,on=an,this.markUsedOrientation(f,on,je))}return on},At=(Zt,on)=>{if(f.allowVerticalPlacement&&je.numVerticalGlyphVertices>0&&et.verticalTextBox){for(const an of f.writingModes)if(an===l.WritingMode.vertical?(Jt=on(),Ot=Jt):Jt=Zt(),Jt&&Jt.box&&Jt.box.length)break}else Jt=Zt()};if(y.get("text-variable-anchor")){let Zt=y.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[je.crossTileID]){const vr=this.prevPlacement.variableOffsets[je.crossTileID];Zt.indexOf(vr.anchor)>0&&(Zt=Zt.filter(_i=>_i!==vr.anchor),Zt.unshift(vr.anchor))}const on=(vr,_i,xa)=>{const fc=vr.x2-vr.x1,ts=vr.y2-vr.y1,vd=je.textBoxScale,mc=Ce&&pe==="never"?_i:null;let Wo={box:[],offscreen:!1};const ba=ie!=="never"?2*Zt.length:Zt.length;for(let wa=0;wa<ba;++wa){const Jl=this.attemptAnchorPlacement(Zt[wa%Zt.length],vr,fc,ts,vd,ye,me,C,x,Z,wa>=Zt.length?ie:"never",je,f,xa,mc,yi);if(Jl&&(Wo=Jl.placedGlyphBoxes,Wo&&Wo.box&&Wo.box.length)){St=!0,Yt=Jl.shift;break}}return Wo};At(()=>on(qn,et.iconBox,l.WritingMode.horizontal),()=>{const vr=et.verticalTextBox;return f.allowVerticalPlacement&&!(Jt&&Jt.box&&Jt.box.length)&&je.numVerticalGlyphVertices>0&&vr?on(vr,et.verticalIconBox,l.WritingMode.vertical):{box:null,offscreen:null}}),Jt&&(St=Jt.box,ft=Jt.offscreen);const an=Kr(Jt&&Jt.box);if(!St&&this.prevPlacement){const vr=this.prevPlacement.variableOffsets[je.crossTileID];vr&&(this.variableOffsets[je.crossTileID]=vr,this.markUsedJustification(f,vr.anchor,je,an))}}else{const Zt=(on,an)=>{const vr=this.collisionIndex.placeCollisionBox(on,ie,C,x,Z.predicate,yi);return vr&&vr.box&&vr.box.length&&(this.markUsedOrientation(f,an,je),this.placedOrientations[je.crossTileID]=an),vr};At(()=>Zt(qn,l.WritingMode.horizontal),()=>{const on=et.verticalTextBox;return f.allowVerticalPlacement&&je.numVerticalGlyphVertices>0&&on?Zt(on,l.WritingMode.vertical):{box:null,offscreen:null}}),Kr(Jt&&Jt.box&&Jt.box.length)}}if(Ut=Jt,St=Ut&&Ut.box&&Ut.box.length>0,ft=Ut&&Ut.offscreen,je.useRuntimeCollisionCircles){const Kr=f.text.placedSymbolArray.get(je.centerJustifiedTextSymbolIndex),At=l.evaluateSizeForFeature(f.textSizeData,B,Kr),Zt=y.get("text-padding");tr=this.collisionIndex.placeCollisionCircles(ie,Kr,f.lineVertexArray,f.glyphOffsetArray,At,x,S,E,h,me,Z.predicate,je.collisionCircleDiameter,Zt,yi),tr.circles.length&&tr.collisionDetected&&!h&&l.warnOnce("Collisions detected, but collision boxes are not shown"),St=ue||tr.circles.length>0&&!tr.collisionDetected,ft=ft&&tr.offscreen}if(et.iconFeatureIndex&&(Ki=et.iconFeatureIndex),et.iconBox){const Kr=At=>{const Zt=Ce&&Yt?lo(At,Yt.x,Yt.y,ye,me,this.transform.angle):At;return this.collisionIndex.placeCollisionBox(Zt,pe,C,x,Z.predicate,yi)};Ot&&Ot.box&&Ot.box.length&&et.verticalIconBox?(nn=Kr(et.verticalIconBox),Ct=nn.box.length>0):(nn=Kr(et.iconBox),Ct=nn.box.length>0),ft=ft&&nn.offscreen}const mo=G||je.numHorizontalGlyphVertices===0&&je.numVerticalGlyphVertices===0,Yl=W||je.numIconVertices===0;if(mo||Yl?Yl?mo||(Ct=Ct&&St):St=Ct&&St:Ct=St=Ct&&St,St&&Ut&&Ut.box&&this.collisionIndex.insertCollisionBox(Ut.box,ie,y.get("text-ignore-placement"),f.bucketInstanceId,Ot&&Ot.box&&Pi?Pi:Xi,Z.ID),Ct&&nn&&this.collisionIndex.insertCollisionBox(nn.box,pe,y.get("icon-ignore-placement"),f.bucketInstanceId,Ki,Z.ID),tr&&(St&&this.collisionIndex.insertCollisionCircles(tr.circles,ie,y.get("text-ignore-placement"),f.bucketInstanceId,Xi,Z.ID),h)){const Kr=f.bucketInstanceId;let At=this.collisionCircleArrays[Kr];At===void 0&&(At=this.collisionCircleArrays[Kr]=new Ur);for(let Zt=0;Zt<tr.circles.length;Zt+=4)At.circles.push(tr.circles[Zt+0]),At.circles.push(tr.circles[Zt+1]),At.circles.push(tr.circles[Zt+2]),At.circles.push(tr.collisionDetected?1:0)}if(je.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(f.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[je.crossTileID]=new Po(St||Be,Ct||Ee,ft||f.justReloaded),s[je.crossTileID]=!0};if(Ie){if(n.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const je=f.getSortedSymbolIndexes(this.transform.angle);for(let et=je.length-1;et>=0;--et){const St=je[et];Qe(f.symbolInstances.get(St),f.collisionArrays[St])}}else for(let je=n.symbolInstanceStart;je<n.symbolInstanceEnd;je++)Qe(f.symbolInstances.get(je),f.collisionArrays[je]);if(h&&f.bucketInstanceId in this.collisionCircleArrays){const je=this.collisionCircleArrays[f.bucketInstanceId];l.invert(je.invProjMatrix,x),je.viewportMatrix=this.collisionIndex.getViewportMatrix()}f.justReloaded=!1}markUsedJustification(n,s,h,f){let y;y=f===l.WritingMode.vertical?h.verticalPlacedTextSymbolIndex:{left:h.leftJustifiedTextSymbolIndex,center:h.centerJustifiedTextSymbolIndex,right:h.rightJustifiedTextSymbolIndex}[l.getAnchorJustification(s)];const x=[h.leftJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.rightJustifiedTextSymbolIndex,h.verticalPlacedTextSymbolIndex];for(const S of x)S>=0&&(n.text.placedSymbolArray.get(S).crossTileID=y>=0&&S!==y?0:h.crossTileID)}markUsedOrientation(n,s,h){const f=s===l.WritingMode.horizontal||s===l.WritingMode.horizontalOnly?s:0,y=s===l.WritingMode.vertical?s:0,x=[h.leftJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.rightJustifiedTextSymbolIndex];for(const S of x)n.text.placedSymbolArray.get(S).placedOrientation=f;h.verticalPlacedTextSymbolIndex&&(n.text.placedSymbolArray.get(h.verticalPlacedTextSymbolIndex).placedOrientation=y)}commit(n){this.commitTime=n,this.zoomAtLastRecencyCheck=this.transform.zoom;const s=this.prevPlacement;let h=!1;this.prevZoomAdjustment=s?s.zoomAdjustment(this.transform.zoom):0;const f=s?s.symbolFadeChange(n):1,y=s?s.opacities:{},x=s?s.variableOffsets:{},S=s?s.placedOrientations:{};for(const E in this.placements){const C=this.placements[E],z=y[E];z?(this.opacities[E]=new Wt(z,f,C.text,C.icon),h=h||C.text!==z.text.placed||C.icon!==z.icon.placed):(this.opacities[E]=new Wt(null,f,C.text,C.icon,C.skipFade),h=h||C.text||C.icon)}for(const E in y){const C=y[E];if(!this.opacities[E]){const z=new Wt(C,f,!1,!1);z.isHidden()||(this.opacities[E]=z,h=h||C.text.placed||C.icon.placed)}}for(const E in x)this.variableOffsets[E]||!this.opacities[E]||this.opacities[E].isHidden()||(this.variableOffsets[E]=x[E]);for(const E in S)this.placedOrientations[E]||!this.opacities[E]||this.opacities[E].isHidden()||(this.placedOrientations[E]=S[E]);if(s&&s.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");h?this.lastPlacementChangeTime=n:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=s?s.lastPlacementChangeTime:n)}updateLayerOpacities(n,s){const h={};for(const f of s){const y=f.getBucket(n);y&&f.latestFeatureIndex&&n.id===y.layerIds[0]&&this.updateBucketOpacities(y,h,f.collisionBoxArray)}}updateBucketOpacities(n,s,h){n.hasTextData()&&n.text.opacityVertexArray.clear(),n.hasIconData()&&n.icon.opacityVertexArray.clear(),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexArray.clear(),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexArray.clear();const f=n.layers[0].layout,y=new Wt(null,0,!1,!1,!0),x=f.get("text-allow-overlap"),S=f.get("icon-allow-overlap"),E=f.get("text-variable-anchor"),C=f.get("text-rotation-alignment")==="map",z=f.get("text-pitch-alignment")==="map",R=f.get("icon-text-fit")!=="none",B=new Wt(null,0,x&&(S||!n.hasIconData()||f.get("icon-optional")),S&&(x||!n.hasTextData()||f.get("text-optional")),!0);!n.collisionArrays&&h&&(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData())&&n.deserializeCollisionBoxes(h);const Z=(G,W,ie)=>{for(let ue=0;ue<W/4;ue++)G.opacityVertexArray.emplaceBack(ie)};for(let G=0;G<n.symbolInstances.length;G++){const W=n.symbolInstances.get(G),{numHorizontalGlyphVertices:ie,numVerticalGlyphVertices:ue,crossTileID:pe}=W;let X=this.opacities[pe];s[pe]?X=y:X||(X=B,this.opacities[pe]=X),s[pe]=!0;const ye=W.numIconVertices>0,me=this.placedOrientations[W.crossTileID],Ce=me===l.WritingMode.vertical,Ie=me===l.WritingMode.horizontal||me===l.WritingMode.horizontalOnly;if(ie>0||ue>0){const Be=se(X.text);Z(n.text,ie,Ce?Te:Be),Z(n.text,ue,Ie?Te:Be);const Ee=X.text.isHidden();[W.rightJustifiedTextSymbolIndex,W.centerJustifiedTextSymbolIndex,W.leftJustifiedTextSymbolIndex].forEach(et=>{et>=0&&(n.text.placedSymbolArray.get(et).hidden=Ee||Ce?1:0)}),W.verticalPlacedTextSymbolIndex>=0&&(n.text.placedSymbolArray.get(W.verticalPlacedTextSymbolIndex).hidden=Ee||Ie?1:0);const Qe=this.variableOffsets[W.crossTileID];Qe&&this.markUsedJustification(n,Qe.anchor,W,me);const je=this.placedOrientations[W.crossTileID];je&&(this.markUsedJustification(n,"left",W,je),this.markUsedOrientation(n,je,W))}if(ye){const Be=se(X.icon),Ee=!(R&&W.verticalPlacedIconSymbolIndex&&Ce);W.placedIconSymbolIndex>=0&&(Z(n.icon,W.numIconVertices,Ee?Be:Te),n.icon.placedSymbolArray.get(W.placedIconSymbolIndex).hidden=X.icon.isHidden()),W.verticalPlacedIconSymbolIndex>=0&&(Z(n.icon,W.numVerticalIconVertices,Ee?Te:Be),n.icon.placedSymbolArray.get(W.verticalPlacedIconSymbolIndex).hidden=X.icon.isHidden())}if(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData()){const Be=n.collisionArrays[G];if(Be){let Ee=new l.pointGeometry(0,0);if(Be.textBox||Be.verticalTextBox){let je=!0;if(E){const et=this.variableOffsets[pe];et?(Ee=Mo(et.anchor,et.width,et.height,et.textOffset,et.textBoxScale),C&&Ee._rotate(z?this.transform.angle:-this.transform.angle)):je=!1}Be.textBox&&I(n.textCollisionBox.collisionVertexArray,X.text.placed,!je||Ce,Ee.x,Ee.y),Be.verticalTextBox&&I(n.textCollisionBox.collisionVertexArray,X.text.placed,!je||Ie,Ee.x,Ee.y)}const Qe=Boolean(!Ie&&Be.verticalIconBox);Be.iconBox&&I(n.iconCollisionBox.collisionVertexArray,X.icon.placed,Qe,R?Ee.x:0,R?Ee.y:0),Be.verticalIconBox&&I(n.iconCollisionBox.collisionVertexArray,X.icon.placed,!Qe,R?Ee.x:0,R?Ee.y:0)}}}if(n.sortFeatures(this.transform.angle),this.retainedQueryData[n.bucketInstanceId]&&(this.retainedQueryData[n.bucketInstanceId].featureSortOrder=n.featureSortOrder),n.hasTextData()&&n.text.opacityVertexBuffer&&n.text.opacityVertexBuffer.updateData(n.text.opacityVertexArray),n.hasIconData()&&n.icon.opacityVertexBuffer&&n.icon.opacityVertexBuffer.updateData(n.icon.opacityVertexArray),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexBuffer&&n.iconCollisionBox.collisionVertexBuffer.updateData(n.iconCollisionBox.collisionVertexArray),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexBuffer&&n.textCollisionBox.collisionVertexBuffer.updateData(n.textCollisionBox.collisionVertexArray),n.text.opacityVertexArray.length!==n.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${n.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${n.text.layoutVertexArray.length}) / 4`);if(n.icon.opacityVertexArray.length!==n.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${n.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${n.icon.layoutVertexArray.length}) / 4`);if(n.bucketInstanceId in this.collisionCircleArrays){const G=this.collisionCircleArrays[n.bucketInstanceId];n.placementInvProjMatrix=G.invProjMatrix,n.placementViewportMatrix=G.viewportMatrix,n.collisionCircleArray=G.circles,delete this.collisionCircleArrays[n.bucketInstanceId]}}symbolFadeChange(n){return this.fadeDuration===0?1:(n-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(n){return Math.max(0,(this.transform.zoom-n)/1.5)}hasTransitions(n){return this.stale||n-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(n,s){const h=this.zoomAtLastRecencyCheck===s?1-this.zoomAdjustment(s):1;return this.zoomAtLastRecencyCheck=s,this.commitTime+this.fadeDuration*h>n}setStale(){this.stale=!0}}function I(d,n,s,h,f){d.emplaceBack(n?1:0,s?1:0,h||0,f||0),d.emplaceBack(n?1:0,s?1:0,h||0,f||0),d.emplaceBack(n?1:0,s?1:0,h||0,f||0),d.emplaceBack(n?1:0,s?1:0,h||0,f||0)}const M=Math.pow(2,25),N=Math.pow(2,24),$=Math.pow(2,17),J=Math.pow(2,16),ae=Math.pow(2,9),te=Math.pow(2,8),Q=Math.pow(2,1);function se(d){if(d.opacity===0&&!d.placed)return 0;if(d.opacity===1&&d.placed)return 4294967295;const n=d.placed?1:0,s=Math.floor(127*d.opacity);return s*M+n*N+s*$+n*J+s*ae+n*te+s*Q+n}const Te=0;class Me{constructor(n){this._sortAcrossTiles=n.layout.get("symbol-z-order")!=="viewport-y"&&!n.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(n,s,h,f,y){const x=this._bucketParts;for(;this._currentTileIndex<n.length;)if(s.getBucketParts(x,f,n[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,y())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,x.sort((S,E)=>S.sortKey-E.sortKey));this._currentPartIndex<x.length;)if(s.placeLayerBucketPart(x[this._currentPartIndex],this._seenCrossTileIDs,h),this._currentPartIndex++,y())return!0;return!1}}class we{constructor(n,s,h,f,y,x,S,E){this.placement=new V(n,s,x,S,E),this._currentPlacementIndex=h.length-1,this._forceFullPlacement=f,this._showCollisionBoxes=y,this._done=!1}isDone(){return this._done}continuePlacement(n,s,h){const f=l.exported.now(),y=()=>{const x=l.exported.now()-f;return!this._forceFullPlacement&&x>2};for(;this._currentPlacementIndex>=0;){const x=s[n[this._currentPlacementIndex]],S=this.placement.collisionIndex.transform.zoom;if(x.type==="symbol"&&(!x.minzoom||x.minzoom<=S)&&(!x.maxzoom||x.maxzoom>S)){if(this._inProgressLayer||(this._inProgressLayer=new Me(x)),this._inProgressLayer.continuePlacement(h[x.source],this.placement,this._showCollisionBoxes,x,y))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(n){return this.placement.commit(n),this.placement}}const it=512/l.EXTENT/2;class ot{constructor(n,s,h){this.tileID=n,this.indexedSymbolInstances={},this.bucketInstanceId=h;for(let f=0;f<s.length;f++){const y=s.get(f),x=y.key;this.indexedSymbolInstances[x]||(this.indexedSymbolInstances[x]=[]),this.indexedSymbolInstances[x].push({crossTileID:y.crossTileID,coord:this.getScaledCoordinates(y,n)})}}getScaledCoordinates(n,s){const h=it/Math.pow(2,s.canonical.z-this.tileID.canonical.z);return{x:Math.floor((s.canonical.x*l.EXTENT+n.anchorX)*h),y:Math.floor((s.canonical.y*l.EXTENT+n.anchorY)*h)}}findMatches(n,s,h){const f=this.tileID.canonical.z<s.canonical.z?1:Math.pow(2,this.tileID.canonical.z-s.canonical.z);for(let y=0;y<n.length;y++){const x=n.get(y);if(x.crossTileID)continue;const S=this.indexedSymbolInstances[x.key];if(!S)continue;const E=this.getScaledCoordinates(x,s);for(const C of S)if(Math.abs(C.coord.x-E.x)<=f&&Math.abs(C.coord.y-E.y)<=f&&!h[C.crossTileID]){h[C.crossTileID]=!0,x.crossTileID=C.crossTileID;break}}}}class He{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class pt{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(n){const s=Math.round((n-this.lng)/360);if(s!==0)for(const h in this.indexes){const f=this.indexes[h],y={};for(const x in f){const S=f[x];S.tileID=S.tileID.unwrapTo(S.tileID.wrap+s),y[S.tileID.key]=S}this.indexes[h]=y}this.lng=n}addBucket(n,s,h){if(this.indexes[n.overscaledZ]&&this.indexes[n.overscaledZ][n.key]){if(this.indexes[n.overscaledZ][n.key].bucketInstanceId===s.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(n.overscaledZ,this.indexes[n.overscaledZ][n.key])}for(let y=0;y<s.symbolInstances.length;y++)s.symbolInstances.get(y).crossTileID=0;this.usedCrossTileIDs[n.overscaledZ]||(this.usedCrossTileIDs[n.overscaledZ]={});const f=this.usedCrossTileIDs[n.overscaledZ];for(const y in this.indexes){const x=this.indexes[y];if(Number(y)>n.overscaledZ)for(const S in x){const E=x[S];E.tileID.isChildOf(n)&&E.findMatches(s.symbolInstances,n,f)}else{const S=x[n.scaledTo(Number(y)).key];S&&S.findMatches(s.symbolInstances,n,f)}}for(let y=0;y<s.symbolInstances.length;y++){const x=s.symbolInstances.get(y);x.crossTileID||(x.crossTileID=h.generate(),f[x.crossTileID]=!0)}return this.indexes[n.overscaledZ]===void 0&&(this.indexes[n.overscaledZ]={}),this.indexes[n.overscaledZ][n.key]=new ot(n,s.symbolInstances,s.bucketInstanceId),!0}removeBucketCrossTileIDs(n,s){for(const h in s.indexedSymbolInstances)for(const f of s.indexedSymbolInstances[h])delete this.usedCrossTileIDs[n][f.crossTileID]}removeStaleBuckets(n){let s=!1;for(const h in this.indexes){const f=this.indexes[h];for(const y in f)n[f[y].bucketInstanceId]||(this.removeBucketCrossTileIDs(h,f[y]),delete f[y],s=!0)}return s}}class gt{constructor(){this.layerIndexes={},this.crossTileIDs=new He,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(n,s,h){let f=this.layerIndexes[n.id];f===void 0&&(f=this.layerIndexes[n.id]=new pt);let y=!1;const x={};f.handleWrapJump(h);for(const S of s){const E=S.getBucket(n);E&&n.id===E.layerIds[0]&&(E.bucketInstanceId||(E.bucketInstanceId=++this.maxBucketInstanceId),f.addBucket(S.tileID,E,this.crossTileIDs)&&(y=!0),x[E.bucketInstanceId]=!0)}return f.removeStaleBuckets(x)&&(y=!0),y}pruneUnusedLayers(n){const s={};n.forEach(h=>{s[h]=!0});for(const h in this.layerIndexes)s[h]||delete this.layerIndexes[h]}}var Lt=l.createLayout([{name:"a_pos",type:"Int16",components:2}]);class vt extends l.Evented{constructor(n){super(),this.sourceCache=n,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.renderHistory=[],this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,this.renderHistorySize=n._cache.max,n.usedForTerrain=!0,n.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null;for(const n in this._tiles){const s=this._tiles[n];s.textures.forEach(h=>h.destroy()),s.textures=[]}}update(n,s){this.sourceCache.update(n,s),this._renderableTilesKeys=[];for(const h of n.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:s}))this._renderableTilesKeys.push(h.key),this._tiles[h.key]||(h.posMatrix=new Float64Array(16),l.ortho(h.posMatrix,0,l.EXTENT,0,l.EXTENT,0,1),this._tiles[h.key]=new Pr(h,this.tileSize))}removeOutdated(n){const s={};this.renderHistory=this.renderHistory.filter((h,f)=>this.renderHistory.indexOf(h)===f).slice(0,this.renderHistorySize);for(const h of this._renderableTilesKeys)s[h]=!0;for(const h of this.renderHistory)s[h]=!0;for(const h in this._tiles)s[h]||(this._tiles[h].clearTextures(n),delete this._tiles[h])}getRenderableTiles(){return this._renderableTilesKeys.map(n=>this.getTileByID(n))}getTileByID(n){return this._tiles[n]}getTerrainCoords(n){const s={};for(const h of this._renderableTilesKeys){const f=this._tiles[h].tileID;if(f.canonical.equals(n.canonical)){const y=n.clone();y.posMatrix=new Float64Array(16),l.ortho(y.posMatrix,0,l.EXTENT,0,l.EXTENT,0,1),s[h]=y}else if(f.canonical.isChildOf(n.canonical)){const y=n.clone();y.posMatrix=new Float64Array(16);const x=f.canonical.z-n.canonical.z,S=f.canonical.x-(f.canonical.x>>x<<x),E=f.canonical.y-(f.canonical.y>>x<<x),C=l.EXTENT>>x;l.ortho(y.posMatrix,0,C,0,C,0,1),l.translate(y.posMatrix,y.posMatrix,[-S*C,-E*C,0]),s[h]=y}else if(n.canonical.isChildOf(f.canonical)){const y=n.clone();y.posMatrix=new Float64Array(16);const x=n.canonical.z-f.canonical.z,S=n.canonical.x-(n.canonical.x>>x<<x),E=n.canonical.y-(n.canonical.y>>x<<x),C=l.EXTENT>>x;l.ortho(y.posMatrix,0,l.EXTENT,0,l.EXTENT,0,1),l.translate(y.posMatrix,y.posMatrix,[S*C,E*C,0]),l.scale(y.posMatrix,y.posMatrix,[1/2**x,1/2**x,0]),s[h]=y}}return s}getSourceTile(n,s){const h=this.sourceCache._source;let f=n.overscaledZ-this.deltaZoom;if(f>h.maxzoom&&(f=h.maxzoom),f<h.minzoom)return null;this._sourceTileCache[n.key]||(this._sourceTileCache[n.key]=n.scaledTo(f).key);let y=this.sourceCache.getTileByID(this._sourceTileCache[n.key]);if((!y||!y.dem)&&s)for(;f>=h.minzoom&&(!y||!y.dem);)y=this.sourceCache.getTileByID(n.scaledTo(f--).key);return y}tilesAfterTime(n=Date.now()){return Object.values(this._tiles).filter(s=>s.timeLoaded>=n)}}class Tt{constructor(n,s,h){this.style=n,this.sourceCache=new vt(s),this.options=h,this.exaggeration=typeof h.exaggeration=="number"?h.exaggeration:1,this.elevationOffset=typeof h.elevationOffset=="number"?h.elevationOffset:450,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024,this.clearRerenderCache()}getDEMElevation(n,s,h,f=l.EXTENT){if(!(s>=0&&s<f&&h>=0&&h<f))return this.elevationOffset;let y=0;const x=this.getTerrainData(n);if(x.tile&&x.tile.dem){const S=l.transformMat4$1([],[s/f*l.EXTENT,h/f*l.EXTENT],x.u_terrain_matrix),E=[S[0]*x.tile.dem.dim,S[1]*x.tile.dem.dim],C=[Math.floor(E[0]),Math.floor(E[1])],z=x.tile.dem.get(C[0],C[1]),R=x.tile.dem.get(C[0],C[1]+1),B=x.tile.dem.get(C[0]+1,C[1]),Z=x.tile.dem.get(C[0]+1,C[1]+1);y=l.number(l.number(z,R,E[0]-C[0]),l.number(B,Z,E[0]-C[0]),E[1]-C[1])}return y}rememberForRerender(n,s){for(const h in this.sourceCache._tiles){const f=this.sourceCache._tiles[h];(f.tileID.equals(s)||f.tileID.isChildOf(s))&&(n===this.sourceCache.sourceCache.id&&(f.timeLoaded=Date.now()),this._rerender[n]=this._rerender[n]||{},this._rerender[n][f.tileID.key]=!0)}}needsRerender(n,s){return this._rerender[n]&&this._rerender[n][s.key]}clearRerenderCache(){this._rerender={}}getElevation(n,s,h,f=l.EXTENT){return(this.getDEMElevation(n,s,h,f)+this.elevationOffset)*this.exaggeration}getTerrainData(n){if(!this._emptyDemTexture){const f=this.style.map.painter.context,y=new l.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new _e(f,y,f.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new _e(f,new l.RGBAImage({width:1,height:1}),f.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(f.gl.NEAREST,f.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=l.identity([])}const s=this.sourceCache.getSourceTile(n,!0);if(s&&s.dem&&(!s.demTexture||s.needsTerrainPrepare)){const f=this.style.map.painter.context;s.demTexture=this.style.map.painter.getTileTexture(s.dem.stride),s.demTexture?s.demTexture.update(s.dem.getPixels(),{premultiply:!1}):s.demTexture=new _e(f,s.dem.getPixels(),f.gl.RGBA,{premultiply:!1}),s.demTexture.bind(f.gl.NEAREST,f.gl.CLAMP_TO_EDGE),s.needsTerrainPrepare=!1}const h=s&&s+s.tileID.key+n.key;if(h&&!this._demMatrixCache[h]){const f=this.sourceCache.sourceCache._source.maxzoom;let y=n.canonical.z-s.tileID.canonical.z;n.overscaledZ>n.canonical.z&&(n.canonical.z>=f?y=n.canonical.z-f:l.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const x=n.canonical.x-(n.canonical.x>>y<<y),S=n.canonical.y-(n.canonical.y>>y<<y),E=l.fromScaling(new Float64Array(16),[1/(l.EXTENT<<y),1/(l.EXTENT<<y),0]);l.translate(E,E,[x*l.EXTENT,S*l.EXTENT,0]),this._demMatrixCache[n.key]={matrix:E,coord:n}}return{u_depth:2,u_terrain:3,u_terrain_dim:s&&s.dem&&s.dem.dim||1,u_terrain_matrix:h?this._demMatrixCache[n.key].matrix:this._emptyDemMatrix,u_terrain_unpack:s&&s.dem&&s.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_offset:this.elevationOffset,u_terrain_exaggeration:this.exaggeration,texture:(s&&s.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:s}}getRTTFramebuffer(){const n=this.style.map.painter;if(!this._rttFramebuffer){const s=this.sourceCache.tileSize*this.qualityFactor;this._rttFramebuffer=n.context.createFramebuffer(s,s,!0),this._rttFramebuffer.depthAttachment.set(n.context.createRenderbuffer(n.context.gl.DEPTH_COMPONENT16,s,s))}return this._rttFramebuffer}getFramebuffer(n){const s=this.style.map.painter,h=s.width/devicePixelRatio,f=s.height/devicePixelRatio;return!this._fbo||this._fbo.width===h&&this._fbo.height===f||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new _e(s.context,{width:h,height:f,data:null},s.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(s.context.gl.NEAREST,s.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new _e(s.context,{width:h,height:f,data:null},s.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(s.context.gl.NEAREST,s.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=s.context.createFramebuffer(h,f,!0),this._fbo.depthAttachment.set(s.context.createRenderbuffer(s.context.gl.DEPTH_COMPONENT16,h,f))),this._fbo.colorAttachment.set(n==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const n=this.style.map.painter.context;if(this._coordsTexture)return this._coordsTexture;const s=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let y=0,x=0;y<this._coordsTextureSize;y++)for(let S=0;S<this._coordsTextureSize;S++,x+=4)s[x+0]=255&S,s[x+1]=255&y,s[x+2]=S>>8<<4|y>>8,s[x+3]=0;const h=new l.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(s.buffer)),f=new _e(n,h,n.gl.RGBA,{premultiply:!1});return f.bind(n.gl.NEAREST,n.gl.CLAMP_TO_EDGE),this._coordsTexture=f,f}pointCoordinate(n){const s=new Uint8Array(4),h=this.style.map.painter,f=h.context,y=f.gl;f.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),y.readPixels(n.x,h.height/devicePixelRatio-n.y-1,1,1,y.RGBA,y.UNSIGNED_BYTE,s),f.bindFramebuffer.set(null);const x=s[0]+(s[2]>>4<<8),S=s[1]+((15&s[2])<<8),E=this.coordsIndex[255-s[3]],C=E&&this.sourceCache.getTileByID(E);if(!C)return null;const z=this._coordsTextureSize,R=(1<<C.tileID.canonical.z)*z;return new l.MercatorCoordinate((C.tileID.canonical.x*z+x)/R,(C.tileID.canonical.y*z+S)/R,this.getElevation(C.tileID,x,S,z))}getTerrainMesh(){if(this._mesh)return this._mesh;const n=this.style.map.painter.context,s=new l.PosArray,h=new l.TriangleIndexArray,f=this.meshSize,y=l.EXTENT/f,x=f*f;for(let S=0;S<=f;S++)for(let E=0;E<=f;E++)s.emplaceBack(E*y,S*y);for(let S=0;S<x;S+=f+1)for(let E=0;E<f;E++)h.emplaceBack(E+S,f+E+S+1,f+E+S+2),h.emplaceBack(E+S,f+E+S+2,E+S+1);return this._mesh={indexBuffer:n.createIndexBuffer(h),vertexBuffer:n.createVertexBuffer(s,Lt.members),segments:l.SegmentVector.simpleSegment(0,0,s.length,h.length)},this._mesh}getMinMaxElevation(n){const s=this.getTerrainData(n).tile,h={minElevation:null,maxElevation:null};return s&&s.dem&&(h.minElevation=(s.dem.min+this.elevationOffset)*this.exaggeration,h.maxElevation=(s.dem.max+this.elevationOffset)*this.exaggeration),h}}const Bt=(d,n)=>l.emitValidationErrors(d,n&&n.filter(s=>s.identifier!=="source.canvas")),Xt=l.pick(Rt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Vr=l.pick(Rt,["setCenter","setZoom","setBearing","setPitch"]),ar=function(){const d={},n=l.spec.$version;for(const s in l.spec.$root){const h=l.spec.$root[s];if(h.required){let f=null;f=s==="version"?n:h.type==="array"?[]:{},f!=null&&(d[s]=f)}}return d}();class rn extends l.Evented{constructor(n,s={}){super(),this.map=n,this.dispatcher=new wt(Co(),this),this.imageManager=new H,this.imageManager.setEventedParent(this),this.glyphManager=new Ne(n._requestManager,s.localIdeographFontFamily),this.lineAtlas=new Je(256,512),this.crossTileSymbolIndex=new gt,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",l.getReferrer());const h=this;this._rtlTextPluginCallback=rn.registerForPluginStateChange(f=>{h.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:f.pluginStatus,pluginURL:f.pluginURL},(y,x)=>{if(l.triggerPluginCompletionEvent(y),x&&x.every(S=>S))for(const S in h.sourceCaches)h.sourceCaches[S].reload()})}),this.on("data",f=>{if(f.dataType!=="source"||f.sourceDataType!=="metadata")return;const y=this.sourceCaches[f.sourceId];if(!y)return;const x=y.getSource();if(x&&x.vectorLayerIds)for(const S in this._layers){const E=this._layers[S];E.source===x.id&&this._validateLayer(E)}})}loadURL(n,s={}){this.fire(new l.Event("dataloading",{dataType:"style"}));const h=typeof s.validate!="boolean"||s.validate,f=this.map._requestManager.transformRequest(n,l.ResourceType.Style);this._request=l.getJSON(f,(y,x)=>{this._request=null,y?this.fire(new l.ErrorEvent(y)):x&&this._load(x,h)})}loadJSON(n,s={}){this.fire(new l.Event("dataloading",{dataType:"style"})),this._request=l.exported.frame(()=>{this._request=null,this._load(n,s.validate!==!1)})}loadEmpty(){this.fire(new l.Event("dataloading",{dataType:"style"})),this._load(ar,!1)}_load(n,s){if(s&&Bt(this,l.validateStyle(n)))return;this._loaded=!0,this.stylesheet=n;for(const f in n.sources)this.addSource(f,n.sources[f],{validate:!1});n.sprite?this._loadSprite(n.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(n.glyphs);const h=oa(this.stylesheet.layers);this._order=h.map(f=>f.id),this._layers={},this._serializedLayers={};for(let f of h)f=l.createStyleLayer(f),f.setEventedParent(this,{layer:{id:f.id}}),this._layers[f.id]=f,this._serializedLayers[f.id]=f.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new rt(this.stylesheet.light),this.setTerrain(this.stylesheet.terrain),this.fire(new l.Event("data",{dataType:"style"})),this.fire(new l.Event("style.load"))}_loadSprite(n){this._spriteRequest=function(s,h,f,y){let x,S,E;const C=f>1?"@2x":"";let z=l.getJSON(h.transformRequest(h.normalizeSpriteURL(s,C,".json"),l.ResourceType.SpriteJSON),(Z,G)=>{z=null,E||(E=Z,x=G,B())}),R=l.getImage(h.transformRequest(h.normalizeSpriteURL(s,C,".png"),l.ResourceType.SpriteImage),(Z,G)=>{R=null,E||(E=Z,S=G,B())});function B(){if(E)y(E);else if(x&&S){const Z=l.exported.getImageData(S),G={};for(const W in x){const{width:ie,height:ue,x:pe,y:X,sdf:ye,pixelRatio:me,stretchX:Ce,stretchY:Ie,content:Be}=x[W],Ee=new l.RGBAImage({width:ie,height:ue});l.RGBAImage.copy(Z,Ee,{x:pe,y:X},{x:0,y:0},{width:ie,height:ue}),G[W]={data:Ee,pixelRatio:me,sdf:ye,stretchX:Ce,stretchY:Ie,content:Be}}y(null,G)}}return{cancel(){z&&(z.cancel(),z=null),R&&(R.cancel(),R=null)}}}(n,this.map._requestManager,this.map.getPixelRatio(),(s,h)=>{if(this._spriteRequest=null,s)this.fire(new l.ErrorEvent(s));else if(h)for(const f in h)this.imageManager.addImage(f,h[f]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"}))})}_validateLayer(n){const s=this.sourceCaches[n.source];if(!s)return;const h=n.sourceLayer;if(!h)return;const f=s.getSource();(f.type==="geojson"||f.vectorLayerIds&&f.vectorLayerIds.indexOf(h)===-1)&&this.fire(new l.ErrorEvent(new Error(`Source layer "${h}" does not exist on source "${f.id}" as specified by style layer "${n.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const n in this.sourceCaches)if(!this.sourceCaches[n].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(n){const s=[];for(const h of n){const f=this._layers[h];f.type!=="custom"&&s.push(f.serialize())}return s}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const n in this.sourceCaches)if(this.sourceCaches[n].hasTransition())return!0;for(const n in this._layers)if(this._layers[n].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(n){if(!this._loaded)return;const s=this._changed;if(this._changed){const f=Object.keys(this._updatedLayers),y=Object.keys(this._removedLayers);(f.length||y.length)&&this._updateWorkerLayers(f,y);for(const x in this._updatedSources){const S=this._updatedSources[x];if(S==="reload")this._reloadSource(x);else{if(S!=="clear")throw new Error(`Invalid action ${S}`);this._clearSource(x)}}this._updateTilesForChangedImages();for(const x in this._updatedPaintProps)this._layers[x].updateTransitions(n);this.light.updateTransitions(n),this._resetUpdates()}const h={};for(const f in this.sourceCaches){const y=this.sourceCaches[f];h[f]=y.used,y.used=!1}for(const f of this._order){const y=this._layers[f];y.recalculate(n,this._availableImages),!y.isHidden(n.zoom)&&y.source&&(this.sourceCaches[y.source].used=!0)}for(const f in h){const y=this.sourceCaches[f];h[f]!==y.used&&y.fire(new l.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:f}))}this.light.recalculate(n),this.z=n.zoom,s&&this.fire(new l.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const n=Object.keys(this._changedImages);if(n.length){for(const s in this.sourceCaches)this.sourceCaches[s].reloadTilesForDependencies(["icons","patterns"],n);this._changedImages={}}}_updateWorkerLayers(n,s){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(n),removedIds:s})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setTerrain(n){if(this._checkLoaded(),this._terrainDataCallback&&this.off("data",this._terrainDataCallback),this._terrainfreezeElevationCallback&&this.map.off("freezeElevation",this._terrainfreezeElevationCallback),n){const s=this.sourceCaches[n.source];if(!s)throw new Error(`cannot load terrain, because there exists no source with ID: ${n.source}`);this.terrain=new Tt(this,s,n),this.map.transform.updateElevation(this.terrain),this._terrainfreezeElevationCallback=h=>{h.freeze?this.map.transform.freezeElevation=!0:(this.map.transform.freezeElevation=!1,this.map.transform.recalculateZoom(this.terrain))},this._terrainDataCallback=h=>{h.tile&&(h.sourceId===n.source?(this.map.transform.updateElevation(this.terrain),this.terrain.rememberForRerender(h.sourceId,h.tile.tileID)):h.source.type==="geojson"&&this.terrain.rememberForRerender(h.sourceId,h.tile.tileID))},this.on("data",this._terrainDataCallback),this.map.on("freezeElevation",this._terrainfreezeElevationCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.map.transform.updateElevation(this.terrain);this.map.fire(new l.Event("terrain",{terrain:n}))}setState(n){if(this._checkLoaded(),Bt(this,l.validateStyle(n)))return!1;(n=l.clone$1(n)).layers=oa(n.layers);const s=function(f,y){if(!f)return[{command:Rt.setStyle,args:[y]}];let x=[];try{if(!ne(f.version,y.version))return[{command:Rt.setStyle,args:[y]}];ne(f.center,y.center)||x.push({command:Rt.setCenter,args:[y.center]}),ne(f.zoom,y.zoom)||x.push({command:Rt.setZoom,args:[y.zoom]}),ne(f.bearing,y.bearing)||x.push({command:Rt.setBearing,args:[y.bearing]}),ne(f.pitch,y.pitch)||x.push({command:Rt.setPitch,args:[y.pitch]}),ne(f.sprite,y.sprite)||x.push({command:Rt.setSprite,args:[y.sprite]}),ne(f.glyphs,y.glyphs)||x.push({command:Rt.setGlyphs,args:[y.glyphs]}),ne(f.transition,y.transition)||x.push({command:Rt.setTransition,args:[y.transition]}),ne(f.light,y.light)||x.push({command:Rt.setLight,args:[y.light]});const S={},E=[];(function(z,R,B,Z){let G;for(G in R=R||{},z=z||{})Object.prototype.hasOwnProperty.call(z,G)&&(Object.prototype.hasOwnProperty.call(R,G)||di(G,B,Z));for(G in R)Object.prototype.hasOwnProperty.call(R,G)&&(Object.prototype.hasOwnProperty.call(z,G)?ne(z[G],R[G])||(z[G].type==="geojson"&&R[G].type==="geojson"&&zn(z,R,G)?B.push({command:Rt.setGeoJSONSourceData,args:[G,R[G].data]}):ti(G,R,B,Z)):An(G,R,B))})(f.sources,y.sources,E,S);const C=[];f.layers&&f.layers.forEach(z=>{S[z.source]?x.push({command:Rt.removeLayer,args:[z.id]}):C.push(z)}),x=x.concat(E),function(z,R,B){R=R||[];const Z=(z=z||[]).map(fi),G=R.map(fi),W=z.reduce(Ao,{}),ie=R.reduce(Ao,{}),ue=Z.slice(),pe=Object.create(null);let X,ye,me,Ce,Ie,Be,Ee;for(X=0,ye=0;X<Z.length;X++)me=Z[X],Object.prototype.hasOwnProperty.call(ie,me)?ye++:(B.push({command:Rt.removeLayer,args:[me]}),ue.splice(ue.indexOf(me,ye),1));for(X=0,ye=0;X<G.length;X++)me=G[G.length-1-X],ue[ue.length-1-X]!==me&&(Object.prototype.hasOwnProperty.call(W,me)?(B.push({command:Rt.removeLayer,args:[me]}),ue.splice(ue.lastIndexOf(me,ue.length-ye),1)):ye++,Be=ue[ue.length-X],B.push({command:Rt.addLayer,args:[ie[me],Be]}),ue.splice(ue.length-X,0,me),pe[me]=!0);for(X=0;X<G.length;X++)if(me=G[X],Ce=W[me],Ie=ie[me],!pe[me]&&!ne(Ce,Ie))if(ne(Ce.source,Ie.source)&&ne(Ce["source-layer"],Ie["source-layer"])&&ne(Ce.type,Ie.type)){for(Ee in pi(Ce.layout,Ie.layout,B,me,null,Rt.setLayoutProperty),pi(Ce.paint,Ie.paint,B,me,null,Rt.setPaintProperty),ne(Ce.filter,Ie.filter)||B.push({command:Rt.setFilter,args:[me,Ie.filter]}),ne(Ce.minzoom,Ie.minzoom)&&ne(Ce.maxzoom,Ie.maxzoom)||B.push({command:Rt.setLayerZoomRange,args:[me,Ie.minzoom,Ie.maxzoom]}),Ce)Object.prototype.hasOwnProperty.call(Ce,Ee)&&Ee!=="layout"&&Ee!=="paint"&&Ee!=="filter"&&Ee!=="metadata"&&Ee!=="minzoom"&&Ee!=="maxzoom"&&(Ee.indexOf("paint.")===0?pi(Ce[Ee],Ie[Ee],B,me,Ee.slice(6),Rt.setPaintProperty):ne(Ce[Ee],Ie[Ee])||B.push({command:Rt.setLayerProperty,args:[me,Ee,Ie[Ee]]}));for(Ee in Ie)Object.prototype.hasOwnProperty.call(Ie,Ee)&&!Object.prototype.hasOwnProperty.call(Ce,Ee)&&Ee!=="layout"&&Ee!=="paint"&&Ee!=="filter"&&Ee!=="metadata"&&Ee!=="minzoom"&&Ee!=="maxzoom"&&(Ee.indexOf("paint.")===0?pi(Ce[Ee],Ie[Ee],B,me,Ee.slice(6),Rt.setPaintProperty):ne(Ce[Ee],Ie[Ee])||B.push({command:Rt.setLayerProperty,args:[me,Ee,Ie[Ee]]}))}else B.push({command:Rt.removeLayer,args:[me]}),Be=ue[ue.lastIndexOf(me)+1],B.push({command:Rt.addLayer,args:[Ie,Be]})}(C,y.layers,x)}catch(S){console.warn("Unable to compute style diff:",S),x=[{command:Rt.setStyle,args:[y]}]}return x}(this.serialize(),n).filter(f=>!(f.command in Vr));if(s.length===0)return!1;const h=s.filter(f=>!(f.command in Xt));if(h.length>0)throw new Error(`Unimplemented: ${h.map(f=>f.command).join(", ")}.`);return s.forEach(f=>{f.command!=="setTransition"&&this[f.command].apply(this,f.args)}),this.stylesheet=n,!0}addImage(n,s){if(this.getImage(n))return this.fire(new l.ErrorEvent(new Error(`An image named "${n}" already exists.`)));this.imageManager.addImage(n,s),this._afterImageUpdated(n)}updateImage(n,s){this.imageManager.updateImage(n,s)}getImage(n){return this.imageManager.getImage(n)}removeImage(n){if(!this.getImage(n))return this.fire(new l.ErrorEvent(new Error(`An image named "${n}" does not exist.`)));this.imageManager.removeImage(n),this._afterImageUpdated(n)}_afterImageUpdated(n){this._availableImages=this.imageManager.listImages(),this._changedImages[n]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(n,s,h={}){if(this._checkLoaded(),this.sourceCaches[n]!==void 0)throw new Error(`Source "${n}" already exists.`);if(!s.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(s).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(s.type)>=0&&this._validate(l.validateStyle.source,`sources.${n}`,s,null,h))return;this.map&&this.map._collectResourceTiming&&(s.collectResourceTiming=!0);const f=this.sourceCaches[n]=new wr(n,s,this.dispatcher);f.style=this,f.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:f.serialize(),sourceId:n})),f.onAdd(this.map),this._changed=!0}removeSource(n){if(this._checkLoaded(),this.sourceCaches[n]===void 0)throw new Error("There is no source with this ID");for(const h in this._layers)if(this._layers[h].source===n)return this.fire(new l.ErrorEvent(new Error(`Source "${n}" cannot be removed while layer "${h}" is using it.`)));const s=this.sourceCaches[n];delete this.sourceCaches[n],delete this._updatedSources[n],s.fire(new l.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:n})),s.setEventedParent(null),s.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(n,s){if(this._checkLoaded(),this.sourceCaches[n]===void 0)throw new Error(`There is no source with this ID=${n}`);const h=this.sourceCaches[n].getSource();if(h.type!=="geojson")throw new Error(`geojsonSource.type is ${h.type}, which is !== 'geojson`);h.setData(s),this._changed=!0}getSource(n){return this.sourceCaches[n]&&this.sourceCaches[n].getSource()}addLayer(n,s,h={}){this._checkLoaded();const f=n.id;if(this.getLayer(f))return void this.fire(new l.ErrorEvent(new Error(`Layer "${f}" already exists on this map.`)));let y;if(n.type==="custom"){if(Bt(this,l.validateCustomStyleLayer(n)))return;y=l.createStyleLayer(n)}else{if(typeof n.source=="object"&&(this.addSource(f,n.source),n=l.clone$1(n),n=l.extend(n,{source:f})),this._validate(l.validateStyle.layer,`layers.${f}`,n,{arrayIndex:-1},h))return;y=l.createStyleLayer(n),this._validateLayer(y),y.setEventedParent(this,{layer:{id:f}}),this._serializedLayers[y.id]=y.serialize()}const x=s?this._order.indexOf(s):this._order.length;if(s&&x===-1)this.fire(new l.ErrorEvent(new Error(`Cannot add layer "${f}" before non-existing layer "${s}".`)));else{if(this._order.splice(x,0,f),this._layerOrderChanged=!0,this._layers[f]=y,this._removedLayers[f]&&y.source&&y.type!=="custom"){const S=this._removedLayers[f];delete this._removedLayers[f],S.type!==y.type?this._updatedSources[y.source]="clear":(this._updatedSources[y.source]="reload",this.sourceCaches[y.source].pause())}this._updateLayer(y),y.onAdd&&y.onAdd(this.map)}}moveLayer(n,s){if(this._checkLoaded(),this._changed=!0,!this._layers[n])return void this.fire(new l.ErrorEvent(new Error(`The layer '${n}' does not exist in the map's style and cannot be moved.`)));if(n===s)return;const h=this._order.indexOf(n);this._order.splice(h,1);const f=s?this._order.indexOf(s):this._order.length;s&&f===-1?this.fire(new l.ErrorEvent(new Error(`Cannot move layer "${n}" before non-existing layer "${s}".`))):(this._order.splice(f,0,n),this._layerOrderChanged=!0)}removeLayer(n){this._checkLoaded();const s=this._layers[n];if(!s)return void this.fire(new l.ErrorEvent(new Error(`Cannot remove non-existing layer "${n}".`)));s.setEventedParent(null);const h=this._order.indexOf(n);this._order.splice(h,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[n]=s,delete this._layers[n],delete this._serializedLayers[n],delete this._updatedLayers[n],delete this._updatedPaintProps[n],s.onRemove&&s.onRemove(this.map)}getLayer(n){return this._layers[n]}hasLayer(n){return n in this._layers}setLayerZoomRange(n,s,h){this._checkLoaded();const f=this.getLayer(n);f?f.minzoom===s&&f.maxzoom===h||(s!=null&&(f.minzoom=s),h!=null&&(f.maxzoom=h),this._updateLayer(f)):this.fire(new l.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${n}".`)))}setFilter(n,s,h={}){this._checkLoaded();const f=this.getLayer(n);if(f){if(!ne(f.filter,s))return s==null?(f.filter=void 0,void this._updateLayer(f)):void(this._validate(l.validateStyle.filter,`layers.${f.id}.filter`,s,null,h)||(f.filter=l.clone$1(s),this._updateLayer(f)))}else this.fire(new l.ErrorEvent(new Error(`Cannot filter non-existing layer "${n}".`)))}getFilter(n){return l.clone$1(this.getLayer(n).filter)}setLayoutProperty(n,s,h,f={}){this._checkLoaded();const y=this.getLayer(n);y?ne(y.getLayoutProperty(s),h)||(y.setLayoutProperty(s,h,f),this._updateLayer(y)):this.fire(new l.ErrorEvent(new Error(`Cannot style non-existing layer "${n}".`)))}getLayoutProperty(n,s){const h=this.getLayer(n);if(h)return h.getLayoutProperty(s);this.fire(new l.ErrorEvent(new Error(`Cannot get style of non-existing layer "${n}".`)))}setPaintProperty(n,s,h,f={}){this._checkLoaded();const y=this.getLayer(n);y?ne(y.getPaintProperty(s),h)||(y.setPaintProperty(s,h,f)&&this._updateLayer(y),this._changed=!0,this._updatedPaintProps[n]=!0):this.fire(new l.ErrorEvent(new Error(`Cannot style non-existing layer "${n}".`)))}getPaintProperty(n,s){return this.getLayer(n).getPaintProperty(s)}setFeatureState(n,s){this._checkLoaded();const h=n.source,f=n.sourceLayer,y=this.sourceCaches[h];if(y===void 0)return void this.fire(new l.ErrorEvent(new Error(`The source '${h}' does not exist in the map's style.`)));const x=y.getSource().type;x==="geojson"&&f?this.fire(new l.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):x!=="vector"||f?(n.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),y.setFeatureState(f,n.id,s)):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(n,s){this._checkLoaded();const h=n.source,f=this.sourceCaches[h];if(f===void 0)return void this.fire(new l.ErrorEvent(new Error(`The source '${h}' does not exist in the map's style.`)));const y=f.getSource().type,x=y==="vector"?n.sourceLayer:void 0;y!=="vector"||x?s&&typeof n.id!="string"&&typeof n.id!="number"?this.fire(new l.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):f.removeFeatureState(x,n.id,s):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(n){this._checkLoaded();const s=n.source,h=n.sourceLayer,f=this.sourceCaches[s];if(f!==void 0)return f.getSource().type!=="vector"||h?(n.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),f.getFeatureState(h,n.id)):void this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new l.ErrorEvent(new Error(`The source '${s}' does not exist in the map's style.`)))}getTransition(){return l.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return l.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:l.mapObject(this.sourceCaches,n=>n.serialize()),layers:this._serializeLayers(this._order)},n=>n!==void 0)}_updateLayer(n){this._updatedLayers[n.id]=!0,n.source&&!this._updatedSources[n.source]&&this.sourceCaches[n.source].getSource().type!=="raster"&&(this._updatedSources[n.source]="reload",this.sourceCaches[n.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(n){const s=x=>this._layers[x].type==="fill-extrusion",h={},f=[];for(let x=this._order.length-1;x>=0;x--){const S=this._order[x];if(s(S)){h[S]=x;for(const E of n){const C=E[S];if(C)for(const z of C)f.push(z)}}}f.sort((x,S)=>S.intersectionZ-x.intersectionZ);const y=[];for(let x=this._order.length-1;x>=0;x--){const S=this._order[x];if(s(S))for(let E=f.length-1;E>=0;E--){const C=f[E].feature;if(h[C.layer.id]<x)break;y.push(C),f.pop()}else for(const E of n){const C=E[S];if(C)for(const z of C)y.push(z.feature)}}return y}queryRenderedFeatures(n,s,h){s&&s.filter&&this._validate(l.validateStyle.filter,"queryRenderedFeatures.filter",s.filter,null,s);const f={};if(s&&s.layers){if(!Array.isArray(s.layers))return this.fire(new l.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const x of s.layers){const S=this._layers[x];if(!S)return this.fire(new l.ErrorEvent(new Error(`The layer '${x}' does not exist in the map's style and cannot be queried for features.`))),[];f[S.source]=!0}}const y=[];s.availableImages=this._availableImages;for(const x in this.sourceCaches)s.layers&&!f[x]||y.push(Ht(this.sourceCaches[x],this._layers,this._serializedLayers,n,s,h));return this.placement&&y.push(function(x,S,E,C,z,R,B){const Z={},G=R.queryRenderedSymbols(C),W=[];for(const ie of Object.keys(G).map(Number))W.push(B[ie]);W.sort(er);for(const ie of W){const ue=ie.featureIndex.lookupSymbolFeatures(G[ie.bucketInstanceId],S,ie.bucketIndex,ie.sourceLayerIndex,z.filter,z.layers,z.availableImages,x);for(const pe in ue){const X=Z[pe]=Z[pe]||[],ye=ue[pe];ye.sort((me,Ce)=>{const Ie=ie.featureSortOrder;if(Ie){const Be=Ie.indexOf(me.featureIndex);return Ie.indexOf(Ce.featureIndex)-Be}return Ce.featureIndex-me.featureIndex});for(const me of ye)X.push(me)}}for(const ie in Z)Z[ie].forEach(ue=>{const pe=ue.feature,X=E[x[ie].source].getFeatureState(pe.layer["source-layer"],pe.id);pe.source=pe.layer.source,pe.layer["source-layer"]&&(pe.sourceLayer=pe.layer["source-layer"]),pe.state=X});return Z}(this._layers,this._serializedLayers,this.sourceCaches,n,s,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(y)}querySourceFeatures(n,s){s&&s.filter&&this._validate(l.validateStyle.filter,"querySourceFeatures.filter",s.filter,null,s);const h=this.sourceCaches[n];return h?function(f,y){const x=f.getRenderableIds().map(C=>f.getTileByID(C)),S=[],E={};for(let C=0;C<x.length;C++){const z=x[C],R=z.tileID.canonical.key;E[R]||(E[R]=!0,z.querySourceFeatures(S,y))}return S}(h,s):[]}addSourceType(n,s,h){return rn.getSourceType(n)?h(new Error(`A source type called "${n}" already exists.`)):(rn.setSourceType(n,s),s.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:n,url:s.workerSourceURL},h):h(null,null))}getLight(){return this.light.getLight()}setLight(n,s={}){this._checkLoaded();const h=this.light.getLight();let f=!1;for(const x in n)if(!ne(n[x],h[x])){f=!0;break}if(!f)return;const y={now:l.exported.now(),transition:l.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(n,s),this.light.updateTransitions(y)}_validate(n,s,h,f,y={}){return(!y||y.validate!==!1)&&Bt(this,n.call(l.validateStyle,l.extend({key:s,style:this.serialize(),value:h,styleSpec:l.spec},f)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),l.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const n in this._layers)this._layers[n].setEventedParent(null);for(const n in this.sourceCaches){const s=this.sourceCaches[n];s.setEventedParent(null),s.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(n){this.sourceCaches[n].clearTiles()}_reloadSource(n){this.sourceCaches[n].resume(),this.sourceCaches[n].reload()}_updateSources(n){for(const s in this.sourceCaches)this.sourceCaches[s].update(n,this.terrain)}_generateCollisionBoxes(){for(const n in this.sourceCaches)this._reloadSource(n)}_updatePlacement(n,s,h,f,y=!1){let x=!1,S=!1;const E={};for(const C of this._order){const z=this._layers[C];if(z.type!=="symbol")continue;if(!E[z.source]){const B=this.sourceCaches[z.source];E[z.source]=B.getRenderableIds(!0).map(Z=>B.getTileByID(Z)).sort((Z,G)=>G.tileID.overscaledZ-Z.tileID.overscaledZ||(Z.tileID.isLessThan(G.tileID)?-1:1))}const R=this.crossTileSymbolIndex.addLayer(z,E[z.source],n.center.lng);x=x||R}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((y=y||this._layerOrderChanged||h===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(l.exported.now(),n.zoom))&&(this.pauseablePlacement=new we(n,this.terrain,this._order,y,s,h,f,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,E),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(l.exported.now()),S=!0),x&&this.pauseablePlacement.placement.setStale()),S||x)for(const C of this._order){const z=this._layers[C];z.type==="symbol"&&this.placement.updateLayerOpacities(z,E[z.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(l.exported.now())}_releaseSymbolFadeTiles(){for(const n in this.sourceCaches)this.sourceCaches[n].releaseSymbolFadeTiles()}getImages(n,s,h){this.imageManager.getImages(s.icons,h),this._updateTilesForChangedImages();const f=this.sourceCaches[s.source];f&&f.setDependencies(s.tileID.key,s.type,s.icons)}getGlyphs(n,s,h){this.glyphManager.getGlyphs(s.stacks,h)}getResource(n,s,h){return l.makeRequest(s,h)}}rn.getSourceType=function(d){return xt[d]},rn.setSourceType=function(d,n){xt[d]=n},rn.registerForPluginStateChange=l.registerForPluginStateChange;var Do="attribute vec2 a_pos;uniform mat4 u_matrix;varying vec2 v_texture_pos;varying float v_depth;void main() {v_texture_pos=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);v_depth=gl_Position.z/gl_Position.w;}";const aa={prelude:Kt(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_offset;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return (elevation+u_terrain_offset)*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Kt(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Kt(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Kt(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Kt("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Kt(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Kt(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Kt("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Kt("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Kt("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Kt(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Kt(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Kt(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Kt(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Kt(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Kt(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Kt(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Kt(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Kt(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Kt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Kt(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Kt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Kt(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Kt(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Kt(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Kt(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Kt("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Do),terrainDepth:Kt("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Do),terrainCoords:Kt("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Do)};function Kt(d,n){const s=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,h=n.match(/attribute ([\w]+) ([\w]+)/g),f=d.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),y=n.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),x=y?y.concat(f):f,S={};return{fragmentSource:d=d.replace(s,(E,C,z,R,B)=>(S[B]=!0,C==="define"?`
#ifndef HAS_UNIFORM_u_${B}
varying ${z} ${R} ${B};
#else
uniform ${z} ${R} u_${B};
#endif
`:`
#ifdef HAS_UNIFORM_u_${B}
    ${z} ${R} ${B} = u_${B};
#endif
`)),vertexSource:n=n.replace(s,(E,C,z,R,B)=>{const Z=R==="float"?"vec2":"vec4",G=B.match(/color/)?"color":Z;return S[B]?C==="define"?`
#ifndef HAS_UNIFORM_u_${B}
uniform lowp float u_${B}_t;
attribute ${z} ${Z} a_${B};
varying ${z} ${R} ${B};
#else
uniform ${z} ${R} u_${B};
#endif
`:G==="vec4"?`
#ifndef HAS_UNIFORM_u_${B}
    ${B} = a_${B};
#else
    ${z} ${R} ${B} = u_${B};
#endif
`:`
#ifndef HAS_UNIFORM_u_${B}
    ${B} = unpack_mix_${G}(a_${B}, u_${B}_t);
#else
    ${z} ${R} ${B} = u_${B};
#endif
`:C==="define"?`
#ifndef HAS_UNIFORM_u_${B}
uniform lowp float u_${B}_t;
attribute ${z} ${Z} a_${B};
#else
uniform ${z} ${R} u_${B};
#endif
`:G==="vec4"?`
#ifndef HAS_UNIFORM_u_${B}
    ${z} ${R} ${B} = a_${B};
#else
    ${z} ${R} ${B} = u_${B};
#endif
`:`
#ifndef HAS_UNIFORM_u_${B}
    ${z} ${R} ${B} = unpack_mix_${G}(a_${B}, u_${B}_t);
#else
    ${z} ${R} ${B} = u_${B};
#endif
`}),staticAttributes:h,staticUniforms:x}}class Rs{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(n,s,h,f,y,x,S,E,C){this.context=n;let z=this.boundPaintVertexBuffers.length!==f.length;for(let R=0;!z&&R<f.length;R++)this.boundPaintVertexBuffers[R]!==f[R]&&(z=!0);n.extVertexArrayObject&&this.vao&&this.boundProgram===s&&this.boundLayoutVertexBuffer===h&&!z&&this.boundIndexBuffer===y&&this.boundVertexOffset===x&&this.boundDynamicVertexBuffer===S&&this.boundDynamicVertexBuffer2===E&&this.boundDynamicVertexBuffer3===C?(n.bindVertexArrayOES.set(this.vao),S&&S.bind(),y&&y.dynamicDraw&&y.bind(),E&&E.bind(),C&&C.bind()):this.freshBind(s,h,f,y,x,S,E,C)}freshBind(n,s,h,f,y,x,S,E){let C;const z=n.numAttributes,R=this.context,B=R.gl;if(R.extVertexArrayObject)this.vao&&this.destroy(),this.vao=R.extVertexArrayObject.createVertexArrayOES(),R.bindVertexArrayOES.set(this.vao),C=0,this.boundProgram=n,this.boundLayoutVertexBuffer=s,this.boundPaintVertexBuffers=h,this.boundIndexBuffer=f,this.boundVertexOffset=y,this.boundDynamicVertexBuffer=x,this.boundDynamicVertexBuffer2=S,this.boundDynamicVertexBuffer3=E;else{C=R.currentNumAttributes||0;for(let Z=z;Z<C;Z++)B.disableVertexAttribArray(Z)}s.enableAttributes(B,n);for(const Z of h)Z.enableAttributes(B,n);x&&x.enableAttributes(B,n),S&&S.enableAttributes(B,n),E&&E.enableAttributes(B,n),s.bind(),s.setVertexAttribPointers(B,n,y);for(const Z of h)Z.bind(),Z.setVertexAttribPointers(B,n,y);x&&(x.bind(),x.setVertexAttribPointers(B,n,y)),f&&f.bind(),S&&(S.bind(),S.setVertexAttribPointers(B,n,y)),E&&(E.bind(),E.setVertexAttribPointers(B,n,y)),R.currentNumAttributes=z}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Ls(d){const n=[];for(let s=0;s<d.length;s++){if(d[s]===null)continue;const h=d[s].split(" ");n.push(h.pop())}return n}class Ml{constructor(n,s,h,f,y,x,S){const E=n.gl;this.program=E.createProgram();const C=Ls(h.staticAttributes),z=f?f.getBinderAttributes():[],R=C.concat(z),B=aa.prelude.staticUniforms?Ls(aa.prelude.staticUniforms):[],Z=h.staticUniforms?Ls(h.staticUniforms):[],G=f?f.getBinderUniforms():[],W=B.concat(Z).concat(G),ie=[];for(const Ie of W)ie.indexOf(Ie)<0&&ie.push(Ie);const ue=f?f.defines():[];x&&ue.push("#define OVERDRAW_INSPECTOR;"),S&&ue.push("#define TERRAIN3D;");const pe=ue.concat(aa.prelude.fragmentSource,h.fragmentSource).join(`
`),X=ue.concat(aa.prelude.vertexSource,h.vertexSource).join(`
`),ye=E.createShader(E.FRAGMENT_SHADER);if(E.isContextLost())return void(this.failedToCreate=!0);E.shaderSource(ye,pe),E.compileShader(ye),E.attachShader(this.program,ye);const me=E.createShader(E.VERTEX_SHADER);if(E.isContextLost())return void(this.failedToCreate=!0);E.shaderSource(me,X),E.compileShader(me),E.attachShader(this.program,me),this.attributes={};const Ce={};this.numAttributes=R.length;for(let Ie=0;Ie<this.numAttributes;Ie++)R[Ie]&&(E.bindAttribLocation(this.program,Ie,R[Ie]),this.attributes[R[Ie]]=Ie);E.linkProgram(this.program),E.deleteShader(me),E.deleteShader(ye);for(let Ie=0;Ie<ie.length;Ie++){const Be=ie[Ie];if(Be&&!Ce[Be]){const Ee=E.getUniformLocation(this.program,Be);Ee&&(Ce[Be]=Ee)}}this.fixedUniforms=y(n,Ce),this.terrainUniforms=((Ie,Be)=>({u_depth:new l.Uniform1i(Ie,Be.u_depth),u_terrain:new l.Uniform1i(Ie,Be.u_terrain),u_terrain_dim:new l.Uniform1f(Ie,Be.u_terrain_dim),u_terrain_matrix:new l.UniformMatrix4f(Ie,Be.u_terrain_matrix),u_terrain_unpack:new l.Uniform4f(Ie,Be.u_terrain_unpack),u_terrain_offset:new l.Uniform1f(Ie,Be.u_terrain_offset),u_terrain_exaggeration:new l.Uniform1f(Ie,Be.u_terrain_exaggeration)}))(n,Ce),this.binderUniforms=f?f.getUniforms(n,Ce):[]}draw(n,s,h,f,y,x,S,E,C,z,R,B,Z,G,W,ie,ue,pe){const X=n.gl;if(this.failedToCreate)return;if(n.program.set(this.program),n.setDepthMode(h),n.setStencilMode(f),n.setColorMode(y),n.setCullFace(x),E){n.activeTexture.set(X.TEXTURE2),X.bindTexture(X.TEXTURE_2D,E.depthTexture),n.activeTexture.set(X.TEXTURE3),X.bindTexture(X.TEXTURE_2D,E.texture);for(const me in this.terrainUniforms)this.terrainUniforms[me].set(E[me])}for(const me in this.fixedUniforms)this.fixedUniforms[me].set(S[me]);W&&W.setUniforms(n,this.binderUniforms,Z,{zoom:G});let ye=0;switch(s){case X.LINES:ye=2;break;case X.TRIANGLES:ye=3;break;case X.LINE_STRIP:ye=1}for(const me of B.get()){const Ce=me.vaos||(me.vaos={});(Ce[C]||(Ce[C]=new Rs)).bind(n,this,z,W?W.getPaintVertexBuffers():[],R,me.vertexOffset,ie,ue,pe),X.drawElements(s,me.primitiveLength*ye,X.UNSIGNED_SHORT,me.primitiveOffset*ye*2)}}}function Dl(d,n,s){const h=1/Mr(s,1,n.transform.tileZoom),f=Math.pow(2,s.tileID.overscaledZ),y=s.tileSize*Math.pow(2,n.transform.tileZoom)/f,x=y*(s.tileID.canonical.x+s.tileID.wrap*f),S=y*s.tileID.canonical.y;return{u_image:0,u_texsize:s.imageAtlasTexture.size,u_scale:[h,d.fromScale,d.toScale],u_fade:d.t,u_pixel_coord_upper:[x>>16,S>>16],u_pixel_coord_lower:[65535&x,65535&S]}}const Bs=(d,n,s,h)=>{const f=n.style.light,y=f.properties.get("position"),x=[y.x,y.y,y.z],S=l.create$1();f.properties.get("anchor")==="viewport"&&l.fromRotation(S,-n.transform.angle),l.transformMat3(x,x,S);const E=f.properties.get("color");return{u_matrix:d,u_lightpos:x,u_lightintensity:f.properties.get("intensity"),u_lightcolor:[E.r,E.g,E.b],u_vertical_gradient:+s,u_opacity:h}},Ku=(d,n,s,h,f,y,x)=>l.extend(Bs(d,n,s,h),Dl(y,n,x),{u_height_factor:-Math.pow(2,f.overscaledZ)/x.tileSize/8}),uo=d=>({u_matrix:d}),sa=(d,n,s,h)=>l.extend(uo(d),Dl(s,n,h)),Rl=(d,n)=>({u_matrix:d,u_world:n}),Ll=(d,n,s,h,f)=>l.extend(sa(d,n,s,h),{u_world:f}),Fs=(d,n,s,h)=>{const f=d.transform;let y,x;if(h.paint.get("circle-pitch-alignment")==="map"){const S=Mr(s,1,f.zoom);y=!0,x=[S,S]}else y=!1,x=f.pixelsToGLUnits;return{u_camera_to_center_distance:f.cameraToCenterDistance,u_scale_with_map:+(h.paint.get("circle-pitch-scale")==="map"),u_matrix:d.translatePosMatrix(n.posMatrix,s,h.paint.get("circle-translate"),h.paint.get("circle-translate-anchor")),u_pitch_with_map:+y,u_device_pixel_ratio:d.pixelRatio,u_extrude_scale:x}},co=(d,n,s)=>{const h=Mr(s,1,n.zoom),f=Math.pow(2,n.zoom-s.tileID.overscaledZ),y=s.tileID.overscaleFactor();return{u_matrix:d,u_camera_to_center_distance:n.cameraToCenterDistance,u_pixels_to_tile_units:h,u_extrude_scale:[n.pixelsToGLUnits[0]/(h*f),n.pixelsToGLUnits[1]/(h*f)],u_overscale_factor:y}},la=(d,n,s=1)=>({u_matrix:d,u_color:n,u_overlay:0,u_overlay_scale:s}),Ro=d=>({u_matrix:d}),ua=(d,n,s,h)=>({u_matrix:d,u_extrude_scale:Mr(n,1,s),u_intensity:h});function Ga(d,n){const s=Math.pow(2,n.canonical.z),h=n.canonical.y;return[new l.MercatorCoordinate(0,h/s).toLngLat().lat,new l.MercatorCoordinate(0,(h+1)/s).toLngLat().lat]}const Lo=(d,n,s,h)=>{const f=d.transform;return{u_matrix:ha(d,n,s,h),u_ratio:1/Mr(n,1,f.zoom),u_device_pixel_ratio:d.pixelRatio,u_units_to_pixels:[1/f.pixelsToGLUnits[0],1/f.pixelsToGLUnits[1]]}},Os=(d,n,s,h,f)=>l.extend(Lo(d,n,s,f),{u_image:0,u_image_height:h}),Bo=(d,n,s,h,f)=>{const y=d.transform,x=ur(n,y);return{u_matrix:ha(d,n,s,f),u_texsize:n.imageAtlasTexture.size,u_ratio:1/Mr(n,1,y.zoom),u_device_pixel_ratio:d.pixelRatio,u_image:0,u_scale:[x,h.fromScale,h.toScale],u_fade:h.t,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},ca=(d,n,s,h,f,y)=>{const x=d.lineAtlas,S=ur(n,d.transform),E=s.layout.get("line-cap")==="round",C=x.getDash(h.from,E),z=x.getDash(h.to,E),R=C.width*f.fromScale,B=z.width*f.toScale;return l.extend(Lo(d,n,s,y),{u_patternscale_a:[S/R,-C.height/2],u_patternscale_b:[S/B,-z.height/2],u_sdfgamma:x.width/(256*Math.min(R,B)*d.pixelRatio)/2,u_image:0,u_tex_y_a:C.y,u_tex_y_b:z.y,u_mix:f.t})};function ur(d,n){return 1/Mr(d,1,n.tileZoom)}function ha(d,n,s,h){return d.translatePosMatrix(h?h.posMatrix:n.tileID.posMatrix,n,s.paint.get("line-translate"),s.paint.get("line-translate-anchor"))}const da=(d,n,s,h,f)=>{return{u_matrix:d,u_tl_parent:n,u_scale_parent:s,u_buffer_scale:1,u_fade_t:h.mix,u_opacity:h.opacity*f.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:f.paint.get("raster-brightness-min"),u_brightness_high:f.paint.get("raster-brightness-max"),u_saturation_factor:(x=f.paint.get("raster-saturation"),x>0?1-1/(1.001-x):-x),u_contrast_factor:(y=f.paint.get("raster-contrast"),y>0?1/(1-y):1+y),u_spin_weights:Wa(f.paint.get("raster-hue-rotate"))};var y,x};function Wa(d){d*=Math.PI/180;const n=Math.sin(d),s=Math.cos(d);return[(2*s+1)/3,(-Math.sqrt(3)*n-s+1)/3,(Math.sqrt(3)*n-s+1)/3]}const pa=(d,n,s,h,f,y,x,S,E,C)=>{const z=f.transform;return{u_is_size_zoom_constant:+(d==="constant"||d==="source"),u_is_size_feature_constant:+(d==="constant"||d==="camera"),u_size_t:n?n.uSizeT:0,u_size:n?n.uSize:0,u_camera_to_center_distance:z.cameraToCenterDistance,u_pitch:z.pitch/360*2*Math.PI,u_rotate_symbol:+s,u_aspect_ratio:z.width/z.height,u_fade_change:f.options.fadeDuration?f.symbolFadeChange:1,u_matrix:y,u_label_plane_matrix:x,u_coord_matrix:S,u_is_text:+E,u_pitch_with_map:+h,u_texsize:C,u_texture:0}},Fo=(d,n,s,h,f,y,x,S,E,C,z)=>{const R=f.transform;return l.extend(pa(d,n,s,h,f,y,x,S,E,C),{u_gamma_scale:h?Math.cos(R._pitch)*R.cameraToCenterDistance:1,u_device_pixel_ratio:f.pixelRatio,u_is_halo:+z})},Bl=(d,n,s,h,f,y,x,S,E,C)=>l.extend(Fo(d,n,s,h,f,y,x,S,!0,E,!0),{u_texsize_icon:C,u_texture_icon:1}),Fl=(d,n,s)=>({u_matrix:d,u_opacity:n,u_color:s}),Ns=(d,n,s,h,f,y)=>l.extend(function(x,S,E,C){const z=E.imageManager.getPattern(x.from.toString()),R=E.imageManager.getPattern(x.to.toString()),{width:B,height:Z}=E.imageManager.getPixelSize(),G=Math.pow(2,C.tileID.overscaledZ),W=C.tileSize*Math.pow(2,E.transform.tileZoom)/G,ie=W*(C.tileID.canonical.x+C.tileID.wrap*G),ue=W*C.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:z.tl,u_pattern_br_a:z.br,u_pattern_tl_b:R.tl,u_pattern_br_b:R.br,u_texsize:[B,Z],u_mix:S.t,u_pattern_size_a:z.displaySize,u_pattern_size_b:R.displaySize,u_scale_a:S.fromScale,u_scale_b:S.toScale,u_tile_units_to_pixels:1/Mr(C,1,E.transform.tileZoom),u_pixel_coord_upper:[ie>>16,ue>>16],u_pixel_coord_lower:[65535&ie,65535&ue]}}(h,y,s,f),{u_matrix:d,u_opacity:n}),qa={fillExtrusion:(d,n)=>({u_matrix:new l.UniformMatrix4f(d,n.u_matrix),u_lightpos:new l.Uniform3f(d,n.u_lightpos),u_lightintensity:new l.Uniform1f(d,n.u_lightintensity),u_lightcolor:new l.Uniform3f(d,n.u_lightcolor),u_vertical_gradient:new l.Uniform1f(d,n.u_vertical_gradient),u_opacity:new l.Uniform1f(d,n.u_opacity)}),fillExtrusionPattern:(d,n)=>({u_matrix:new l.UniformMatrix4f(d,n.u_matrix),u_lightpos:new l.Uniform3f(d,n.u_lightpos),u_lightintensity:new l.Uniform1f(d,n.u_lightintensity),u_lightcolor:new l.Uniform3f(d,n.u_lightcolor),u_vertical_gradient:new l.Uniform1f(d,n.u_vertical_gradient),u_height_factor:new l.Uniform1f(d,n.u_height_factor),u_image:new l.Uniform1i(d,n.u_image),u_texsize:new l.Uniform2f(d,n.u_texsize),u_pixel_coord_upper:new l.Uniform2f(d,n.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(d,n.u_pixel_coord_lower),u_scale:new l.Uniform3f(d,n.u_scale),u_fade:new l.Uniform1f(d,n.u_fade),u_opacity:new l.Uniform1f(d,n.u_opacity)}),fill:(d,n)=>({u_matrix:new l.UniformMatrix4f(d,n.u_matrix)}),fillPattern:(d,n)=>({u_matrix:new l.UniformMatrix4f(d,n.u_matrix),u_image:new l.Uniform1i(d,n.u_image),u_texsize:new l.Uniform2f(d,n.u_texsize),u_pixel_coord_upper:new l.Uniform2f(d,n.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(d,n.u_pixel_coord_lower),u_scale:new l.Uniform3f(d,n.u_scale),u_fade:new l.Uniform1f(d,n.u_fade)}),fillOutline:(d,n)=>({u_matrix:new l.UniformMatrix4f(d,n.u_matrix),u_world:new l.Uniform2f(d,n.u_world)}),fillOutlinePattern:(d,n)=>({u_matrix:new l.UniformMatrix4f(d,n.u_matrix),u_world:new l.Uniform2f(d,n.u_world),u_image:new l.Uniform1i(d,n.u_image),u_texsize:new l.Uniform2f(d,n.u_texsize),u_pixel_coord_upper:new l.Uniform2f(d,n.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(d,n.u_pixel_coord_lower),u_scale:new l.Uniform3f(d,n.u_scale),u_fade:new l.Uniform1f(d,n.u_fade)}),circle:(d,n)=>({u_camera_to_center_distance:new l.Uniform1f(d,n.u_camera_to_center_distance),u_scale_with_map:new l.Uniform1i(d,n.u_scale_with_map),u_pitch_with_map:new l.Uniform1i(d,n.u_pitch_with_map),u_extrude_scale:new l.Uniform2f(d,n.u_extrude_scale),u_device_pixel_ratio:new l.Uniform1f(d,n.u_device_pixel_ratio),u_matrix:new l.UniformMatrix4f(d,n.u_matrix)}),collisionBox:(d,n)=>({u_matrix:new l.UniformMatrix4f(d,n.u_matrix),u_camera_to_center_distance:new l.Uniform1f(d,n.u_camera_to_center_distance),u_pixels_to_tile_units:new l.Uniform1f(d,n.u_pixels_to_tile_units),u_extrude_scale:new l.Uniform2f(d,n.u_extrude_scale),u_overscale_factor:new l.Uniform1f(d,n.u_overscale_factor)}),collisionCircle:(d,n)=>({u_matrix:new l.UniformMatrix4f(d,n.u_matrix),u_inv_matrix:new l.UniformMatrix4f(d,n.u_inv_matrix),u_camera_to_center_distance:new l.Uniform1f(d,n.u_camera_to_center_distance),u_viewport_size:new l.Uniform2f(d,n.u_viewport_size)}),debug:(d,n)=>({u_color:new l.UniformColor(d,n.u_color),u_matrix:new l.UniformMatrix4f(d,n.u_matrix),u_overlay:new l.Uniform1i(d,n.u_overlay),u_overlay_scale:new l.Uniform1f(d,n.u_overlay_scale)}),clippingMask:(d,n)=>({u_matrix:new l.UniformMatrix4f(d,n.u_matrix)}),heatmap:(d,n)=>({u_extrude_scale:new l.Uniform1f(d,n.u_extrude_scale),u_intensity:new l.Uniform1f(d,n.u_intensity),u_matrix:new l.UniformMatrix4f(d,n.u_matrix)}),heatmapTexture:(d,n)=>({u_matrix:new l.UniformMatrix4f(d,n.u_matrix),u_world:new l.Uniform2f(d,n.u_world),u_image:new l.Uniform1i(d,n.u_image),u_color_ramp:new l.Uniform1i(d,n.u_color_ramp),u_opacity:new l.Uniform1f(d,n.u_opacity)}),hillshade:(d,n)=>({u_matrix:new l.UniformMatrix4f(d,n.u_matrix),u_image:new l.Uniform1i(d,n.u_image),u_latrange:new l.Uniform2f(d,n.u_latrange),u_light:new l.Uniform2f(d,n.u_light),u_shadow:new l.UniformColor(d,n.u_shadow),u_highlight:new l.UniformColor(d,n.u_highlight),u_accent:new l.UniformColor(d,n.u_accent)}),hillshadePrepare:(d,n)=>({u_matrix:new l.UniformMatrix4f(d,n.u_matrix),u_image:new l.Uniform1i(d,n.u_image),u_dimension:new l.Uniform2f(d,n.u_dimension),u_zoom:new l.Uniform1f(d,n.u_zoom),u_unpack:new l.Uniform4f(d,n.u_unpack)}),line:(d,n)=>({u_matrix:new l.UniformMatrix4f(d,n.u_matrix),u_ratio:new l.Uniform1f(d,n.u_ratio),u_device_pixel_ratio:new l.Uniform1f(d,n.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(d,n.u_units_to_pixels)}),lineGradient:(d,n)=>({u_matrix:new l.UniformMatrix4f(d,n.u_matrix),u_ratio:new l.Uniform1f(d,n.u_ratio),u_device_pixel_ratio:new l.Uniform1f(d,n.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(d,n.u_units_to_pixels),u_image:new l.Uniform1i(d,n.u_image),u_image_height:new l.Uniform1f(d,n.u_image_height)}),linePattern:(d,n)=>({u_matrix:new l.UniformMatrix4f(d,n.u_matrix),u_texsize:new l.Uniform2f(d,n.u_texsize),u_ratio:new l.Uniform1f(d,n.u_ratio),u_device_pixel_ratio:new l.Uniform1f(d,n.u_device_pixel_ratio),u_image:new l.Uniform1i(d,n.u_image),u_units_to_pixels:new l.Uniform2f(d,n.u_units_to_pixels),u_scale:new l.Uniform3f(d,n.u_scale),u_fade:new l.Uniform1f(d,n.u_fade)}),lineSDF:(d,n)=>({u_matrix:new l.UniformMatrix4f(d,n.u_matrix),u_ratio:new l.Uniform1f(d,n.u_ratio),u_device_pixel_ratio:new l.Uniform1f(d,n.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(d,n.u_units_to_pixels),u_patternscale_a:new l.Uniform2f(d,n.u_patternscale_a),u_patternscale_b:new l.Uniform2f(d,n.u_patternscale_b),u_sdfgamma:new l.Uniform1f(d,n.u_sdfgamma),u_image:new l.Uniform1i(d,n.u_image),u_tex_y_a:new l.Uniform1f(d,n.u_tex_y_a),u_tex_y_b:new l.Uniform1f(d,n.u_tex_y_b),u_mix:new l.Uniform1f(d,n.u_mix)}),raster:(d,n)=>({u_matrix:new l.UniformMatrix4f(d,n.u_matrix),u_tl_parent:new l.Uniform2f(d,n.u_tl_parent),u_scale_parent:new l.Uniform1f(d,n.u_scale_parent),u_buffer_scale:new l.Uniform1f(d,n.u_buffer_scale),u_fade_t:new l.Uniform1f(d,n.u_fade_t),u_opacity:new l.Uniform1f(d,n.u_opacity),u_image0:new l.Uniform1i(d,n.u_image0),u_image1:new l.Uniform1i(d,n.u_image1),u_brightness_low:new l.Uniform1f(d,n.u_brightness_low),u_brightness_high:new l.Uniform1f(d,n.u_brightness_high),u_saturation_factor:new l.Uniform1f(d,n.u_saturation_factor),u_contrast_factor:new l.Uniform1f(d,n.u_contrast_factor),u_spin_weights:new l.Uniform3f(d,n.u_spin_weights)}),symbolIcon:(d,n)=>({u_is_size_zoom_constant:new l.Uniform1i(d,n.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(d,n.u_is_size_feature_constant),u_size_t:new l.Uniform1f(d,n.u_size_t),u_size:new l.Uniform1f(d,n.u_size),u_camera_to_center_distance:new l.Uniform1f(d,n.u_camera_to_center_distance),u_pitch:new l.Uniform1f(d,n.u_pitch),u_rotate_symbol:new l.Uniform1i(d,n.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(d,n.u_aspect_ratio),u_fade_change:new l.Uniform1f(d,n.u_fade_change),u_matrix:new l.UniformMatrix4f(d,n.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(d,n.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(d,n.u_coord_matrix),u_is_text:new l.Uniform1i(d,n.u_is_text),u_pitch_with_map:new l.Uniform1i(d,n.u_pitch_with_map),u_texsize:new l.Uniform2f(d,n.u_texsize),u_texture:new l.Uniform1i(d,n.u_texture)}),symbolSDF:(d,n)=>({u_is_size_zoom_constant:new l.Uniform1i(d,n.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(d,n.u_is_size_feature_constant),u_size_t:new l.Uniform1f(d,n.u_size_t),u_size:new l.Uniform1f(d,n.u_size),u_camera_to_center_distance:new l.Uniform1f(d,n.u_camera_to_center_distance),u_pitch:new l.Uniform1f(d,n.u_pitch),u_rotate_symbol:new l.Uniform1i(d,n.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(d,n.u_aspect_ratio),u_fade_change:new l.Uniform1f(d,n.u_fade_change),u_matrix:new l.UniformMatrix4f(d,n.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(d,n.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(d,n.u_coord_matrix),u_is_text:new l.Uniform1i(d,n.u_is_text),u_pitch_with_map:new l.Uniform1i(d,n.u_pitch_with_map),u_texsize:new l.Uniform2f(d,n.u_texsize),u_texture:new l.Uniform1i(d,n.u_texture),u_gamma_scale:new l.Uniform1f(d,n.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(d,n.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(d,n.u_is_halo)}),symbolTextAndIcon:(d,n)=>({u_is_size_zoom_constant:new l.Uniform1i(d,n.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(d,n.u_is_size_feature_constant),u_size_t:new l.Uniform1f(d,n.u_size_t),u_size:new l.Uniform1f(d,n.u_size),u_camera_to_center_distance:new l.Uniform1f(d,n.u_camera_to_center_distance),u_pitch:new l.Uniform1f(d,n.u_pitch),u_rotate_symbol:new l.Uniform1i(d,n.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(d,n.u_aspect_ratio),u_fade_change:new l.Uniform1f(d,n.u_fade_change),u_matrix:new l.UniformMatrix4f(d,n.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(d,n.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(d,n.u_coord_matrix),u_is_text:new l.Uniform1i(d,n.u_is_text),u_pitch_with_map:new l.Uniform1i(d,n.u_pitch_with_map),u_texsize:new l.Uniform2f(d,n.u_texsize),u_texsize_icon:new l.Uniform2f(d,n.u_texsize_icon),u_texture:new l.Uniform1i(d,n.u_texture),u_texture_icon:new l.Uniform1i(d,n.u_texture_icon),u_gamma_scale:new l.Uniform1f(d,n.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(d,n.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(d,n.u_is_halo)}),background:(d,n)=>({u_matrix:new l.UniformMatrix4f(d,n.u_matrix),u_opacity:new l.Uniform1f(d,n.u_opacity),u_color:new l.UniformColor(d,n.u_color)}),backgroundPattern:(d,n)=>({u_matrix:new l.UniformMatrix4f(d,n.u_matrix),u_opacity:new l.Uniform1f(d,n.u_opacity),u_image:new l.Uniform1i(d,n.u_image),u_pattern_tl_a:new l.Uniform2f(d,n.u_pattern_tl_a),u_pattern_br_a:new l.Uniform2f(d,n.u_pattern_br_a),u_pattern_tl_b:new l.Uniform2f(d,n.u_pattern_tl_b),u_pattern_br_b:new l.Uniform2f(d,n.u_pattern_br_b),u_texsize:new l.Uniform2f(d,n.u_texsize),u_mix:new l.Uniform1f(d,n.u_mix),u_pattern_size_a:new l.Uniform2f(d,n.u_pattern_size_a),u_pattern_size_b:new l.Uniform2f(d,n.u_pattern_size_b),u_scale_a:new l.Uniform1f(d,n.u_scale_a),u_scale_b:new l.Uniform1f(d,n.u_scale_b),u_pixel_coord_upper:new l.Uniform2f(d,n.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(d,n.u_pixel_coord_lower),u_tile_units_to_pixels:new l.Uniform1f(d,n.u_tile_units_to_pixels)}),terrain:(d,n)=>({u_matrix:new l.UniformMatrix4f(d,n.u_matrix),u_texture:new l.Uniform1i(d,n.u_texture)}),terrainDepth:(d,n)=>({u_matrix:new l.UniformMatrix4f(d,n.u_matrix)}),terrainCoords:(d,n)=>({u_matrix:new l.UniformMatrix4f(d,n.u_matrix),u_texture:new l.Uniform1i(d,n.u_texture),u_terrain_coords_id:new l.Uniform1f(d,n.u_terrain_coords_id)})};class Ai{constructor(n,s,h){this.context=n;const f=n.gl;this.buffer=f.createBuffer(),this.dynamicDraw=Boolean(h),this.context.unbindVAO(),n.bindElementBuffer.set(this.buffer),f.bufferData(f.ELEMENT_ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?f.DYNAMIC_DRAW:f.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(n){const s=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),s.bufferSubData(s.ELEMENT_ARRAY_BUFFER,0,n.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ho={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class $s{constructor(n,s,h,f){this.length=s.length,this.attributes=h,this.itemSize=s.bytesPerElement,this.dynamicDraw=f,this.context=n;const y=n.gl;this.buffer=y.createBuffer(),n.bindVertexBuffer.set(this.buffer),y.bufferData(y.ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(n){if(n.length!==this.length)throw new Error(`Length of new data is ${n.length}, which doesn't match current length of ${this.length}`);const s=this.context.gl;this.bind(),s.bufferSubData(s.ARRAY_BUFFER,0,n.arrayBuffer)}enableAttributes(n,s){for(let h=0;h<this.attributes.length;h++){const f=s.attributes[this.attributes[h].name];f!==void 0&&n.enableVertexAttribArray(f)}}setVertexAttribPointers(n,s,h){for(let f=0;f<this.attributes.length;f++){const y=this.attributes[f],x=s.attributes[y.name];x!==void 0&&n.vertexAttribPointer(x,y.components,n[ho[y.type]],!1,this.itemSize,y.offset+this.itemSize*(h||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class $t{constructor(n){this.gl=n.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(n){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Ol extends $t{getDefault(){return l.Color.transparent}set(n){const s=this.current;(n.r!==s.r||n.g!==s.g||n.b!==s.b||n.a!==s.a||this.dirty)&&(this.gl.clearColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class Nl extends $t{getDefault(){return 1}set(n){(n!==this.current||this.dirty)&&(this.gl.clearDepth(n),this.current=n,this.dirty=!1)}}class fa extends $t{getDefault(){return 0}set(n){(n!==this.current||this.dirty)&&(this.gl.clearStencil(n),this.current=n,this.dirty=!1)}}class ma extends $t{getDefault(){return[!0,!0,!0,!0]}set(n){const s=this.current;(n[0]!==s[0]||n[1]!==s[1]||n[2]!==s[2]||n[3]!==s[3]||this.dirty)&&(this.gl.colorMask(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class Us extends $t{getDefault(){return!0}set(n){(n!==this.current||this.dirty)&&(this.gl.depthMask(n),this.current=n,this.dirty=!1)}}class Rn extends $t{getDefault(){return 255}set(n){(n!==this.current||this.dirty)&&(this.gl.stencilMask(n),this.current=n,this.dirty=!1)}}class q extends $t{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(n){const s=this.current;(n.func!==s.func||n.ref!==s.ref||n.mask!==s.mask||this.dirty)&&(this.gl.stencilFunc(n.func,n.ref,n.mask),this.current=n,this.dirty=!1)}}class le extends $t{getDefault(){const n=this.gl;return[n.KEEP,n.KEEP,n.KEEP]}set(n){const s=this.current;(n[0]!==s[0]||n[1]!==s[1]||n[2]!==s[2]||this.dirty)&&(this.gl.stencilOp(n[0],n[1],n[2]),this.current=n,this.dirty=!1)}}class xe extends $t{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;n?s.enable(s.STENCIL_TEST):s.disable(s.STENCIL_TEST),this.current=n,this.dirty=!1}}class at extends $t{getDefault(){return[0,1]}set(n){const s=this.current;(n[0]!==s[0]||n[1]!==s[1]||this.dirty)&&(this.gl.depthRange(n[0],n[1]),this.current=n,this.dirty=!1)}}class Ft extends $t{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;n?s.enable(s.DEPTH_TEST):s.disable(s.DEPTH_TEST),this.current=n,this.dirty=!1}}class qt extends $t{getDefault(){return this.gl.LESS}set(n){(n!==this.current||this.dirty)&&(this.gl.depthFunc(n),this.current=n,this.dirty=!1)}}class sr extends $t{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;n?s.enable(s.BLEND):s.disable(s.BLEND),this.current=n,this.dirty=!1}}class Mt extends $t{getDefault(){const n=this.gl;return[n.ONE,n.ZERO]}set(n){const s=this.current;(n[0]!==s[0]||n[1]!==s[1]||this.dirty)&&(this.gl.blendFunc(n[0],n[1]),this.current=n,this.dirty=!1)}}class rr extends $t{getDefault(){return l.Color.transparent}set(n){const s=this.current;(n.r!==s.r||n.g!==s.g||n.b!==s.b||n.a!==s.a||this.dirty)&&(this.gl.blendColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class Ln extends $t{getDefault(){return this.gl.FUNC_ADD}set(n){(n!==this.current||this.dirty)&&(this.gl.blendEquation(n),this.current=n,this.dirty=!1)}}class yn extends $t{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;n?s.enable(s.CULL_FACE):s.disable(s.CULL_FACE),this.current=n,this.dirty=!1}}class mi extends $t{getDefault(){return this.gl.BACK}set(n){(n!==this.current||this.dirty)&&(this.gl.cullFace(n),this.current=n,this.dirty=!1)}}class Vs extends $t{getDefault(){return this.gl.CCW}set(n){(n!==this.current||this.dirty)&&(this.gl.frontFace(n),this.current=n,this.dirty=!1)}}class js extends $t{getDefault(){return null}set(n){(n!==this.current||this.dirty)&&(this.gl.useProgram(n),this.current=n,this.dirty=!1)}}class $l extends $t{getDefault(){return this.gl.TEXTURE0}set(n){(n!==this.current||this.dirty)&&(this.gl.activeTexture(n),this.current=n,this.dirty=!1)}}class Vf extends $t{getDefault(){const n=this.gl;return[0,0,n.drawingBufferWidth,n.drawingBufferHeight]}set(n){const s=this.current;(n[0]!==s[0]||n[1]!==s[1]||n[2]!==s[2]||n[3]!==s[3]||this.dirty)&&(this.gl.viewport(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class jf extends $t{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;s.bindFramebuffer(s.FRAMEBUFFER,n),this.current=n,this.dirty=!1}}class Gf extends $t{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;s.bindRenderbuffer(s.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class Yu extends $t{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;s.bindTexture(s.TEXTURE_2D,n),this.current=n,this.dirty=!1}}class Ul extends $t{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;s.bindBuffer(s.ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class Ju extends $t{getDefault(){return null}set(n){const s=this.gl;s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class Qu extends $t{constructor(n){super(n),this.vao=n.extVertexArrayObject}getDefault(){return null}set(n){this.vao&&(n!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(n),this.current=n,this.dirty=!1)}}class Za extends $t{getDefault(){return 4}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;s.pixelStorei(s.UNPACK_ALIGNMENT,n),this.current=n,this.dirty=!1}}class Zh extends $t{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n),this.current=n,this.dirty=!1}}class Hh extends $t{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,n),this.current=n,this.dirty=!1}}class Vl extends $t{constructor(n,s){super(n),this.context=n,this.parent=s}getDefault(){return null}}class ga extends Vl{setDirty(){this.dirty=!0}set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const s=this.gl;s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,n,0),this.current=n,this.dirty=!1}}class Xh extends Vl{set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const s=this.gl;s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class Ha{constructor(n,s,h,f){this.context=n,this.width=s,this.height=h;const y=n.gl,x=this.framebuffer=y.createFramebuffer();if(this.colorAttachment=new ga(n,x),f&&(this.depthAttachment=new Xh(n,x)),y.checkFramebufferStatus(y.FRAMEBUFFER)!==y.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const n=this.context.gl,s=this.colorAttachment.get();if(s&&n.deleteTexture(s),this.depthAttachment){const h=this.depthAttachment.get();h&&n.deleteRenderbuffer(h)}n.deleteFramebuffer(this.framebuffer)}}class fr{constructor(n,s,h){this.blendFunction=n,this.blendColor=s,this.mask=h}}fr.Replace=[1,0],fr.disabled=new fr(fr.Replace,l.Color.transparent,[!1,!1,!1,!1]),fr.unblended=new fr(fr.Replace,l.Color.transparent,[!0,!0,!0,!0]),fr.alphaBlended=new fr([1,771],l.Color.transparent,[!0,!0,!0,!0]);class Kh{constructor(n){this.gl=n,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Ol(this),this.clearDepth=new Nl(this),this.clearStencil=new fa(this),this.colorMask=new ma(this),this.depthMask=new Us(this),this.stencilMask=new Rn(this),this.stencilFunc=new q(this),this.stencilOp=new le(this),this.stencilTest=new xe(this),this.depthRange=new at(this),this.depthTest=new Ft(this),this.depthFunc=new qt(this),this.blend=new sr(this),this.blendFunc=new Mt(this),this.blendColor=new rr(this),this.blendEquation=new Ln(this),this.cullFace=new yn(this),this.cullFaceSide=new mi(this),this.frontFace=new Vs(this),this.program=new js(this),this.activeTexture=new $l(this),this.viewport=new Vf(this),this.bindFramebuffer=new jf(this),this.bindRenderbuffer=new Gf(this),this.bindTexture=new Yu(this),this.bindVertexBuffer=new Ul(this),this.bindElementBuffer=new Ju(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Qu(this),this.pixelStoreUnpack=new Za(this),this.pixelStoreUnpackPremultiplyAlpha=new Zh(this),this.pixelStoreUnpackFlipY=new Hh(this),this.extTextureFilterAnisotropic=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=n.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=n.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(n.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=n.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=n.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(n,s){return new Ai(this,n,s)}createVertexBuffer(n,s,h){return new $s(this,n,s,h)}createRenderbuffer(n,s,h){const f=this.gl,y=f.createRenderbuffer();return this.bindRenderbuffer.set(y),f.renderbufferStorage(f.RENDERBUFFER,n,s,h),this.bindRenderbuffer.set(null),y}createFramebuffer(n,s,h){return new Ha(this,n,s,h)}clear({color:n,depth:s}){const h=this.gl;let f=0;n&&(f|=h.COLOR_BUFFER_BIT,this.clearColor.set(n),this.colorMask.set([!0,!0,!0,!0])),s!==void 0&&(f|=h.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(s),this.depthMask.set(!0)),h.clear(f)}setCullFace(n){n.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(n.mode),this.frontFace.set(n.frontFace))}setDepthMode(n){n.func!==this.gl.ALWAYS||n.mask?(this.depthTest.set(!0),this.depthFunc.set(n.func),this.depthMask.set(n.mask),this.depthRange.set(n.range)):this.depthTest.set(!1)}setStencilMode(n){n.test.func!==this.gl.ALWAYS||n.mask?(this.stencilTest.set(!0),this.stencilMask.set(n.mask),this.stencilOp.set([n.fail,n.depthFail,n.pass]),this.stencilFunc.set({func:n.test.func,ref:n.ref,mask:n.test.mask})):this.stencilTest.set(!1)}setColorMode(n){ne(n.blendFunction,fr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Dt{constructor(n,s,h){this.func=n,this.mask=s,this.range=h}}Dt.ReadOnly=!1,Dt.ReadWrite=!0,Dt.disabled=new Dt(519,Dt.ReadOnly,[0,1]);const jt=7680;class cr{constructor(n,s,h,f,y,x){this.test=n,this.ref=s,this.mask=h,this.fail=f,this.depthFail=y,this.pass=x}}cr.disabled=new cr({func:519,mask:0},0,0,jt,jt,jt);class yr{constructor(n,s,h){this.enable=n,this.mode=s,this.frontFace=h}}let Gs;function Xa(d,n,s,h,f,y,x){const S=d.context,E=S.gl,C=d.useProgram("collisionBox"),z=[];let R=0,B=0;for(let X=0;X<h.length;X++){const ye=h[X],me=n.getTile(ye),Ce=me.getBucket(s);if(!Ce)continue;let Ie=ye.posMatrix;f[0]===0&&f[1]===0||(Ie=d.translatePosMatrix(ye.posMatrix,me,f,y));const Be=x?Ce.textCollisionBox:Ce.iconCollisionBox,Ee=Ce.collisionCircleArray;if(Ee.length>0){const Qe=l.create(),je=Ie;l.mul(Qe,Ce.placementInvProjMatrix,d.transform.glCoordMatrix),l.mul(Qe,Qe,Ce.placementViewportMatrix),z.push({circleArray:Ee,circleOffset:B,transform:je,invTransform:Qe,coord:ye}),R+=Ee.length/4,B=R}Be&&C.draw(S,E.LINES,Dt.disabled,cr.disabled,d.colorModeForRenderPass(),yr.disabled,co(Ie,d.transform,me),d.style.terrain&&d.style.terrain.getTerrainData(ye),s.id,Be.layoutVertexBuffer,Be.indexBuffer,Be.segments,null,d.transform.zoom,null,null,Be.collisionVertexBuffer)}if(!x||!z.length)return;const Z=d.useProgram("collisionCircle"),G=new l.CollisionCircleLayoutArray;G.resize(4*R),G._trim();let W=0;for(const X of z)for(let ye=0;ye<X.circleArray.length/4;ye++){const me=4*ye,Ce=X.circleArray[me+0],Ie=X.circleArray[me+1],Be=X.circleArray[me+2],Ee=X.circleArray[me+3];G.emplace(W++,Ce,Ie,Be,Ee,0),G.emplace(W++,Ce,Ie,Be,Ee,1),G.emplace(W++,Ce,Ie,Be,Ee,2),G.emplace(W++,Ce,Ie,Be,Ee,3)}(!Gs||Gs.length<2*R)&&(Gs=function(X){const ye=2*X,me=new l.QuadTriangleArray;me.resize(ye),me._trim();for(let Ce=0;Ce<ye;Ce++){const Ie=6*Ce;me.uint16[Ie+0]=4*Ce+0,me.uint16[Ie+1]=4*Ce+1,me.uint16[Ie+2]=4*Ce+2,me.uint16[Ie+3]=4*Ce+2,me.uint16[Ie+4]=4*Ce+3,me.uint16[Ie+5]=4*Ce+0}return me}(R));const ie=S.createIndexBuffer(Gs,!0),ue=S.createVertexBuffer(G,l.collisionCircleLayout.members,!0);for(const X of z){const ye={u_matrix:X.transform,u_inv_matrix:X.invTransform,u_camera_to_center_distance:(pe=d.transform).cameraToCenterDistance,u_viewport_size:[pe.width,pe.height]};Z.draw(S,E.TRIANGLES,Dt.disabled,cr.disabled,d.colorModeForRenderPass(),yr.disabled,ye,d.style.terrain&&d.style.terrain.getTerrainData(X.coord),s.id,ue,ie,l.SegmentVector.simpleSegment(0,2*X.circleOffset,X.circleArray.length,X.circleArray.length/2),null,d.transform.zoom,null,null,null)}var pe;ue.destroy(),ie.destroy()}yr.disabled=new yr(!1,1029,2305),yr.backCCW=new yr(!0,1029,2305);const Wf=l.identity(new Float32Array(16));function qf(d,n,s,h,f,y){const{horizontalAlign:x,verticalAlign:S}=l.getAnchorAlignment(d),E=-(x-.5)*n,C=-(S-.5)*s,z=l.evaluateVariableOffset(d,h);return new l.pointGeometry((E/f+z[0])*y,(C/f+z[1])*y)}function Yh(d,n,s,h,f,y,x,S,E,C,z){const R=d.text.placedSymbolArray,B=d.text.dynamicLayoutVertexArray,Z=d.icon.dynamicLayoutVertexArray,G={};B.clear();for(let W=0;W<R.length;W++){const ie=R.get(W),ue=d.allowVerticalPlacement&&!ie.placedOrientation,pe=ie.hidden||!ie.crossTileID||ue?null:h[ie.crossTileID];if(pe){const X=new l.pointGeometry(ie.anchorX,ie.anchorY),ye=Pt(X,s?x:y,z),me=Pn(f.cameraToCenterDistance,ye.signedDistanceFromCamera);let Ce=l.evaluateSizeForFeature(d.textSizeData,E,ie)*me/l.ONE_EM;s&&(Ce*=d.tilePixelRatio/S);const{width:Ie,height:Be,anchor:Ee,textOffset:Qe,textBoxScale:je}=pe,et=qf(Ee,Ie,Be,Qe,je,Ce),St=s?Pt(X.add(et),y,z).point:ye.point.add(n?et.rotate(-f.angle):et),Ct=d.allowVerticalPlacement&&ie.placedOrientation===l.WritingMode.vertical?Math.PI/2:0;for(let ft=0;ft<ie.numGlyphs;ft++)l.addDynamicAttributes(B,St,Ct);C&&ie.associatedIconIndex>=0&&(G[ie.associatedIconIndex]={shiftedAnchor:St,angle:Ct})}else _t(ie.numGlyphs,B)}if(C){Z.clear();const W=d.icon.placedSymbolArray;for(let ie=0;ie<W.length;ie++){const ue=W.get(ie);if(ue.hidden)_t(ue.numGlyphs,Z);else{const pe=G[ie];if(pe)for(let X=0;X<ue.numGlyphs;X++)l.addDynamicAttributes(Z,pe.shiftedAnchor,pe.angle);else _t(ue.numGlyphs,Z)}}d.icon.dynamicLayoutVertexBuffer.updateData(Z)}d.text.dynamicLayoutVertexBuffer.updateData(B)}function Zf(d,n,s){return s.iconsInText&&n?"symbolTextAndIcon":d?"symbolSDF":"symbolIcon"}function jl(d,n,s,h,f,y,x,S,E,C,z,R){const B=d.context,Z=B.gl,G=d.transform,W=S==="map",ie=E==="map",ue=S!=="viewport"&&s.layout.get("symbol-placement")!=="point",pe=W&&!ie&&!ue,X=!s.layout.get("symbol-sort-key").isConstant();let ye=!1;const me=d.depthModeForSublayer(0,Dt.ReadOnly),Ce=s.layout.get("text-variable-anchor"),Ie=[];for(const Be of h){const Ee=n.getTile(Be),Qe=Ee.getBucket(s);if(!Qe)continue;const je=f?Qe.text:Qe.icon;if(!je||!je.segments.get().length)continue;const et=je.programConfigurations.get(s.id),St=f||Qe.sdfIcons,Ct=f?Qe.textSizeData:Qe.iconSizeData,ft=ie||G.pitch!==0,Yt=d.useProgram(Zf(St,f,Qe),et),Jt=l.evaluateSizeForZoom(Ct,G.zoom),Ot=d.style.terrain&&d.style.terrain.getTerrainData(Be);let Ut,tr,nn,Xi,Pi=[0,0],Ki=null;if(f){if(tr=Ee.glyphAtlasTexture,nn=Z.LINEAR,Ut=Ee.glyphAtlasTexture.size,Qe.iconsInText){Pi=Ee.imageAtlasTexture.size,Ki=Ee.imageAtlasTexture;const _i=Ct.kind==="composite"||Ct.kind==="camera";Xi=ft||d.options.rotating||d.options.zooming||_i?Z.LINEAR:Z.NEAREST}}else{const _i=s.layout.get("icon-size").constantOr(0)!==1||Qe.iconsNeedLinear;tr=Ee.imageAtlasTexture,nn=St||d.options.rotating||d.options.zooming||_i||ft?Z.LINEAR:Z.NEAREST,Ut=Ee.imageAtlasTexture.size}const Go=Mr(Ee,1,d.transform.zoom),yi=qi(Be.posMatrix,ie,W,d.transform,Go),qn=Gn(Be.posMatrix,ie,W,d.transform,Go),mo=Ce&&Qe.hasTextData(),Yl=s.layout.get("icon-text-fit")!=="none"&&mo&&Qe.hasIconData();if(ue){const _i=d.style.terrain?(fc,ts)=>d.style.terrain.getElevation(Be,fc,ts):null,xa=s.layout.get("text-rotation-alignment")==="map";Dn(Qe,Be.posMatrix,d,f,yi,qn,ie,C,xa,_i)}const Kr=d.translatePosMatrix(Be.posMatrix,Ee,y,x),At=ue||f&&Ce||Yl?Wf:yi,Zt=d.translatePosMatrix(qn,Ee,y,x,!0),on=St&&s.paint.get(f?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let an;an=St?Qe.iconsInText?Bl(Ct.kind,Jt,pe,ie,d,Kr,At,Zt,Ut,Pi):Fo(Ct.kind,Jt,pe,ie,d,Kr,At,Zt,f,Ut,!0):pa(Ct.kind,Jt,pe,ie,d,Kr,At,Zt,f,Ut);const vr={program:Yt,buffers:je,uniformValues:an,atlasTexture:tr,atlasTextureIcon:Ki,atlasInterpolation:nn,atlasInterpolationIcon:Xi,isSDF:St,hasHalo:on};if(X&&Qe.canOverlap){ye=!0;const _i=je.segments.get();for(const xa of _i)Ie.push({segments:new l.SegmentVector([xa]),sortKey:xa.sortKey,state:vr,terrainData:Ot})}else Ie.push({segments:je.segments,sortKey:0,state:vr,terrainData:Ot})}ye&&Ie.sort((Be,Ee)=>Be.sortKey-Ee.sortKey);for(const Be of Ie){const Ee=Be.state;if(B.activeTexture.set(Z.TEXTURE0),Ee.atlasTexture.bind(Ee.atlasInterpolation,Z.CLAMP_TO_EDGE),Ee.atlasTextureIcon&&(B.activeTexture.set(Z.TEXTURE1),Ee.atlasTextureIcon&&Ee.atlasTextureIcon.bind(Ee.atlasInterpolationIcon,Z.CLAMP_TO_EDGE)),Ee.isSDF){const Qe=Ee.uniformValues;Ee.hasHalo&&(Qe.u_is_halo=1,Ws(Ee.buffers,Be.segments,s,d,Ee.program,me,z,R,Qe,Be.terrainData)),Qe.u_is_halo=0}Ws(Ee.buffers,Be.segments,s,d,Ee.program,me,z,R,Ee.uniformValues,Be.terrainData)}}function Ws(d,n,s,h,f,y,x,S,E,C){const z=h.context;f.draw(z,z.gl.TRIANGLES,y,x,S,yr.disabled,E,C,s.id,d.layoutVertexBuffer,d.indexBuffer,n,s.paint,h.transform.zoom,d.programConfigurations.get(s.id),d.dynamicLayoutVertexBuffer,d.opacityVertexBuffer)}function qs(d,n,s,h,f,y,x){const S=d.context.gl,E=s.paint.get("fill-pattern"),C=E&&E.constantOr(1),z=s.getCrossfadeParameters();let R,B,Z,G,W;x?(B=C&&!s.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",R=S.LINES):(B=C?"fillPattern":"fill",R=S.TRIANGLES);for(const ie of h){const ue=n.getTile(ie);if(C&&!ue.patternsLoaded())continue;const pe=ue.getBucket(s);if(!pe)continue;const X=pe.programConfigurations.get(s.id),ye=d.useProgram(B,X),me=d.style.terrain&&d.style.terrain.getTerrainData(ie);C&&(d.context.activeTexture.set(S.TEXTURE0),ue.imageAtlasTexture.bind(S.LINEAR,S.CLAMP_TO_EDGE),X.updatePaintBuffers(z));const Ce=E.constantOr(null);if(Ce&&ue.imageAtlas){const Ee=ue.imageAtlas,Qe=Ee.patternPositions[Ce.to.toString()],je=Ee.patternPositions[Ce.from.toString()];Qe&&je&&X.setConstantPatternPositions(Qe,je)}const Ie=me?ie:null,Be=d.translatePosMatrix(Ie?Ie.posMatrix:ie.posMatrix,ue,s.paint.get("fill-translate"),s.paint.get("fill-translate-anchor"));if(x){G=pe.indexBuffer2,W=pe.segments2;const Ee=[S.drawingBufferWidth,S.drawingBufferHeight];Z=B==="fillOutlinePattern"&&C?Ll(Be,d,z,ue,Ee):Rl(Be,Ee)}else G=pe.indexBuffer,W=pe.segments,Z=C?sa(Be,d,z,ue):uo(Be);ye.draw(d.context,R,f,d.stencilModeForClipping(ie),y,yr.disabled,Z,me,s.id,pe.layoutVertexBuffer,G,W,s.paint,d.transform.zoom,X)}}function Zs(d,n,s,h,f,y,x){const S=d.context,E=S.gl,C=s.paint.get("fill-extrusion-pattern"),z=C.constantOr(1),R=s.getCrossfadeParameters(),B=s.paint.get("fill-extrusion-opacity");for(const Z of h){const G=n.getTile(Z),W=G.getBucket(s);if(!W)continue;const ie=d.style.terrain&&d.style.terrain.getTerrainData(Z),ue=W.programConfigurations.get(s.id),pe=d.useProgram(z?"fillExtrusionPattern":"fillExtrusion",ue);z&&(d.context.activeTexture.set(E.TEXTURE0),G.imageAtlasTexture.bind(E.LINEAR,E.CLAMP_TO_EDGE),ue.updatePaintBuffers(R));const X=C.constantOr(null);if(X&&G.imageAtlas){const Ie=G.imageAtlas,Be=Ie.patternPositions[X.to.toString()],Ee=Ie.patternPositions[X.from.toString()];Be&&Ee&&ue.setConstantPatternPositions(Be,Ee)}const ye=d.translatePosMatrix(Z.posMatrix,G,s.paint.get("fill-extrusion-translate"),s.paint.get("fill-extrusion-translate-anchor")),me=s.paint.get("fill-extrusion-vertical-gradient"),Ce=z?Ku(ye,d,me,B,Z,R,G):Bs(ye,d,me,B);pe.draw(S,S.gl.TRIANGLES,f,y,x,yr.backCCW,Ce,ie,s.id,W.layoutVertexBuffer,W.indexBuffer,W.segments,s.paint,d.transform.zoom,ue,d.style.terrain&&W.centroidVertexBuffer)}}function ec(d,n,s,h,f,y,x){const S=d.context,E=S.gl,C=s.fbo;if(!C)return;const z=d.useProgram("hillshade"),R=d.style.terrain&&d.style.terrain.getTerrainData(n);S.activeTexture.set(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,C.colorAttachment.get()),z.draw(S,E.TRIANGLES,f,y,x,yr.disabled,((B,Z,G,W)=>{const ie=G.paint.get("hillshade-shadow-color"),ue=G.paint.get("hillshade-highlight-color"),pe=G.paint.get("hillshade-accent-color");let X=G.paint.get("hillshade-illumination-direction")*(Math.PI/180);G.paint.get("hillshade-illumination-anchor")==="viewport"&&(X-=B.transform.angle);const ye=!B.options.moving;return{u_matrix:W?W.posMatrix:B.transform.calculatePosMatrix(Z.tileID.toUnwrapped(),ye),u_image:0,u_latrange:Ga(0,Z.tileID),u_light:[G.paint.get("hillshade-exaggeration"),X],u_shadow:ie,u_highlight:ue,u_accent:pe}})(d,s,h,R?n:null),R,h.id,d.rasterBoundsBuffer,d.quadTriangleIndexBuffer,d.rasterBoundsSegments)}function Jh(d,n,s,h,f,y){const x=d.context,S=x.gl,E=n.dem;if(E&&E.data){const C=E.dim,z=E.stride,R=E.getPixels();if(x.activeTexture.set(S.TEXTURE1),x.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||d.getTileTexture(z),n.demTexture){const Z=n.demTexture;Z.update(R,{premultiply:!1}),Z.bind(S.NEAREST,S.CLAMP_TO_EDGE)}else n.demTexture=new _e(x,R,S.RGBA,{premultiply:!1}),n.demTexture.bind(S.NEAREST,S.CLAMP_TO_EDGE);x.activeTexture.set(S.TEXTURE0);let B=n.fbo;if(!B){const Z=new _e(x,{width:C,height:C,data:null},S.RGBA);Z.bind(S.LINEAR,S.CLAMP_TO_EDGE),B=n.fbo=x.createFramebuffer(C,C,!0),B.colorAttachment.set(Z.texture)}x.bindFramebuffer.set(B.framebuffer),x.viewport.set([0,0,C,C]),d.useProgram("hillshadePrepare").draw(x,S.TRIANGLES,h,f,y,yr.disabled,((Z,G)=>{const W=G.stride,ie=l.create();return l.ortho(ie,0,l.EXTENT,-l.EXTENT,0,0,1),l.translate(ie,ie,[0,-l.EXTENT,0]),{u_matrix:ie,u_image:1,u_dimension:[W,W],u_zoom:Z.overscaledZ,u_unpack:G.getUnpackVector()}})(n.tileID,E),null,s.id,d.rasterBoundsBuffer,d.quadTriangleIndexBuffer,d.rasterBoundsSegments),n.needsHillshadePrepare=!1}}function Gl(d,n,s,h,f,y){const x=h.paint.get("raster-fade-duration");if(!y&&x>0){const S=l.exported.now(),E=(S-d.timeAdded)/x,C=n?(S-n.timeAdded)/x:-1,z=s.getSource(),R=f.coveringZoomLevel({tileSize:z.tileSize,roundZoom:z.roundZoom}),B=!n||Math.abs(n.tileID.overscaledZ-R)>Math.abs(d.tileID.overscaledZ-R),Z=B&&d.refreshedUponExpiration?1:l.clamp(B?E:1-C,0,1);return d.refreshedUponExpiration&&E>=1&&(d.refreshedUponExpiration=!1),n?{opacity:1,mix:1-Z}:{opacity:Z,mix:0}}return{opacity:1,mix:0}}const Wl=new l.Color(1,0,0,1),zi=new l.Color(0,1,0,1),Qh=new l.Color(0,0,1,1),tc=new l.Color(1,0,1,1),ed=new l.Color(0,1,1,1);function ya(d,n,s,h){Ka(d,0,n+s/2,d.transform.width,s,h)}function Hs(d,n,s,h){Ka(d,n-s/2,0,s,d.transform.height,h)}function Ka(d,n,s,h,f,y){const x=d.context,S=x.gl;S.enable(S.SCISSOR_TEST),S.scissor(n*d.pixelRatio,s*d.pixelRatio,h*d.pixelRatio,f*d.pixelRatio),x.clear({color:y}),S.disable(S.SCISSOR_TEST)}function Hf(d,n,s){const h=d.context,f=h.gl,y=s.posMatrix,x=d.useProgram("debug"),S=Dt.disabled,E=cr.disabled,C=d.colorModeForRenderPass(),z="$debug",R=d.style.terrain&&d.style.terrain.getTerrainData(s);h.activeTexture.set(f.TEXTURE0),d.emptyTexture.bind(f.LINEAR,f.CLAMP_TO_EDGE);const B=n.getTileByID(s.key).latestRawTileData,Z=Math.floor((B&&B.byteLength||0)/1024),G=n.getTile(s).tileSize,W=512/Math.min(G,512)*(s.overscaledZ/d.transform.zoom)*.5;let ie=s.canonical.toString();s.overscaledZ!==s.canonical.z&&(ie+=` => ${s.overscaledZ}`),function(ue,pe){ue.initDebugOverlayCanvas();const X=ue.debugOverlayCanvas,ye=ue.context.gl,me=ue.debugOverlayCanvas.getContext("2d");me.clearRect(0,0,X.width,X.height),me.shadowColor="white",me.shadowBlur=2,me.lineWidth=1.5,me.strokeStyle="white",me.textBaseline="top",me.font="bold 36px Open Sans, sans-serif",me.fillText(pe,5,5),me.strokeText(pe,5,5),ue.debugOverlayTexture.update(X),ue.debugOverlayTexture.bind(ye.LINEAR,ye.CLAMP_TO_EDGE)}(d,`${ie} ${Z}kB`),x.draw(h,f.TRIANGLES,S,E,fr.alphaBlended,yr.disabled,la(y,l.Color.transparent,W),null,z,d.debugBuffer,d.quadTriangleIndexBuffer,d.debugSegments),x.draw(h,f.LINE_STRIP,S,E,C,yr.disabled,la(y,l.Color.red),R,z,d.debugBuffer,d.tileBorderIndexBuffer,d.debugSegments)}function ql(d,n,s){const h=d.context,f=h.gl,y=d.colorModeForRenderPass(),x=new Dt(f.LEQUAL,Dt.ReadWrite,d.depthRangeFor3D),S=d.useProgram("terrain"),E=n.getTerrainMesh(),C=n.getTerrainData(s.tileID);h.bindFramebuffer.set(null),h.viewport.set([0,0,d.width,d.height]),h.activeTexture.set(f.TEXTURE0),f.bindTexture(f.TEXTURE_2D,n.getRTTFramebuffer().colorAttachment.get());const z=d.transform.calculatePosMatrix(s.tileID.toUnwrapped());S.draw(h,f.TRIANGLES,x,cr.disabled,y,yr.backCCW,{u_matrix:z,u_texture:0},C,"terrain",E.vertexBuffer,E.indexBuffer,E.segments)}function td(d,n,s,h){const f=d.context,y=s.tileSize*n.qualityFactor;s.textures[h]||(s.textures[h]=d.getTileTexture(y)||new _e(f,{width:y,height:y,data:null},f.gl.RGBA),s.textures[h].bind(f.gl.LINEAR,f.gl.CLAMP_TO_EDGE),h===0&&n.sourceCache.renderHistory.unshift(s.tileID.key));const x=n.getRTTFramebuffer();x.colorAttachment.set(s.textures[h].texture),f.bindFramebuffer.set(x.framebuffer),f.viewport.set([0,0,y,y])}class rd{constructor(n){this._coordsDescendingInv={},this._coordsDescendingInvStr={},this.painter=n,this._renderToTexture={background:!0,fill:!0,line:!0,raster:!0},this._coordsDescendingInv={},this._coordsDescendingInvStr={},this._stacks=[],this._prevType=null,this._rerender={},this._renderableTiles=n.style.terrain.sourceCache.getRenderableTiles(),this._init()}_init(){const n=this.painter.style,s=n.terrain;for(const h in n.sourceCaches){this._coordsDescendingInv[h]={};const f=n.sourceCaches[h].getVisibleCoordinates();for(const y of f){const x=s.sourceCache.getTerrainCoords(y);for(const S in x)this._coordsDescendingInv[h][S]||(this._coordsDescendingInv[h][S]=[]),this._coordsDescendingInv[h][S].push(x[S])}}for(const h of n._order){const f=n._layers[h],y=f.source;if(this._renderToTexture[f.type]&&!this._coordsDescendingInvStr[y]){this._coordsDescendingInvStr[y]={};for(const x in this._coordsDescendingInv[y])this._coordsDescendingInvStr[y][x]=this._coordsDescendingInv[y][x].map(S=>S.key).sort().join()}}return this._renderableTiles.forEach(h=>{for(const f in this._coordsDescendingInvStr){const y=this._coordsDescendingInvStr[f][h.tileID.key];y&&y!==h.textureCoords[f]&&h.clearTextures(this.painter),s.needsRerender(f,h.tileID)&&h.clearTextures(this.painter)}this._rerender[h.tileID.key]=!h.textures.length}),s.clearRerenderCache(),s.sourceCache.removeOutdated(this.painter),this}renderLayer(n){const s=n.type,h=this.painter,f=h.style._order,y=h.currentLayer,x=y+1===f.length;if(this._renderToTexture[s]&&(this._prevType&&this._renderToTexture[this._prevType]||this._stacks.push([]),this._prevType=s,this._stacks[this._stacks.length-1].push(f[y]),!x))return!0;if(this._renderToTexture[this._prevType]||s==="hillshade"||this._renderToTexture[s]&&x){this._prevType=s;const S=this._stacks.length-1,E=this._stacks[S]||[];for(const C of this._renderableTiles){if(td(h,h.style.terrain,C,S),this._rerender[C.tileID.key]){h.context.clear({color:l.Color.transparent});for(let z=0;z<E.length;z++){const R=h.style._layers[E[z]],B=R.source?this._coordsDescendingInv[R.source][C.tileID.key]:[C.tileID];h._renderTileClippingMasks(R,B),h.renderLayer(h,h.style.sourceCaches[R.source],R,B),R.source&&(C.textureCoords[R.source]=this._coordsDescendingInvStr[R.source][C.tileID.key])}}ql(h,h.style.terrain,C)}if(s==="hillshade"){this._stacks.push([f[y]]);for(const C of this._renderableTiles){const z=this._coordsDescendingInv[n.source][C.tileID.key];td(h,h.style.terrain,C,this._stacks.length-1),h.context.clear({color:l.Color.transparent}),h._renderTileClippingMasks(n,z),h.renderLayer(h,h.style.sourceCaches[n.source],n,z),ql(h,h.style.terrain,C)}return!0}return this._renderToTexture[s]}return!1}}const Xs={symbol:function(d,n,s,h,f){if(d.renderPass!=="translucent")return;const y=cr.disabled,x=d.colorModeForRenderPass();s.layout.get("text-variable-anchor")&&function(S,E,C,z,R,B,Z){const G=E.transform,W=R==="map",ie=B==="map";for(const ue of S){const pe=z.getTile(ue),X=pe.getBucket(C);if(!X||!X.text||!X.text.segments.get().length)continue;const ye=l.evaluateSizeForZoom(X.textSizeData,G.zoom),me=Mr(pe,1,E.transform.zoom),Ce=qi(ue.posMatrix,ie,W,E.transform,me),Ie=C.layout.get("icon-text-fit")!=="none"&&X.hasIconData();if(ye){const Be=Math.pow(2,G.zoom-pe.tileID.overscaledZ);Yh(X,W,ie,Z,G,Ce,ue.posMatrix,Be,ye,Ie,E.style.terrain?(Ee,Qe)=>E.style.terrain.getElevation(ue,Ee,Qe):null)}}}(h,d,s,n,s.layout.get("text-rotation-alignment"),s.layout.get("text-pitch-alignment"),f),s.paint.get("icon-opacity").constantOr(1)!==0&&jl(d,n,s,h,!1,s.paint.get("icon-translate"),s.paint.get("icon-translate-anchor"),s.layout.get("icon-rotation-alignment"),s.layout.get("icon-pitch-alignment"),s.layout.get("icon-keep-upright"),y,x),s.paint.get("text-opacity").constantOr(1)!==0&&jl(d,n,s,h,!0,s.paint.get("text-translate"),s.paint.get("text-translate-anchor"),s.layout.get("text-rotation-alignment"),s.layout.get("text-pitch-alignment"),s.layout.get("text-keep-upright"),y,x),n.map.showCollisionBoxes&&(Xa(d,n,s,h,s.paint.get("text-translate"),s.paint.get("text-translate-anchor"),!0),Xa(d,n,s,h,s.paint.get("icon-translate"),s.paint.get("icon-translate-anchor"),!1))},circle:function(d,n,s,h){if(d.renderPass!=="translucent")return;const f=s.paint.get("circle-opacity"),y=s.paint.get("circle-stroke-width"),x=s.paint.get("circle-stroke-opacity"),S=!s.layout.get("circle-sort-key").isConstant();if(f.constantOr(1)===0&&(y.constantOr(1)===0||x.constantOr(1)===0))return;const E=d.context,C=E.gl,z=d.depthModeForSublayer(0,Dt.ReadOnly),R=cr.disabled,B=d.colorModeForRenderPass(),Z=[];for(let G=0;G<h.length;G++){const W=h[G],ie=n.getTile(W),ue=ie.getBucket(s);if(!ue)continue;const pe=ue.programConfigurations.get(s.id),X=d.useProgram("circle",pe),ye=ue.layoutVertexBuffer,me=ue.indexBuffer,Ce=d.style.terrain&&d.style.terrain.getTerrainData(W),Ie={programConfiguration:pe,program:X,layoutVertexBuffer:ye,indexBuffer:me,uniformValues:Fs(d,W,ie,s),terrainData:Ce};if(S){const Be=ue.segments.get();for(const Ee of Be)Z.push({segments:new l.SegmentVector([Ee]),sortKey:Ee.sortKey,state:Ie})}else Z.push({segments:ue.segments,sortKey:0,state:Ie})}S&&Z.sort((G,W)=>G.sortKey-W.sortKey);for(const G of Z){const{programConfiguration:W,program:ie,layoutVertexBuffer:ue,indexBuffer:pe,uniformValues:X,terrainData:ye}=G.state;ie.draw(E,C.TRIANGLES,z,R,B,yr.disabled,X,ye,s.id,ue,pe,G.segments,s.paint,d.transform.zoom,W)}},heatmap:function(d,n,s,h){if(s.paint.get("heatmap-opacity")!==0)if(d.renderPass==="offscreen"){const f=d.context,y=f.gl,x=cr.disabled,S=new fr([y.ONE,y.ONE],l.Color.transparent,[!0,!0,!0,!0]);(function(E,C,z){const R=E.gl;E.activeTexture.set(R.TEXTURE1),E.viewport.set([0,0,C.width/4,C.height/4]);let B=z.heatmapFbo;if(B)R.bindTexture(R.TEXTURE_2D,B.colorAttachment.get()),E.bindFramebuffer.set(B.framebuffer);else{const Z=R.createTexture();R.bindTexture(R.TEXTURE_2D,Z),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_WRAP_S,R.CLAMP_TO_EDGE),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_WRAP_T,R.CLAMP_TO_EDGE),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MIN_FILTER,R.LINEAR),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MAG_FILTER,R.LINEAR),B=z.heatmapFbo=E.createFramebuffer(C.width/4,C.height/4,!1),function(G,W,ie,ue){const pe=G.gl;pe.texImage2D(pe.TEXTURE_2D,0,pe.RGBA,W.width/4,W.height/4,0,pe.RGBA,G.extRenderToTextureHalfFloat?G.extTextureHalfFloat.HALF_FLOAT_OES:pe.UNSIGNED_BYTE,null),ue.colorAttachment.set(ie)}(E,C,Z,B)}})(f,d,s),f.clear({color:l.Color.transparent});for(let E=0;E<h.length;E++){const C=h[E];if(n.hasRenderableParent(C))continue;const z=n.getTile(C),R=z.getBucket(s);if(!R)continue;const B=R.programConfigurations.get(s.id),Z=d.useProgram("heatmap",B),{zoom:G}=d.transform;Z.draw(f,y.TRIANGLES,Dt.disabled,x,S,yr.disabled,ua(C.posMatrix,z,G,s.paint.get("heatmap-intensity")),null,s.id,R.layoutVertexBuffer,R.indexBuffer,R.segments,s.paint,d.transform.zoom,B)}f.viewport.set([0,0,d.width,d.height])}else d.renderPass==="translucent"&&(d.context.setColorMode(d.colorModeForRenderPass()),function(f,y){const x=f.context,S=x.gl,E=y.heatmapFbo;if(!E)return;x.activeTexture.set(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,E.colorAttachment.get()),x.activeTexture.set(S.TEXTURE1);let C=y.colorRampTexture;C||(C=y.colorRampTexture=new _e(x,y.colorRamp,S.RGBA)),C.bind(S.LINEAR,S.CLAMP_TO_EDGE),f.useProgram("heatmapTexture").draw(x,S.TRIANGLES,Dt.disabled,cr.disabled,f.colorModeForRenderPass(),yr.disabled,((z,R,B,Z)=>{const G=l.create();l.ortho(G,0,z.width,z.height,0,0,1);const W=z.context.gl;return{u_matrix:G,u_world:[W.drawingBufferWidth,W.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:R.paint.get("heatmap-opacity")}})(f,y),null,y.id,f.viewportBuffer,f.quadTriangleIndexBuffer,f.viewportSegments,y.paint,f.transform.zoom)}(d,s))},line:function(d,n,s,h){if(d.renderPass!=="translucent")return;const f=s.paint.get("line-opacity"),y=s.paint.get("line-width");if(f.constantOr(1)===0||y.constantOr(1)===0)return;const x=d.depthModeForSublayer(0,Dt.ReadOnly),S=d.colorModeForRenderPass(),E=s.paint.get("line-dasharray"),C=s.paint.get("line-pattern"),z=C.constantOr(1),R=s.paint.get("line-gradient"),B=s.getCrossfadeParameters(),Z=z?"linePattern":E?"lineSDF":R?"lineGradient":"line",G=d.context,W=G.gl;let ie=!0;for(const ue of h){const pe=n.getTile(ue);if(z&&!pe.patternsLoaded())continue;const X=pe.getBucket(s);if(!X)continue;const ye=X.programConfigurations.get(s.id),me=d.context.program.get(),Ce=d.useProgram(Z,ye),Ie=ie||Ce.program!==me,Be=d.style.terrain&&d.style.terrain.getTerrainData(ue),Ee=C.constantOr(null);if(Ee&&pe.imageAtlas){const et=pe.imageAtlas,St=et.patternPositions[Ee.to.toString()],Ct=et.patternPositions[Ee.from.toString()];St&&Ct&&ye.setConstantPatternPositions(St,Ct)}const Qe=Be?ue:null,je=z?Bo(d,pe,s,B,Qe):E?ca(d,pe,s,E,B,Qe):R?Os(d,pe,s,X.lineClipsArray.length,Qe):Lo(d,pe,s,Qe);if(z)G.activeTexture.set(W.TEXTURE0),pe.imageAtlasTexture.bind(W.LINEAR,W.CLAMP_TO_EDGE),ye.updatePaintBuffers(B);else if(E&&(Ie||d.lineAtlas.dirty))G.activeTexture.set(W.TEXTURE0),d.lineAtlas.bind(G);else if(R){const et=X.gradients[s.id];let St=et.texture;if(s.gradientVersion!==et.version){let Ct=256;if(s.stepInterpolant){const ft=n.getSource().maxzoom,Yt=ue.canonical.z===ft?Math.ceil(1<<d.transform.maxZoom-ue.canonical.z):1;Ct=l.clamp(l.nextPowerOfTwo(X.maxLineLength/l.EXTENT*1024*Yt),256,G.maxTextureSize)}et.gradient=l.renderColorRamp({expression:s.gradientExpression(),evaluationKey:"lineProgress",resolution:Ct,image:et.gradient||void 0,clips:X.lineClipsArray}),et.texture?et.texture.update(et.gradient):et.texture=new _e(G,et.gradient,W.RGBA),et.version=s.gradientVersion,St=et.texture}G.activeTexture.set(W.TEXTURE0),St.bind(s.stepInterpolant?W.NEAREST:W.LINEAR,W.CLAMP_TO_EDGE)}Ce.draw(G,W.TRIANGLES,x,d.stencilModeForClipping(ue),S,yr.disabled,je,Be,s.id,X.layoutVertexBuffer,X.indexBuffer,X.segments,s.paint,d.transform.zoom,ye,X.layoutVertexBuffer2),ie=!1}},fill:function(d,n,s,h){const f=s.paint.get("fill-color"),y=s.paint.get("fill-opacity");if(y.constantOr(1)===0)return;const x=d.colorModeForRenderPass(),S=s.paint.get("fill-pattern"),E=d.opaquePassEnabledForLayer()&&!S.constantOr(1)&&f.constantOr(l.Color.transparent).a===1&&y.constantOr(0)===1?"opaque":"translucent";if(d.renderPass===E){const C=d.depthModeForSublayer(1,d.renderPass==="opaque"?Dt.ReadWrite:Dt.ReadOnly);qs(d,n,s,h,C,x,!1)}if(d.renderPass==="translucent"&&s.paint.get("fill-antialias")){const C=d.depthModeForSublayer(s.getPaintProperty("fill-outline-color")?2:0,Dt.ReadOnly);qs(d,n,s,h,C,x,!0)}},"fill-extrusion":function(d,n,s,h){const f=s.paint.get("fill-extrusion-opacity");if(f!==0&&d.renderPass==="translucent"){const y=new Dt(d.context.gl.LEQUAL,Dt.ReadWrite,d.depthRangeFor3D);if(f!==1||s.paint.get("fill-extrusion-pattern").constantOr(1))Zs(d,n,s,h,y,cr.disabled,fr.disabled),Zs(d,n,s,h,y,d.stencilModeFor3D(),d.colorModeForRenderPass());else{const x=d.colorModeForRenderPass();Zs(d,n,s,h,y,cr.disabled,x)}}},hillshade:function(d,n,s,h){if(d.renderPass!=="offscreen"&&d.renderPass!=="translucent")return;const f=d.context,y=d.depthModeForSublayer(0,Dt.ReadOnly),x=d.colorModeForRenderPass(),[S,E]=d.renderPass==="translucent"?d.stencilConfigForOverlap(h):[{},h];for(const C of E){const z=n.getTile(C);z.needsHillshadePrepare!==void 0&&z.needsHillshadePrepare&&d.renderPass==="offscreen"?Jh(d,z,s,y,cr.disabled,x):d.renderPass==="translucent"&&ec(d,C,z,s,y,S[C.overscaledZ],x)}f.viewport.set([0,0,d.width,d.height])},raster:function(d,n,s,h){if(d.renderPass!=="translucent"||s.paint.get("raster-opacity")===0||!h.length)return;const f=d.context,y=f.gl,x=n.getSource(),S=d.useProgram("raster"),E=d.colorModeForRenderPass(),[C,z]=x instanceof cn?[{},h]:d.stencilConfigForOverlap(h),R=z[z.length-1].overscaledZ,B=!d.options.moving;for(const Z of z){const G=d.depthModeForSublayer(Z.overscaledZ-R,s.paint.get("raster-opacity")===1?Dt.ReadWrite:Dt.ReadOnly,y.LESS),W=n.getTile(Z);W.registerFadeDuration(s.paint.get("raster-fade-duration"));const ie=n.findLoadedParent(Z,0),ue=Gl(W,ie,n,s,d.transform,d.style.terrain);let pe,X;const ye=s.paint.get("raster-resampling")==="nearest"?y.NEAREST:y.LINEAR;f.activeTexture.set(y.TEXTURE0),W.texture.bind(ye,y.CLAMP_TO_EDGE,y.LINEAR_MIPMAP_NEAREST),f.activeTexture.set(y.TEXTURE1),ie?(ie.texture.bind(ye,y.CLAMP_TO_EDGE,y.LINEAR_MIPMAP_NEAREST),pe=Math.pow(2,ie.tileID.overscaledZ-W.tileID.overscaledZ),X=[W.tileID.canonical.x*pe%1,W.tileID.canonical.y*pe%1]):W.texture.bind(ye,y.CLAMP_TO_EDGE,y.LINEAR_MIPMAP_NEAREST);const me=d.style.terrain&&d.style.terrain.getTerrainData(Z),Ce=me?Z:null,Ie=Ce?Ce.posMatrix:d.transform.calculatePosMatrix(Z.toUnwrapped(),B),Be=da(Ie,X||[0,0],pe||1,ue,s);x instanceof cn?S.draw(f,y.TRIANGLES,G,cr.disabled,E,yr.disabled,Be,me,s.id,x.boundsBuffer,d.quadTriangleIndexBuffer,x.boundsSegments):S.draw(f,y.TRIANGLES,G,C[Z.overscaledZ],E,yr.disabled,Be,me,s.id,d.rasterBoundsBuffer,d.quadTriangleIndexBuffer,d.rasterBoundsSegments)}},background:function(d,n,s,h){const f=s.paint.get("background-color"),y=s.paint.get("background-opacity");if(y===0)return;const x=d.context,S=x.gl,E=d.transform,C=E.tileSize,z=s.paint.get("background-pattern");if(d.isPatternMissing(z))return;const R=!z&&f.a===1&&y===1&&d.opaquePassEnabledForLayer()?"opaque":"translucent";if(d.renderPass!==R)return;const B=cr.disabled,Z=d.depthModeForSublayer(0,R==="opaque"?Dt.ReadWrite:Dt.ReadOnly),G=d.colorModeForRenderPass(),W=d.useProgram(z?"backgroundPattern":"background"),ie=h||E.coveringTiles({tileSize:C,terrain:d.style.terrain});z&&(x.activeTexture.set(S.TEXTURE0),d.imageManager.bind(d.context));const ue=s.getCrossfadeParameters();for(const pe of ie){const X=h?pe.posMatrix:d.transform.calculatePosMatrix(pe.toUnwrapped()),ye=z?Ns(X,y,d,z,{tileID:pe,tileSize:C},ue):Fl(X,y,f),me=d.style.terrain&&d.style.terrain.getTerrainData(pe);W.draw(x,S.TRIANGLES,Z,B,G,yr.disabled,ye,me,s.id,d.tileExtentBuffer,d.quadTriangleIndexBuffer,d.tileExtentSegments)}},debug:function(d,n,s){for(let h=0;h<s.length;h++)Hf(d,n,s[h])},custom:function(d,n,s){const h=d.context,f=s.implementation;if(d.renderPass==="offscreen"){const y=f.prerender;y&&(d.setCustomLayerDefaults(),h.setColorMode(d.colorModeForRenderPass()),y.call(f,h.gl,d.transform.customLayerMatrix()),h.setDirty(),d.setBaseState())}else if(d.renderPass==="translucent"){d.setCustomLayerDefaults(),h.setColorMode(d.colorModeForRenderPass()),h.setStencilMode(cr.disabled);const y=f.renderingMode==="3d"?new Dt(d.context.gl.LEQUAL,Dt.ReadWrite,d.depthRangeFor3D):d.depthModeForSublayer(0,Dt.ReadOnly);h.setDepthMode(y),f.render(h.gl,d.transform.customLayerMatrix()),h.setDirty(),d.setBaseState(),h.bindFramebuffer.set(null)}}};class rc{constructor(n,s){this.context=new Kh(n),this.transform=s,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:l.create(),renderTime:0},this.setup(),this.numSublayers=wr.maxUnderzooming+wr.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new gt,this.gpuTimers={}}resize(n,s,h){if(this.width=n*h,this.height=s*h,this.pixelRatio=h,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const f of this.style._order)this.style._layers[f].resize()}setup(){const n=this.context,s=new l.PosArray;s.emplaceBack(0,0),s.emplaceBack(l.EXTENT,0),s.emplaceBack(0,l.EXTENT),s.emplaceBack(l.EXTENT,l.EXTENT),this.tileExtentBuffer=n.createVertexBuffer(s,Lt.members),this.tileExtentSegments=l.SegmentVector.simpleSegment(0,0,4,2);const h=new l.PosArray;h.emplaceBack(0,0),h.emplaceBack(l.EXTENT,0),h.emplaceBack(0,l.EXTENT),h.emplaceBack(l.EXTENT,l.EXTENT),this.debugBuffer=n.createVertexBuffer(h,Lt.members),this.debugSegments=l.SegmentVector.simpleSegment(0,0,4,5);const f=new l.RasterBoundsArray;f.emplaceBack(0,0,0,0),f.emplaceBack(l.EXTENT,0,l.EXTENT,0),f.emplaceBack(0,l.EXTENT,0,l.EXTENT),f.emplaceBack(l.EXTENT,l.EXTENT,l.EXTENT,l.EXTENT),this.rasterBoundsBuffer=n.createVertexBuffer(f,kn.members),this.rasterBoundsSegments=l.SegmentVector.simpleSegment(0,0,4,2);const y=new l.PosArray;y.emplaceBack(0,0),y.emplaceBack(1,0),y.emplaceBack(0,1),y.emplaceBack(1,1),this.viewportBuffer=n.createVertexBuffer(y,Lt.members),this.viewportSegments=l.SegmentVector.simpleSegment(0,0,4,2);const x=new l.LineStripIndexArray;x.emplaceBack(0),x.emplaceBack(1),x.emplaceBack(3),x.emplaceBack(2),x.emplaceBack(0),this.tileBorderIndexBuffer=n.createIndexBuffer(x);const S=new l.TriangleIndexArray;S.emplaceBack(0,1,2),S.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=n.createIndexBuffer(S),this.emptyTexture=new _e(n,{width:1,height:1,data:new Uint8Array([0,0,0,0])},n.gl.RGBA);const E=this.context.gl;this.stencilClearMode=new cr({func:E.ALWAYS,mask:0},0,255,E.ZERO,E.ZERO,E.ZERO)}clearStencil(){const n=this.context,s=n.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const h=l.create();l.ortho(h,0,this.width,this.height,0,0,1),l.scale(h,h,[s.drawingBufferWidth,s.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(n,s.TRIANGLES,Dt.disabled,this.stencilClearMode,fr.disabled,yr.disabled,Ro(h),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(n,s){if(this.currentStencilSource===n.source||!n.isTileClipped()||!s||!s.length)return;this.currentStencilSource=n.source;const h=this.context,f=h.gl;this.nextStencilID+s.length>256&&this.clearStencil(),h.setColorMode(fr.disabled),h.setDepthMode(Dt.disabled);const y=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const x of s){const S=this._tileClippingMaskIDs[x.key]=this.nextStencilID++,E=this.style.terrain&&this.style.terrain.getTerrainData(x);y.draw(h,f.TRIANGLES,Dt.disabled,new cr({func:f.ALWAYS,mask:0},S,255,f.KEEP,f.KEEP,f.REPLACE),fr.disabled,yr.disabled,Ro(x.posMatrix),E,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const n=this.nextStencilID++,s=this.context.gl;return new cr({func:s.NOTEQUAL,mask:255},n,255,s.KEEP,s.KEEP,s.REPLACE)}stencilModeForClipping(n){const s=this.context.gl;return new cr({func:s.EQUAL,mask:255},this._tileClippingMaskIDs[n.key],0,s.KEEP,s.KEEP,s.REPLACE)}stencilConfigForOverlap(n){const s=this.context.gl,h=n.sort((x,S)=>S.overscaledZ-x.overscaledZ),f=h[h.length-1].overscaledZ,y=h[0].overscaledZ-f+1;if(y>1){this.currentStencilSource=void 0,this.nextStencilID+y>256&&this.clearStencil();const x={};for(let S=0;S<y;S++)x[S+f]=new cr({func:s.GEQUAL,mask:255},S+this.nextStencilID,255,s.KEEP,s.KEEP,s.REPLACE);return this.nextStencilID+=y,[x,h]}return[{[f]:cr.disabled},h]}colorModeForRenderPass(){const n=this.context.gl;return this._showOverdrawInspector?new fr([n.CONSTANT_COLOR,n.ONE],new l.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?fr.unblended:fr.alphaBlended}depthModeForSublayer(n,s,h){if(!this.opaquePassEnabledForLayer())return Dt.disabled;const f=1-((1+this.currentLayer)*this.numSublayers+n)*this.depthEpsilon;return new Dt(h||this.context.gl.LEQUAL,s,[f,f])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(n,s){this.style=n,this.options=s,this.lineAtlas=n.lineAtlas,this.imageManager=n.imageManager,this.glyphManager=n.glyphManager,this.symbolFadeChange=n.placement.symbolFadeChange(l.exported.now()),this.imageManager.beginFrame();const h=this.style._order,f=this.style.sourceCaches,y=this.style.terrain&&new rd(this);for(const C in f){const z=f[C];z.used&&z.prepare(this.context)}const x={},S={},E={};for(const C in f){const z=f[C];x[C]=z.getVisibleCoordinates(),S[C]=x[C].slice().reverse(),E[C]=z.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let C=0;C<h.length;C++)if(this.style._layers[h[C]].is3D()){this.opaquePassCutoff=C;break}if(y){this.opaquePassCutoff=0;const C=this.style.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!l.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||C.length)&&(l.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(z,R){const B=z.context,Z=B.gl,G=fr.unblended,W=new Dt(Z.LEQUAL,Dt.ReadWrite,[0,1]),ie=R.getTerrainMesh(),ue=R.sourceCache.getRenderableTiles(),pe=z.useProgram("terrainDepth");B.bindFramebuffer.set(R.getFramebuffer("depth").framebuffer),B.viewport.set([0,0,z.width/devicePixelRatio,z.height/devicePixelRatio]),B.clear({color:l.Color.transparent,depth:1});for(const X of ue){const ye=R.getTerrainData(X.tileID),me=z.transform.calculatePosMatrix(X.tileID.toUnwrapped());pe.draw(B,Z.TRIANGLES,W,cr.disabled,G,yr.backCCW,{u_matrix:me},ye,"terrain",ie.vertexBuffer,ie.indexBuffer,ie.segments)}B.bindFramebuffer.set(null),B.viewport.set([0,0,z.width,z.height])}(this,this.style.terrain),function(z,R){const B=z.context,Z=B.gl,G=fr.unblended,W=new Dt(Z.LEQUAL,Dt.ReadWrite,[0,1]),ie=R.getTerrainMesh(),ue=R.getCoordsTexture(),pe=R.sourceCache.getRenderableTiles(),X=z.useProgram("terrainCoords");B.bindFramebuffer.set(R.getFramebuffer("coords").framebuffer),B.viewport.set([0,0,z.width/devicePixelRatio,z.height/devicePixelRatio]),B.clear({color:l.Color.transparent,depth:1}),R.coordsIndex=[];for(const ye of pe){const me=R.getTerrainData(ye.tileID);B.activeTexture.set(Z.TEXTURE0),Z.bindTexture(Z.TEXTURE_2D,ue.texture);const Ce=z.transform.calculatePosMatrix(ye.tileID.toUnwrapped());X.draw(B,Z.TRIANGLES,W,cr.disabled,G,yr.backCCW,{u_matrix:Ce,u_terrain_coords_id:(255-R.coordsIndex.length)/255,u_texture:0},me,"terrain",ie.vertexBuffer,ie.indexBuffer,ie.segments),R.coordsIndex.push(ye.tileID.key)}B.bindFramebuffer.set(null),B.viewport.set([0,0,z.width,z.height])}(this,this.style.terrain))}this.renderPass="offscreen";for(const C of h){const z=this.style._layers[C];if(!z.hasOffscreenPass()||z.isHidden(this.transform.zoom))continue;const R=S[z.source];(z.type==="custom"||R.length)&&this.renderLayer(this,f[z.source],z,R)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:s.showOverdrawInspector?l.Color.black:l.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=s.showOverdrawInspector,this.depthRangeFor3D=[0,1-(n._order.length+2)*this.numSublayers*this.depthEpsilon],!y)for(this.renderPass="opaque",this.currentLayer=h.length-1;this.currentLayer>=0;this.currentLayer--){const C=this.style._layers[h[this.currentLayer]],z=f[C.source],R=x[C.source];this._renderTileClippingMasks(C,R),this.renderLayer(this,z,C,R)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<h.length;this.currentLayer++){const C=this.style._layers[h[this.currentLayer]],z=f[C.source];if(y&&y.renderLayer(C))continue;const R=(C.type==="symbol"?E:S)[C.source];this._renderTileClippingMasks(C,x[C.source]),this.renderLayer(this,z,C,R)}if(this.options.showTileBoundaries){let C,z;Object.values(this.style._layers).forEach(R=>{R.source&&!R.isHidden(this.transform.zoom)&&(R.source!==(z&&z.id)&&(z=this.style.sourceCaches[R.source]),(!C||C.getSource().maxzoom<z.getSource().maxzoom)&&(C=z))}),C&&Xs.debug(this,C,C.getVisibleCoordinates())}this.options.showPadding&&function(C){const z=C.transform.padding;ya(C,C.transform.height-(z.top||0),3,Wl),ya(C,z.bottom||0,3,zi),Hs(C,z.left||0,3,Qh),Hs(C,C.transform.width-(z.right||0),3,tc);const R=C.transform.centerPoint;(function(B,Z,G,W){Ka(B,Z-1,G-10,2,20,W),Ka(B,Z-10,G-1,20,2,W)})(C,R.x,C.transform.height-R.y,ed)}(this),this.context.setDefault()}renderLayer(n,s,h,f){h.isHidden(this.transform.zoom)||(h.type==="background"||h.type==="custom"||(f||[]).length)&&(this.id=h.id,this.gpuTimingStart(h),Xs[h.type](n,s,h,f,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(n){if(!this.options.gpuTiming)return;const s=this.context.extTimerQuery;let h=this.gpuTimers[n.id];h||(h=this.gpuTimers[n.id]={calls:0,cpuTime:0,query:s.createQueryEXT()}),h.calls++,s.beginQueryEXT(s.TIME_ELAPSED_EXT,h.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const n=this.context.extTimerQuery;n.endQueryEXT(n.TIME_ELAPSED_EXT)}collectGpuTimers(){const n=this.gpuTimers;return this.gpuTimers={},n}queryGpuTimers(n){const s={};for(const h in n){const f=n[h],y=this.context.extTimerQuery,x=y.getQueryObjectEXT(f.query,y.QUERY_RESULT_EXT)/1e6;y.deleteQueryEXT(f.query),s[h]=x}return s}translatePosMatrix(n,s,h,f,y){if(!h[0]&&!h[1])return n;const x=y?f==="map"?this.transform.angle:0:f==="viewport"?-this.transform.angle:0;if(x){const C=Math.sin(x),z=Math.cos(x);h=[h[0]*z-h[1]*C,h[0]*C+h[1]*z]}const S=[y?h[0]:Mr(s,h[0],this.transform.zoom),y?h[1]:Mr(s,h[1],this.transform.zoom),0],E=new Float32Array(16);return l.translate(E,n,S),E}saveTileTexture(n){const s=this._tileTextures[n.size[0]];s?s.push(n):this._tileTextures[n.size[0]]=[n]}getTileTexture(n){const s=this._tileTextures[n];return s&&s.length>0?s.pop():null}isPatternMissing(n){if(!n)return!1;if(!n.from||!n.to)return!0;const s=this.imageManager.getPattern(n.from.toString()),h=this.imageManager.getPattern(n.to.toString());return!s||!h}useProgram(n,s){this.cache=this.cache||{};const h=n+(s?s.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.terrain?"/terrain":"");return this.cache[h]||(this.cache[h]=new Ml(this.context,n,aa[n],s,qa[n],this._showOverdrawInspector,this.style.terrain)),this.cache[h]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const n=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(n.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new _e(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class Zl{constructor(n,s){this.points=n,this.planes=s}static fromInvProjectionMatrix(n,s,h){const f=Math.pow(2,h),y=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(S=>{const E=1/(S=l.transformMat4([],S,n))[3]/s*f;return l.mul$1(S,S,[E,E,1/S[3],E])}),x=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(S=>{const E=l.sub([],y[S[0]],y[S[1]]),C=l.sub([],y[S[2]],y[S[1]]),z=l.normalize([],l.cross([],E,C)),R=-l.dot(z,y[S[1]]);return z.concat(R)});return new Zl(y,x)}}class Ks{constructor(n,s){this.min=n,this.max=s,this.center=l.scale$1([],l.add([],this.min,this.max),.5)}quadrant(n){const s=[n%2==0,n<2],h=l.clone$2(this.min),f=l.clone$2(this.max);for(let y=0;y<s.length;y++)h[y]=s[y]?this.min[y]:this.center[y],f[y]=s[y]?this.center[y]:this.max[y];return f[2]=this.max[2],new Ks(h,f)}distanceX(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]}distanceY(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]}intersects(n){const s=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let h=!0;for(let f=0;f<n.planes.length;f++){const y=n.planes[f];let x=0;for(let S=0;S<s.length;S++)l.dot$1(y,s[S])>=0&&x++;if(x===0)return 0;x!==s.length&&(h=!1)}if(h)return 2;for(let f=0;f<3;f++){let y=Number.MAX_VALUE,x=-Number.MAX_VALUE;for(let S=0;S<n.points.length;S++){const E=n.points[S][f]-this.min[f];y=Math.min(y,E),x=Math.max(x,E)}if(x<0||y>this.max[f]-this.min[f])return 0}return 1}}class Ya{constructor(n=0,s=0,h=0,f=0){if(isNaN(n)||n<0||isNaN(s)||s<0||isNaN(h)||h<0||isNaN(f)||f<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=n,this.bottom=s,this.left=h,this.right=f}interpolate(n,s,h){return s.top!=null&&n.top!=null&&(this.top=l.number(n.top,s.top,h)),s.bottom!=null&&n.bottom!=null&&(this.bottom=l.number(n.bottom,s.bottom,h)),s.left!=null&&n.left!=null&&(this.left=l.number(n.left,s.left,h)),s.right!=null&&n.right!=null&&(this.right=l.number(n.right,s.right,h)),this}getCenter(n,s){const h=l.clamp((this.left+n-this.right)/2,0,n),f=l.clamp((this.top+s-this.bottom)/2,0,s);return new l.pointGeometry(h,f)}equals(n){return this.top===n.top&&this.bottom===n.bottom&&this.left===n.left&&this.right===n.right}clone(){return new Ya(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Ys{constructor(n,s,h,f,y){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=y===void 0||!!y,this._minZoom=n||0,this._maxZoom=s||22,this._minPitch=h==null?0:h,this._maxPitch=f==null?60:f,this.setMaxBounds(),this.width=0,this.height=0,this._center=new l.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Ya,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const n=new Ys(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return n.tileSize=this.tileSize,n.latRange=this.latRange,n.width=this.width,n.height=this.height,n._center=this._center,n._elevation=this._elevation,n.zoom=this.zoom,n.angle=this.angle,n._fov=this._fov,n._pitch=this._pitch,n._unmodified=this._unmodified,n._edgeInsets=this._edgeInsets.clone(),n._calcMatrices(),n}get minZoom(){return this._minZoom}set minZoom(n){this._minZoom!==n&&(this._minZoom=n,this.zoom=Math.max(this.zoom,n))}get maxZoom(){return this._maxZoom}set maxZoom(n){this._maxZoom!==n&&(this._maxZoom=n,this.zoom=Math.min(this.zoom,n))}get minPitch(){return this._minPitch}set minPitch(n){this._minPitch!==n&&(this._minPitch=n,this.pitch=Math.max(this.pitch,n))}get maxPitch(){return this._maxPitch}set maxPitch(n){this._maxPitch!==n&&(this._maxPitch=n,this.pitch=Math.min(this.pitch,n))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(n){n===void 0?n=!0:n===null&&(n=!1),this._renderWorldCopies=n}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new l.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(n){const s=-l.wrap(n,-180,180)*Math.PI/180;var h;this.angle!==s&&(this._unmodified=!1,this.angle=s,this._calcMatrices(),this.rotationMatrix=(h=new l.ARRAY_TYPE(4),l.ARRAY_TYPE!=Float32Array&&(h[1]=0,h[2]=0),h[0]=1,h[3]=1,h),function(f,y,x){var S=y[0],E=y[1],C=y[2],z=y[3],R=Math.sin(x),B=Math.cos(x);f[0]=S*B+C*R,f[1]=E*B+z*R,f[2]=S*-R+C*B,f[3]=E*-R+z*B}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(n){const s=l.clamp(n,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==s&&(this._unmodified=!1,this._pitch=s,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(n){n=Math.max(.01,Math.min(60,n)),this._fov!==n&&(this._unmodified=!1,this._fov=n/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(n){const s=Math.min(Math.max(n,this.minZoom),this.maxZoom);this._zoom!==s&&(this._unmodified=!1,this._zoom=s,this.scale=this.zoomScale(s),this.tileZoom=Math.floor(s),this.zoomFraction=s-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(n){n.lat===this._center.lat&&n.lng===this._center.lng||(this._unmodified=!1,this._center=n,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(n){n!==this._elevation&&(this._elevation=n,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(n){this._edgeInsets.equals(n)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,n,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(n){return this._edgeInsets.equals(n)}interpolatePadding(n,s,h){this._unmodified=!1,this._edgeInsets.interpolate(n,s,h),this._constrain(),this._calcMatrices()}coveringZoomLevel(n){const s=(n.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/n.tileSize));return Math.max(0,s)}getVisibleUnwrappedCoordinates(n){const s=[new l.UnwrappedTileID(0,n)];if(this._renderWorldCopies){const h=this.pointCoordinate(new l.pointGeometry(0,0)),f=this.pointCoordinate(new l.pointGeometry(this.width,0)),y=this.pointCoordinate(new l.pointGeometry(this.width,this.height)),x=this.pointCoordinate(new l.pointGeometry(0,this.height)),S=Math.floor(Math.min(h.x,f.x,y.x,x.x)),E=Math.floor(Math.max(h.x,f.x,y.x,x.x)),C=1;for(let z=S-C;z<=E+C;z++)z!==0&&s.push(new l.UnwrappedTileID(z,n))}return s}coveringTiles(n){var s,h;let f=this.coveringZoomLevel(n);const y=f;if(n.minzoom!==void 0&&f<n.minzoom)return[];n.maxzoom!==void 0&&f>n.maxzoom&&(f=n.maxzoom);const x=this.pointCoordinate(this.getCameraPoint()),S=l.MercatorCoordinate.fromLngLat(this.center),E=Math.pow(2,f),C=[E*x.x,E*x.y,0],z=[E*S.x,E*S.y,0],R=Zl.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,f);let B=n.minzoom||0;!n.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(B=f);const Z=n.terrain?2/Math.min(this.tileSize,n.tileSize)*this.tileSize:3,G=X=>({aabb:new Ks([X*E,0,0],[(X+1)*E,E,0]),zoom:0,x:0,y:0,wrap:X,fullyVisible:!1}),W=[],ie=[],ue=f,pe=n.reparseOverscaled?y:f;if(this._renderWorldCopies)for(let X=1;X<=3;X++)W.push(G(-X)),W.push(G(X));for(W.push(G(0));W.length>0;){const X=W.pop(),ye=X.x,me=X.y;let Ce=X.fullyVisible;if(!Ce){const et=X.aabb.intersects(R);if(et===0)continue;Ce=et===2}const Ie=n.terrain?C:z,Be=X.aabb.distanceX(Ie),Ee=X.aabb.distanceY(Ie),Qe=Math.max(Math.abs(Be),Math.abs(Ee)),je=Z+(1<<ue-X.zoom)-2;if(X.zoom===ue||Qe>je&&X.zoom>=B){const et=ue-X.zoom,St=C[0]-.5-(ye<<et),Ct=C[1]-.5-(me<<et);ie.push({tileID:new l.OverscaledTileID(X.zoom===ue?pe:X.zoom,X.wrap,X.zoom,ye,me),distanceSq:l.sqrLen([z[0]-.5-ye,z[1]-.5-me]),tileDistanceToCamera:Math.sqrt(St*St+Ct*Ct)})}else for(let et=0;et<4;et++){const St=(ye<<1)+et%2,Ct=(me<<1)+(et>>1),ft=X.zoom+1;let Yt=X.aabb.quadrant(et);if(n.terrain){const Jt=new l.OverscaledTileID(ft,X.wrap,ft,St,Ct),Ot=n.terrain.getMinMaxElevation(Jt),Ut=(s=Ot.minElevation)!==null&&s!==void 0?s:this.elevation,tr=(h=Ot.maxElevation)!==null&&h!==void 0?h:this.elevation;Yt=new Ks([Yt.min[0],Yt.min[1],Ut],[Yt.max[0],Yt.max[1],tr])}W.push({aabb:Yt,zoom:ft,x:St,y:Ct,wrap:X.wrap,fullyVisible:Ce})}}return ie.sort((X,ye)=>X.distanceSq-ye.distanceSq).map(X=>X.tileID)}resize(n,s){this.width=n,this.height=s,this.pixelsToGLUnits=[2/n,-2/s],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(n){return Math.pow(2,n)}scaleZoom(n){return Math.log(n)/Math.LN2}project(n){const s=l.clamp(n.lat,-this.maxValidLatitude,this.maxValidLatitude);return new l.pointGeometry(l.mercatorXfromLng(n.lng)*this.worldSize,l.mercatorYfromLat(s)*this.worldSize)}unproject(n){return new l.MercatorCoordinate(n.x/this.worldSize,n.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(n){this.freezeElevation||(this.elevation=n?this.getElevation(this._center,n):0)}getElevation(n,s){const h=l.MercatorCoordinate.fromLngLat(n),f=(1<<this.tileZoom)*l.EXTENT,y=h.x*f,x=h.y*f,S=Math.floor(y/l.EXTENT),E=Math.floor(x/l.EXTENT),C=new l.OverscaledTileID(this.tileZoom,0,this.tileZoom,S,E);return s.getElevation(C,y%l.EXTENT,x%l.EXTENT,l.EXTENT)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(n){const s=this.pointLocation(this.centerPoint,n),h=this.getElevation(s,n);if(!(this.elevation-h))return;const f=this.getCameraPosition(),y=l.MercatorCoordinate.fromLngLat(f.lngLat,f.altitude),x=l.MercatorCoordinate.fromLngLat(s,h),S=y.x-x.x,E=y.y-x.y,C=y.z-x.z,z=Math.sqrt(S*S+E*E+C*C),R=this.scaleZoom(this.cameraToCenterDistance/z/this.tileSize);this._elevation=h,this._center=s,this.zoom=R}setLocationAtPoint(n,s){const h=this.pointCoordinate(s),f=this.pointCoordinate(this.centerPoint),y=this.locationCoordinate(n),x=new l.MercatorCoordinate(y.x-(h.x-f.x),y.y-(h.y-f.y));this.center=this.coordinateLocation(x),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(n,s){return s?this.coordinatePoint(this.locationCoordinate(n),this.getElevation(n,s),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(n))}pointLocation(n,s){return this.coordinateLocation(this.pointCoordinate(n,s))}locationCoordinate(n){return l.MercatorCoordinate.fromLngLat(n)}coordinateLocation(n){return n&&n.toLngLat()}pointCoordinate(n,s){if(s){const B=s.pointCoordinate(n);if(B!=null)return B}const h=[n.x,n.y,0,1],f=[n.x,n.y,1,1];l.transformMat4(h,h,this.pixelMatrixInverse),l.transformMat4(f,f,this.pixelMatrixInverse);const y=h[3],x=f[3],S=h[1]/y,E=f[1]/x,C=h[2]/y,z=f[2]/x,R=C===z?0:(0-C)/(z-C);return new l.MercatorCoordinate(l.number(h[0]/y,f[0]/x,R)/this.worldSize,l.number(S,E,R)/this.worldSize)}coordinatePoint(n,s=0,h=this.pixelMatrix){const f=[n.x*this.worldSize,n.y*this.worldSize,s,1];return l.transformMat4(f,f,h),new l.pointGeometry(f[0]/f[3],f[1]/f[3])}getBounds(){const n=Math.max(0,this.height/2-this.getHorizon());return new l.LngLatBounds().extend(this.pointLocation(new l.pointGeometry(0,n))).extend(this.pointLocation(new l.pointGeometry(this.width,n))).extend(this.pointLocation(new l.pointGeometry(this.width,this.height))).extend(this.pointLocation(new l.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new l.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(n){n?(this.lngRange=[n.getWest(),n.getEast()],this.latRange=[n.getSouth(),n.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(n,s=!1){const h=n.key,f=s?this._alignedPosMatrixCache:this._posMatrixCache;if(f[h])return f[h];const y=n.canonical,x=this.worldSize/this.zoomScale(y.z),S=y.x+Math.pow(2,y.z)*n.wrap,E=l.identity(new Float64Array(16));return l.translate(E,E,[S*x,y.y*x,0]),l.scale(E,E,[x/l.EXTENT,x/l.EXTENT,1]),l.multiply(E,s?this.alignedProjMatrix:this.projMatrix,E),f[h]=new Float32Array(E),f[h]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let n,s,h,f,y=-90,x=90,S=-180,E=180;const C=this.size,z=this._unmodified;if(this.latRange){const Z=this.latRange;y=l.mercatorYfromLat(Z[1])*this.worldSize,x=l.mercatorYfromLat(Z[0])*this.worldSize,n=x-y<C.y?C.y/(x-y):0}if(this.lngRange){const Z=this.lngRange;S=l.wrap(l.mercatorXfromLng(Z[0])*this.worldSize,0,this.worldSize),E=l.wrap(l.mercatorXfromLng(Z[1])*this.worldSize,0,this.worldSize),E<S&&(E+=this.worldSize),s=E-S<C.x?C.x/(E-S):0}const R=this.point,B=Math.max(s||0,n||0);if(B)return this.center=this.unproject(new l.pointGeometry(s?(E+S)/2:R.x,n?(x+y)/2:R.y)),this.zoom+=this.scaleZoom(B),this._unmodified=z,void(this._constraining=!1);if(this.latRange){const Z=R.y,G=C.y/2;Z-G<y&&(f=y+G),Z+G>x&&(f=x-G)}if(this.lngRange){const Z=(S+E)/2,G=l.wrap(R.x,Z-this.worldSize/2,Z+this.worldSize/2),W=C.x/2;G-W<S&&(h=S+W),G+W>E&&(h=E-W)}h===void 0&&f===void 0||(this.center=this.unproject(new l.pointGeometry(h!==void 0?h:R.x,f!==void 0?f:R.y)).wrap()),this._unmodified=z,this._constraining=!1}_calcMatrices(){if(!this.height)return;const n=this.centerOffset,s=this.point.x,h=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=l.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let f=l.identity(new Float64Array(16));l.scale(f,f,[this.width/2,-this.height/2,1]),l.translate(f,f,[1,-1,0]),this.labelPlaneMatrix=f,f=l.identity(new Float64Array(16)),l.scale(f,f,[1,-1,1]),l.translate(f,f,[-1,-1,0]),l.scale(f,f,[2/this.width,2/this.height,1]),this.glCoordMatrix=f,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);const y=Math.PI/2+this._pitch,x=this._fov*(.5+n.y/this.height),S=Math.sin(x)*this.cameraToSeaLevelDistance/Math.sin(l.clamp(Math.PI-y-x,.01,Math.PI-.01)),E=this.getHorizon(),C=2*Math.atan(E/this.cameraToCenterDistance)*(.5+n.y/(2*E)),z=Math.sin(C)*this.cameraToSeaLevelDistance/Math.sin(l.clamp(Math.PI-y-C,.01,Math.PI-.01)),R=Math.cos(Math.PI/2-this._pitch)*S+this.cameraToSeaLevelDistance,B=Math.cos(Math.PI/2-this._pitch)*z+this.cameraToSeaLevelDistance,Z=1.01*Math.min(R,B),G=this.height/50;f=new Float64Array(16),l.perspective(f,this._fov,this.width/this.height,G,Z),f[8]=2*-n.x/this.width,f[9]=2*n.y/this.height,l.scale(f,f,[1,-1,1]),l.translate(f,f,[0,0,-this.cameraToCenterDistance]),l.rotateX(f,f,this._pitch),l.rotateZ(f,f,this.angle),l.translate(f,f,[-s,-h,0]),this.mercatorMatrix=l.scale([],f,[this.worldSize,this.worldSize,this.worldSize]),l.scale(f,f,[1,1,this._pixelPerMeter]),this.pixelMatrix=l.multiply(new Float64Array(16),this.labelPlaneMatrix,f),l.translate(f,f,[0,0,-this.elevation]),this.projMatrix=f,this.invProjMatrix=l.invert([],f),this.pixelMatrix3D=l.multiply(new Float64Array(16),this.labelPlaneMatrix,f);const W=this.width%2/2,ie=this.height%2/2,ue=Math.cos(this.angle),pe=Math.sin(this.angle),X=s-Math.round(s)+ue*W+pe*ie,ye=h-Math.round(h)+ue*ie+pe*W,me=new Float64Array(f);if(l.translate(me,me,[X>.5?X-1:X,ye>.5?ye-1:ye,0]),this.alignedProjMatrix=me,f=l.invert(new Float64Array(16),this.pixelMatrix),!f)throw new Error("failed to invert matrix");this.pixelMatrixInverse=f,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const n=this.pointCoordinate(new l.pointGeometry(0,0)),s=[n.x*this.worldSize,n.y*this.worldSize,0,1];return l.transformMat4(s,s,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const n=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.pointGeometry(0,n))}getCameraQueryGeometry(n){const s=this.getCameraPoint();if(n.length===1)return[n[0],s];{let h=s.x,f=s.y,y=s.x,x=s.y;for(const S of n)h=Math.min(h,S.x),f=Math.min(f,S.y),y=Math.max(y,S.x),x=Math.max(x,S.y);return[new l.pointGeometry(h,f),new l.pointGeometry(y,f),new l.pointGeometry(y,x),new l.pointGeometry(h,x),new l.pointGeometry(h,f)]}}}class nd{constructor(n){this._hashName=n&&encodeURIComponent(n),l.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(s,h){let f=!1,y=null;const x=()=>{y=null,f&&(s(),y=setTimeout(x,300),f=!1)};return()=>(f=!0,y||x(),y)}(this._updateHashUnthrottled.bind(this))}addTo(n){return this._map=n,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(n){const s=this._map.getCenter(),h=Math.round(100*this._map.getZoom())/100,f=Math.ceil((h*Math.LN2+Math.log(512/360/.5))/Math.LN10),y=Math.pow(10,f),x=Math.round(s.lng*y)/y,S=Math.round(s.lat*y)/y,E=this._map.getBearing(),C=this._map.getPitch();let z="";if(z+=n?`/${x}/${S}/${h}`:`${h}/${S}/${x}`,(E||C)&&(z+="/"+Math.round(10*E)/10),C&&(z+=`/${Math.round(C)}`),this._hashName){const R=this._hashName;let B=!1;const Z=window.location.hash.slice(1).split("&").map(G=>{const W=G.split("=")[0];return W===R?(B=!0,`${W}=${z}`):G}).filter(G=>G);return B||Z.push(`${R}=${z}`),`#${Z.join("&")}`}return`#${z}`}_getCurrentHash(){const n=window.location.hash.replace("#","");if(this._hashName){let s;return n.split("&").map(h=>h.split("=")).forEach(h=>{h[0]===this._hashName&&(s=h)}),(s&&s[1]||"").split("/")}return n.split("/")}_onHashChange(){const n=this._getCurrentHash();if(n.length>=3&&!n.some(s=>isNaN(s))){const s=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(n[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+n[2],+n[1]],zoom:+n[0],bearing:s,pitch:+(n[4]||0)}),!0}return!1}_updateHashUnthrottled(){const n=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,n)}catch{}}}const Js={linearity:.3,easing:l.bezier(0,0,.3,1)},id=l.extend({deceleration:2500,maxSpeed:1400},Js),od=l.extend({deceleration:20,maxSpeed:1400},Js),ad=l.extend({deceleration:1e3,maxSpeed:360},Js),Ja=l.extend({deceleration:1e3,maxSpeed:90},Js);class sd{constructor(n){this._map=n,this.clear()}clear(){this._inertiaBuffer=[]}record(n){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:l.exported.now(),settings:n})}_drainInertiaBuffer(){const n=this._inertiaBuffer,s=l.exported.now();for(;n.length>0&&s-n[0].time>160;)n.shift()}_onMoveEnd(n){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const s={zoom:0,bearing:0,pitch:0,pan:new l.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:y}of this._inertiaBuffer)s.zoom+=y.zoomDelta||0,s.bearing+=y.bearingDelta||0,s.pitch+=y.pitchDelta||0,y.panDelta&&s.pan._add(y.panDelta),y.around&&(s.around=y.around),y.pinchAround&&(s.pinchAround=y.pinchAround);const h=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,f={};if(s.pan.mag()){const y=el(s.pan.mag(),h,l.extend({},id,n||{}));f.offset=s.pan.mult(y.amount/s.pan.mag()),f.center=this._map.transform.center,Qs(f,y)}if(s.zoom){const y=el(s.zoom,h,od);f.zoom=this._map.transform.zoom+y.amount,Qs(f,y)}if(s.bearing){const y=el(s.bearing,h,ad);f.bearing=this._map.transform.bearing+l.clamp(y.amount,-179,179),Qs(f,y)}if(s.pitch){const y=el(s.pitch,h,Ja);f.pitch=this._map.transform.pitch+y.amount,Qs(f,y)}if(f.zoom||f.bearing){const y=s.pinchAround===void 0?s.around:s.pinchAround;f.around=y?this._map.unproject(y):this._map.getCenter()}return this.clear(),l.extend(f,{noMoveStart:!0})}}function Qs(d,n){(!d.duration||d.duration<n.duration)&&(d.duration=n.duration,d.easing=n.easing)}function el(d,n,s){const{maxSpeed:h,linearity:f,deceleration:y}=s,x=l.clamp(d*f/(n/1e3),-h,h),S=Math.abs(x)/(y*f);return{easing:s.easing,duration:1e3*S,amount:x*(S/2)}}class ri extends l.Event{constructor(n,s,h,f={}){const y=U.mousePos(s.getCanvasContainer(),h),x=s.unproject(y);super(n,l.extend({point:y,lngLat:x,originalEvent:h},f)),this._defaultPrevented=!1,this.target=s}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class tl extends l.Event{constructor(n,s,h){const f=n==="touchend"?h.changedTouches:h.touches,y=U.touchPos(s.getCanvasContainer(),f),x=y.map(E=>s.unproject(E)),S=y.reduce((E,C,z,R)=>E.add(C.div(R.length)),new l.pointGeometry(0,0));super(n,{points:y,point:S,lngLats:x,lngLat:s.unproject(S),originalEvent:h}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class ni extends l.Event{constructor(n,s,h){super(n,{originalEvent:h}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Xf{constructor(n,s){this._map=n,this._clickTolerance=s.clickTolerance}reset(){delete this._mousedownPos}wheel(n){return this._firePreventable(new ni(n.type,this._map,n))}mousedown(n,s){return this._mousedownPos=s,this._firePreventable(new ri(n.type,this._map,n))}mouseup(n){this._map.fire(new ri(n.type,this._map,n))}click(n,s){this._mousedownPos&&this._mousedownPos.dist(s)>=this._clickTolerance||this._map.fire(new ri(n.type,this._map,n))}dblclick(n){return this._firePreventable(new ri(n.type,this._map,n))}mouseover(n){this._map.fire(new ri(n.type,this._map,n))}mouseout(n){this._map.fire(new ri(n.type,this._map,n))}touchstart(n){return this._firePreventable(new tl(n.type,this._map,n))}touchmove(n){this._map.fire(new tl(n.type,this._map,n))}touchend(n){this._map.fire(new tl(n.type,this._map,n))}touchcancel(n){this._map.fire(new tl(n.type,this._map,n))}_firePreventable(n){if(this._map.fire(n),n.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Oo{constructor(n){this._map=n}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(n){this._map.fire(new ri(n.type,this._map,n))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ri("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(n){this._delayContextMenu?this._contextMenuEvent=n:this._ignoreContextMenu||this._map.fire(new ri(n.type,this._map,n)),this._map.listens("contextmenu")&&n.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ld{constructor(n,s){this._map=n,this._el=n.getCanvasContainer(),this._container=n.getContainer(),this._clickTolerance=s.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(n,s){this.isEnabled()&&n.shiftKey&&n.button===0&&(U.disableDrag(),this._startPos=this._lastPos=s,this._active=!0)}mousemoveWindow(n,s){if(!this._active)return;const h=s;if(this._lastPos.equals(h)||!this._box&&h.dist(this._startPos)<this._clickTolerance)return;const f=this._startPos;this._lastPos=h,this._box||(this._box=U.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",n));const y=Math.min(f.x,h.x),x=Math.max(f.x,h.x),S=Math.min(f.y,h.y),E=Math.max(f.y,h.y);U.setTransform(this._box,`translate(${y}px,${S}px)`),this._box.style.width=x-y+"px",this._box.style.height=E-S+"px"}mouseupWindow(n,s){if(!this._active||n.button!==0)return;const h=this._startPos,f=s;if(this.reset(),U.suppressClick(),h.x!==f.x||h.y!==f.y)return this._map.fire(new l.Event("boxzoomend",{originalEvent:n})),{cameraAnimation:y=>y.fitScreenCoordinates(h,f,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",n)}keydown(n){this._active&&n.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",n))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(U.remove(this._box),this._box=null),U.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(n,s){return this._map.fire(new l.Event(n,{originalEvent:s}))}}function po(d,n){if(d.length!==n.length)throw new Error(`The number of touches and points are not equal - touches ${d.length}, points ${n.length}`);const s={};for(let h=0;h<d.length;h++)s[d[h].identifier]=n[h];return s}class rl{constructor(n){this.reset(),this.numTouches=n.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(n,s,h){(this.centroid||h.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=n.timeStamp),h.length===this.numTouches&&(this.centroid=function(f){const y=new l.pointGeometry(0,0);for(const x of f)y._add(x);return y.div(f.length)}(s),this.touches=po(h,s)))}touchmove(n,s,h){if(this.aborted||!this.centroid)return;const f=po(h,s);for(const y in this.touches){const x=this.touches[y],S=f[y];(!S||S.dist(x)>30)&&(this.aborted=!0)}}touchend(n,s,h){if((!this.centroid||n.timeStamp-this.startTime>500)&&(this.aborted=!0),h.length===0){const f=!this.aborted&&this.centroid;if(this.reset(),f)return f}}}class nc{constructor(n){this.singleTap=new rl(n),this.numTaps=n.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(n,s,h){this.singleTap.touchstart(n,s,h)}touchmove(n,s,h){this.singleTap.touchmove(n,s,h)}touchend(n,s,h){const f=this.singleTap.touchend(n,s,h);if(f){const y=n.timeStamp-this.lastTime<500,x=!this.lastTap||this.lastTap.dist(f)<30;if(y&&x||this.reset(),this.count++,this.lastTime=n.timeStamp,this.lastTap=f,this.count===this.numTaps)return this.reset(),f}}}class Kf{constructor(){this._zoomIn=new nc({numTouches:1,numTaps:2}),this._zoomOut=new nc({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(n,s,h){this._zoomIn.touchstart(n,s,h),this._zoomOut.touchstart(n,s,h)}touchmove(n,s,h){this._zoomIn.touchmove(n,s,h),this._zoomOut.touchmove(n,s,h)}touchend(n,s,h){const f=this._zoomIn.touchend(n,s,h),y=this._zoomOut.touchend(n,s,h);return f?(this._active=!0,n.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:x=>x.easeTo({duration:300,zoom:x.getZoom()+1,around:x.unproject(f)},{originalEvent:n})}):y?(this._active=!0,n.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:x=>x.easeTo({duration:300,zoom:x.getZoom()-1,around:x.unproject(y)},{originalEvent:n})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Yf={0:1,2:2};class Hl{constructor(n){this.reset(),this._clickTolerance=n.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(n,s){return!1}_move(n,s){return{}}mousedown(n,s){if(this._lastPoint)return;const h=U.mouseButton(n);this._correctButton(n,h)&&(this._lastPoint=s,this._eventButton=h)}mousemoveWindow(n,s){const h=this._lastPoint;if(h){if(n.preventDefault(),function(f,y){const x=Yf[y];return f.buttons===void 0||(f.buttons&x)!==x}(n,this._eventButton))this.reset();else if(this._moved||!(s.dist(h)<this._clickTolerance))return this._moved=!0,this._lastPoint=s,this._move(h,s)}}mouseupWindow(n){this._lastPoint&&U.mouseButton(n)===this._eventButton&&(this._moved&&U.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class nl extends Hl{mousedown(n,s){super.mousedown(n,s),this._lastPoint&&(this._active=!0)}_correctButton(n,s){return s===0&&!n.ctrlKey}_move(n,s){return{around:s,panDelta:s.sub(n)}}}class fo extends Hl{_correctButton(n,s){return s===0&&n.ctrlKey||s===2}_move(n,s){const h=.8*(s.x-n.x);if(h)return this._active=!0,{bearingDelta:h}}contextmenu(n){n.preventDefault()}}class nt extends Hl{_correctButton(n,s){return s===0&&n.ctrlKey||s===2}_move(n,s){const h=-.5*(s.y-n.y);if(h)return this._active=!0,{pitchDelta:h}}contextmenu(n){n.preventDefault()}}class ud{constructor(n,s){this._minTouches=n.cooperativeGestures?2:1,this._clickTolerance=n.clickTolerance||1,this._map=s,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new l.pointGeometry(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(n,s,h){return this._calculateTransform(n,s,h)}touchmove(n,s,h){if(this._map._cooperativeGestures&&(this._minTouches===2&&h.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(n,!1,h.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(h.length<this._minTouches))return n.preventDefault(),this._calculateTransform(n,s,h)}touchend(n,s,h){this._calculateTransform(n,s,h),this._active&&h.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(n,s,h){h.length>0&&(this._active=!0);const f=po(h,s),y=new l.pointGeometry(0,0),x=new l.pointGeometry(0,0);let S=0;for(const C in f){const z=f[C],R=this._touches[C];R&&(y._add(z),x._add(z.sub(R)),S++,f[C]=z)}if(this._touches=f,S<this._minTouches||!x.mag())return;const E=x.div(S);return this._sum._add(E),this._sum.mag()<this._clickTolerance?void 0:{around:y.div(S),panDelta:E}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class _a{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(n){}_move(n,s,h){return{}}touchstart(n,s,h){this._firstTwoTouches||h.length<2||(this._firstTwoTouches=[h[0].identifier,h[1].identifier],this._start([s[0],s[1]]))}touchmove(n,s,h){if(!this._firstTwoTouches)return;n.preventDefault();const[f,y]=this._firstTwoTouches,x=No(h,s,f),S=No(h,s,y);if(!x||!S)return;const E=this._aroundCenter?null:x.add(S).div(2);return this._move([x,S],E,n)}touchend(n,s,h){if(!this._firstTwoTouches)return;const[f,y]=this._firstTwoTouches,x=No(h,s,f),S=No(h,s,y);x&&S||(this._active&&U.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(n){this._enabled=!0,this._aroundCenter=!!n&&n.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function No(d,n,s){for(let h=0;h<d.length;h++)if(d[h].identifier===s)return n[h]}function ic(d,n){return Math.log(d/n)/Math.LN2}class Xe extends _a{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(n){this._startDistance=this._distance=n[0].dist(n[1])}_move(n,s){const h=this._distance;if(this._distance=n[0].dist(n[1]),this._active||!(Math.abs(ic(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:ic(this._distance,h),pinchAround:s}}}function Xl(d,n){return 180*d.angleWith(n)/Math.PI}class Jf extends _a{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(n){this._startVector=this._vector=n[0].sub(n[1]),this._minDiameter=n[0].dist(n[1])}_move(n,s){const h=this._vector;if(this._vector=n[0].sub(n[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Xl(this._vector,h),pinchAround:s}}_isBelowThreshold(n){this._minDiameter=Math.min(this._minDiameter,n.mag());const s=25/(Math.PI*this._minDiameter)*360,h=Xl(n,this._startVector);return Math.abs(h)<s}}function oc(d){return Math.abs(d.y)>Math.abs(d.x)}class ac extends _a{constructor(n){super(),this._map=n}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(n,s,h){super.touchstart(n,s,h),this._currentTouchCount=h.length}_start(n){this._lastPoints=n,oc(n[0].sub(n[1]))&&(this._valid=!1)}_move(n,s,h){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const f=n[0].sub(this._lastPoints[0]),y=n[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(f,y,h.timeStamp),this._valid?(this._lastPoints=n,this._active=!0,{pitchDelta:(f.y+y.y)/2*-.5}):void 0}gestureBeginsVertically(n,s,h){if(this._valid!==void 0)return this._valid;const f=n.mag()>=2,y=s.mag()>=2;if(!f&&!y)return;if(!f||!y)return this._firstMove===void 0&&(this._firstMove=h),h-this._firstMove<100&&void 0;const x=n.y>0==s.y>0;return oc(n)&&oc(s)&&x}}const cd={panStep:100,bearingStep:15,pitchStep:10};class hd{constructor(){const n=cd;this._panStep=n.panStep,this._bearingStep=n.bearingStep,this._pitchStep=n.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(n){if(n.altKey||n.ctrlKey||n.metaKey)return;let s=0,h=0,f=0,y=0,x=0;switch(n.keyCode){case 61:case 107:case 171:case 187:s=1;break;case 189:case 109:case 173:s=-1;break;case 37:n.shiftKey?h=-1:(n.preventDefault(),y=-1);break;case 39:n.shiftKey?h=1:(n.preventDefault(),y=1);break;case 38:n.shiftKey?f=1:(n.preventDefault(),x=-1);break;case 40:n.shiftKey?f=-1:(n.preventDefault(),x=1);break;default:return}return this._rotationDisabled&&(h=0,f=0),{cameraAnimation:S=>{const E=S.getZoom();S.easeTo({duration:300,easeId:"keyboardHandler",easing:Qf,zoom:s?Math.round(E)+s*(n.shiftKey?2:1):E,bearing:S.getBearing()+h*this._bearingStep,pitch:S.getPitch()+f*this._pitchStep,offset:[-y*this._panStep,-x*this._panStep],center:S.getCenter()},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Qf(d){return d*(2-d)}const dd=4.000244140625;class sc{constructor(n,s){this._map=n,this._el=n.getCanvasContainer(),this._handler=s,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,l.bindAll(["_onTimeout"],this)}setZoomRate(n){this._defaultZoomRate=n}setWheelZoomRate(n){this._wheelZoomRate=n}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(n){this.isEnabled()||(this._enabled=!0,this._aroundCenter=n&&n.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(n){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!this._map._metaPress)return;n.preventDefault()}let s=n.deltaMode===WheelEvent.DOM_DELTA_LINE?40*n.deltaY:n.deltaY;const h=l.exported.now(),f=h-(this._lastWheelEventTime||0);this._lastWheelEventTime=h,s!==0&&s%dd==0?this._type="wheel":s!==0&&Math.abs(s)<4?this._type="trackpad":f>400?(this._type=null,this._lastValue=s,this._timeout=setTimeout(this._onTimeout,40,n)):this._type||(this._type=Math.abs(f*s)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,s+=this._lastValue)),n.shiftKey&&s&&(s/=4),this._type&&(this._lastWheelEvent=n,this._delta-=s,this._active||this._start(n)),n.preventDefault()}_onTimeout(n){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(n)}_start(n){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const s=U.mousePos(this._el,n);this._around=l.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(s)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const n=this._map.transform;if(this._delta!==0){const S=this._type==="wheel"&&Math.abs(this._delta)>dd?this._wheelZoomRate:this._defaultZoomRate;let E=2/(1+Math.exp(-Math.abs(this._delta*S)));this._delta<0&&E!==0&&(E=1/E);const C=typeof this._targetZoom=="number"?n.zoomScale(this._targetZoom):n.scale;this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom(C*E))),this._type==="wheel"&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const s=typeof this._targetZoom=="number"?this._targetZoom:n.zoom,h=this._startZoom,f=this._easing;let y,x=!1;if(this._type==="wheel"&&h&&f){const S=Math.min((l.exported.now()-this._lastWheelEventTime)/200,1),E=f(S);y=l.number(h,s,E),S<1?this._frameId||(this._frameId=!0):x=!0}else y=s,x=!0;return this._active=!0,x&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!x,zoomDelta:y-n.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(n){let s=l.ease;if(this._prevEase){const h=this._prevEase,f=(l.exported.now()-h.start)/h.duration,y=h.easing(f+.01)-h.easing(f),x=.27/Math.sqrt(y*y+1e-4)*.01,S=Math.sqrt(.0729-x*x);s=l.bezier(x,S,.25,1)}return this._prevEase={start:l.exported.now(),duration:n,easing:s},s}reset(){this._active=!1}}class lc{constructor(n,s){this._clickZoom=n,this._tapZoom=s}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class uc{constructor(){this.reset()}reset(){this._active=!1}dblclick(n,s){return n.preventDefault(),{cameraAnimation:h=>{h.easeTo({duration:300,zoom:h.getZoom()+(n.shiftKey?-1:1),around:h.unproject(s)},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class cc{constructor(){this._tap=new nc({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(n,s,h){this._swipePoint||(this._tapTime&&n.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?h.length>0&&(this._swipePoint=s[0],this._swipeTouch=h[0].identifier):this._tap.touchstart(n,s,h))}touchmove(n,s,h){if(this._tapTime){if(this._swipePoint){if(h[0].identifier!==this._swipeTouch)return;const f=s[0],y=f.y-this._swipePoint.y;return this._swipePoint=f,n.preventDefault(),this._active=!0,{zoomDelta:y/128}}}else this._tap.touchmove(n,s,h)}touchend(n,s,h){this._tapTime?this._swipePoint&&h.length===0&&this.reset():this._tap.touchend(n,s,h)&&(this._tapTime=n.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Wn{constructor(n,s,h){this._el=n,this._mousePan=s,this._touchPan=h}enable(n){this._inertiaOptions=n||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class $o{constructor(n,s,h){this._pitchWithRotate=n.pitchWithRotate,this._mouseRotate=s,this._mousePitch=h}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class pd{constructor(n,s,h,f){this._el=n,this._touchZoom=s,this._touchRotate=h,this._tapDragZoom=f,this._rotationDisabled=!1,this._enabled=!0}enable(n){this._touchZoom.enable(n),this._rotationDisabled||this._touchRotate.enable(n),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Qa=d=>d.zoom||d.drag||d.pitch||d.rotate;class hc extends l.Event{}function il(d){return d.panDelta&&d.panDelta.mag()||d.zoomDelta||d.bearingDelta||d.pitchDelta}class fd{constructor(n,s){this._map=n,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new sd(n),this._bearingSnap=s.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(s),l.bindAll(["handleEvent","handleWindowEvent"],this);const h=this._el;this._listeners=[[h,"touchstart",{passive:!0}],[h,"touchmove",{passive:!1}],[h,"touchend",void 0],[h,"touchcancel",void 0],[h,"mousedown",void 0],[h,"mousemove",void 0],[h,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[h,"mouseover",void 0],[h,"mouseout",void 0],[h,"dblclick",void 0],[h,"click",void 0],[h,"keydown",{capture:!1}],[h,"keyup",void 0],[h,"wheel",{passive:!1}],[h,"contextmenu",void 0],[window,"blur",void 0]];for(const[f,y,x]of this._listeners)U.addEventListener(f,y,f===document?this.handleWindowEvent:this.handleEvent,x)}destroy(){for(const[n,s,h]of this._listeners)U.removeEventListener(n,s,n===document?this.handleWindowEvent:this.handleEvent,h)}_addDefaultHandlers(n){const s=this._map,h=s.getCanvasContainer();this._add("mapEvent",new Xf(s,n));const f=s.boxZoom=new ld(s,n);this._add("boxZoom",f);const y=new Kf,x=new uc;s.doubleClickZoom=new lc(x,y),this._add("tapZoom",y),this._add("clickZoom",x);const S=new cc;this._add("tapDragZoom",S);const E=s.touchPitch=new ac(s);this._add("touchPitch",E);const C=new fo(n),z=new nt(n);s.dragRotate=new $o(n,C,z),this._add("mouseRotate",C,["mousePitch"]),this._add("mousePitch",z,["mouseRotate"]);const R=new nl(n),B=new ud(n,s);s.dragPan=new Wn(h,R,B),this._add("mousePan",R),this._add("touchPan",B,["touchZoom","touchRotate"]);const Z=new Jf,G=new Xe;s.touchZoomRotate=new pd(h,G,Z,S),this._add("touchRotate",Z,["touchPan","touchZoom"]),this._add("touchZoom",G,["touchPan","touchRotate"]);const W=s.scrollZoom=new sc(s,this);this._add("scrollZoom",W,["mousePan"]);const ie=s.keyboard=new hd;this._add("keyboard",ie),this._add("blockableMapEvent",new Oo(s));for(const ue of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])n.interactive&&n[ue]&&s[ue].enable(n[ue])}_add(n,s,h){this._handlers.push({handlerName:n,handler:s,allowed:h}),this._handlersById[n]=s}stop(n){if(!this._updatingCamera){for(const{handler:s}of this._handlers)s.reset();this._inertia.clear(),this._fireEvents({},{},n),this._changes=[]}}isActive(){for(const{handler:n}of this._handlers)if(n.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(Qa(this._eventsInProgress))||this.isZooming()}_blockedByActive(n,s,h){for(const f in n)if(f!==h&&(!s||s.indexOf(f)<0))return!0;return!1}handleWindowEvent(n){this.handleEvent(n,`${n.type}Window`)}_getMapTouches(n){const s=[];for(const h of n)this._el.contains(h.target)&&s.push(h);return s}handleEvent(n,s){if(n.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const h=n.type==="renderFrame"?void 0:n,f={needsRenderFrame:!1},y={},x={},S=n.touches,E=S?this._getMapTouches(S):void 0,C=E?U.touchPos(this._el,E):U.mousePos(this._el,n);for(const{handlerName:B,handler:Z,allowed:G}of this._handlers){if(!Z.isEnabled())continue;let W;this._blockedByActive(x,G,B)?Z.reset():Z[s||n.type]&&(W=Z[s||n.type](n,C,E),this.mergeHandlerResult(f,y,W,B,h),W&&W.needsRenderFrame&&this._triggerRenderFrame()),(W||Z.isActive())&&(x[B]=Z)}const z={};for(const B in this._previousActiveHandlers)x[B]||(z[B]=h);this._previousActiveHandlers=x,(Object.keys(z).length||il(f))&&(this._changes.push([f,y,z]),this._triggerRenderFrame()),(Object.keys(x).length||il(f))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:R}=f;R&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],R(this._map))}mergeHandlerResult(n,s,h,f,y){if(!h)return;l.extend(n,h);const x={handlerName:f,originalEvent:h.originalEvent||y};h.zoomDelta!==void 0&&(s.zoom=x),h.panDelta!==void 0&&(s.drag=x),h.pitchDelta!==void 0&&(s.pitch=x),h.bearingDelta!==void 0&&(s.rotate=x)}_applyChanges(){const n={},s={},h={};for(const[f,y,x]of this._changes)f.panDelta&&(n.panDelta=(n.panDelta||new l.pointGeometry(0,0))._add(f.panDelta)),f.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+f.zoomDelta),f.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+f.bearingDelta),f.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+f.pitchDelta),f.around!==void 0&&(n.around=f.around),f.pinchAround!==void 0&&(n.pinchAround=f.pinchAround),f.noInertia&&(n.noInertia=f.noInertia),l.extend(s,y),l.extend(h,x);this._updateMapTransform(n,s,h),this._changes=[]}_updateMapTransform(n,s,h){const f=this._map,y=f.transform,x=f.style&&f.style.terrain;if(!(il(n)||x&&this._drag))return this._fireEvents(s,h,!0);let{panDelta:S,zoomDelta:E,bearingDelta:C,pitchDelta:z,around:R,pinchAround:B}=n;B!==void 0&&(R=B),f._stop(!0),R=R||f.transform.centerPoint;const Z=y.pointLocation(S?R.sub(S):R);C&&(y.bearing+=C),z&&(y.pitch+=z),E&&(y.zoom+=E),x?s.drag&&!this._drag?(this._drag={center:y.centerPoint,lngLat:y.pointLocation(R),point:R,handlerName:s.drag.handlerName},f.fire(new l.Event("freezeElevation",{freeze:!0}))):this._drag&&h[this._drag.handlerName]?(f.fire(new l.Event("freezeElevation",{freeze:!1})),this._drag=null):s.drag&&this._drag&&(y.center=y.pointLocation(y.centerPoint.sub(S))):y.setLocationAtPoint(Z,R),this._map._update(),n.noInertia||this._inertia.record(n),this._fireEvents(s,h,!0)}_fireEvents(n,s,h){const f=Qa(this._eventsInProgress),y=Qa(n),x={};for(const z in n){const{originalEvent:R}=n[z];this._eventsInProgress[z]||(x[`${z}start`]=R),this._eventsInProgress[z]=n[z]}!f&&y&&this._fireEvent("movestart",y.originalEvent);for(const z in x)this._fireEvent(z,x[z]);y&&this._fireEvent("move",y.originalEvent);for(const z in n){const{originalEvent:R}=n[z];this._fireEvent(z,R)}const S={};let E;for(const z in this._eventsInProgress){const{handlerName:R,originalEvent:B}=this._eventsInProgress[z];this._handlersById[R].isActive()||(delete this._eventsInProgress[z],E=s[R]||B,S[`${z}end`]=E)}for(const z in S)this._fireEvent(z,S[z]);const C=Qa(this._eventsInProgress);if(h&&(f||y)&&!C){this._updatingCamera=!0;const z=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),R=B=>B!==0&&-this._bearingSnap<B&&B<this._bearingSnap;z?(R(z.bearing||this._map.getBearing())&&(z.bearing=0),this._map.easeTo(z,{originalEvent:E})):(this._map.fire(new l.Event("moveend",{originalEvent:E})),R(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(n,s){this._map.fire(new l.Event(n,s?{originalEvent:s}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(n=>{delete this._frameId,this.handleEvent(new hc("renderFrame",{timeStamp:n})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const gi={extend:(d,...n)=>l.extend(d,...n),run(d){d()},logToElement(d,n=!1,s="log"){const h=window.document.getElementById(s);h&&(n&&(h.innerHTML=""),h.innerHTML+=`<br>${d}`)}};class _r extends l.Evented{constructor(n,s){super(),this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=s.bearingSnap,l.bindAll(["_renderFrameCallback"],this)}getCenter(){return new l.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(n,s){return this.jumpTo({center:n},s)}panBy(n,s,h){return n=l.pointGeometry.convert(n).mult(-1),this.panTo(this.transform.center,l.extend({offset:n},s),h)}panTo(n,s,h){return this.easeTo(l.extend({center:n},s),h)}getZoom(){return this.transform.zoom}setZoom(n,s){return this.jumpTo({zoom:n},s),this}zoomTo(n,s,h){return this.easeTo(l.extend({zoom:n},s),h)}zoomIn(n,s){return this.zoomTo(this.getZoom()+1,n,s),this}zoomOut(n,s){return this.zoomTo(this.getZoom()-1,n,s),this}getBearing(){return this.transform.bearing}setBearing(n,s){return this.jumpTo({bearing:n},s),this}getPadding(){return this.transform.padding}setPadding(n,s){return this.jumpTo({padding:n},s),this}rotateTo(n,s,h){return this.easeTo(l.extend({bearing:n},s),h)}resetNorth(n,s){return this.rotateTo(0,l.extend({duration:1e3},n),s),this}resetNorthPitch(n,s){return this.easeTo(l.extend({bearing:0,pitch:0,duration:1e3},n),s),this}snapToNorth(n,s){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(n,s):this}getPitch(){return this.transform.pitch}setPitch(n,s){return this.jumpTo({pitch:n},s),this}cameraForBounds(n,s){n=l.LngLatBounds.convert(n);const h=s&&s.bearing||0;return this._cameraForBoxAndBearing(n.getNorthWest(),n.getSouthEast(),h,s)}_cameraForBoxAndBearing(n,s,h,f){const y={top:0,bottom:0,right:0,left:0};if(typeof(f=l.extend({padding:y,offset:[0,0],maxZoom:this.transform.maxZoom},f)).padding=="number"){const me=f.padding;f.padding={top:me,bottom:me,right:me,left:me}}f.padding=l.extend(y,f.padding);const x=this.transform,S=x.padding,E=x.project(l.LngLat.convert(n)),C=x.project(l.LngLat.convert(s)),z=E.rotate(-h*Math.PI/180),R=C.rotate(-h*Math.PI/180),B=new l.pointGeometry(Math.max(z.x,R.x),Math.max(z.y,R.y)),Z=new l.pointGeometry(Math.min(z.x,R.x),Math.min(z.y,R.y)),G=B.sub(Z),W=(x.width-(S.left+S.right+f.padding.left+f.padding.right))/G.x,ie=(x.height-(S.top+S.bottom+f.padding.top+f.padding.bottom))/G.y;if(ie<0||W<0)return void l.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const ue=Math.min(x.scaleZoom(x.scale*Math.min(W,ie)),f.maxZoom),pe=l.pointGeometry.convert(f.offset),X=new l.pointGeometry((f.padding.left-f.padding.right)/2,(f.padding.top-f.padding.bottom)/2).rotate(h*Math.PI/180),ye=pe.add(X).mult(x.scale/x.zoomScale(ue));return{center:x.unproject(E.add(C).div(2).sub(ye)),zoom:ue,bearing:h}}fitBounds(n,s,h){return this._fitInternal(this.cameraForBounds(n,s),s,h)}fitScreenCoordinates(n,s,h,f,y){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(l.pointGeometry.convert(n)),this.transform.pointLocation(l.pointGeometry.convert(s)),h,f),f,y)}_fitInternal(n,s,h){return n?(delete(s=l.extend(n,s)).padding,s.linear?this.easeTo(s,h):this.flyTo(s,h)):this}jumpTo(n,s){this.stop();const h=this.transform;let f=!1,y=!1,x=!1;return"zoom"in n&&h.zoom!==+n.zoom&&(f=!0,h.zoom=+n.zoom),n.center!==void 0&&(h.center=l.LngLat.convert(n.center)),"bearing"in n&&h.bearing!==+n.bearing&&(y=!0,h.bearing=+n.bearing),"pitch"in n&&h.pitch!==+n.pitch&&(x=!0,h.pitch=+n.pitch),n.padding==null||h.isPaddingEqual(n.padding)||(h.padding=n.padding),this.fire(new l.Event("movestart",s)).fire(new l.Event("move",s)),f&&this.fire(new l.Event("zoomstart",s)).fire(new l.Event("zoom",s)).fire(new l.Event("zoomend",s)),y&&this.fire(new l.Event("rotatestart",s)).fire(new l.Event("rotate",s)).fire(new l.Event("rotateend",s)),x&&this.fire(new l.Event("pitchstart",s)).fire(new l.Event("pitch",s)).fire(new l.Event("pitchend",s)),this.fire(new l.Event("moveend",s))}calculateCameraOptionsFromTo(n,s,h,f=0){const y=l.MercatorCoordinate.fromLngLat(n,s),x=l.MercatorCoordinate.fromLngLat(h,f),S=x.x-y.x,E=x.y-y.y,C=x.z-y.z,z=Math.hypot(S,E,C);if(z===0)throw new Error("Can't calculate camera options with same From and To");const R=Math.hypot(S,E),B=this.transform.scaleZoom(this.transform.cameraToCenterDistance/z/this.transform.tileSize),Z=180*Math.atan2(S,-E)/Math.PI;let G=180*Math.acos(R/z)/Math.PI;return G=C<0?90-G:90+G,{center:x.toLngLat(),zoom:B,pitch:G,bearing:Z}}easeTo(n,s){this._stop(!1,n.easeId),((n=l.extend({offset:[0,0],duration:500,easing:l.ease},n)).animate===!1||!n.essential&&l.exported.prefersReducedMotion)&&(n.duration=0);const h=this.transform,f=this.getZoom(),y=this.getBearing(),x=this.getPitch(),S=this.getPadding(),E="zoom"in n?+n.zoom:f,C="bearing"in n?this._normalizeBearing(n.bearing,y):y,z="pitch"in n?+n.pitch:x,R="padding"in n?n.padding:h.padding,B=l.pointGeometry.convert(n.offset);let Z=h.centerPoint.add(B);const G=h.pointLocation(Z),W=l.LngLat.convert(n.center||G);this._normalizeCenter(W);const ie=h.project(G),ue=h.project(W).sub(ie),pe=h.zoomScale(E-f);let X,ye;n.around&&(X=l.LngLat.convert(n.around),ye=h.locationPoint(X));const me={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||E!==f,this._rotating=this._rotating||y!==C,this._pitching=this._pitching||z!==x,this._padding=!h.isPaddingEqual(R),this._easeId=n.easeId,this._prepareEase(s,n.noMoveStart,me),this._ease(Ce=>{if(this._zooming&&(h.zoom=l.number(f,E,Ce)),this._rotating&&(h.bearing=l.number(y,C,Ce)),this._pitching&&(h.pitch=l.number(x,z,Ce)),this._padding&&(h.interpolatePadding(S,R,Ce),Z=h.centerPoint.add(B)),X)h.setLocationAtPoint(X,ye);else{const Ie=h.zoomScale(h.zoom-f),Be=E>f?Math.min(2,pe):Math.max(.5,pe),Ee=Math.pow(Be,1-Ce),Qe=h.unproject(ie.add(ue.mult(Ce*Ee)).mult(Ie));h.setLocationAtPoint(h.renderWorldCopies?Qe.wrap():Qe,Z)}this._fireMoveEvents(s)},Ce=>{this._afterEase(s,Ce)},n),this}_prepareEase(n,s,h={}){this._moving=!0,this.fire(new l.Event("freezeElevation",{freeze:!0})),s||h.moving||this.fire(new l.Event("movestart",n)),this._zooming&&!h.zooming&&this.fire(new l.Event("zoomstart",n)),this._rotating&&!h.rotating&&this.fire(new l.Event("rotatestart",n)),this._pitching&&!h.pitching&&this.fire(new l.Event("pitchstart",n))}_fireMoveEvents(n){this.fire(new l.Event("move",n)),this._zooming&&this.fire(new l.Event("zoom",n)),this._rotating&&this.fire(new l.Event("rotate",n)),this._pitching&&this.fire(new l.Event("pitch",n))}_afterEase(n,s){if(this._easeId&&s&&this._easeId===s)return;delete this._easeId,this.fire(new l.Event("freezeElevation",{freeze:!1}));const h=this._zooming,f=this._rotating,y=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,h&&this.fire(new l.Event("zoomend",n)),f&&this.fire(new l.Event("rotateend",n)),y&&this.fire(new l.Event("pitchend",n)),this.fire(new l.Event("moveend",n))}flyTo(n,s){if(!n.essential&&l.exported.prefersReducedMotion){const ft=l.pick(n,["center","zoom","bearing","pitch","around"]);return this.jumpTo(ft,s)}this.stop(),n=l.extend({offset:[0,0],speed:1.2,curve:1.42,easing:l.ease},n);const h=this.transform,f=this.getZoom(),y=this.getBearing(),x=this.getPitch(),S=this.getPadding(),E="zoom"in n?l.clamp(+n.zoom,h.minZoom,h.maxZoom):f,C="bearing"in n?this._normalizeBearing(n.bearing,y):y,z="pitch"in n?+n.pitch:x,R="padding"in n?n.padding:h.padding,B=h.zoomScale(E-f),Z=l.pointGeometry.convert(n.offset);let G=h.centerPoint.add(Z);const W=h.pointLocation(G),ie=l.LngLat.convert(n.center||W);this._normalizeCenter(ie);const ue=h.project(W),pe=h.project(ie).sub(ue);let X=n.curve;const ye=Math.max(h.width,h.height),me=ye/B,Ce=pe.mag();if("minZoom"in n){const ft=l.clamp(Math.min(n.minZoom,f,E),h.minZoom,h.maxZoom),Yt=ye/h.zoomScale(ft-f);X=Math.sqrt(Yt/Ce*2)}const Ie=X*X;function Be(ft){const Yt=(me*me-ye*ye+(ft?-1:1)*Ie*Ie*Ce*Ce)/(2*(ft?me:ye)*Ie*Ce);return Math.log(Math.sqrt(Yt*Yt+1)-Yt)}function Ee(ft){return(Math.exp(ft)-Math.exp(-ft))/2}function Qe(ft){return(Math.exp(ft)+Math.exp(-ft))/2}const je=Be(0);let et=function(ft){return Qe(je)/Qe(je+X*ft)},St=function(ft){return ye*((Qe(je)*(Ee(Yt=je+X*ft)/Qe(Yt))-Ee(je))/Ie)/Ce;var Yt},Ct=(Be(1)-je)/X;if(Math.abs(Ce)<1e-6||!isFinite(Ct)){if(Math.abs(ye-me)<1e-6)return this.easeTo(n,s);const ft=me<ye?-1:1;Ct=Math.abs(Math.log(me/ye))/X,St=function(){return 0},et=function(Yt){return Math.exp(ft*X*Yt)}}return n.duration="duration"in n?+n.duration:1e3*Ct/("screenSpeed"in n?+n.screenSpeed/X:+n.speed),n.maxDuration&&n.duration>n.maxDuration&&(n.duration=0),this._zooming=!0,this._rotating=y!==C,this._pitching=z!==x,this._padding=!h.isPaddingEqual(R),this._prepareEase(s,!1),this._ease(ft=>{const Yt=ft*Ct,Jt=1/et(Yt);h.zoom=ft===1?E:f+h.scaleZoom(Jt),this._rotating&&(h.bearing=l.number(y,C,ft)),this._pitching&&(h.pitch=l.number(x,z,ft)),this._padding&&(h.interpolatePadding(S,R,ft),G=h.centerPoint.add(Z));const Ot=ft===1?ie:h.unproject(ue.add(pe.mult(St(Yt))).mult(Jt));h.setLocationAtPoint(h.renderWorldCopies?Ot.wrap():Ot,G),this._fireMoveEvents(s)},()=>this._afterEase(s),n),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(n,s){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const h=this._onEaseEnd;delete this._onEaseEnd,h.call(this,s)}if(!n){const h=this.handlers;h&&h.stop(!1)}return this}_ease(n,s,h){h.animate===!1||h.duration===0?(n(1),s()):(this._easeStart=l.exported.now(),this._easeOptions=h,this._onEaseFrame=n,this._onEaseEnd=s,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const n=Math.min((l.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(n)),n<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(n,s){n=l.wrap(n,-180,180);const h=Math.abs(n-s);return Math.abs(n-360-s)<h&&(n-=360),Math.abs(n+360-s)<h&&(n+=360),n}_normalizeCenter(n){const s=this.transform;if(!s.renderWorldCopies||s.lngRange)return;const h=n.lng-s.center.lng;n.lng+=h>180?-360:h<-180?360:0}}class ol{constructor(n={}){this.options=n,l.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(n){return this._map=n,this._compact=this.options&&this.options.compact,this._container=U.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=U.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=U.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){U.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(n,s){const h=this._map._getUIString(`AttributionControl.${s}`);n.title=h,n.setAttribute("aria-label",h)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(n){!n||n.sourceDataType!=="metadata"&&n.sourceDataType!=="visibility"&&n.dataType!=="style"&&n.type!=="terrain"||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let n=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?n=n.concat(this.options.customAttribution.map(f=>typeof f!="string"?"":f)):typeof this.options.customAttribution=="string"&&n.push(this.options.customAttribution)),this._map.style.stylesheet){const f=this._map.style.stylesheet;this.styleOwner=f.owner,this.styleId=f.id}const s=this._map.style.sourceCaches;for(const f in s){const y=s[f];if(y.used||y.usedForTerrain){const x=y.getSource();x.attribution&&n.indexOf(x.attribution)<0&&n.push(x.attribution)}}n=n.filter(f=>String(f).trim()),n.sort((f,y)=>f.length-y.length),n=n.filter((f,y)=>{for(let x=y+1;x<n.length;x++)if(n[x].indexOf(f)>=0)return!1;return!0});const h=n.join(" | ");h!==this._attribHTML&&(this._attribHTML=h,n.length?(this._innerContainer.innerHTML=h,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class Kl{constructor(n={}){this.options=n,l.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(n){this._map=n,this._compact=this.options&&this.options.compact,this._container=U.create("div","maplibregl-ctrl mapboxgl-ctrl");const s=U.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return s.target="_blank",s.rel="noopener nofollow",s.href="https://maplibre.org/",s.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),s.setAttribute("rel","noopener nofollow"),this._container.appendChild(s),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){U.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const n=this._container.children;if(n.length){const s=n[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&s.classList.add("maplibregl-compact","mapboxgl-compact"):s.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class md{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(n){const s=++this._id;return this._queue.push({callback:n,id:s,cancelled:!1}),s}remove(n){const s=this._currentlyRunning,h=s?this._queue.concat(s):this._queue;for(const f of h)if(f.id===n)return void(f.cancelled=!0)}run(n=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const s=this._currentlyRunning=this._queue;this._queue=[];for(const h of s)if(!h.cancelled&&(h.callback(n),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const gd={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"},yd={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},em={showCompass:!0,showZoom:!0,visualizePitch:!1};class Zi{constructor(n,s,h=!1){this._clickTolerance=10,this.element=s,this.mouseRotate=new fo({clickTolerance:n.dragRotate._mouseRotate._clickTolerance}),this.map=n,h&&(this.mousePitch=new nt({clickTolerance:n.dragRotate._mousePitch._clickTolerance})),l.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),U.addEventListener(s,"mousedown",this.mousedown),U.addEventListener(s,"touchstart",this.touchstart,{passive:!1}),U.addEventListener(s,"touchmove",this.touchmove),U.addEventListener(s,"touchend",this.touchend),U.addEventListener(s,"touchcancel",this.reset)}down(n,s){this.mouseRotate.mousedown(n,s),this.mousePitch&&this.mousePitch.mousedown(n,s),U.disableDrag()}move(n,s){const h=this.map,f=this.mouseRotate.mousemoveWindow(n,s);if(f&&f.bearingDelta&&h.setBearing(h.getBearing()+f.bearingDelta),this.mousePitch){const y=this.mousePitch.mousemoveWindow(n,s);y&&y.pitchDelta&&h.setPitch(h.getPitch()+y.pitchDelta)}}off(){const n=this.element;U.removeEventListener(n,"mousedown",this.mousedown),U.removeEventListener(n,"touchstart",this.touchstart,{passive:!1}),U.removeEventListener(n,"touchmove",this.touchmove),U.removeEventListener(n,"touchend",this.touchend),U.removeEventListener(n,"touchcancel",this.reset),this.offTemp()}offTemp(){U.enableDrag(),U.removeEventListener(window,"mousemove",this.mousemove),U.removeEventListener(window,"mouseup",this.mouseup)}mousedown(n){this.down(l.extend({},n,{ctrlKey:!0,preventDefault:()=>n.preventDefault()}),U.mousePos(this.element,n)),U.addEventListener(window,"mousemove",this.mousemove),U.addEventListener(window,"mouseup",this.mouseup)}mousemove(n){this.move(n,U.mousePos(this.element,n))}mouseup(n){this.mouseRotate.mouseupWindow(n),this.mousePitch&&this.mousePitch.mouseupWindow(n),this.offTemp()}touchstart(n){n.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=U.touchPos(this.element,n.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>n.preventDefault()},this._startPos))}touchmove(n){n.targetTouches.length!==1?this.reset():(this._lastPos=U.touchPos(this.element,n.targetTouches)[0],this.move({preventDefault:()=>n.preventDefault()},this._lastPos))}touchend(n){n.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function al(d,n,s){if(d=new l.LngLat(d.lng,d.lat),n){const h=new l.LngLat(d.lng-360,d.lat),f=new l.LngLat(d.lng+360,d.lat),y=s.locationPoint(d).distSqr(n);s.locationPoint(h).distSqr(n)<y?d=h:s.locationPoint(f).distSqr(n)<y&&(d=f)}for(;Math.abs(d.lng-s.center.lng)>180;){const h=s.locationPoint(d);if(h.x>=0&&h.y>=0&&h.x<=s.width&&h.y<=s.height)break;d.lng>s.center.lng?d.lng-=360:d.lng+=360}return d}const ut={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function yt(d,n,s){const h=d.classList;for(const f in ut)h.remove(`maplibregl-${s}-anchor-${f}`,`mapboxgl-${s}-anchor-${f}`);h.add(`maplibregl-${s}-anchor-${n}`,`mapboxgl-${s}-anchor-${n}`)}class es extends l.Evented{constructor(n,s){if(super(),(n instanceof HTMLElement||s)&&(n=l.extend({element:n},s)),l.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=n&&n.anchor||"center",this._color=n&&n.color||"#3FB1CE",this._scale=n&&n.scale||1,this._draggable=n&&n.draggable||!1,this._clickTolerance=n&&n.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=n&&n.rotation||0,this._rotationAlignment=n&&n.rotationAlignment||"auto",this._pitchAlignment=n&&n.pitchAlignment&&n.pitchAlignment!=="auto"?n.pitchAlignment:this._rotationAlignment,n&&n.element)this._element=n.element,this._offset=l.pointGeometry.convert(n&&n.offset||[0,0]);else{this._defaultMarker=!0,this._element=U.create("div"),this._element.setAttribute("aria-label","Map marker");const h=U.createNS("http://www.w3.org/2000/svg","svg"),f=41,y=27;h.setAttributeNS(null,"display","block"),h.setAttributeNS(null,"height",`${f}px`),h.setAttributeNS(null,"width",`${y}px`),h.setAttributeNS(null,"viewBox",`0 0 ${y} ${f}`);const x=U.createNS("http://www.w3.org/2000/svg","g");x.setAttributeNS(null,"stroke","none"),x.setAttributeNS(null,"stroke-width","1"),x.setAttributeNS(null,"fill","none"),x.setAttributeNS(null,"fill-rule","evenodd");const S=U.createNS("http://www.w3.org/2000/svg","g");S.setAttributeNS(null,"fill-rule","nonzero");const E=U.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"transform","translate(3.0, 29.0)"),E.setAttributeNS(null,"fill","#000000");const C=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const pe of C){const X=U.createNS("http://www.w3.org/2000/svg","ellipse");X.setAttributeNS(null,"opacity","0.04"),X.setAttributeNS(null,"cx","10.5"),X.setAttributeNS(null,"cy","5.80029008"),X.setAttributeNS(null,"rx",pe.rx),X.setAttributeNS(null,"ry",pe.ry),E.appendChild(X)}const z=U.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"fill",this._color);const R=U.createNS("http://www.w3.org/2000/svg","path");R.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),z.appendChild(R);const B=U.createNS("http://www.w3.org/2000/svg","g");B.setAttributeNS(null,"opacity","0.25"),B.setAttributeNS(null,"fill","#000000");const Z=U.createNS("http://www.w3.org/2000/svg","path");Z.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),B.appendChild(Z);const G=U.createNS("http://www.w3.org/2000/svg","g");G.setAttributeNS(null,"transform","translate(6.0, 7.0)"),G.setAttributeNS(null,"fill","#FFFFFF");const W=U.createNS("http://www.w3.org/2000/svg","g");W.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ie=U.createNS("http://www.w3.org/2000/svg","circle");ie.setAttributeNS(null,"fill","#000000"),ie.setAttributeNS(null,"opacity","0.25"),ie.setAttributeNS(null,"cx","5.5"),ie.setAttributeNS(null,"cy","5.5"),ie.setAttributeNS(null,"r","5.4999962");const ue=U.createNS("http://www.w3.org/2000/svg","circle");ue.setAttributeNS(null,"fill","#FFFFFF"),ue.setAttributeNS(null,"cx","5.5"),ue.setAttributeNS(null,"cy","5.5"),ue.setAttributeNS(null,"r","5.4999962"),W.appendChild(ie),W.appendChild(ue),S.appendChild(E),S.appendChild(z),S.appendChild(B),S.appendChild(G),S.appendChild(W),h.appendChild(S),h.setAttributeNS(null,"height",f*this._scale+"px"),h.setAttributeNS(null,"width",y*this._scale+"px"),this._element.appendChild(h),this._offset=l.pointGeometry.convert(n&&n.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",h=>{h.preventDefault()}),this._element.addEventListener("mousedown",h=>{h.preventDefault()}),yt(this._element,this._anchor,"marker"),this._popup=null}addTo(n){return this.remove(),this._map=n,n.getCanvasContainer().appendChild(this._element),n.on("move",this._update),n.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),U.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(n){return this._lngLat=l.LngLat.convert(n),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(n){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),n){if(!("offset"in n.options)){const f=Math.sqrt(Math.pow(13.5,2)/2);n.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[f,-1*(38.1-13.5+f)],"bottom-right":[-f,-1*(38.1-13.5+f)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=n,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(n){const s=n.code,h=n.charCode||n.keyCode;s!=="Space"&&s!=="Enter"&&h!==32&&h!==13||this.togglePopup()}_onMapClick(n){const s=n.originalEvent.target,h=this._element;this._popup&&(s===h||h.contains(s))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const n=this._popup;return n?(n.isOpen()?n.remove():n.addTo(this._map),this):this}_update(n){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=al(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let s="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?s=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(s=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let h="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?h="rotateX(0deg)":this._pitchAlignment==="map"&&(h=`rotateX(${this._map.getPitch()}deg)`),n&&n.type!=="moveend"||(this._pos=this._pos.round()),U.setTransform(this._element,`${ut[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${h} ${s}`),this._map.style&&this._map.style.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const f=this._map.unproject(this._pos),y=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=f.distanceTo(this._lngLat)>20*y?"0.2":"1.0",this._opacityTimeout=null},100))}getOffset(){return this._offset}setOffset(n){return this._offset=l.pointGeometry.convert(n),this._update(),this}_onMove(n){if(!this._isDragging){const s=this._clickTolerance||this._map._clickTolerance;this._isDragging=n.point.dist(this._pointerdownPos)>=s}this._isDragging&&(this._pos=n.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.Event("dragstart"))),this.fire(new l.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new l.Event("dragend")),this._state="inactive"}_addDragHandler(n){this._element.contains(n.originalEvent.target)&&(n.preventDefault(),this._positionDelta=n.point.sub(this._pos).add(this._offset),this._pointerdownPos=n.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(n){return this._draggable=!!n,this._map&&(n?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(n){return this._rotation=n||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(n){return this._rotationAlignment=n||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(n){return this._pitchAlignment=n&&n!=="auto"?n:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const dc={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Uo,dn=0,Vo=!1;const Hi={maxWidth:100,unit:"metric"};function _d(d,n,s){const h=s&&s.maxWidth||100,f=d._container.clientHeight/2,y=d.unproject([0,f]),x=d.unproject([h,f]),S=y.distanceTo(x);if(s&&s.unit==="imperial"){const E=3.2808*S;E>5280?jo(n,h,E/5280,d._getUIString("ScaleControl.Miles")):jo(n,h,E,d._getUIString("ScaleControl.Feet"))}else s&&s.unit==="nautical"?jo(n,h,S/1852,d._getUIString("ScaleControl.NauticalMiles")):S>=1e3?jo(n,h,S/1e3,d._getUIString("ScaleControl.Kilometers")):jo(n,h,S,d._getUIString("ScaleControl.Meters"))}function jo(d,n,s,h){const f=function(y){const x=Math.pow(10,`${Math.floor(y)}`.length-1);let S=y/x;return S=S>=10?10:S>=5?5:S>=3?3:S>=2?2:S>=1?1:function(E){const C=Math.pow(10,Math.ceil(-Math.log(E)/Math.LN10));return Math.round(E*C)/C}(S),x*S}(s);d.style.width=n*(f/s)+"px",d.innerHTML=`${f}&nbsp;${h}`}const Dr={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},jr=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function pc(d){if(d){if(typeof d=="number"){const n=Math.round(Math.sqrt(.5*Math.pow(d,2)));return{center:new l.pointGeometry(0,0),top:new l.pointGeometry(0,d),"top-left":new l.pointGeometry(n,n),"top-right":new l.pointGeometry(-n,n),bottom:new l.pointGeometry(0,-d),"bottom-left":new l.pointGeometry(n,-n),"bottom-right":new l.pointGeometry(-n,-n),left:new l.pointGeometry(d,0),right:new l.pointGeometry(-d,0)}}if(d instanceof l.pointGeometry||Array.isArray(d)){const n=l.pointGeometry.convert(d);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:l.pointGeometry.convert(d.center||[0,0]),top:l.pointGeometry.convert(d.top||[0,0]),"top-left":l.pointGeometry.convert(d["top-left"]||[0,0]),"top-right":l.pointGeometry.convert(d["top-right"]||[0,0]),bottom:l.pointGeometry.convert(d.bottom||[0,0]),"bottom-left":l.pointGeometry.convert(d["bottom-left"]||[0,0]),"bottom-right":l.pointGeometry.convert(d["bottom-right"]||[0,0]),left:l.pointGeometry.convert(d.left||[0,0]),right:l.pointGeometry.convert(d.right||[0,0])}}return pc(new l.pointGeometry(0,0))}const va={supported:D,setRTLTextPlugin:l.setRTLTextPlugin,getRTLTextPluginStatus:l.getRTLTextPluginStatus,Map:class extends _r{constructor(d){var n;if(l.PerformanceUtils.mark(l.PerformanceMarkers.create),(d=l.extend({},yd,d)).minZoom!=null&&d.maxZoom!=null&&d.minZoom>d.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(d.minPitch!=null&&d.maxPitch!=null&&d.minPitch>d.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(d.minPitch!=null&&d.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(d.maxPitch!=null&&d.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Ys(d.minZoom,d.maxZoom,d.minPitch,d.maxPitch,d.renderWorldCopies),{bearingSnap:d.bearingSnap}),this._interactive=d.interactive,this._cooperativeGestures=d.cooperativeGestures,this._maxTileCacheSize=d.maxTileCacheSize,this._failIfMajorPerformanceCaveat=d.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=d.preserveDrawingBuffer,this._antialias=d.antialias,this._trackResize=d.trackResize,this._bearingSnap=d.bearingSnap,this._refreshExpiredTiles=d.refreshExpiredTiles,this._fadeDuration=d.fadeDuration,this._crossSourceCollisions=d.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=d.collectResourceTiming,this._renderTaskQueue=new md,this._controls=[],this._mapId=l.uniqueId(),this._locale=l.extend({},gd,d.locale),this._clickTolerance=d.clickTolerance,this._pixelRatio=(n=d.pixelRatio)!==null&&n!==void 0?n:devicePixelRatio,this._requestManager=new Se(d.transformRequest),typeof d.container=="string"){if(this._container=document.getElementById(d.container),!this._container)throw new Error(`Container '${d.container}' not found.`)}else{if(!(d.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=d.container}if(d.maxBounds&&this.setMaxBounds(d.maxBounds),l.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),typeof window!="undefined"&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new fd(this,d),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=d.hash&&new nd(typeof d.hash=="string"&&d.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:d.center,zoom:d.zoom,bearing:d.bearing,pitch:d.pitch}),d.bounds&&(this.resize(),this.fitBounds(d.bounds,l.extend({},d.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=d.localIdeographFontFamily,d.style&&this.setStyle(d.style,{localIdeographFontFamily:d.localIdeographFontFamily}),d.attributionControl&&this.addControl(new ol({customAttribution:d.customAttribution})),d.maplibreLogo&&this.addControl(new Kl,d.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",s=>{this._update(s.dataType==="style"),this.fire(new l.Event(`${s.dataType}data`,s))}),this.on("dataloading",s=>{this.fire(new l.Event(`${s.dataType}dataloading`,s))}),this.on("dataabort",s=>{this.fire(new l.Event("sourcedataabort",s))})}_getMapId(){return this._mapId}addControl(d,n){if(n===void 0&&(n=d.getDefaultPosition?d.getDefaultPosition():"top-right"),!d||!d.onAdd)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const s=d.onAdd(this);this._controls.push(d);const h=this._controlPositions[n];return n.indexOf("bottom")!==-1?h.insertBefore(s,h.firstChild):h.appendChild(s),this}removeControl(d){if(!d||!d.onRemove)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(d);return n>-1&&this._controls.splice(n,1),d.onRemove(this),this}hasControl(d){return this._controls.indexOf(d)>-1}calculateCameraOptionsFromTo(d,n,s,h){return h==null&&this.style.terrain&&(h=this.transform.getElevation(s,this.style.terrain)),super.calculateCameraOptionsFromTo(d,n,s,h)}resize(d){const n=this._containerDimensions(),s=n[0],h=n[1];this._resizeCanvas(s,h,this.getPixelRatio()),this.transform.resize(s,h),this.painter.resize(s,h,this.getPixelRatio());const f=!this._moving;return f&&(this.stop(),this.fire(new l.Event("movestart",d)).fire(new l.Event("move",d))),this.fire(new l.Event("resize",d)),f&&this.fire(new l.Event("moveend",d)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(d){const[n,s]=this._containerDimensions();this._pixelRatio=d,this._resizeCanvas(n,s,d),this.painter.resize(n,s,d)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(d){return this.transform.setMaxBounds(l.LngLatBounds.convert(d)),this._update()}setMinZoom(d){if((d=d==null?-2:d)>=-2&&d<=this.transform.maxZoom)return this.transform.minZoom=d,this._update(),this.getZoom()<d&&this.setZoom(d),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(d){if((d=d==null?22:d)>=this.transform.minZoom)return this.transform.maxZoom=d,this._update(),this.getZoom()>d&&this.setZoom(d),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(d){if((d=d==null?0:d)<0)throw new Error("minPitch must be greater than or equal to 0");if(d>=0&&d<=this.transform.maxPitch)return this.transform.minPitch=d,this._update(),this.getPitch()<d&&this.setPitch(d),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(d){if((d=d==null?60:d)>85)throw new Error("maxPitch must be less than or equal to 85");if(d>=this.transform.minPitch)return this.transform.maxPitch=d,this._update(),this.getPitch()>d&&this.setPitch(d),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(d){return this.transform.renderWorldCopies=d,this._update()}project(d){return this.transform.locationPoint(l.LngLat.convert(d),this.style&&this.style.terrain)}unproject(d){return this.transform.pointLocation(l.pointGeometry.convert(d),this.style&&this.style.terrain)}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(d,n,s){if(d==="mouseenter"||d==="mouseover"){let h=!1;return{layer:n,listener:s,delegates:{mousemove:y=>{const x=this.getLayer(n)?this.queryRenderedFeatures(y.point,{layers:[n]}):[];x.length?h||(h=!0,s.call(this,new ri(d,this,y.originalEvent,{features:x}))):h=!1},mouseout:()=>{h=!1}}}}if(d==="mouseleave"||d==="mouseout"){let h=!1;return{layer:n,listener:s,delegates:{mousemove:x=>{(this.getLayer(n)?this.queryRenderedFeatures(x.point,{layers:[n]}):[]).length?h=!0:h&&(h=!1,s.call(this,new ri(d,this,x.originalEvent)))},mouseout:x=>{h&&(h=!1,s.call(this,new ri(d,this,x.originalEvent)))}}}}{const h=f=>{const y=this.getLayer(n)?this.queryRenderedFeatures(f.point,{layers:[n]}):[];y.length&&(f.features=y,s.call(this,f),delete f.features)};return{layer:n,listener:s,delegates:{[d]:h}}}}on(d,n,s){if(s===void 0)return super.on(d,n);const h=this._createDelegatedListener(d,n,s);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[d]=this._delegatedListeners[d]||[],this._delegatedListeners[d].push(h);for(const f in h.delegates)this.on(f,h.delegates[f]);return this}once(d,n,s){if(s===void 0)return super.once(d,n);const h=this._createDelegatedListener(d,n,s);for(const f in h.delegates)this.once(f,h.delegates[f]);return this}off(d,n,s){return s===void 0?super.off(d,n):(this._delegatedListeners&&this._delegatedListeners[d]&&(h=>{const f=this._delegatedListeners[d];for(let y=0;y<f.length;y++){const x=f[y];if(x.layer===n&&x.listener===s){for(const S in x.delegates)this.off(S,x.delegates[S]);return f.splice(y,1),this}}})(),this)}queryRenderedFeatures(d,n){if(!this.style)return[];let s;if(n!==void 0||d===void 0||d instanceof l.pointGeometry||Array.isArray(d)||(n=d,d=void 0),n=n||{},(d=d||[[0,0],[this.transform.width,this.transform.height]])instanceof l.pointGeometry||typeof d[0]=="number")s=[l.pointGeometry.convert(d)];else{const h=l.pointGeometry.convert(d[0]),f=l.pointGeometry.convert(d[1]);s=[h,new l.pointGeometry(f.x,h.y),f,new l.pointGeometry(h.x,f.y),h]}return this.style.queryRenderedFeatures(s,n,this.transform)}querySourceFeatures(d,n){return this.style.querySourceFeatures(d,n)}setStyle(d,n){return(n=l.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},n)).diff!==!1&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&d?(this._diffStyle(d,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(d,n))}setTransformRequest(d){return this._requestManager.setTransformRequest(d),this}_getUIString(d){const n=this._locale[d];if(n==null)throw new Error(`Missing UI string '${d}'`);return n}_updateStyle(d,n){return this.style&&(this.style.setEventedParent(null),this.style._remove()),d?(this.style=new rn(this,n||{}),this.style.setEventedParent(this,{style:this.style}),typeof d=="string"?this.style.loadURL(d):this.style.loadJSON(d),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new rn(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(d,n){if(typeof d=="string"){const s=this._requestManager.transformRequest(d,l.ResourceType.Style);l.getJSON(s,(h,f)=>{h?this.fire(new l.ErrorEvent(h)):f&&this._updateDiff(f,n)})}else typeof d=="object"&&this._updateDiff(d,n)}_updateDiff(d,n){try{this.style.setState(d)&&this._update(!0)}catch(s){l.warnOnce(`Unable to perform style diff: ${s.message||s.error||s}.  Rebuilding the style from scratch.`),this._updateStyle(d,n)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():l.warnOnce("There is no style added to the map.")}addSource(d,n){return this._lazyInitEmptyStyle(),this.style.addSource(d,n),this._update(!0)}isSourceLoaded(d){const n=this.style&&this.style.sourceCaches[d];if(n!==void 0)return n.loaded();this.fire(new l.ErrorEvent(new Error(`There is no source with ID '${d}'`)))}setTerrain(d){return this.style.setTerrain(d),this}getTerrain(){return this.style.terrain&&this.style.terrain.options}areTilesLoaded(){const d=this.style&&this.style.sourceCaches;for(const n in d){const s=d[n]._tiles;for(const h in s){const f=s[h];if(f.state!=="loaded"&&f.state!=="errored")return!1}}return!0}addSourceType(d,n,s){return this._lazyInitEmptyStyle(),this.style.addSourceType(d,n,s)}removeSource(d){return this.style.removeSource(d),this._update(!0)}getSource(d){return this.style.getSource(d)}addImage(d,n,{pixelRatio:s=1,sdf:h=!1,stretchX:f,stretchY:y,content:x}={}){if(this._lazyInitEmptyStyle(),n instanceof HTMLImageElement||l.isImageBitmap(n)){const{width:S,height:E,data:C}=l.exported.getImageData(n);this.style.addImage(d,{data:new l.RGBAImage({width:S,height:E},C),pixelRatio:s,stretchX:f,stretchY:y,content:x,sdf:h,version:0})}else{if(n.width===void 0||n.height===void 0)return this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:S,height:E,data:C}=n,z=n;this.style.addImage(d,{data:new l.RGBAImage({width:S,height:E},new Uint8Array(C)),pixelRatio:s,stretchX:f,stretchY:y,content:x,sdf:h,version:0,userImage:z}),z.onAdd&&z.onAdd(this,d)}}}updateImage(d,n){const s=this.style.getImage(d);if(!s)return this.fire(new l.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const h=n instanceof HTMLImageElement||l.isImageBitmap(n)?l.exported.getImageData(n):n,{width:f,height:y,data:x}=h;if(f===void 0||y===void 0)return this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(f!==s.data.width||y!==s.data.height)return this.fire(new l.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const S=!(n instanceof HTMLImageElement||l.isImageBitmap(n));s.data.replace(x,S),this.style.updateImage(d,s)}hasImage(d){return d?!!this.style.getImage(d):(this.fire(new l.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(d){this.style.removeImage(d)}loadImage(d,n){l.getImage(this._requestManager.transformRequest(d,l.ResourceType.Image),n)}listImages(){return this.style.listImages()}addLayer(d,n){return this._lazyInitEmptyStyle(),this.style.addLayer(d,n),this._update(!0)}moveLayer(d,n){return this.style.moveLayer(d,n),this._update(!0)}removeLayer(d){return this.style.removeLayer(d),this._update(!0)}getLayer(d){return this.style.getLayer(d)}setLayerZoomRange(d,n,s){return this.style.setLayerZoomRange(d,n,s),this._update(!0)}setFilter(d,n,s={}){return this.style.setFilter(d,n,s),this._update(!0)}getFilter(d){return this.style.getFilter(d)}setPaintProperty(d,n,s,h={}){return this.style.setPaintProperty(d,n,s,h),this._update(!0)}getPaintProperty(d,n){return this.style.getPaintProperty(d,n)}setLayoutProperty(d,n,s,h={}){return this.style.setLayoutProperty(d,n,s,h),this._update(!0)}getLayoutProperty(d,n){return this.style.getLayoutProperty(d,n)}setLight(d,n={}){return this._lazyInitEmptyStyle(),this.style.setLight(d,n),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(d,n){return this.style.setFeatureState(d,n),this._update()}removeFeatureState(d,n){return this.style.removeFeatureState(d,n),this._update()}getFeatureState(d){return this.style.getFeatureState(d)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let d=0,n=0;return this._container&&(d=this._container.clientWidth||400,n=this._container.clientHeight||300),[d,n]}_setupContainer(){const d=this._container;d.classList.add("maplibregl-map","mapboxgl-map");const n=this._canvasContainer=U.create("div","maplibregl-canvas-container mapboxgl-canvas-container",d);this._interactive&&n.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=U.create("canvas","maplibregl-canvas mapboxgl-canvas",n),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const s=this._containerDimensions();this._resizeCanvas(s[0],s[1],this.getPixelRatio());const h=this._controlContainer=U.create("div","maplibregl-control-container mapboxgl-control-container",d),f=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(y=>{f[y]=U.create("div",`maplibregl-ctrl-${y} mapboxgl-ctrl-${y}`,h)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){const d=this._container;this._metaPress=!1,this._cooperativeGesturesScreen=U.create("div","maplibregl-cooperative-gesture-screen",d);let n="Control",s=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(s=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use \u2318 + scroll to zoom the map",n="Meta"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${s}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,document.addEventListener("keydown",h=>{h.key===n&&(this._metaPress=!0)}),document.addEventListener("keyup",h=>{h.key===n&&(this._metaPress=!1)}),this._canvasContainer.addEventListener("wheel",h=>{this._onCooperativeGesture(h,this._metaPress,1)},!1),this._canvasContainer.classList.remove("mapboxgl-touch-drag-pan","maplibregl-touch-drag-pan")}_resizeCanvas(d,n,s){this._canvas.width=s*d,this._canvas.height=s*n,this._canvas.style.width=`${d}px`,this._canvas.style.height=`${n}px`}_setupPainter(){const d=l.extend({},D.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),n=this._canvas.getContext("webgl",d)||this._canvas.getContext("experimental-webgl",d);n?(this.painter=new rc(n,this.transform),l.exported$1.testSupport(n)):this.fire(new l.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(d){d.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new l.Event("webglcontextlost",{originalEvent:d}))}_contextRestored(d){this._setupPainter(),this.resize(),this._update(),this.fire(new l.Event("webglcontextrestored",{originalEvent:d}))}_onMapScroll(d){if(d.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}_onCooperativeGesture(d,n,s){return!n&&s<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(d){return this.style?(this._styleDirty=this._styleDirty||d,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(d){return this._update(),this._renderTaskQueue.add(d)}_cancelRenderFrame(d){this._renderTaskQueue.remove(d)}_render(d){let n,s=0;const h=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(n=h.createQueryEXT(),h.beginQueryEXT(h.TIME_ELAPSED_EXT,n),s=l.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(d),this._removed)return;let f=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const x=this.transform.zoom,S=l.exported.now();this.style.zoomHistory.update(x,S);const E=new l.EvaluationParameters(x,{now:S,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),C=E.crossFadingFactor();C===1&&C===this._crossFadingFactor||(f=!0,this._crossFadingFactor=C),this.style.update(E)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.style.terrain&&this.style.terrain.sourceCache.update(this.transform,this.style.terrain),this.transform.updateElevation(this.style.terrain),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new l.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,l.PerformanceUtils.mark(l.PerformanceMarkers.load),this.fire(new l.Event("load"))),this.style&&(this.style.hasTransitions()||f)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const x=l.exported.now()-s;h.endQueryEXT(h.TIME_ELAPSED_EXT,n),setTimeout(()=>{const S=h.getQueryObjectEXT(n,h.QUERY_RESULT_EXT)/1e6;h.deleteQueryEXT(n),this.fire(new l.Event("gpu-timing-frame",{cpuTime:x,gpuTime:S}))},50)}if(this.listens("gpu-timing-layer")){const x=this.painter.collectGpuTimers();setTimeout(()=>{const S=this.painter.queryGpuTimers(x);this.fire(new l.Event("gpu-timing-layer",{layerTimes:S}))},50)}const y=this._sourcesDirty||this._styleDirty||this._placementDirty;return y||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new l.Event("idle")),!this._loaded||this._fullyLoaded||y||(this._fullyLoaded=!0,l.PerformanceUtils.mark(l.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const n of this._controls)n.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window!="undefined"&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const d=this.painter.context.gl.getExtension("WEBGL_lose_context");d&&d.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),U.remove(this._canvasContainer),U.remove(this._controlContainer),this._cooperativeGestures&&U.remove(this._cooperativeGesturesScreen),this._container.classList.remove("maplibregl-map","mapboxgl-map"),l.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new l.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=l.exported.frame(d=>{l.PerformanceUtils.frame(d),this._frame=null,this._render(d)}))}_onWindowOnline(){this._update()}_onWindowResize(d){this._trackResize&&this.resize({originalEvent:d})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(d){this._showTileBoundaries!==d&&(this._showTileBoundaries=d,this._update())}get showPadding(){return!!this._showPadding}set showPadding(d){this._showPadding!==d&&(this._showPadding=d,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(d){this._showCollisionBoxes!==d&&(this._showCollisionBoxes=d,d?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(d){this._showOverdrawInspector!==d&&(this._showOverdrawInspector=d,this._update())}get repaint(){return!!this._repaint}set repaint(d){this._repaint!==d&&(this._repaint=d,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(d){this._vertices=d,this._update()}_setCacheLimits(d,n){l.setCacheLimits(d,n)}get version(){return"2.4.0"}},NavigationControl:class{constructor(d){this.options=l.extend({},em,d),this._container=U.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",n=>n.preventDefault()),this.options.showZoom&&(l.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",n=>this._map.zoomIn({},{originalEvent:n})),U.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",n=>this._map.zoomOut({},{originalEvent:n})),U.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(l.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",n=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:n}):this._map.resetNorth({},{originalEvent:n})}),this._compassIcon=U.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const d=this._map.getZoom(),n=d===this._map.getMaxZoom(),s=d===this._map.getMinZoom();this._zoomInButton.disabled=n,this._zoomOutButton.disabled=s,this._zoomInButton.setAttribute("aria-disabled",n.toString()),this._zoomOutButton.setAttribute("aria-disabled",s.toString())}_rotateCompassArrow(){const d=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=d}onAdd(d){return this._map=d,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Zi(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){U.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(d,n){const s=U.create("button",d,this._container);return s.type="button",s.addEventListener("click",n),s}_setButtonTitle(d,n){const s=this._map._getUIString(`NavigationControl.${n}`);d.title=s,d.setAttribute("aria-label",s)}},GeolocateControl:class extends l.Evented{constructor(d){super(),this.options=l.extend({},dc,d),l.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(d){var n;return this._map=d,this._container=U.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),n=this._setupUI,Uo!==void 0?n(Uo):window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(s=>{Uo=s.state!=="denied",n(Uo)}):(Uo=!!window.navigator.geolocation,n(Uo)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),U.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,dn=0,Vo=!1}_isOutOfMapMaxBounds(d){const n=this._map.getMaxBounds(),s=d.coords;return n&&(s.longitude<n.getWest()||s.longitude>n.getEast()||s.latitude<n.getSouth()||s.latitude>n.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_onSuccess(d){if(this._map){if(this._isOutOfMapMaxBounds(d))return this._setErrorState(),this.fire(new l.Event("outofmaxbounds",d)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=d,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(d),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(d),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new l.Event("geolocate",d)),this._finish()}}_updateCamera(d){const n=new l.LngLat(d.coords.longitude,d.coords.latitude),s=d.coords.accuracy,h=this._map.getBearing(),f=l.extend({bearing:h},this.options.fitBoundsOptions);this._map.fitBounds(n.toBounds(s),f,{geolocateSource:!0})}_updateMarker(d){if(d){const n=new l.LngLat(d.coords.longitude,d.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=d.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const d=this._map._container.clientHeight/2,n=this._map.unproject([0,d]),s=this._map.unproject([1,d]),h=n.distanceTo(s),f=Math.ceil(2*this._accuracy/h);this._circleElement.style.width=`${f}px`,this._circleElement.style.height=`${f}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(d){if(this._map){if(this.options.trackUserLocation)if(d.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(d.code===3&&Vo)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new l.Event("error",d)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(d){if(this._container.addEventListener("contextmenu",n=>n.preventDefault()),this._geolocateButton=U.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),U.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",d===!1){l.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n)}else{const n=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=U.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new es(this._dotElement),this._circleElement=U.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new es({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",n=>{n.geolocateSource||this._watchState!=="ACTIVE_LOCK"||n.originalEvent&&n.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new l.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return l.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":dn--,Vo=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new l.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let d;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),dn++,dn>1?(d={maximumAge:6e5,timeout:0},Vo=!0):(d=this.options.positionOptions,Vo=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,d)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:ol,LogoControl:Kl,ScaleControl:class{constructor(d){this.options=l.extend({},Hi,d),l.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){_d(this._map,this._container,this.options)}onAdd(d){return this._map=d,this._container=U.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",d.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){U.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(d){this.options.unit=d,_d(this._map,this._container,this.options)}},FullscreenControl:class{constructor(d){this._fullscreen=!1,d&&d.container&&(d.container instanceof HTMLElement?this._container=d.container:l.warnOnce("Full screen control 'container' must be a DOM element.")),l.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(d){return this._map=d,this._container||(this._container=this._map.getContainer()),this._controlContainer=U.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",l.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){U.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const d=this._fullscreenButton=U.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);U.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",d).setAttribute("aria-hidden","true"),d.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const d=this._getTitle();this._fullscreenButton.setAttribute("aria-label",d),this._fullscreenButton.title=d}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},TerrainControl:class{constructor(d){this.options=d,l.bindAll(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(d){return this._map=d,this._container=U.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._terrainButton=U.create("button","maplibregl-ctrl-terrain mapboxgl-ctrl-terrain",this._container),U.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){U.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._map.style.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}},Popup:class extends l.Evented{constructor(d){super(),this.options=l.extend(Object.create(Dr),d),l.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(d){return this._map&&this.remove(),this._map=d,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new l.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&U.remove(this._content),this._container&&(U.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new l.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(d){return this._lngLat=l.LngLat.convert(d),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(d){return this.setDOMContent(document.createTextNode(d))}setHTML(d){const n=document.createDocumentFragment(),s=document.createElement("body");let h;for(s.innerHTML=d;h=s.firstChild,h;)n.appendChild(h);return this.setDOMContent(n)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(d){return this.options.maxWidth=d,this._update(),this}setDOMContent(d){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=U.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(d),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(d){this._container&&this._container.classList.add(d)}removeClassName(d){this._container&&this._container.classList.remove(d)}setOffset(d){return this.options.offset=d,this._update(),this}toggleClassName(d){if(this._container)return this._container.classList.toggle(d)}_createCloseButton(){this.options.closeButton&&(this._closeButton=U.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(d){this._update(d.point)}_onMouseMove(d){this._update(d.point)}_onDrag(d){this._update(d.point)}_update(d){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=U.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=U.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(y=>this._container.classList.add(y)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=al(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!d))return;const n=this._pos=this._trackPointer&&d?d:this._map.project(this._lngLat);let s=this.options.anchor;const h=pc(this.options.offset);if(!s){const y=this._container.offsetWidth,x=this._container.offsetHeight;let S;S=n.y+h.bottom.y<x?["top"]:n.y>this._map.transform.height-x?["bottom"]:[],n.x<y/2?S.push("left"):n.x>this._map.transform.width-y/2&&S.push("right"),s=S.length===0?"bottom":S.join("-")}const f=n.add(h[s]).round();U.setTransform(this._container,`${ut[s]} translate(${f.x}px,${f.y}px)`),yt(this._container,s,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const d=this._container.querySelector(jr);d&&d.focus()}_onClose(){this.remove()}},Marker:es,Style:rn,LngLat:l.LngLat,LngLatBounds:l.LngLatBounds,Point:l.pointGeometry,MercatorCoordinate:l.MercatorCoordinate,Evented:l.Evented,AJAXError:l.AJAXError,config:l.config,CanvasSource:Ze,GeoJSONSource:En,ImageSource:cn,RasterDEMTileSource:dt,RasterTileSource:Fr,VectorTileSource:Vt,VideoSource:Cn,prewarm:function(){Co().acquire(hi)},clearPrewarmedResources:function(){const d=Wi;d&&(d.isPreloaded()&&d.numActive()===1?(d.release(hi),Wi=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return"2.4.0"},get workerCount(){return In.workerCount},set workerCount(d){In.workerCount=d},get maxParallelImageRequests(){return l.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(d){l.config.MAX_PARALLEL_IMAGE_REQUESTS=d},clearStorage(d){l.clearTileCache(d)},workerUrl:"",addProtocol(d,n){l.config.REGISTERED_PROTOCOLS[d]=n},removeProtocol(d){delete l.config.REGISTERED_PROTOCOLS[d]}};return gi.extend(va,{isSafari:l.isSafari,getPerformanceMetrics:l.PerformanceUtils.getPerformanceMetrics}),va});var T=m;return T})})(k2);var JD=k2.exports;export{z4 as B,wD as C,HD as F,mD as H,ZD as R,W0 as S,_D as T,NC as a,JD as b,p2 as c,XD as d,kT as e,$C as j,KD as m,Fe as r,YD as u};
